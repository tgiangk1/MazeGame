// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var t,s,i,e,n,r,h,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,x,v,I,C,G,_,D,E,N,A,L,O,R,P,k,F,j,z,B,U,W,Q,J,Y,V,H,q,X,Z,K,$,tt,st,it,et,nt,rt,ht,ot,at,ut,lt,ct,ft,dt,pt,mt,gt,yt,Mt,wt,St,Tt,bt,xt,vt,It,Ct=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):t)((function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}));{let _t=function(t){i=t},Dt=function(t){return t*r},Et=function(t,i){return Math.abs(t-i)<=s*Math.max(1,Math.abs(t),Math.abs(i))},Nt=function(){var t=new i(4);return i!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},At=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ot=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Rt=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},Pt=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},kt=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},Ft=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},jt=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},zt=function(t){return t[0]*t[3]-t[2]*t[1]},Bt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],u=i[2],l=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*u+r*l,t[3]=n*u+h*l,t},Ut=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},Wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},Qt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},Jt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Yt=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Vt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},Ht=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},qt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Xt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Zt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Kt=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],u=i[2],l=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-l)<=s*Math.max(1,Math.abs(h),Math.abs(l))},$t=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ts=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ss=function(){var t=new i(6);return i!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},is=function(t){var s=new i(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ns=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},rs=function(t,s,e,n,r,h){var o=new i(6);return o[0]=t,o[1]=s,o[2]=e,o[3]=n,o[4]=r,o[5]=h,o},hs=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},os=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},as=function(t){return t[0]*t[3]-t[1]*t[2]},us=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=i[0],l=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},ls=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=Math.sin(i),l=Math.cos(i);return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*-u+r*l,t[3]=n*-u+h*l,t[4]=o,t[5]=a,t},cs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=i[0],l=i[1];return t[0]=e*u,t[1]=n*u,t[2]=r*l,t[3]=h*l,t[4]=o,t[5]=a,t},fs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=i[0],l=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*u+r*l+o,t[5]=n*u+h*l+a,t},ds=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},ps=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},ms=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},gs=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},ys=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},Ms=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},ws=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Ss=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Ts=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},xs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=i[0],l=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return Math.abs(e-u)<=s*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-l)<=s*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=s*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},vs=function(){var t=new i(9);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Is=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Cs=function(t){var s=new i(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Gs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},_s=function(t,s,e,n,r,h,o,a,u){var l=new i(9);return l[0]=t,l[1]=s,l[2]=e,l[3]=n,l[4]=r,l[5]=h,l[6]=o,l[7]=a,l[8]=u,l},Ds=function(t,s,i,e,n,r,h,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=u,t},Es=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ns=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},As=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=l*h-o*u,f=-l*r+o*a,d=u*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-l*e+n*u)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(l*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-u*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},Ls=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8];return t[0]=h*l-o*u,t[1]=n*u-e*l,t[2]=e*o-n*h,t[3]=o*a-r*l,t[4]=i*l-n*a,t[5]=n*r-i*o,t[6]=r*u-h*a,t[7]=e*a-i*u,t[8]=i*h-e*r,t},Os=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],u=t[8];return s*(u*r-h*a)+i*(-u*n+h*o)+e*(a*n-r*o)},Rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],M=i[6],w=i[7],S=i[8];return t[0]=f*e+d*h+p*u,t[1]=f*n+d*o+p*l,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*u,t[4]=m*n+g*o+y*l,t[5]=m*r+g*a+y*c,t[6]=M*e+w*h+S*u,t[7]=M*n+w*o+S*l,t[8]=M*r+w*a+S*c,t},Ps=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+u,t[7]=f*n+d*o+l,t[8]=f*r+d*a+c,t},ks=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=u,t[7]=l,t[8]=c,t},Fs=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},js=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},zs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Bs=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Us=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Ws=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,u=i*h,l=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=l-y,t[6]=f+g,t[1]=l+y,t[4]=1-u-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-u-c,t},Qs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],M=i*o-e*h,w=i*a-n*h,S=i*u-r*h,T=e*a-n*o,b=e*u-r*o,x=n*u-r*a,v=l*m-c*p,I=l*g-f*p,C=l*y-d*p,G=c*g-f*m,_=c*y-d*m,D=f*y-d*g,E=M*D-w*_+S*G+T*C-b*I+x*v;return E?(E=1/E,t[0]=(o*D-a*_+u*G)*E,t[1]=(a*C-h*D-u*I)*E,t[2]=(h*_-o*C+u*v)*E,t[3]=(n*_-e*D-r*G)*E,t[4]=(i*D-n*C+r*I)*E,t[5]=(e*C-i*_-r*v)*E,t[6]=(m*x-g*b+y*T)*E,t[7]=(g*S-p*x-y*w)*E,t[8]=(p*b-m*S+y*M)*E,t):null},Js=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ys=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Vs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Hs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},qs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ks=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},$s=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=t[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],M=i[6],w=i[7],S=i[8];return Math.abs(e-f)<=s*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=s*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=s*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=s*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-M)<=s*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-w)<=s*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-S)<=s*Math.max(1,Math.abs(c),Math.abs(S))},ti=function(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},si=function(t){var s=new i(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},ii=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ei=function(t,s,e,n,r,h,o,a,u,l,c,f,d,p,m,g){var y=new i(16);return y[0]=t,y[1]=s,y[2]=e,y[3]=n,y[4]=r,y[5]=h,y[6]=o,y[7]=a,y[8]=u,y[9]=l,y[10]=c,y[11]=f,y[12]=d,y[13]=p,y[14]=m,y[15]=g,y},ni=function(t,s,i,e,n,r,h,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},ri=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},hi=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},oi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],M=i*o-e*h,w=i*a-n*h,S=i*u-r*h,T=e*a-n*o,b=e*u-r*o,x=n*u-r*a,v=l*m-c*p,I=l*g-f*p,C=l*y-d*p,G=c*g-f*m,_=c*y-d*m,D=f*y-d*g,E=M*D-w*_+S*G+T*C-b*I+x*v;return E?(E=1/E,t[0]=(o*D-a*_+u*G)*E,t[1]=(n*_-e*D-r*G)*E,t[2]=(m*x-g*b+y*T)*E,t[3]=(f*b-c*x-d*T)*E,t[4]=(a*C-h*D-u*I)*E,t[5]=(i*D-n*C+r*I)*E,t[6]=(g*S-p*x-y*w)*E,t[7]=(l*x-f*S+d*w)*E,t[8]=(h*_-o*C+u*v)*E,t[9]=(e*C-i*_-r*v)*E,t[10]=(p*b-m*S+y*M)*E,t[11]=(c*S-l*b-d*M)*E,t[12]=(o*I-h*G-a*v)*E,t[13]=(i*G-e*I+n*v)*E,t[14]=(m*w-p*T-g*M)*E,t[15]=(l*T-c*w+f*M)*E,t):null},ai=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],M=i*o-e*h,w=i*a-n*h,S=i*u-r*h,T=e*a-n*o,b=e*u-r*o,x=n*u-r*a,v=l*m-c*p,I=l*g-f*p,C=l*y-d*p,G=c*g-f*m,_=c*y-d*m,D=f*y-d*g;return t[0]=o*D-a*_+u*G,t[1]=n*_-e*D-r*G,t[2]=m*x-g*b+y*T,t[3]=f*b-c*x-d*T,t[4]=a*C-h*D-u*I,t[5]=i*D-n*C+r*I,t[6]=g*S-p*x-y*w,t[7]=l*x-f*S+d*w,t[8]=h*_-o*C+u*v,t[9]=e*C-i*_-r*v,t[10]=p*b-m*S+y*M,t[11]=c*S-l*b-d*M,t[12]=o*I-h*G-a*v,t[13]=i*G-e*I+n*v,t[14]=m*w-p*T-g*M,t[15]=l*T-c*w+f*M,t},ui=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],u=t[8],l=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,M=i*o-e*h,w=u*p-l*d,S=u*m-c*d,T=l*m-c*p;return a*(s*T-i*S+e*w)-n*(r*T-h*S+o*w)+t[15]*(u*M-l*y+c*g)-f*(d*M-p*y+m*g)},li=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],M=s[15],w=i[0],S=i[1],T=i[2],b=i[3];return t[0]=w*e+S*o+T*c+b*m,t[1]=w*n+S*a+T*f+b*g,t[2]=w*r+S*u+T*d+b*y,t[3]=w*h+S*l+T*p+b*M,w=i[4],S=i[5],T=i[6],b=i[7],t[4]=w*e+S*o+T*c+b*m,t[5]=w*n+S*a+T*f+b*g,t[6]=w*r+S*u+T*d+b*y,t[7]=w*h+S*l+T*p+b*M,w=i[8],S=i[9],T=i[10],b=i[11],t[8]=w*e+S*o+T*c+b*m,t[9]=w*n+S*a+T*f+b*g,t[10]=w*r+S*u+T*d+b*y,t[11]=w*h+S*l+T*p+b*M,w=i[12],S=i[13],T=i[14],b=i[15],t[12]=w*e+S*o+T*c+b*m,t[13]=w*n+S*a+T*f+b*g,t[14]=w*r+S*u+T*d+b*y,t[15]=w*h+S*l+T*p+b*M,t},ci=function(t,s,i){var e,n,r,h,o,a,u,l,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+u*g+d*y+s[14],t[15]=h*m+l*g+p*y+s[15]),t},fi=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},di=function(t,i,e,n){var r,h,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,x,v,I,C,G,_,D=n[0],E=n[1],N=n[2],A=Math.hypot(D,E,N);return A<s?null:(D*=A=1/A,E*=A,N*=A,r=Math.sin(e),o=1-(h=Math.cos(e)),a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],d=i[5],p=i[6],m=i[7],g=i[8],y=i[9],M=i[10],w=i[11],S=D*D*o+h,T=E*D*o+N*r,b=N*D*o-E*r,x=D*E*o-N*r,v=E*E*o+h,I=N*E*o+D*r,C=D*N*o+E*r,G=E*N*o-D*r,_=N*N*o+h,t[0]=a*S+f*T+g*b,t[1]=u*S+d*T+y*b,t[2]=l*S+p*T+M*b,t[3]=c*S+m*T+w*b,t[4]=a*x+f*v+g*I,t[5]=u*x+d*v+y*I,t[6]=l*x+p*v+M*I,t[7]=c*x+m*v+w*I,t[8]=a*C+f*G+g*_,t[9]=u*C+d*G+y*_,t[10]=l*C+p*G+M*_,t[11]=c*C+m*G+w*_,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},pi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],u=s[8],l=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+u*e,t[5]=h*n+l*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=u*n-r*e,t[9]=l*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},mi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],u=s[8],l=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-u*e,t[1]=h*n-l*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+u*n,t[9]=h*e+l*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},gi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],u=s[4],l=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+u*e,t[1]=h*n+l*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=u*n-r*e,t[5]=l*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},yi=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},Mi=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},wi=function(t,i,e){var n,r,h,o=e[0],a=e[1],u=e[2],l=Math.hypot(o,a,u);return l<s?null:(o*=l=1/l,a*=l,u*=l,n=Math.sin(i),h=1-(r=Math.cos(i)),t[0]=o*o*h+r,t[1]=a*o*h+u*n,t[2]=u*o*h-a*n,t[3]=0,t[4]=o*a*h-u*n,t[5]=a*a*h+r,t[6]=u*a*h+o*n,t[7]=0,t[8]=o*u*h+a*n,t[9]=a*u*h-o*n,t[10]=u*u*h+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Si=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ti=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,u=r+r,l=e*o,c=e*a,f=e*u,d=n*a,p=n*u,m=r*u,g=h*o,y=h*a,M=h*u;return t[0]=1-(d+m),t[1]=c+M,t[2]=f-y,t[3]=0,t[4]=c-M,t[5]=1-(l+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(l+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},vi=function(t,s){var e=new i(3),n=-s[0],r=-s[1],h=-s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7],f=n*n+r*r+h*h+o*o;return f>0?(e[0]=2*(a*o+c*n+u*h-l*r)/f,e[1]=2*(u*o+c*r+l*n-a*h)/f,e[2]=2*(l*o+c*h+a*r-u*n)/f):(e[0]=2*(a*o+c*n+u*h-l*r),e[1]=2*(u*o+c*r+l*n-a*h),e[2]=2*(l*o+c*h+a*r-u*n)),xi(t,s,e),t},Ii=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},Ci=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],u=s[9],l=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,u,l),t},Gi=function(t,s){var e=new i(3);Ci(e,s);var n=1/e[0],r=1/e[1],h=1/e[2],o=s[0]*n,a=s[1]*r,u=s[2]*h,l=s[4]*n,c=s[5]*r,f=s[6]*h,d=s[8]*n,p=s[9]*r,m=s[10]*h,g=o+c+m,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-u)/y,t[2]=(a-l)/y):o>c&&o>m?(y=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/y,t[0]=.25*y,t[1]=(a+l)/y,t[2]=(d+u)/y):c>m?(y=2*Math.sqrt(1+c-o-m),t[3]=(d-u)/y,t[0]=(a+l)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=2*Math.sqrt(1+m-o-c),t[3]=(a-l)/y,t[0]=(d+u)/y,t[1]=(f+p)/y,t[2]=.25*y),t},_i=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],u=e[6],l=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,u),i[2]=Math.hypot(l,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,M=h*m,w=o*d,S=a*p,T=u*m,b=l*d,x=c*p,v=f*m,I=g+S+v,C=0;return I>0?(C=2*Math.sqrt(I+1),t[3]=.25*C,t[0]=(T-x)/C,t[1]=(b-M)/C,t[2]=(y-w)/C):g>S&&g>v?(C=2*Math.sqrt(1+g-S-v),t[3]=(T-x)/C,t[0]=.25*C,t[1]=(y+w)/C,t[2]=(b+M)/C):S>v?(C=2*Math.sqrt(1+S-g-v),t[3]=(b-M)/C,t[0]=(y+w)/C,t[1]=.25*C,t[2]=(T+x)/C):(C=2*Math.sqrt(1+v-g-S),t[3]=(y-w)/C,t[0]=(b+M)/C,t[1]=(T+x)/C,t[2]=.25*C),t},Di=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,u=r+r,l=h+h,c=n*a,f=n*u,d=n*l,p=r*u,m=r*l,g=h*l,y=o*a,M=o*u,w=o*l,S=e[0],T=e[1],b=e[2];return t[0]=(1-(p+g))*S,t[1]=(f+w)*S,t[2]=(d-M)*S,t[3]=0,t[4]=(f-w)*T,t[5]=(1-(c+g))*T,t[6]=(m+y)*T,t[7]=0,t[8]=(d+M)*b,t[9]=(m-y)*b,t[10]=(1-(c+p))*b,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ei=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],u=r+r,l=h+h,c=o+o,f=r*u,d=r*l,p=r*c,m=h*l,g=h*c,y=o*c,M=a*u,w=a*l,S=a*c,T=e[0],b=e[1],x=e[2],v=n[0],I=n[1],C=n[2],G=(1-(m+y))*T,_=(d+S)*T,D=(p-w)*T,E=(d-S)*b,N=(1-(f+y))*b,A=(g+M)*b,L=(p+w)*x,O=(g-M)*x,R=(1-(f+m))*x;return t[0]=G,t[1]=_,t[2]=D,t[3]=0,t[4]=E,t[5]=N,t[6]=A,t[7]=0,t[8]=L,t[9]=O,t[10]=R,t[11]=0,t[12]=i[0]+v-(G*v+E*I+L*C),t[13]=i[1]+I-(_*v+N*I+O*C),t[14]=i[2]+C-(D*v+A*I+R*C),t[15]=1,t},Ni=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,u=i*h,l=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=l+y,t[2]=f-g,t[3]=0,t[4]=l-y,t[5]=1-u-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ai=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),u=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*u,t[15]=0,t},Li=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},Oi=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},Ri=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),u=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*u*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},Pi=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),u=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*u,t[15]=1,t},ki=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),u=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*u,t[15]=1,t},Fi=function(t,i,e,n){var r,h,o,a,u,l,c,f,d,p,m=i[0],g=i[1],y=i[2],M=n[0],w=n[1],S=n[2],T=e[0],b=e[1],x=e[2];return Math.abs(m-T)<s&&Math.abs(g-b)<s&&Math.abs(y-x)<s?ri(t):(c=m-T,f=g-b,d=y-x,r=w*(d*=p=1/Math.hypot(c,f,d))-S*(f*=p),h=S*(c*=p)-M*d,o=M*f-w*c,(p=Math.hypot(r,h,o))?(r*=p=1/p,h*=p,o*=p):(r=0,h=0,o=0),a=f*o-d*h,u=d*r-c*o,l=c*h-f*r,(p=Math.hypot(a,u,l))?(a*=p=1/p,u*=p,l*=p):(a=0,u=0,l=0),t[0]=r,t[1]=a,t[2]=c,t[3]=0,t[4]=h,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=l,t[10]=d,t[11]=0,t[12]=-(r*m+h*g+o*y),t[13]=-(a*m+u*g+l*y),t[14]=-(c*m+f*g+d*y),t[15]=1,t)},ji=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],u=e[2],l=n-i[0],c=r-i[1],f=h-i[2],d=l*l+c*c+f*f;d>0&&(l*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-u*c,m=u*l-o*f,g=o*c-a*l;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-l*g,t[6]=l*m-c*p,t[7]=0,t[8]=l,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},zi=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Bi=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ui=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Wi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Qi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ji=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Vi=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],y=t[14],M=t[15],w=i[0],S=i[1],T=i[2],b=i[3],x=i[4],v=i[5],I=i[6],C=i[7],G=i[8],_=i[9],D=i[10],E=i[11],N=i[12],A=i[13],L=i[14],O=i[15];return Math.abs(e-w)<=s*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(n-S)<=s*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-T)<=s*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(h-b)<=s*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(o-x)<=s*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-v)<=s*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-I)<=s*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(l-C)<=s*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-G)<=s*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-_)<=s*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(d-D)<=s*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(p-E)<=s*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-N)<=s*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(g-A)<=s*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(y-L)<=s*Math.max(1,Math.abs(y),Math.abs(L))&&Math.abs(M-O)<=s*Math.max(1,Math.abs(M),Math.abs(O))},Hi=function(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},qi=function(t){var s=new i(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Xi=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Zi=function(t,s,e){var n=new i(3);return n[0]=t,n[1]=s,n[2]=e,n},Ki=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},$i=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},te=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},se=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},ie=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},ee=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},ne=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},re=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},he=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},oe=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},ae=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ue=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},le=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ce=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},fe=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},de=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},pe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},me=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},ge=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},ye=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},Me=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},we=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},Se=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(ye(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},Te=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,u=h*(r-1),l=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*u+n[0]*l,t[1]=s[1]*o+i[1]*a+e[1]*u+n[1]*l,t[2]=s[2]*o+i[2]*a+e[2]*u+n[2]*l,t},be=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,u=o*h,l=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*u+i[0]*l+e[0]*c+n[0]*f,t[1]=s[1]*u+i[1]*l+e[1]*c+n[1]*f,t[2]=s[2]*u+i[2]*l+e[2]*c+n[2]*f,t},xe=function(t,s){s=s||1;var i=2*e()*Math.PI,n=2*e()-1,r=Math.sqrt(1-n*n)*s;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=n*s,t},ve=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},Ie=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},Ce=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],u=s[2],l=n*u-r*a,c=r*o-e*u,f=e*a-n*o,d=n*f-r*c,p=r*l-e*f,m=e*c-n*l,g=2*h;return l*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+l+d,t[1]=a+c+p,t[2]=u+f+m,t},Ge=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},_e=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},De=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ee=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),u=a&&ye(t,s)/a;return Math.acos(Math.min(Math.max(u,-1),1))},Ne=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Ae=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Oe=function(t,i){var e=t[0],n=t[1],r=t[2],h=i[0],o=i[1],a=i[2];return Math.abs(e-h)<=s*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))},Re=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Pe=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},ke=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},Fe=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},je=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},ze=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Be=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ue=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},We=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Je=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Ye=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Ve=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},He=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},qe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Xe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ze=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Ke=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},$e=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},tn=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},sn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},en=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},nn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},rn=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},hn=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],u=i[2]*e[3]-i[3]*e[2],l=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*u-f*a+d*o,t[1]=-l*u+f*h-d*r,t[2]=l*a-c*h+d*n,t[3]=-l*o+c*r-f*n,t},on=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},an=function(t,s){var i,n,r,h,o,a;s=s||1;do{o=(i=2*e()-1)*i+(n=2*e()-1)*n}while(o>=1);do{a=(r=2*e()-1)*r+(h=2*e()-1)*h}while(a>=1);var u=Math.sqrt((1-o)/a);return t[0]=s*i,t[1]=s*n,t[2]=s*r*u,t[3]=s*h*u,t},un=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},ln=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],u=i[3],l=u*e+o*r-a*n,c=u*n+a*e-h*r,f=u*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=l*u+d*-h+c*-a-f*-o,t[1]=c*u+d*-o+f*-h-l*-a,t[2]=f*u+d*-a+l*-o-c*-h,t[3]=s[3],t},cn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},fn=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},dn=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},pn=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],u=i[2],l=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-l)<=s*Math.max(1,Math.abs(h),Math.abs(l))},mn=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},gn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},yn=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Mn=function(t,i){var e=2*Math.acos(i[3]),n=Math.sin(e/2);return n>s?(t[0]=i[0]/n,t[1]=i[1]/n,t[2]=i[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},wn=function(t,s){var i=Y(t,s);return Math.acos(2*i*i-1)},Sn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],u=i[2],l=i[3];return t[0]=e*l+h*o+n*u-r*a,t[1]=n*l+h*a+r*o-e*u,t[2]=r*l+h*u+e*a-n*o,t[3]=h*l-e*o-n*a-r*u,t},Tn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},bn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},xn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},vn=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},In=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},Cn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},Gn=function(t,s,i){return Cn(t,s),J(t,t,i),In(t,t),t},_n=function(t,i,e,n){var r,h,o,a,u,l=i[0],c=i[1],f=i[2],d=i[3],p=e[0],m=e[1],g=e[2],y=e[3];return(h=l*p+c*m+f*g+d*y)<0&&(h=-h,p=-p,m=-m,g=-g,y=-y),1-h>s?(r=Math.acos(h),o=Math.sin(r),a=Math.sin((1-n)*r)/o,u=Math.sin(n*r)/o):(a=1-n,u=n),t[0]=a*l+u*p,t[1]=a*c+u*m,t[2]=a*f+u*g,t[3]=a*d+u*y,t},Dn=function(t){var s=e(),i=e(),n=e(),r=Math.sqrt(1-s),h=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*i),t[1]=r*Math.cos(2*Math.PI*i),t[2]=h*Math.sin(2*Math.PI*n),t[3]=h*Math.cos(2*Math.PI*n),t},En=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},Nn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},An=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},Ln=function(t,s,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,h=Math.PI/360;s*=h,e*=h,i*=h;var o=Math.sin(s),a=Math.cos(s),u=Math.sin(i),l=Math.cos(i),c=Math.sin(e),f=Math.cos(e);switch(r){case"xyz":t[0]=o*l*f+a*u*c,t[1]=a*u*f-o*l*c,t[2]=a*l*c+o*u*f,t[3]=a*l*f-o*u*c;break;case"xzy":t[0]=o*l*f-a*u*c,t[1]=a*u*f-o*l*c,t[2]=a*l*c+o*u*f,t[3]=a*l*f+o*u*c;break;case"yxz":t[0]=o*l*f+a*u*c,t[1]=a*u*f-o*l*c,t[2]=a*l*c-o*u*f,t[3]=a*l*f+o*u*c;break;case"yzx":t[0]=o*l*f+a*u*c,t[1]=a*u*f+o*l*c,t[2]=a*l*c-o*u*f,t[3]=a*l*f-o*u*c;break;case"zxy":t[0]=o*l*f-a*u*c,t[1]=a*u*f+o*l*c,t[2]=a*l*c+o*u*f,t[3]=a*l*f-o*u*c;break;case"zyx":t[0]=o*l*f-a*u*c,t[1]=a*u*f+o*l*c,t[2]=a*l*c-o*u*f,t[3]=a*l*f+o*u*c;break;default:throw new Error("Unknown angle order "+r)}return t},On=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Rn=function(t,i){return Math.abs(rn(t,i))>=1-s},Pn=function(){var t=new i(8);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},kn=function(t){var s=new i(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Fn=function(t,s,e,n,r,h,o,a){var u=new i(8);return u[0]=t,u[1]=s,u[2]=e,u[3]=n,u[4]=r,u[5]=h,u[6]=o,u[7]=a,u},jn=function(t,s,e,n,r,h,o){var a=new i(8);a[0]=t,a[1]=s,a[2]=e,a[3]=n;var u=.5*r,l=.5*h,c=.5*o;return a[4]=u*n+l*e-c*s,a[5]=l*n+c*t-u*e,a[6]=c*n+u*s-l*t,a[7]=-u*t-l*s-c*e,a},zn=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],u=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=u,t[4]=e*u+n*a-r*o,t[5]=n*u+r*h-e*a,t[6]=r*u+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Bn=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Un=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Wn=function(t,s){var e=mn();Gi(e,s);var n=new i(3);return Ii(n,s),zn(t,e,n),t},Qn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Jn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Yn=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Vn=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Hn=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},qn=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],u=s[3];return t[0]=2*(i*u+r*h+e*a-n*o),t[1]=2*(e*u+r*o+n*h-i*a),t[2]=2*(n*u+r*a+i*o-e*h),t},Xn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],u=.5*i[2],l=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*u-r*a+l,t[5]=h*a+r*o-e*u+c,t[6]=h*u+e*a-n*o+f,t[7]=-e*o-n*a-r*u+d,t},Zn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=o*h+l*e+a*r-u*n,f=a*h+l*n+u*e-o*r,d=u*h+l*r+o*n-a*e,p=l*h-o*e-a*n-u*r;return Tn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Kn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=o*h+l*e+a*r-u*n,f=a*h+l*n+u*e-o*r,d=u*h+l*r+o*n-a*e,p=l*h-o*e-a*n-u*r;return bn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},$n=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=o*h+l*e+a*r-u*n,f=a*h+l*n+u*e-o*r,d=u*h+l*r+o*n-a*e,p=l*h-o*e-a*n-u*r;return xn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},tr=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],u=s[2],l=s[3];return t[0]=o*h+l*e+a*r-u*n,t[1]=a*h+l*n+u*e-o*r,t[2]=u*h+l*r+o*n-a*e,t[3]=l*h-o*e-a*n-u*r,o=s[4],a=s[5],u=s[6],l=s[7],t[4]=o*h+l*e+a*r-u*n,t[5]=a*h+l*n+u*e-o*r,t[6]=u*h+l*r+o*n-a*e,t[7]=l*h-o*e-a*n-u*r,t},sr=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],u=i[2],l=i[3];return t[0]=e*l+h*o+n*u-r*a,t[1]=n*l+h*a+r*o-e*u,t[2]=r*l+h*u+e*a-n*o,t[3]=h*l-e*o-n*a-r*u,o=i[4],a=i[5],u=i[6],l=i[7],t[4]=e*l+h*o+n*u-r*a,t[5]=n*l+h*a+r*o-e*u,t[6]=r*l+h*u+e*a-n*o,t[7]=h*l-e*o-n*a-r*u,t},ir=function(t,i,e,n){if(Math.abs(n)<s)return Qn(t,i);var r=Math.hypot(e[0],e[1],e[2]);n*=.5;var h=Math.sin(n),o=h*e[0]/r,a=h*e[1]/r,u=h*e[2]/r,l=Math.cos(n),c=i[0],f=i[1],d=i[2],p=i[3];t[0]=c*l+p*o+f*u-d*a,t[1]=f*l+p*a+d*o-c*u,t[2]=d*l+p*u+c*a-f*o,t[3]=p*l-c*o-f*a-d*u;var m=i[4],g=i[5],y=i[6],M=i[7];return t[4]=m*l+M*o+g*u-y*a,t[5]=g*l+M*a+y*o-m*u,t[6]=y*l+M*u+m*a-g*o,t[7]=M*l-m*o-g*a-y*u,t},er=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},nr=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],M=i[3];return t[0]=e*M+h*m+n*y-r*g,t[1]=n*M+h*g+r*m-e*y,t[2]=r*M+h*y+e*g-n*m,t[3]=h*M-e*m-n*g-r*y,t[4]=e*l+h*o+n*u-r*a+c*M+p*m+f*y-d*g,t[5]=n*l+h*a+r*o-e*u+f*M+p*g+d*m-c*y,t[6]=r*l+h*u+e*a-n*o+d*M+p*y+c*g-f*m,t[7]=h*l-e*o-n*a-r*u+p*M-c*m-f*g-d*y,t},rr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},hr=function(t,s,i,e){var n=1-e;return ot(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},or=function(t,s){var i=lt(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},ar=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ur=function(t,s){var i=lt(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],u=s[6],l=s[7],c=e*o+n*a+r*u+h*l;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(u-r*c)/i,t[7]=(l-h*c)/i}return t},lr=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},cr=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},fr=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7];return Math.abs(e-c)<=s*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=s*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=s*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=s*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=s*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-M)<=s*Math.max(1,Math.abs(l),Math.abs(M))},dr=function(){var t=new i(2);return i!=Float32Array&&(t[0]=0,t[1]=0),t},pr=function(t){var s=new i(2);return s[0]=t[0],s[1]=t[1],s},mr=function(t,s){var e=new i(2);return e[0]=t,e[1]=s,e},gr=function(t,s){return t[0]=s[0],t[1]=s[1],t},yr=function(t,s,i){return t[0]=s,t[1]=i,t},Mr=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},wr=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Sr=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Tr=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},br=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},xr=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},vr=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ir=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Cr=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Gr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},_r=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},Dr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},Er=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Nr=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},Ar=function(t){var s=t[0],i=t[1];return s*s+i*i},Lr=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},Or=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Rr=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Pr=function(t,s){return t[0]*s[0]+t[1]*s[1]},kr=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},Fr=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},jr=function(t,s){s=s||1;var i=2*e()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},zr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Br=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Ur=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},Wr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},Qr=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},Jr=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Yr=function(t){return t[0]=0,t[1]=0,t},Vr=function(t){return"vec2("+t[0]+", "+t[1]+")"},Hr=function(t,s){return t[0]===s[0]&&t[1]===s[1]},qr=function(t,i){var e=t[0],n=t[1],r=i[0],h=i[1];return Math.abs(e-r)<=s*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(n-h)<=s*Math.max(1,Math.abs(n),Math.abs(h))};s=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,e=Math.random,n="zyx",r=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),h={__proto__:null,EPSILON:s,get i(){return i},h:e,o:n,u:_t,l:Dt,equals:Et},o=Bt,a=Xt,u=Object.freeze({__proto__:null,create:Nt,clone:At,m:Lt,identity:Ot,M:Rt,set:Pt,S:kt,T:Ft,v:jt,I:zt,multiply:Bt,rotate:Ut,scale:Wt,C:Qt,G:Jt,_:Yt,D:Vt,N:Ht,add:qt,A:Xt,L:Zt,equals:Kt,O:$t,R:ts,mul:o,sub:a}),l=us,c=ws,f=Object.freeze({__proto__:null,create:ss,clone:is,m:es,identity:ns,M:rs,set:hs,T:os,I:as,multiply:us,rotate:ls,scale:cs,translate:fs,C:ds,G:ps,P:ms,_:gs,D:ys,add:Ms,A:ws,O:Ss,R:Ts,L:bs,equals:xs,mul:l,sub:c}),d=Rs,p=qs,m=Object.freeze({__proto__:null,create:vs,F:Is,clone:Cs,m:Gs,M:_s,set:Ds,identity:Es,S:Ns,T:As,v:Ls,I:Os,multiply:Rs,translate:Ps,rotate:ks,scale:Fs,P:js,C:zs,G:Bs,j:Us,B:Ws,U:Qs,W:Js,_:Ys,D:Vs,add:Hs,A:qs,O:Xs,R:Zs,L:Ks,equals:$s,mul:d,sub:p}),g=Li,y=Pi,M=li,w=Wi,S=Object.freeze({__proto__:null,create:ti,clone:si,m:ii,M:ei,set:ni,identity:ri,S:hi,T:oi,v:ai,I:ui,multiply:li,translate:ci,scale:fi,rotate:di,J:pi,Y:mi,V:gi,P:yi,G:Mi,C:wi,H:Si,X:Ti,Z:bi,K:xi,$:vi,tt:Ii,st:Ci,it:Gi,et:_i,nt:Di,rt:Ei,B:Ni,ht:Ai,ot:Li,perspective:g,ut:Oi,lt:Ri,ct:Pi,ft:y,dt:ki,gt:Fi,yt:ji,_:zi,D:Bi,add:Ui,A:Wi,O:Qi,R:Ji,L:Yi,equals:Vi,mul:M,sub:w}),T=se,b=ie,x=ee,v=ce,I=fe,C=Xi,G=de,t=Hi(),_=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},D=Object.freeze({__proto__:null,create:Hi,clone:qi,length:Xi,M:Zi,m:Ki,set:$i,add:te,A:se,multiply:ie,Mt:ee,ceil:ne,floor:re,min:he,max:oe,round:ae,scale:ue,wt:le,St:ce,Tt:fe,bt:de,xt:pe,inverse:me,normalize:ge,vt:ye,It:Me,Ct:we,Gt:Se,_t:Te,Dt:be,random:xe,Et:ve,Nt:Ie,At:Ce,J:Ge,Y:_e,V:De,angle:Ee,Lt:Ne,_:Ae,L:Le,equals:Oe,sub:T,mul:b,div:x,Ot:v,Rt:I,Pt:C,kt:G,forEach:_}),E=Be,N=Ue,A=We,L=Ze,O=Ke,R=$e,P=tn,k=function(){var t=Re();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),F=Object.freeze({__proto__:null,create:Re,clone:Pe,M:ke,m:Fe,set:je,add:ze,A:Be,multiply:Ue,Mt:We,ceil:Qe,floor:Je,min:Ye,max:Ve,round:He,scale:qe,wt:Xe,St:Ze,Tt:Ke,length:$e,bt:tn,xt:sn,inverse:en,normalize:nn,vt:rn,It:hn,Ct:on,random:an,Et:un,At:ln,Lt:cn,_:fn,L:dn,equals:pn,sub:E,mul:N,div:A,Ot:L,Rt:O,Pt:R,kt:P,forEach:k}),j=Pe,z=ke,B=Fe,U=je,W=ze,Q=Sn,J=qe,Y=rn,V=on,q=H=$e,Z=X=tn,K=nn,$=dn,tt=function(){var t=Hi(),s=Zi(1,0,0),i=Zi(0,1,0);return function(e,n,r){var h=ye(n,r);return h<-.999999?(Me(t,s,n),C(t)<1e-6&&Me(t,i,n),ge(t,t),yn(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Me(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,K(e,e))}}(),st=function(){var t=mn(),s=mn();return function(i,e,n,r,h,o){return _n(t,e,h,o),_n(s,n,r,o),_n(i,t,s,2*o*(1-o)),i}}(),it=function(){var t=vs();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],K(s,An(s,t))}}(),et=Object.freeze({__proto__:null,create:mn,identity:gn,Ft:yn,jt:Mn,zt:wn,multiply:Sn,J:Tn,Y:bn,V:xn,Bt:vn,exp:In,Ut:Cn,pow:Gn,Gt:_n,random:Dn,T:En,Wt:Nn,Qt:An,Jt:Ln,_:On,clone:j,M:z,m:B,set:U,add:W,mul:Q,scale:J,vt:Y,Ct:V,length:H,Pt:q,bt:X,kt:Z,normalize:K,L:$,equals:Rn,Yt:tt,Vt:st,Ht:it}),nt=B,rt=B,ht=nr,ot=Y,ut=at=H,ct=lt=X,ft=Object.freeze({__proto__:null,create:Pn,clone:kn,M:Fn,qt:jn,K:zn,P:Bn,C:Un,F:Wn,m:Qn,identity:Jn,set:Yn,Xt:nt,Zt:Vn,Kt:rt,$t:Hn,tt:qn,translate:Xn,J:Zn,Y:Kn,V:$n,ts:tr,ss:sr,es:ir,add:er,multiply:nr,mul:ht,scale:rr,vt:ot,Ct:hr,T:or,Wt:ar,length:at,Pt:ut,bt:lt,kt:ct,normalize:ur,_:lr,L:cr,equals:fr}),dt=Nr,pt=wr,mt=Sr,gt=Tr,yt=Dr,Mt=Er,wt=Ar,St=function(){var t=dr();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),Tt=Object.freeze({__proto__:null,create:dr,clone:pr,M:mr,m:gr,set:yr,add:Mr,A:wr,multiply:Sr,Mt:Tr,ceil:br,floor:xr,min:vr,max:Ir,round:Cr,scale:Gr,wt:_r,St:Dr,Tt:Er,length:Nr,bt:Ar,xt:Lr,inverse:Or,normalize:Rr,vt:Pr,It:kr,Ct:Fr,random:jr,ns:zr,rs:Br,Nt:Ur,Et:Wr,rotate:Qr,angle:Jr,Lt:Yr,_:Vr,L:Hr,equals:qr,Pt:dt,sub:pt,mul:mt,div:gt,Ot:yt,Rt:Mt,kt:wt,forEach:St}),globalThis.hs=h,globalThis.hs.us=u,globalThis.hs.ls=f,globalThis.hs.cs=m,globalThis.hs.fs=S,globalThis.hs.ds=et,globalThis.hs.ps=ft,globalThis.hs.gs=Tt,globalThis.hs.ys=D,globalThis.hs.Ms=F}{let Xr=function(t,s,i){i=i||0;var e,n,r,h,o,a,u,l=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],bh(u=e*o-h*n,0,i)||(l[0]=(o*r-n*a)/u,l[1]=(e*a-h*r)/u),l},Zr=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n==0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),u=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&u>=0&&u<=1},Kr=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},$r=function(t,s,i){return Kr(t,s,i)>0},th=function(t,s,i){return Kr(t,s,i)>=0},sh=function(t,s,i){return Kr(t,s,i)<0},ih=function(t,s,i){return Kr(t,s,i)<=0},eh=function(t,s,i,e){if(e){var n=bt,r=xt;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Kr(t,s,i)},nh=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},rh=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},hh=function(t){t.length=0},oh=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},ah=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!$r(rh(t,s-1),rh(t,s),rh(t,s+1))&&(uh(t),!0)},uh=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},lh=function(t,s){return sh(rh(t,s-1),rh(t,s),rh(t,s+1))},ch=function(t,s,i){var e,n,r=vt,h=It;if(th(rh(t,s+1),rh(t,s),rh(t,i))&&ih(rh(t,s-1),rh(t,s),rh(t,i)))return!1;n=nh(rh(t,s),rh(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&th(rh(t,s),rh(t,i),rh(t,o+1))&&ih(rh(t,s),rh(t,i),rh(t,o))&&(r[0]=rh(t,s),r[1]=rh(t,i),h[0]=rh(t,o),h[1]=rh(t,o+1),e=Xr(r,h),nh(rh(t,s),e)<n))return!1;return!0},fh=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Zr(rh(t,s),rh(t,i),rh(t,e),rh(t,e+1)))return!1;return!0},dh=function(t,s,i,e){var n=e||[];if(hh(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},ph=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(lh(t,h))for(var o=0;o<t.length;++o)if(ch(t,h,o)){i=ph(dh(t,h,o,n)),e=ph(dh(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([rh(t,h),rh(t,o)]))}return s},mh=function(t){var s=ph(t);return s.length>0?gh(t,s):[t]},gh=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=gh(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[dh(t,e,r),dh(t,r,e)]},yh=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Zr(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Zr(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},Mh=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],u=i[0]-e[0],l=a*i[0]+u*i[1],c=r*u-a*h;return bh(c,0,n)?[0,0]:[(u*o-h*l)/c,(r*l-a*o)/c]},wh=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(S.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var T=0;T<t.length;++T)if(lh(w,T)){i.push(w[T]),l=c=Number.MAX_VALUE;for(var b=0;b<t.length;++b)$r(rh(w,T-1),rh(w,T),rh(w,b))&&ih(rh(w,T-1),rh(w,T),rh(w,b-1))&&(u=Mh(rh(w,T-1),rh(w,T),rh(w,b),rh(w,b-1)),sh(rh(w,T+1),rh(w,T),u)&&(f=nh(w[T],u))<c&&(c=f,a=u,m=b)),$r(rh(w,T+1),rh(w,T),rh(w,b+1))&&ih(rh(w,T+1),rh(w,T),rh(w,b))&&(u=Mh(rh(w,T+1),rh(w,T),rh(w,b),rh(w,b+1)),$r(rh(w,T-1),rh(w,T),u)&&(f=nh(w[T],u))<l&&(l=f,o=u,p=b));if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(oh(y,w,T,p+1),y.push(u),M.push(u),0!==m&&oh(M,w,m,w.length),oh(M,w,0,T+1)):(0!==T&&oh(y,w,T,w.length),oh(y,w,0,p+1),y.push(u),M.push(u),oh(M,w,m,T+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)th(rh(w,T-1),rh(w,T),rh(w,b))&&ih(rh(w,T+1),rh(w,T),rh(w,b))&&(f=nh(rh(w,T),rh(w,b)))<d&&fh(w,T,b)&&(d=f,g=b%t.length);T<g?(oh(y,w,T,g+1),0!==g&&oh(M,w,g,S.length),oh(M,w,0,T+1)):(0!==T&&oh(y,w,T,S.length),oh(y,w,0,g+1),oh(M,w,g,T+1))}return y.length<M.length?(wh(y,s,i,e,n,r,h),wh(M,s,i,e,n,r,h)):(wh(M,s,i,e,n,r,h),wh(y,s,i,e,n,r,h)),s}return s.push(t),s},Sh=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)eh(rh(t,e-1),rh(t,e),rh(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},Th=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)xh(e,t[n],s)&&t.splice(i,1)},bh=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},xh=function(t,s,i){return bh(t[0],s[0],i)&&bh(t[1],s[1],i)};bt=[],xt=[],vt=[],It=[],self.ws={Ss:mh,Ts:wh,bs:yh,xs:Sh,vs:Th,Is:ah}}{let vh=!1,Ih=!1,Ch="dev";const Gh=Symbol("Construct internal API token");let _h=14;const Dh=self.Cs=class{constructor(){throw TypeError("static class can't be instantiated")}static Gs(){if(_h<=0)throw new Error("cannot obtain internal API token");return--_h,Gh}static _s(){vh=!0}static Ds(){return vh}static Es(){Ih=!0}static Ns(){return Ih}static As(t){Ch=t}static Ls(){return Ch}static Os(){return"final"===Ch}};Dh.Rs=!1,Dh.Ps=!1,Dh.hardwareConcurrency=navigator.hardwareConcurrency||2,self.ks={}}{const Eh=self.Cs;Eh.Fs=class{constructor(t){this.js=t,this.zs=new Map,this.Bs()}Bs(){let t=this.js;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Us(t)}Us(t){if(!t)return;if(!t.includes("="))return void this.zs.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.zs.set(i,e)}Ws(){for(const t of this.zs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Qs(t){return this.zs.has(t)}Js(t){const s=this.zs.get(t);return void 0===s?null:s}Ys(){history.replaceState("",document.title,location.pathname+location.search)}Vs(t){this.js=t,this.zs.clear(),this.Bs()}},Eh.Hs=new Eh.Fs(location.search),Eh.qs=new Eh.Fs(location.hash),Eh.Hs.Qs("perf")&&(Eh.Xs=!0),"dev"!==Eh.Hs.Js("mode")&&Eh.As("final")}{let Nh=function(t){const s=parseFloat(t);return Oh.get(s)||(s>=13?"11":"NT "+t)};0;const Ah=self.Cs,Lh="(unknown)";Ah.Zs={Ks:Lh,$s:Lh,ti:Lh,si:Lh,ii:NaN,ei:Lh,ni:"browser",ri:!0,hi:!1,oi:!1,ai:!1,li:async()=>{}};const Oh=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Rh=navigator.userAgent,Ph=navigator.userAgentData;if(Ph&&Ph.brands.length>0){let kh=function(t){let s="",i="",e="",n="";for(const r of t){const t=Fh.get(r.brand);!s&&t&&(s=t,i=r.version);const h=jh.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(Ah.Zs.ti="Chromium",Ah.Zs.si=n),Ah.Zs.ti=s||Lh,Ah.Zs.si=i||Lh,Ah.Zs.ei=e||Lh};Ah.Zs.Ks=Ph.platform,Ah.Zs.hi=Ph.mobile,Ah.Zs.ri=!Ah.Zs.hi;const Fh=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),jh=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);kh(Ph.brands);let zh=!1;Ah.Zs.li=async()=>{if(!zh)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);kh(t.fullVersionList),"Windows"===Ah.Zs.Ks?Ah.Zs.$s=Nh(t.platformVersion):Ah.Zs.$s=t.platformVersion,zh=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Bh=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Rh);if(i){s(i);break}}};Bh(/windows\s+nt\s+([\d\.]+)/i,(t=>{Ah.Zs.Ks="Windows";const s=t[1];Ah.Zs.$s=Nh(s)})),Bh(/mac\s+os\s+x\s+([\d\._]+)/i,(t=>{Ah.Zs.Ks="macOS",Ah.Zs.$s=t[1].replace(/_/g,".")})),Bh(/CrOS/,(()=>{Ah.Zs.Ks="Chrome OS"})),Bh(/linux|openbsd|freebsd|netbsd/i,(()=>{Ah.Zs.Ks="Linux"})),Bh(/android/i,(()=>{Ah.Zs.Ks="Android"})),Bh(/android\s+([\d\.]+)/i,(t=>{Ah.Zs.Ks="Android",Ah.Zs.$s=t[1]})),Ah.Zs.Ks===Lh&&(Bh(/(iphone|ipod|ipad)/i,(t=>{Ah.Zs.Ks="iOS"})),Bh([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],(t=>{Ah.Zs.Ks="iOS",Ah.Zs.$s=t[1].replace(/_/g,".")})));const Uh=/chrome\//i.test(Rh),Wh=/chromium\//i.test(Rh),Qh=/edg\//i.test(Rh),Jh=/OPR\//.test(Rh),Yh=/nwjs/i.test(Rh),Vh=/safari\//i.test(Rh),Hh=/webkit/i.test(Rh);Qh||Jh||Bh(/chrome\/([\d\.]+)/i,(t=>{Ah.Zs.ti="Chrome",Ah.Zs.si=t[1],Ah.Zs.ei="Chromium"})),Bh(/edg\/([\d\.]+)/i,(t=>{Ah.Zs.ti="Edge",Ah.Zs.si=t[1],Ah.Zs.ei="Chromium"})),Bh(/OPR\/([\d\.]+)/,(t=>{Ah.Zs.ti="Opera",Ah.Zs.si=t[1],Ah.Zs.ei="Chromium"})),Bh(/chromium\/([\d\.]+)/i,(t=>{Ah.Zs.ti="Chromium",Ah.Zs.si=t[1],Ah.Zs.ei="Chromium"})),Bh(/nwjs\/[0-9.]+/i,(t=>{Ah.Zs.ti="NW.js",Ah.Zs.si=t[1],Ah.Zs.ei="Chromium",Ah.Zs.ni="nwjs"})),Bh(/firefox\/([\d\.]+)/i,(t=>{Ah.Zs.ti="Firefox",Ah.Zs.si=t[1],Ah.Zs.ei="Gecko"})),!Vh||Uh||Wh||Qh||Jh||Yh||(Ah.Zs.ti="Safari",Ah.Zs.ei="WebKit",Bh(/version\/([\d\.]+)/i,(t=>{Ah.Zs.si=t[1]})),Bh(/crios\/([\d\.]+)/i,(t=>{Ah.Zs.ti="Chrome for iOS",Ah.Zs.si=t[1]})),Bh(/fxios\/([\d\.]+)/i,(t=>{Ah.Zs.ti="Firefox for iOS",Ah.Zs.si=t[1]})),Bh(/edgios\/([\d\.]+)/i,(t=>{Ah.Zs.ti="Edge for iOS",Ah.Zs.si=t[1]}))),Ah.Zs.ei===Lh&&Hh&&(Ah.Zs.ei="WebKit"),"Android"===Ah.Zs.Ks&&"Safari"===Ah.Zs.ti&&(Ah.Zs.ti="Stock");const qh=new Set(["Windows","macOS","Linux","Chrome OS"]).has(Ah.Zs.Ks)||"nwjs"===Ah.Zs.ni;Ah.Zs.ri=qh,Ah.Zs.hi=!qh}"Chrome"===Ah.Zs.ti&&"browser"===Ah.Zs.ni&&/wv\)/.test(Rh)&&(Ah.Zs.ni="webview"),"nwjs"!==Ah.Zs.ni&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(Ah.Zs.ni="webapp"),Ah.Zs.ii=parseFloat(Ah.Zs.si);"macOS"===Ah.Zs.Ks&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(Ah.Zs.Ks="iOS",Ah.Zs.$s=Ah.Zs.si,Ah.Zs.ri=!1,Ah.Zs.hi=!0,Ah.Zs.ai=!0),Ah.Zs.oi="macOS"===Ah.Zs.Ks||"iOS"===Ah.Zs.Ks}{let Xh=function(t){return new Promise(((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)}))},Zh=function(t){return new Promise(((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)}))},Kh=function(t,s){return ao(t,s)},$h=function(t,s){return ao(t,s,!0)},to=function(t){so(t);let s=ro.get(t);return s instanceof Promise||(s=uo(t),ro.set(t,s),s.catch((s=>ro.delete(t)))),s},so=function(t){if("string"!=typeof t)throw new TypeError("expected string")},io=function(t,s){const i=t.objectStore(no).openCursor();return new Promise((t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}}))};0;const eo=2,no="keyvaluepairs",ro=new Map,ho="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,oo="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function ao(t,s,i=!1,e=!0){const n=await to(t);try{return s(n.transaction([no],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return ro.delete(t),ao(t,s,i,!1);throw n}}async function uo(t){so(t);const s=indexedDB.open(t,eo);return s.addEventListener("upgradeneeded",(s=>{try{s.target.result.createObjectStore(no)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}})),Xh(s)}class lo{constructor(t){so(t),this.name=t}async ready(){await to(this.name)}set(t,s){return so(t),$h(this.name,(async i=>{const e=Xh(i.objectStore(no).put(s,t)),n=Zh(i);await Promise.all([n,e])}))}get(t){return so(t),Kh(this.name,(async s=>{const i=Xh(s.objectStore(no).get(t)),e=Zh(s),[n,r]=await Promise.all([e,i]);return r}))}delete(t){return so(t),$h(this.name,(async s=>{const i=Xh(s.objectStore(no).delete(t)),e=Zh(s);await Promise.all([e,i])}))}clear(){return $h(this.name,(async t=>{const s=Xh(t.objectStore(no).clear()),i=Zh(t);await Promise.all([i,s])}))}keys(){return Kh(this.name,(async t=>{let s;s=oo?Xh(t.objectStore(no).getAllKeys()):io(t,"keys");const i=Zh(t),[e,n]=await Promise.all([i,s]);return n}))}values(){return Kh(this.name,(async t=>{let s;s=ho?Xh(t.objectStore(no).getAll()):io(t,"values");const i=Zh(t),[e,n]=await Promise.all([i,s]);return n}))}entries(){return Kh(this.name,(async t=>{const s=io(t,"entries"),i=Zh(t),[e,n]=await Promise.all([i,s]);return n}))}}self.ci=lo}{let co=function(t){throw new Error(`"${t}" is not implemented`)},fo=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},po=function(t){return"object"==typeof t?new Promise((s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)})):Promise.resolve(t)};0;const mo=self.ci,go=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class yo{constructor(t){this.fi=t,this.di=!this.fi,this.di||"undefined"!=typeof indexedDB||(this.di=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pi=new Map}mi(t){if(!this.di)for(const s of go)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.di=!0;break}}async gi(t){const s=this.pi.get(t),i=await po(s);return void 0===i?null:i}async yi(t,s){s=await po(s),this.pi.set(t,s)}Mi(t){this.pi.delete(t)}wi(){this.pi.clear()}Si(){return Array.from(this.pi.keys())}Ti(){return this.di}bi(){return this.pi}xi(t){this.pi=t}async getItem(t,s){if(fo(s),this.di)return await this.gi(t);let i;try{i=await this.fi.get(t)}catch(s){return this.mi(s),this.di?await this.gi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(fo(i),void 0===s&&(s=null),this.di)await this.yi(t,s);else try{await this.fi.set(t,s)}catch(i){if(this.mi(i),!this.di)throw i;await this.yi(t,s)}}async removeItem(t,s){if(fo(s),this.di)this.Mi(t);else try{await this.fi.delete(t)}catch(s){this.mi(s),this.di?this.Mi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(fo(t),this.di)this.wi();else try{await this.fi.clear()}catch(t){this.mi(t),this.di?this.wi():console.error("Error clearing storage: ",t)}}async keys(t){if(fo(t),this.di)return this.Si();let s=[];try{s=await this.fi.keys()}catch(t){if(this.mi(t),this.di)return this.Si();console.error("Error getting storage keys: ",t)}return s}ready(t){return fo(t),this.di?Promise.resolve(!0):this.fi.ready()}Ii(t){if(t.Ci)return new yo(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new mo(s);return new yo(i)}}length(t){co("localforage.length()")}key(t,s){co("localforage.key()")}iterate(t,s){co("localforage.iterate()")}Gi(t){co("localforage.setDriver()")}config(t){co("localforage.config()")}_i(t){co("localforage.defineDriver()")}Di(){co("localforage.driver()")}supports(t){co("localforage.supports()")}dropInstance(){co("localforage.dropInstance()")}}self.localforage=new yo(new mo("localforage"))}{const Mo=self.Cs;if(Mo.Ei={},Mo.Ei.Ni=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),Mo.Ei.Ai="undefined"!=typeof HTMLDialogElement,Mo.Ei.Li=!!self.requestIdleCallback,Mo.Ei.ImageBitmap=!!self.createImageBitmap,Mo.Ei.ImageBitmapOptions=!1,Mo.Ei.Oi=!1,Mo.Ei.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then((()=>{Mo.Ei.ImageBitmapOptions=!0})).catch((()=>{Mo.Ei.ImageBitmapOptions=!1}))}catch(wo){Mo.Ei.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then((t=>{Mo.Ei.Oi=10===t.width&&10===t.height})).catch((()=>{Mo.Ei.Oi=!1}))}catch(So){Mo.Ei.Oi=!1}}if(Mo.Ei.Ri=!(!navigator.clipboard||!navigator.clipboard.readText),Mo.Ei.Pi=!(!navigator.permissions||!navigator.permissions.query),Mo.Ei.ki=!1,Mo.Ei.Pi){const To={name:"clipboard-read"};navigator.permissions.query(To).then((()=>{Mo.Ei.ki=!0})).catch((()=>{Mo.Ei.ki=!1}))}Mo.Ei.Fi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),Mo.Ei.ji="undefined"!=typeof Proxy,Mo.Ei.zi="undefined"!=typeof document&&void 0!==document.createElement("a").download,Mo.Ei.Bi="function"==typeof fetch,Mo.Ei.Ui=!!(self.isSecureContext&&"Opera"!==Mo.Zs.ti&&navigator.storage&&navigator.storage.persist),Mo.Ei.Wi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),Mo.Ei.Qi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===Mo.Zs.Ks)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),Mo.Ei.ImageDecoder=void 0!==self.ImageDecoder,Mo.Ei.Ji=!!self.VideoEncoder,Mo.Ei.Yi=!!self.showOpenFilePicker,Mo.Ei.Vi=!!self.queryLocalFonts,Mo.Ei.UserActivation=!!navigator.userActivation,Mo.Ei.Hi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise((s=>t.toBlob(s,"image/webp",1)))),Mo.Ei.Hi=i&&"image/webp"===i.type}catch(t){Mo.Ei.Hi=!1}})()}{const bo=self.Cs;if(!String.prototype.trimStart){const xo=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(xo,"")}}if(!String.prototype.trimEnd){const vo=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(vo,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(bo.Xi(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let Io=function(t,s){return t.reduce(((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,Io(i,s-1)),t):(t.push(i),t)),[])};Array.prototype.flat=function(t=1){return Io(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise(((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota(((s,i)=>t({usage:s,quota:i})),s)))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let Co=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+Go.Zi();console.error(s)};0;const Go=self.Cs;self.assert=function(t,s){t||Co(s)}}{const _o=self.Cs,Do=self.ks;_o.Ki=function(t){return"number"==typeof t},_o.$i=function(t){return _o.Ki(t)&&isFinite(t)},_o.te=function(t){if(!_o.Ki(t))throw new TypeError("expected number")},_o.se=function(t){_o.ie(t)},_o.ee=function(t,s,i){if(!_o.Ki(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},_o.ne=function(...t){for(let s of t);},_o.re=function(t){if(!_o.$i(t))throw new TypeError("expected finite number")},_o.he=function(t){_o.ie(t)},_o.oe=function(...t){for(let s of t);},_o.ae=function(t){return"string"==typeof t},_o.ue=function(t){if(!_o.ae(t))throw new TypeError("expected string")},_o.le=function(t){_o.ie(t)},_o.ce=function(...t){for(let s of t);},_o.fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},_o.de=function(t){if(!_o.fe(t))throw new TypeError("expected simple object")},_o.pe=function(t){if(!_o.ie(t)&&!_o.fe(t))throw new TypeError("expected simple object")},_o.me=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},_o.ge=function(t){if(!_o.me(t))throw new TypeError("expected object")},_o.ye=function(t){_o.ie(t)},_o.Me=function(...t){for(let s of t);},_o.we=function(t){return _o.Se(t,Blob)&&"string"==typeof t.name},_o.Te=function(t){if(!_o.we(t))throw new TypeError("expected file")},_o.be=function(t){_o.ie(t)},_o.xe=function(t){return Array.isArray(t)},_o.ve=function(t){if(!_o.xe(t))throw new TypeError("expected array")},_o.Ie=function(t){_o.ie(t)},_o.Ce=function(...t){for(let s of t);},_o.Ge=function(t){return!(!_o.xe(t)||t.length&&!_o.xe(t[0]))},_o._e=function(t){if(!_o.Ge(t))throw new TypeError("expected 2d array");for(let s of t)if(!_o.xe(s))throw new TypeError("expected 2d array")},_o.De=function(t){_o.ie(t)},_o.Ee=function(t){return"function"==typeof t},_o.Ne=function(t,s){if(!_o.Ee(t))throw new TypeError("expected function");if(!_o.ie(s)&&t!==s)throw new TypeError("expected same function reference")},_o.Ae=function(t){_o.ie(t)},_o.Le=function(...t){for(let s of t);},_o.Oe=function(t,...s){if(!_o.Ee(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!_o.ie(i)&&t===i)return;throw new TypeError("expected same function reference")},_o.Re=function(...t){if(!_o.ie(t))for(let s of t);},_o.Pe=function(t,s){return t instanceof s},_o.ke=function(t,...s){for(let i of s)if(_o.Pe(t,i))return!0;return!1},_o.Fe=function(t,s){if(!_o.Pe(t,s))throw new TypeError("unexpected type")},_o.je=function(t,s){_o.ie(t)},_o.ze=function(t,...s){for(let t of s);},_o.Be=function(t,...s){if(!_o.ke(t,...s))throw new TypeError("unexpected type")},_o.Ue=function(t,...s){if(!_o.ie(t)&&!_o.ke(t,...s))throw new TypeError("unexpected type")},_o.We=function(t,s){for(let i of t)if(!_o.Pe(i,s))return!1;return!0},_o.Qe=function(t){for(let s of t)if(!_o.$i(s))return!1;return!0},_o.Je=function(t,s){for(let s of t);},_o.Ye=function(t,s){if(!_o.ie(t))for(let s of t);},_o.Ve=function(t,s){if(!_o.ie(t))for(let s of t);},_o.He=function(t,...s){for(let s of t);},_o.qe=function(t,...s){if(!_o.ie(t))for(let s of t);},_o.Xe=function(t,s){return!(_o.ie(t)||!_o.ae(t.nodeName))&&(!s||_o.Ze(t.nodeName,s))},_o.Ke=function(t,s){if(_o.ie(t)||!_o.ae(t.nodeName))throw new TypeError("expected DOM node");if(s&&!_o.Ze(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},_o.$e=function(t,s){_o.ie(t)},_o.tn=function(t,s){return!(_o.ie(t)||!_o.ae(t.tagName))&&(!s||_o.Ze(t.tagName,s))},_o.sn=function(t,s){if(_o.ie(t)||!_o.ae(t.tagName))throw new TypeError("expected HTML element");if(s&&!_o.Ze(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},_o.en=function(t,s){_o.ie(t)},_o.nn=function(t){return _o.tn(t,"img")||_o.tn(t,"canvas")||_o.tn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},_o.rn=function(t){if(!_o.nn(t))throw new TypeError("expected drawable")},_o.hn=function(t){_o.ie(t)},_o.an=function(t){return t instanceof ImageData||_o.nn(t)},_o.un=function(t){if(!_o.an(t))throw new TypeError("expected drawable or image data")},_o.ln=function(t){if(!_o.ie(t)&&!_o.an(t))throw new TypeError("expected drawable or image data")},_o.cn=function(t){return"string"==typeof t||_o.fn&&t instanceof _o.fn||t instanceof _o.dn},_o.pn=function(t){if(!_o.cn(t))throw new TypeError("expected string-like")},_o.mn=function(t){_o.ie(t)},_o.gn=function(...t){for(let s of t);},_o.yn=function(){throw new Error("must be overridden")},_o.Mn=function(){throw new Error("not yet implemented")},_o.wn=function(t){return t.constructor===function*(){}.constructor},_o.Sn=function(t){if(!_o.wn(t))throw new Error("expected generator function")},_o.Tn=function(t){return"function"===t[Symbol.iterator]},_o.bn=function(t){if(!_o.Tn(t))throw new Error("expected iterable")},_o.xn=function(t){return!_o.ie(t)},_o.ie=function(t){return null==t},_o.vn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},_o.In=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const Eo=Object.getPrototypeOf(Uint8Array);_o.Cn=function(t){return _o.Pe(t,Eo)},_o.Gn=function(t){},_o._n=function(t){_o.Dn(t,Eo)},_o.En=function(t,...s){if(!_o.Nn(t,...s))throw new TypeError("unexpected type")},_o.Nn=function(t,...s){for(const i of s)if(_o.Se(t,i))return!0;return!1},_o.Dn=function(t,s){if(!_o.Se(t,s))throw new TypeError("unexpected type")},_o.Se=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},Do.te=_o.te,Do.se=_o.se,Do.re=_o.re,Do.he=_o.he,Do.ue=_o.ue,Do.le=_o.le,Do.ge=_o.ge,Do.ye=_o.ye,Do.ve=_o.ve,Do.Ie=_o.Ie,Do.Ne=_o.Ne,Do.Ae=_o.Ae,Do.Fe=_o.Fe,Do.je=_o.je,Do.ie=_o.ie}{let No=function(t,s){let i=Po.getType(t),e=Po.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},Ao=function(t){console.warn("[Defence] "+t+" @",Po.Zi())},Lo=function(){if(Qo=-1,jo.size>0||zo.size>0){let t=[...new Set([...jo.keys()].map((t=>Po.getName(t))))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),jo.clear(),zo.clear()}},Oo=function(t){let s=new Set;for(let i in t)s.add(i);return s},Ro=function(t,s){let i=Oo(s),e=Jo.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);Po.An(s,[...i]),s.length&&console.warn(`[Defence] '${Po.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Jo.set(t,i)};0;const Po=self.Cs,ko=new Map;let Fo;Po.Ln=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},Po.On=function(t,...s){ko.has(t)||ko.set(t,-1),-1===ko.get(t)&&ko.set(t,requestAnimationFrame((()=>{console.log(`%c${t}`,"font-weight: bold",...s),ko.set(t,-1)})))},Po.Rn=function(t){performance.mark(t),Fo||(Fo=new Map),Fo.has(t)||Fo.set(t,{Pn:0,total:0,kn:0,Fn:1,toString:function(){return`${t} :: current => ${this.Pn.toPrecision(3)} :: average => ${this.kn.toPrecision(3)} :: calls => ${this.Fn}`}})},Po.jn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Fo.get(t);i.Pn=s.duration,i.total+=i.Pn,i.kn=i.total/i.Fn,console.log(i.toString()),i.Fn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},Po.Zi=function(){return(new Error).stack},Po.zn=function(){},Po.cast=function(t,s){return t&&t instanceof s?t:null},Po.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":Po.Ki(t)?"<number>":Po.ae(t)?"<string>":Po.xe(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":Po.Ee(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},Po.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},Po.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let jo=new Map,zo=new Map,Bo=new WeakMap,Uo=new WeakMap;Po.Bn={};const Wo=new Set(["then","splice"]);Po.Bn.get=function(t,s){return s in t||"symbol"==typeof s||Wo.has(s)||Ao(`Accessed missing property '${s}' from defended object '${Po.getName(t)}', returning undefined`),Uo.has(t)&&"symbol"!=typeof s&&!Wo.has(s)&&Ao(`Accessed property '${s}' on a released object '${Po.getName(t)}'\nObject was originally released at: ${Uo.get(t)})\nCall stack at access: `),t[s]},Po.Bn.set=function(t,s,i){return s in t||jo.has(t)||Ao(`Set non-existent property '${s}' to '${i}' on defended object '${Po.getName(t)}'`),No(t[s],i)||jo.has(t)||Ao(`Set '${Po.getType(t[s])}' property '${s}' to type '${Po.getType(i)}' on defended object '${Po.getName(t)}'`),Uo.has(t)&&Ao(`Set property '${s}' on a released object '${Po.getName(t)}'\nObject was originally released at: ${Uo.get(t)})\nCall stack at access: `),t[s]=i,!0},Po.Bn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${Po.getName(t)}'`)},Po.Bn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${Po.getName(t)}'`)},Po.Bn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${Po.getName(t)}'`)};let Qo=-1;Po.Un=class{constructor(){if(!Po.Ps||!Po.Ei.ji)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,Po.Bn);return jo.set(s,i),zo.set(i,s),Bo.set(i,s),-1===Qo&&(Qo=requestAnimationFrame(Lo)),i}},Po.Wn=function(t){if(Po.Ps&&Po.Ei.ji&&t instanceof Po.Un){if(!zo.has(t))return t;let s=zo.get(t);return zo.delete(t),jo.delete(s),t}return Po.Rs?Object.seal(t):t},Po.Qn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw zo.clear(),jo.clear(),t}return Po.Ps&&Ro(t,i),Po.Wn(i)},Po.Jn=function(t){let s=Bo.get(t);s&&Uo.set(s,Po.Zi())},Po.Yn=function(t){let s=Bo.get(t);return!!s&&!!Uo.get(s)};let Jo=new Map;Po.Vn=class{constructor(t){this.Hn="",t&&this.start(t)}start(t){Po.Xs&&(this.Hn=t,performance.mark(this.Hn+"-Start"))}end(){Po.Xs&&(performance.mark(this.Hn+"-End"),performance.measure(this.Hn,this.Hn+"-Start",this.Hn+"-End"))}next(t){Po.Xs&&(this.end(),this.Hn=t,performance.mark(this.Hn+"-Start"))}}}{let Yo=function(t){return 0===t&&1/t<0};0;const Vo=self.Cs,Ho=2*Math.PI,qo=Math.PI/180,Xo=180/Math.PI;Vo.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Vo.qn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Vo.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},Vo.Xn=function(t,s,i){return t<s?s:t>i?i:t},Vo.Zn=function(t){return(t%=Ho)<0&&(t+=Ho),t},Vo.Kn=function(t){return t*qo},Vo.$n=function(t){return t*Xo},Vo.tr=function(t,s){return Math.sqrt(t*t+s*s)},Vo.sr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Vo.ir=function(t,s,i,e){return Vo.tr(i-t,e-s)},Vo.er=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Vo.nr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Vo.rr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Vo.hr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Vo.Zn(t+i):Vo.Zn(t-i):Vo.Zn(s)},Vo.ar=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Vo.ur=function(t,s,i,e=0){let n=Vo.rr(t,s);const r=Ho*e;return Vo.ar(s,t)?Vo.Zn(t+(n+r)*i):Vo.Zn(t-(n+r)*i)},Vo.lr=function(t,s,i,e=0){const n=Vo.rr(t,s),r=Ho*e;return Vo.ar(s,t)?Vo.Zn(t+(n+r)*i):Vo.Zn(t+(Ho-n+r)*i)},Vo.cr=function(t,s,i,e=0){const n=Vo.rr(t,s),r=Ho*e;return Vo.ar(s,t)?Vo.Zn(t-(-Ho+n-r)*i):Vo.Zn(t-(n+r)*i)},Vo.dr=function(t,s){const i=Vo.rr(t,s);return Vo.ar(t,s)?Vo.Zn(s-i):Vo.Zn(s+i)},Vo.Ct=function(t,s,i){return t+i*(s-t)},Vo.pr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Vo.mr=function(t,s,i,e,n){return Vo.Ct(e,n,Vo.pr(t,s,i))},Vo.gr=function(t,s,i,e){return Vo.Ct(Vo.Ct(t,s,e),Vo.Ct(s,i,e),e)},Vo.yr=function(t,s,i,e,n){return Vo.Ct(Vo.gr(t,s,i,n),Vo.gr(s,i,e,n),n)},Vo.Mr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Vo.wr=function(t){return t>0&&!(t-1&t)},Vo.Sr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Vo.Tr=function(t,s){return Math.round(t*s)/s},Vo.br=function(t,s){return Math.floor(t*s)/s},Vo.vr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Vo.Ir=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Vo.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Vo.Cr=function(t,s,i){return Vo.Xn(t,0,255)|Vo.Xn(s,0,255)<<8|Vo.Xn(i,0,255)<<16};Vo.Gr=function(t,s,i,e){return(t=Vo.Xn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Vo.Xn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Vo.Xn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Vo.Xn(Math.floor(1023*e),0,1023)))},Vo._r=function(t,s,i){return Vo.Gr(t,s,i,1)},Vo.Dr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Vo.Er=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Vo.Nr=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Vo.Ar=function(t){return Yo(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Vo.Lr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Zo=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Vo.Or=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Zo){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Vo.Lr(t,s);return[t/i,s/i]},Vo.Rr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(n,h),c=Math.max(n,h);if(u<l||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,M=i-t,w=e-s,S=h-n,T=o-r,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},Vo.Pr=function(t,s,i,e,n,r,h,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||n>d)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||h>m)return!1;const g=a-t+l-i,y=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},Vo.kr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=n.Fr(),l=n.jr(),c=n.zr(),f=n.Br(),d=n.Ur(),p=n.Wr(),m=n.Qr(),g=n.Jr();return Vo.Pr(t,s,i,e,r,h,o,a,u,l,c,f)||Vo.Pr(t,s,i,e,r,h,o,a,c,f,d,p)||Vo.Pr(t,s,i,e,r,h,o,a,d,p,m,g)||Vo.Pr(t,s,i,e,r,h,o,a,m,g,u,l)},Vo.Yr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let u=0;for(let l=n.length-4;u<=l;u+=2)if(Vo.Pr(t,s,i,e,r,h,o,a,n[u],n[u+1],n[u+2],n[u+3]))return!0;return Vo.Pr(t,s,i,e,r,h,o,a,n[u],n[u+1],n[0],n[1])};Vo.Vr=function(t,s,i,e,n,r,h,o){const a=i-t,u=o-r,l=a*u-(e-s)*(h-n);if(0===l)return 2;const c=((s-e)*(h-t)+a*(o-s))/l;return 0<c&&c<1.000001?(u*(h-t)+(n-h)*(o-s))/l:2},Vo.Hr=function(t,s,i,e,n,r,h,o,a){const u=(h-n)*a,l=(o-r)*a;return Vo.Vr(t,s,i,e,n-u,r-l,h+u,o+l)},Vo.qr=function(t,s,i,e,n,r,h,o){const a=n-i,u=r-e,l=h-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,M=l*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return S>=0&&T>=0&&S+T<=1},Vo.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,u=r-e,l=h-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,M=f*l+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w;return[1-S-T,S,T]},Vo.Zr=function(t,s,i,e,n,r,h,o,a,u,l,c){return[t*e+s*h+i*u,t*n+s*o+i*l,t*r+s*a+i*c]}}{const Ko=self.Cs;let $o=null,ta="";if("undefined"!=typeof document){$o=document;const ha=document.querySelector("base");ta=ha&&ha.hasAttribute("href")?ha.getAttribute("href"):"",ta&&(ta.startsWith("/")&&(ta=ta.substr(1)),ta.endsWith("/")||(ta+="/"))}Ko.Kr=function(){return ta},Ko.$r=function(){if(!$o)return"";const t=$o.location;return Ko.th(t.origin+t.pathname)+ta},Ko.th=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Ko.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Ko.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Ko.eh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Ko.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Ko.rh=function(t){return t.replace(/\\/g,"/")},Ko.hh=function(t,s){return s===(t?Ko.ih(t).slice(1):"")},Ko.oh=function(t,s){let i,e;return Ko.we(t)&&(i=Ko.nh(t.name)),Ko.ae(t)&&(i=Ko.nh(t)),Ko.we(s)&&(e=Ko.nh(s.name)),Ko.ae(s)&&(e=Ko.nh(s)),i===e},Ko.ah=function(t){t=Ko.rh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,uh:r,name:e,root:s,ext:h,fh:s+n+r}},Ko.dh=function(t,s){return new Promise(((i,e)=>{self.setTimeout(i,t,s)}))},Ko.ph=function(t){try{t()}catch(t){Ko.Rs&&console.warn("Swallowed exception: ",t)}},Ko.mh=function(){},Ko.Ze=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Ko.gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Ko.yh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Ko.Mh=function(t,s){t.length=s},Ko.wh=function(t){t&&0!==t.length&&Ko.Mh(t,0)},Ko.Sh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Ko.Mh(i,0)}Ko.Mh(t,0)}},Ko.Th=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Ko.bh=function(t,s,i){s|=0;const e=t.length;s<e?Ko.Mh(t,s):s>e&&Ko.Th(t,s,i)},Ko.xh=function(t,s){Ko.wh(t),Ko.An(t,s)},Ko.An=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Ko.Ih=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Ko.Mh(t,i)},Ko.Ch=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Ko.Gh=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Ko._h=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Ko.Mh(t,e),i},Ko.Dh=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Ko.Mh(t,e),i-e},Ko.Eh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Ko.Nh=function(t,s){if(!Ko.Eh(t,s))throw new RangeError("array index out of bounds")},Ko.Ah=function(t){return t.slice()},Ko.Lh=function(t,s){let i=[];for(let e of t)if(Ko.me(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Ko.xe(e)?i.push(Ko.Lh(e,s)):i.push(e);return i},Ko.Oh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Ko.Rh=function(t,s=" "){return t?t.split(s).map((t=>t.trim())).filter((t=>!!t)):[]},Ko.Ph=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Ko.kh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Ko.Fh=function(t,s){for(const i of s)t.add(i);return t},Ko.jh=function(t){for(let s of t)return s;return null},Ko.xor=function(t,s){return!t!=!s},Ko.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Ko.zh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Ko.Bh=function(t,s){return t.length?new Promise(((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then((e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))})).catch((t=>{h=!0,e(t)}))})):Promise.resolve([])};let sa=[];Ko.Uh=function(t){sa.push(t)},Ko.Wh=function(){let t=0;for(let s of sa)t+=s();return Math.floor(t)};let ia=1;const ea=new Map,na=new MessageChannel;na.port2.onmessage=function(t){const s=t.data,i=ea.get(s);ea.delete(s),i&&i(performance.now())},Ko.Qh=function(t){const s=ia++;return ea.set(s,t),na.port1.postMessage(s),s},Ko.Jh=function(t){ea.delete(t)},Ko.Yh=Ko.Qh,Ko.Vh=function(){return new Promise((t=>Ko.Yh(t)))};const ra=new Set;Ko.Hh=function(t){const s=self.requestAnimationFrame((async i=>{await Ko.Vh(),ra.has(s)&&(ra.delete(s),t(i))}));return ra.add(s),s},Ko.qh=function(t){ra.has(t)&&(self.cancelAnimationFrame(t),ra.delete(t))}}{const oa=self.Cs;oa.Xh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},oa.Zh=function(t){return!oa.Xh(t)},oa.Kh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},oa.$h=function(t,s){return fetch(t,s).then((t=>(oa.Kh(t),t)))},oa.so=function(t){return oa.$h(t).then((t=>t.text()))},oa.io=function(t){return oa.$h(t).then((t=>t.json()))},oa.eo=function(t){return oa.$h(t).then((t=>t.blob()))},oa.no=function(t){return oa.$h(t).then((t=>t.arrayBuffer()))},oa.ro=function(t){return new Promise(((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t}))},oa.ho=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)}))},oa.oo=function(t){return"function"==typeof t.text?t.text():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)}))},oa.ao=function(t){return oa.oo(t).then((t=>JSON.parse(t)))},oa.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await oa.ro(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},oa.lo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},oa.co=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=oa.Xn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise((e=>t.toBlob(e,s,i)));throw new Error("could not convert canvas to blob")},oa.fo=function(t,s,i){const e=oa.lo(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),oa.co(e,s,i)},oa.do=function(t,s,i){if(oa.Ei.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then((t=>oa.fo(t,s,i)));if(oa.Ei.ImageBitmap)return createImageBitmap(t).then((t=>oa.fo(t,s,i)));{const e=oa.lo(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),oa.co(e,s,i)}},oa.po=function(t,s){t.clear();for(const i of s)t.add(i)},oa.mo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},oa.yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},oa.Mo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map((s=>t(s)))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map((s=>[s[0],t(s[1])]))};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},oa.wo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map((s=>t(s))));if("map"===s._c3type_)return new Map(s.data.map((s=>[s[0],t(s[1])])));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},oa.So=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},oa.To=function(t){return"object"==typeof t&&"function"==typeof t.next},oa.bo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let aa=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},ua=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};0;const la=self.Cs,ca=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,fa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;la.xo=class{constructor(t,s,i,e){this.vo=NaN,this.Io=NaN,this.Co=NaN,this.Go=NaN,this.vo=0,this.Io=0,this.Co=0,this.Go=0,t instanceof la.xo?this.set(t):this._o(t||0,s||0,i||0,e||0)}Do(t,s,i){return this.vo=+t,this.Io=+s,this.Co=+i,this.Xn(),this}_o(t,s,i,e){return this.vo=+t,this.Io=+s,this.Co=+i,this.Go=+e,this.Xn(),this}set(t){return this.vo=t.vo,this.Io=t.Io,this.Co=t.Co,this.Go=t.Go,this}m(t){return this.set(t)}add(t){this.vo+=t.vo,this.Io+=t.Io,this.Co+=t.Co,this.Go+=t.Go,this.Xn()}Eo(t,s,i,e=0){this.vo+=+t,this.Io+=+s,this.Co+=+i,this.Go+=+e,this.Xn()}No(t){this.Ao(Math.max(this.vo,t.vo)-Math.min(this.vo,t.vo)),this.Lo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Oo(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Ro(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Xn()}Po(t){this.vo=t.vo,this.Io=t.Io,this.Co=t.Co}Ao(t){this.vo=la.Xn(+t,0,1)}ko(){return this.vo}Lo(t){this.Io=la.Xn(+t,0,1)}Fo(){return this.Io}Oo(t){this.Co=la.Xn(+t,0,1)}jo(){return this.Co}Ro(t){this.Go=la.Xn(+t,0,1)}zo(){return this.Go}clone(){return la.Qn(la.xo,this.vo,this.Io,this.Co,this.Go)}toArray(){return[this.vo,this.Io,this.Co,this.Go]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this.vo,t[s++]=this.Io,t[s++]=this.Co,t[s]=this.Go}Wo(t,s){t[s++]=this.vo,t[s++]=this.Io,t[s]=this.Co}equals(t){return this.vo===t.vo&&this.Io===t.Io&&this.Co===t.Co&&this.Go===t.Go}Qo(t){return this.vo===t.vo&&this.Io===t.Io&&this.Co===t.Co}Jo(t,s,i){return this.vo===t&&this.Io===s&&this.Co===i}Yo(t,s,i,e){return this.vo===t&&this.Io===s&&this.Co===i&&this.Go===e}Vo(t,s){return t[s]===Math.fround(this.vo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Co)&&t[s+3]===Math.fround(this.Go)}Ho(t,s){return t[s]===Math.fround(this.vo)&&t[s+1]===Math.fround(this.Io)&&t[s+2]===Math.fround(this.Co)}multiply(t){this.vo*=t.vo,this.Io*=t.Io,this.Co*=t.Co,this.Go*=t.Go}qo(t){this.vo*=t,this.Io*=t,this.Co*=t,this.Go*=t}Xo(){return this.vo*=this.Go,this.Io*=this.Go,this.Co*=this.Go,this}Zo(){return this.vo/=this.Go,this.Io/=this.Go,this.Co/=this.Go,this}Xn(){return this.vo=la.Xn(this.vo,0,1),this.Io=la.Xn(this.Io,0,1),this.Co=la.Xn(this.Co,0,1),this.Go=la.Xn(this.Go,0,1),this}Ko(t){this.vo=la.Dr(t),this.Io=la.Er(t),this.Co=la.Nr(t),this.Go=la.Ar(t)}$o(t,s,i){return`rgb(${100*(la.$i(t)?t:this.ko())}%, ${100*(la.$i(s)?s:this.Fo())}%, ${100*(la.$i(i)?i:this.jo())}%)`}ta(t,s,i,e){return`rgba(${100*(la.$i(t)?t:this.ko())}%, ${100*(la.$i(s)?s:this.Fo())}%, ${100*(la.$i(i)?i:this.jo())}%, ${la.$i(e)?e:this.zo()})`}sa(){const t=Math.round(255*this.ko()),s=Math.round(255*this.Fo()),i=Math.round(255*this.jo());return"#"+aa(t.toString(16))+aa(s.toString(16))+aa(i.toString(16))}ia(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Ao(s),isFinite(i)&&this.Lo(i),isFinite(e)&&this.Oo(e),this.Ro(1),!0}ea(){return`${Math.round(255*this.ko())}, ${Math.round(255*this.Fo())}, ${Math.round(255*this.jo())}`}na(){return[Math.round(255*this.ko()),Math.round(255*this.Fo()),Math.round(255*this.jo())]}ra(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),this.Ro(1),!0}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),this.Ro(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Ro(r),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Lo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Ro(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.ha(t):this.ra(t);if(t.startsWith("rgba("))return t.includes("%")?this.aa(t):this.oa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.la(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.ha(t):4===s.length&&this.aa(t):3===s.length?this.ra(t):4===s.length&&this.oa(t)}}return this.ia(t)}toJSON(){return[this.vo,this.Io,this.Co,this.Go]}ca(t,s,i,e){let n,r,h;if(t%=360,s=la.Xn(s,0,100),i=la.Xn(i,0,100),e=la.Xn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=ua(o,e,t+1/3),r=ua(o,e,t),h=ua(o,e,t-1/3)}return this.Ao(n),this.Lo(r),this.Oo(h),this.Ro(e),this}la(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=ca.exec(s),e=fa.exec(s);return i&&4===i.length?(this.ca(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.ca(+i[1],+i[2],+i[3],+i[4]),0))}fa(){const t=this.vo,s=this.Io,i=this.Co,e=this.Go;return`hsla(${la.xo.da(t,s,i)}, ${la.xo.pa(t,s,i)}%, ${la.xo.ma(t,s,i)}%, ${e})`}ga(){const t=this.vo,s=this.Io,i=this.Co;return[la.xo.da(t,s,i),la.xo.pa(t,s,i),la.xo.ma(t,s,i),this.Go]}ya(t){Array.isArray(t)&&(t.length<3||(this.vo=t[0],this.Io=t[1],this.Co=t[2],t.length>=4?this.Go=t[3]:this.Go=1))}set r(t){this.Ao(t)}get r(){return this.ko()}set g(t){this.Lo(t)}get g(){return this.Fo()}set b(t){this.Oo(t)}get b(){return this.jo()}set a(t){this.Ro(t)}get a(){return this.zo()}Ma(t,s){switch(t){case 0:this.Ao(s);break;case 1:this.Lo(s);break;case 2:this.Oo(s);break;case 3:this.Ro(s);break;default:throw new RangeError("invalid color index")}}wa(t){switch(t){case 0:return this.ko();case 1:return this.Fo();case 2:return this.jo();case 3:return this.zo();default:throw new RangeError("invalid color index")}}static Sa(t,s){let i,e;if(Array.isArray(t))i=new la.xo,i.ya(t);else{if(!(t instanceof la.xo))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new la.xo,e.ya(s);else{if(!(s instanceof la.xo))throw new Error("unexpected type");e=s}return i.equals(e)}static Ta(t,s){return la.Xn(Math.max(t,s)-Math.min(t,s),0,1)}static ba(t,s){const i=new la.xo;return i.Ao(Math.max(t.vo,s.vo)-Math.min(t.vo,s.vo)),i.Lo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Ro(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i}static xa(t,s){const i=new la.xo(0,0,0,1);return i.Ao(Math.max(t.vo,s.vo)-Math.min(t.vo,s.vo)),i.Lo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Oo(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i}static da(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ma(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},la.xo.va=Object.freeze(la.Qn(la.xo,1,1,1,1)),la.xo.Ia=Object.freeze(la.Qn(la.xo,0,0,0,1)),la.xo.Ca=Object.freeze(la.Qn(la.xo,0,0,0,0))}{const da=self.Cs;da.Ga=class{constructor(t,s){this._a=0,this.Da=0,t instanceof da.Ga?this.m(t):this.set(t||0,s||0)}set(t,s){this._a=+t,this.Da=+s}m(t){this._a=t._a,this.Da=t.Da}equals(t){return this._a===t._a&&this.Da===t.Da}Ea(t,s){return this._a===t&&this.Da===s}Vo(t,s){return t[s]===Math.fround(this._a)&&t[s+1]===Math.fround(this.Da)}Na(t){this._a=+t}Aa(){return this._a}La(t){this.Da=+t}Oa(){return this.Da}toArray(){return[this._a,this.Da]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this._a,t[s]=this.Da}offset(t,s){this._a+=+t,this.Da+=+s}scale(t,s){this._a*=t,this.Da*=s}Mt(t,s){this._a/=t,this.Da/=s}round(){this._a=Math.round(this._a),this.Da=Math.round(this.Da)}floor(){this._a=Math.floor(this._a),this.Da=Math.floor(this.Da)}ceil(){this._a=Math.ceil(this._a),this.Da=Math.ceil(this.Da)}angle(){return da.nr(0,0,this._a,this.Da)}Ra(){return this._a*this._a+this.Da*this.Da}length(){return da.tr(this._a,this.Da)}Pa(t,s){const i=this._a*s-this.Da*t;this.Da=this.Da*s+this._a*t,this._a=i}rotate(t){0!==t&&this.Pa(Math.sin(t),Math.cos(t))}ka(t,s,i){0===t||s===this._a&&i===this.Da||(this._a-=s,this.Da-=i,this.Pa(Math.sin(t),Math.cos(t)),this._a+=+s,this.Da+=+i)}move(t,s){0!==s&&(this._a+=Math.cos(t)*s,this.Da+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this._a/=t,this.Da/=t)}Xn(t,s){this._a=da.Xn(this._a,t,s),this.Da=da.Xn(this.Da,t,s)}vt(t){return this._a*t._a+this.Da*t.Da}reverse(){this._a=-this._a,this.Da=-this.Da}Fa(){let t=this._a;return this._a=this.Da,this.Da=-t,this}}}{const pa=self.Cs;pa.Rect=class{constructor(t,s,i,e){this.ja=NaN,this.za=NaN,this.Ba=NaN,this.Ua=NaN,this.ja=0,this.za=0,this.Ba=0,this.Ua=0,t instanceof pa.Rect?this.m(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.ja=+t,this.za=+s,this.Ba=+i,this.Ua=+e}Wa(t,s,i,e){t=+t,s=+s,this.ja=t,this.za=s,this.Ba=t+ +i,this.Ua=s+ +e}m(t){this.ja=+t.ja,this.za=+t.za,this.Ba=+t.Ba,this.Ua=+t.Ua}clone(){return new pa.Rect(this.ja,this.za,this.Ba,this.Ua)}static Qa(t,s){const i=new pa.Rect;return i.Ja(Math.min(t.ja,s.ja)),i.Ya(Math.min(t.za,s.za)),i.Va(Math.max(t.Ba,s.Ba)),i.Ha(Math.max(t.Ua,s.Ua)),i}static qa(t){return new pa.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.ja===t.ja&&this.za===t.za&&this.Ba===t.Ba&&this.Ua===t.Ua}Xa(t,s,i,e){return this.ja===t&&this.za===s&&this.width()===i&&this.height()===e}Vo(t,s){return t[s]===Math.fround(this.ja)&&t[s+1]===Math.fround(this.za)&&t[s+2]===Math.fround(this.Ba)&&t[s+3]===Math.fround(this.Ua)}Ja(t){this.ja=+t}Za(){return this.ja}Ya(t){this.za=+t}Ka(){return this.za}Va(t){this.Ba=+t}$a(){return this.Ba}Ha(t){this.Ua=+t}tu(){return this.Ua}toArray(){return[this.ja,this.za,this.Ba,this.Ua]}Bo(){return new Float64Array(this.toArray())}su(){return new DOMRect(this.ja,this.za,this.width(),this.height())}static iu(t){return pa.Qn(pa.Rect,t.left,t.top,t.right,t.bottom)}Uo(t,s){t[s++]=this.ja,t[s++]=this.za,t[s++]=this.Ba,t[s]=this.Ua}eu(t,s){t[s++]=this.ja,t[s++]=this.za,t[s++]=this.Ba,t[s++]=this.za,t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=this.ja,t[s]=this.Ua}nu(t,s,i){t[s++]=this.ja,t[s++]=this.za,t[s++]=i,t[s++]=this.Ba,t[s++]=this.za,t[s++]=i,t[s++]=this.Ba,t[s++]=this.Ua,t[s++]=i,t[s++]=this.ja,t[s++]=this.Ua,t[s]=i}width(){return this.Ba-this.ja}height(){return this.Ua-this.za}ru(){return(this.ja+this.Ba)/2}hu(){return(this.za+this.Ua)/2}offset(t,s){t=+t,s=+s,this.ja+=t,this.za+=s,this.Ba+=t,this.Ua+=s}offsetLeft(t){this.ja+=+t}offsetTop(t){this.za+=+t}ou(t){this.Ba+=+t}au(t){this.Ua+=+t}uu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.za<this.Ua?this.ja<this.Ba?this.Ua=this.za+this.width():this.Ua=this.za-this.width():this.ja<this.Ba?this.Ua=this.za-this.width():this.Ua=this.za+this.width()}lu(t,s){t=+t,s=+s,this.ja-=t,this.za-=s,this.Ba+=t,this.Ua+=s}cu(t,s){t=+t,s=+s,this.ja+=t,this.za+=s,this.Ba-=t,this.Ua-=s}multiply(t,s){this.ja*=t,this.za*=s,this.Ba*=t,this.Ua*=s}Mt(t,s){this.ja/=t,this.za/=s,this.Ba/=t,this.Ua/=s}fu(t){this.ja=+t-this.ja,this.Ba=+t-this.Ba}du(t){this.za=+t-this.za,this.Ua=+t-this.Ua}pu(t,s){const i=this.width(),e=this.height(),n=this.Za()+i*t,r=this.Ka()+e*s;this.Wa(n-e*s,r-i*t,e,i)}mu(){const t=this.ja;this.ja=this.Ba,this.Ba=t}gu(){const t=this.za;this.za=this.Ua,this.Ua=t}yu(t){const s=this.za;this.za=+t-this.Ua,this.Ua=+t-s}round(){this.ja=Math.round(this.ja),this.za=Math.round(this.za),this.Ba=Math.round(this.Ba),this.Ua=Math.round(this.Ua)}Mu(){this.ja=Math.ceil(this.ja),this.za=Math.ceil(this.za),this.Ba=Math.floor(this.Ba),this.Ua=Math.floor(this.Ua)}wu(){this.ja=Math.floor(this.ja),this.za=Math.floor(this.za),this.Ba=Math.ceil(this.Ba),this.Ua=Math.ceil(this.Ua)}floor(){this.ja=Math.floor(this.ja),this.za=Math.floor(this.za),this.Ba=Math.floor(this.Ba),this.Ua=Math.floor(this.Ua)}ceil(){this.ja=Math.ceil(this.ja),this.za=Math.ceil(this.za),this.Ba=Math.ceil(this.Ba),this.Ua=Math.ceil(this.Ua)}Xn(t,s,i,e){this.ja=Math.max(this.ja,+t),this.za=Math.max(this.za,+s),this.Ba=Math.min(this.Ba,+i),this.Ua=Math.min(this.Ua,+e)}Su(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.ja=pa.Xn(this.ja,t,i),this.za=pa.Xn(this.za,s,e),this.Ba=pa.Xn(this.Ba,t,i),this.Ua=pa.Xn(this.Ua,s,e)}normalize(){this.ja>this.Ba&&this.mu(),this.za>this.Ua&&this.gu()}Tu(t){return!(t.Ba<this.ja||t.Ua<this.za||t.ja>this.Ba||t.za>this.Ua)}bu(t,s,i){return!(t.Ba+s<this.ja||t.Ua+i<this.za||t.ja+s>this.Ba||t.za+i>this.Ua)}xu(t,s){return t>=this.ja&&t<=this.Ba&&s>=this.za&&s<=this.Ua}vu(t){return t.ja>=this.ja&&t.za>=this.za&&t.Ba<=this.Ba&&t.Ua<=this.Ua}Iu(t){t.ja<this.ja&&(this.ja=+t.ja),t.za<this.za&&(this.za=+t.za),t.Ba>this.Ba&&(this.Ba=+t.Ba),t.Ua>this.Ua&&(this.Ua=+t.Ua)}Cu(t){this.ja=pa.Ct(t.ja,t.Ba,this.ja),this.za=pa.Ct(t.za,t.Ua,this.za),this.Ba=pa.Ct(t.ja,t.Ba,this.Ba),this.Ua=pa.Ct(t.za,t.Ua,this.Ua)}}}{const ma=self.Cs;ma.Gu=class{constructor(t,s,i,e,n,r,h,o){this._u=NaN,this.Du=NaN,this.Eu=NaN,this.Nu=NaN,this.Au=NaN,this.Lu=NaN,this.Ou=NaN,this.Ru=NaN,this._u=0,this.Du=0,this.Eu=0,this.Nu=0,this.Au=0,this.Lu=0,this.Ou=0,this.Ru=0,t instanceof ma.Gu?this.m(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this._u=+t,this.Du=+s,this.Eu=+i,this.Nu=+e,this.Au=+n,this.Lu=+r,this.Ou=+h,this.Ru=+o}Pu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}m(t){this._u=t._u,this.Du=t.Du,this.Eu=t.Eu,this.Nu=t.Nu,this.Au=t.Au,this.Lu=t.Lu,this.Ou=t.Ou,this.Ru=t.Ru}equals(t){return this._u===t._u&&this.Du===t.Du&&this.Eu===t.Eu&&this.Nu===t.Nu&&this.Au===t.Au&&this.Lu===t.Lu&&this.Ou===t.Ou&&this.Ru===t.Ru}ku(t){this._u=+t}Fr(){return this._u}Fu(t){this.Du=+t}jr(){return this.Du}ju(t){this.Eu=+t}zr(){return this.Eu}zu(t){this.Nu=+t}Br(){return this.Nu}Bu(t){this.Au=+t}Ur(){return this.Au}Uu(t){this.Lu=+t}Wr(){return this.Lu}Wu(t){this.Ou=+t}Qr(){return this.Ou}Qu(t){this.Ru=+t}Jr(){return this.Ru}Ju(){return new DOMQuad(new DOMPoint(this._u,this.Du),new DOMPoint(this.Eu,this.Nu),new DOMPoint(this.Au,this.Lu),new DOMPoint(this.Ou,this.Ru))}static Yu(t){return ma.Qn(ma.Gu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this._u,this.Du,this.Eu,this.Nu,this.Au,this.Lu,this.Ou,this.Ru]}Bo(){return new Float64Array(this.toArray())}Uo(t,s){t[s++]=this._u,t[s++]=this.Du,t[s++]=this.Eu,t[s++]=this.Nu,t[s++]=this.Au,t[s++]=this.Lu,t[s++]=this.Ou,t[s]=this.Ru}Vu(t,s,i){t[s++]=this._u,t[s++]=this.Du,t[s++]=i,t[s++]=this.Eu,t[s++]=this.Nu,t[s++]=i,t[s++]=this.Au,t[s++]=this.Lu,t[s++]=i,t[s++]=this.Ou,t[s++]=this.Ru,t[s]=i}offset(t,s){t=+t,s=+s,this._u+=t,this.Du+=s,this.Eu+=t,this.Nu+=s,this.Au+=t,this.Lu+=s,this.Ou+=t,this.Ru+=s}round(){this._u=Math.round(this._u),this.Du=Math.round(this.Du),this.Eu=Math.round(this.Eu),this.Nu=Math.round(this.Nu),this.Au=Math.round(this.Au),this.Lu=Math.round(this.Lu),this.Ou=Math.round(this.Ou),this.Ru=Math.round(this.Ru)}floor(){this._u=Math.floor(this._u),this.Du=Math.floor(this.Du),this.Eu=Math.floor(this.Eu),this.Nu=Math.floor(this.Nu),this.Au=Math.floor(this.Au),this.Lu=Math.floor(this.Lu),this.Ou=Math.floor(this.Ou),this.Ru=Math.floor(this.Ru)}ceil(){this._u=Math.ceil(this._u),this.Du=Math.ceil(this.Du),this.Eu=Math.ceil(this.Eu),this.Nu=Math.ceil(this.Nu),this.Au=Math.ceil(this.Au),this.Lu=Math.ceil(this.Lu),this.Ou=Math.ceil(this.Ou),this.Ru=Math.ceil(this.Ru)}Hu(t){this._u=t.ja,this.Du=t.za,this.Eu=t.Ba,this.Nu=t.za,this.Au=t.Ba,this.Lu=t.Ua,this.Ou=t.ja,this.Ru=t.Ua}qu(t,s){0===s?this.Hu(t):this.Xu(t,Math.sin(s),Math.cos(s))}Xu(t,s,i){const e=t.ja*s,n=t.za*s,r=t.Ba*s,h=t.Ua*s,o=t.ja*i,a=t.za*i,u=t.Ba*i,l=t.Ua*i;this._u=o-n,this.Du=a+e,this.Eu=u-n,this.Nu=a+r,this.Au=u-h,this.Lu=l+r,this.Ou=o-h,this.Ru=l+e}Zu(t){t.set(Math.min(this._u,this.Eu,this.Au,this.Ou),Math.min(this.Du,this.Nu,this.Lu,this.Ru),Math.max(this._u,this.Eu,this.Au,this.Ou),Math.max(this.Du,this.Nu,this.Lu,this.Ru))}xu(t,s){let i=this.Eu-this._u,e=this.Nu-this.Du;const n=this.Au-this._u,r=this.Lu-this.Du,h=t-this._u,o=s-this.Du;let a=i*i+e*e,u=i*n+e*r,l=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return p>=0&&m>0&&p+m<1||(i=this.Ou-this._u,e=this.Ru-this.Du,a=i*i+e*e,u=i*n+e*r,l=i*h+e*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d,p>=0&&m>0&&p+m<1)}ru(){return(this._u+this.Eu+this.Au+this.Ou)/4}hu(){return(this.Du+this.Nu+this.Lu+this.Ru)/4}Ku(t,s,i,e){return!(!this.xu(t,s)&&!this.xu(i,e))||ma.kr(t,s,i,e,this)}$u(t){let s=t.ru(),i=t.hu();if(this.xu(s,i))return!0;if(s=this.ru(),i=this.hu(),t.xu(s,i))return!0;const e=this._u,n=this.Du,r=this.Eu,h=this.Nu,o=this.Au,a=this.Lu,u=this.Ou,l=this.Ru;return ma.kr(e,n,r,h,t)||ma.kr(r,h,o,a,t)||ma.kr(o,a,u,l,t)||ma.kr(u,l,e,n,t)}tl(){const t=this._u,s=this.Du;this._u=this.Eu,this.Du=this.Nu,this.Eu=this.Au,this.Nu=this.Lu,this.Au=this.Ou,this.Lu=this.Ru,this.Ou=t,this.Ru=s}sl(){this.il(0,2),this.il(1,3),this.il(6,4),this.il(7,5)}el(){this.il(0,6),this.il(1,7),this.il(2,4),this.il(3,5)}nl(){this.il(2,6),this.il(3,7)}il(t,s){const i=this.rl(t);this.hl(t,this.rl(s)),this.hl(s,i)}rl(t){switch(t){case 0:return this._u;case 1:return this.Du;case 2:return this.Eu;case 3:return this.Nu;case 4:return this.Au;case 5:return this.Lu;case 6:return this.Ou;case 7:return this.Ru;default:throw new RangeError("invalid quad point index")}}hl(t,s){switch(s=+s,t){case 0:this._u=s;break;case 1:this.Du=s;break;case 2:this.Eu=s;break;case 3:this.Nu=s;break;case 4:this.Au=s;break;case 5:this.Lu=s;break;case 6:this.Ou=s;break;case 7:this.Ru=s;break;default:throw new RangeError("invalid quad point index")}}}}{const ga=self.Cs,ya=(self.assert,[0,0,1,0,1,1,0,1]),Ma=ga.Qn(ga.Gu);ga.ol=class extends ga.Un{constructor(t,s=!0){super(),t||(t=ya),this.al=Float64Array.from(t),this.ul=new ga.Rect,this.ll=!0,this.cl=s}Jn(){}fl(){return this.al}dl(){return this.al.length/2}pl(t){this.al.length===t.length?this.al.set(t):this.al=Float64Array.from(t),this.ll=!0}ml(){this.pl(ya)}m(t){this.pl(t.al)}gl(){this.ll=!0}yl(){if(!this.ll)return;const t=this.al;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.ul.set(s,i,e,n),this.ll=!1}Hu(t,s,i){let e=this.al;8!==e.length&&(e=new Float64Array(8),this.al=e),e[0]=t.Za()-s,e[1]=t.Ka()-i,e[2]=t.$a()-s,e[3]=t.Ka()-i,e[4]=t.$a()-s,e[5]=t.tu()-i,e[6]=t.Za()-s,e[7]=t.tu()-i,this.ul.m(t),0===s&&0===i||this.ul.offset(-s,-i),this.ll=!1}Ml(t,s,i){Ma.m(t),Ma.offset(s,i),this.pl(Ma.toArray()),this.ll=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.wl(t,s,e,n)}wl(t,s,i,e){const n=this.al;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.ll=!0}offset(t,s){const i=this.al;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}xu(t,s){const i=this.al;if(t===i[0]&&s===i[1])return!0;this.yl();const e=this.ul,n=e.Za()-110,r=e.Ka()-101,h=e.$a()+131,o=e.tu()+120;let a=0,u=0,l=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,l=t):(a=t,l=n),r<s?(u=r,c=s):(u=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,M=i.length;e<M;e+=2){const w=(e+2)%M,S=i[e],T=i[e+1],b=i[w],x=i[w+1];ga.Pr(n,r,t,s,a,l,u,c,S,T,b,x)&&++g,ga.Pr(h,o,t,s,f,p,d,m,S,T,b,x)&&++y}return g%2==1||y%2==1}Sl(t,s,i){const e=t.al,n=this.al;if(this.xu(e[0]+s,e[1]+i))return!0;if(t.xu(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],u=n[h],l=n[h+1];let c=0,f=0,d=0,p=0;o<u?(c=o,d=u):(c=u,d=o),a<l?(f=a,p=l):(f=l,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(ga.Pr(o,a,u,l,c,d,f,p,h,m,g,y))return!0}}return!1}Ku(t,s,i,e,n,r){if(this.xu(i-t,e-s))return!0;if(this.xu(n-t,r-s))return!0;let h=0,o=0,a=0,u=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,u=r):(o=r,u=e);const l=this.al;for(let c=0,f=l.length;c<f;c+=2){const d=(c+2)%f,p=l[c]+t,m=l[c+1]+s,g=l[d]+t,y=l[d+1]+s;if(ga.Pr(i,e,n,r,h,a,o,u,p,m,g,y))return!0}return!1}sl(t){const s=this.al;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.ll=!0}el(t){const s=this.al;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.ll=!0}nl(){const t=this.al;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.ll=!0}Tl(){const t=this.al;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.dl()}bl(){const t=this.al;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.dl()}xl(){return this.al}vl(){return this.dl()}Il(){return this.cl}}}{const wa=self.Cs;wa.Cl=class extends wa.Un{constructor(t){if(super(),this.Gl=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Jn(){this._l(),this.Gl=null}Dl(){return 0===this.Gl.size}_l(){const t=this.Gl;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Gl;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Js(t,s){const i=this.Gl.get(t);return i?i.get(s):i}Qs(t,s){const i=this.Gl.get(t);return!!i&&i.has(s)}El(t,s){const i=this.Gl,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Nl(t){const s=this.Gl,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Al(){let t=0;for(const s of this.Gl.values())t+=s.size;return t}*values(){for(const t of this.Gl.values())yield*t.values()}*Ll(){for(const[t,s]of this.Gl.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Gl.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Sa=self.Cs;Sa.Ol=class extends Sa.Un{constructor(){super(),this.Rl=new Set,this.Pl=[],this.kl=!1}Jn(){this._l()}_l(){this.Rl.clear(),Sa.wh(this.Pl),this.kl=!1}Fl(t){this.Rl.has(t)||(this.Rl.add(t),this.kl||this.Pl.push(t))}Qs(t){return this.Rl.has(t)}El(t){this.Rl.delete(t)&&(this.kl=!0)}Al(){return this.Rl.size}Dl(){return 0===this.Rl.size}jl(){return this.kl&&(this.zl(),this.kl=!1),this.Pl}zl(){const t=this.Pl;Sa.wh(t);for(const s of this.Rl)t.push(s)}}}{const Ta=self.Cs,ba=new Map,xa=new Map,va=new Map,Ia=new Map,Ca=new Map,Ga=new Map,_a=new Map,Da=new Map,Ea=new Map;Ea.set("linear","noease"),Ea.set("default","noease");const Na=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Aa=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],La=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Bl=class t{constructor(){}static Ul(){return"default"}static Wl(){return"noease"}static Ql(t){return La.get(t)}static Jl(s,...i){let e,n;this.Yl(),s?(va.has(s)||va.set(s,new Map),e=va.get(s),n=[...e.keys()].filter((i=>!t.Vl(i,s)||t.Vl(i,s).transition.Hl()))):(e=Ca,n=[...e.keys()]);const r=n.sort();return[...xa.keys()].concat(r).filter((t=>!i.includes(t)))}static ql(){this.Yl();const t=[...Ca.keys()];return t.sort(),[...xa.keys()].concat(t)}static Xl(){this.Yl();const t=[...Ca.keys()];return t.sort(),t}static Zl(t){for(const s of Na)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Aa)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Kl(t){return this.Yl(),[...xa.keys()].includes(t)}static $l(s){const i=Ea.get(s);return i?ba.get(i):t.Kl(s)?ba.get(s):_a.has(s)?_a.get(s):void 0}static tc(t){return this.Yl(),Da.get(t)}static sc(s,i){this.Yl();const e=t.$l(s);if(e)return e;if(!i)throw new Error("missing ease function");return va.get(i).get(s)}static Vl(t,s){this.Yl();const i=Ia.get(s);if(i)return i.get(t)}static ec(s,i){return this.Yl(),!!t.$l(s)||!!va.get(i).get(s)}static nc(s){this.Yl();return t.$l(s)||Ca.get(s)}static rc(t){return this.Yl(),Ga.get(t)}static hc(t){return this.Yl(),this.ql()[t]}static oc(t,s){return this.Yl(),this.Jl(s).indexOf(t)}static ac(t){return this.oc(t)}static Yl(){0===ba.size&&(this.uc("default",(()=>{})),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.lc("cubicbezier",this.cc),this.lc("spline",this.fc))}static uc(s,i,e=!1){if("function"==typeof i)t.dc(s,i,"predefined");else{if(!Ta.xe(i))throw new Error("unexpected arguments");if(self.mc){const n=Ta.Qn(self.mc,s,e);n.yc(i),t.dc(s,((t,s,i,e)=>n.Mc(t,s,i,e)),"predefined"),Da.set(s,n)}else{const n=Ta.Qn(Ta.wc,[s,i.map((t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee]))],!1);n.Sc(e),t.dc(s,((t,s,i,e)=>n.Mc(t,s,i,e)),"predefined")}}}static lc(s,i){t.dc(s,i,"private")}static Tc(s,i,e,n){this.Yl(),t.dc(s,i,"custom",e,n)}static bc(t,s){if(this.Kl(t))return;if([..._a.keys()].includes(t))return;const i=va.get(s);i&&i.delete(t);const e=Ia.get(s);e&&e.delete(t)}static dc(t,s,i,e,n){switch(i){case"predefined":ba.set(t,s),xa.set(t,s);break;case"custom":e?(va.has(e)||va.set(e,new Map),Ia.has(e)||Ia.set(e,new Map),va.get(e).set(t,s),Ia.get(e).set(t,n)):(Ca.set(t,s),Ga.set(t,n));break;case"private":ba.set(t,s),_a.set(t,s);break;default:throw new Error("unexpected ease mode")}}static xc(t,s,i,e){return 0===e?s:i*t/e+s}static cc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static fc(t,s,i,e,n,r,h,o,a,u){if(e===n&&r===h)return t;const l=Ba(t,s,e,r,o,u),c=Pa(i,n,h,a),f=ka(i,n,h,a),d=Fa(i,n,h,a);return ja(l,c,f,d)}static vc(t,s,i,e){const n=[],r=Pa(t,s,i,e),h=ka(t,s,i,e),o=Fa(t,s,i,e);for(let t=0;t<Oa;++t){const s=ja(t*Ra,r,h,o);n.push(s)}return n}};const Oa=11,Ra=1/(Oa-1),Pa=(t,s,i,e)=>e-3*i+3*s-t,ka=(t,s,i,e)=>3*i-6*s+3*t,Fa=(t,s,i,e)=>3*(s-t),ja=(t,s,i,e)=>((s*t+i)*t+e)*t,za=(t,s,i,e)=>3*s*t*t+2*i*t+e,Ba=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],u=Oa-1;for(r[Oa-1];o!=u&&a<=t;)o++,a=r[o],h+=Ra;o--,a=r[o];let l=h+(t-a)/(r[o+1]-a)*Ra;const c=Pa(s,i,e,n),f=ka(s,i,e,n),d=Fa(s,i,e,n),p=za(l,c,f,d);if(0===p)return l;if(p>=.01){for(let s=0;s<4;++s)l-=(ja(l,c,f,d)-t)/za(l,c,f,d);return l}{let s,i,e=h,n=h+Ra,r=0;do{l=e+(n-e)/2;let h=ja(l,c,f,d)-t;h>0?n=l:e=l,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return l}}}{let Ua=function(t){Wa.ae(t)};0;const Wa=self.Cs;Wa.Ic=class{constructor(t){this.Cc=[],this.Hn=t||"",this.Gc=0}Jn(){this._l(),this.Cc=null}_c(){return this.Hn}_l(){Wa.Sh(this.Cc),this.Gc=0}Dc(){return this.Gc}Ec(t=Math.random()*this.Dc()){let s=0;for(const[i,e]of this.Cc)if(s+=i,t<s)return e;return 0}Nc(){return!!this.Cc.length}Ac(t,s){Ua(s),this.Gc+=t,this.Cc.push([t,s])}Lc(t,s){Ua(s);const i=0===t;for(let e=0;e<this.Cc.length;e++){const n=this.Cc[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Cc.splice(e,1),this.Gc-=n[0];break}}}Oc(){return JSON.stringify(this.Cc)}static Rc(t,s){const i=new Wa.Ic(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Ac(s,e)}return i}}}{const Qa=self.Cs;let Ja=0;Qa.Pc=class{constructor(t,s){this.kc=t,this.Fc=s,this.jc=Ja++,this.kc.zc("runtime","screen-reader-text",{type:"create",id:this.jc,text:this.Fc})}Jn(){this.kc.zc("runtime","screen-reader-text",{type:"release",id:this.jc}),this.kc=null,this.Fc="",this.jc=-1}Bc(t){this.Fc!==t&&(this.Fc=t,this.kc.zc("runtime","screen-reader-text",{type:"update",id:this.jc,text:this.Fc}))}}}self.Cs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Uc=!1,this.Wc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Wc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Uc=!0}};{const Ya=self.Cs;self.assert;Ya.Event.Qc=class extends Ya.Un{constructor(t){super(),this.Jc=t,this.Yc=[],this.Vc=new Set,this.Hc=[],this.qc=new Set,this.Xc=0,this.Zc=[]}Jn(){this.Xc>0||(Ya.wh(this.Yc),this.Vc.clear(),Ya.wh(this.Hc),this.qc.clear(),Ya.wh(this.Zc),Ya.Jn(this))}Kc(t,s){if(this.$c())this.Zc.push({tf:"add",sf:t,capture:s});else if(s){if(this.Vc.has(t))return;this.Yc.push(t),this.Vc.add(t)}else{if(this.qc.has(t))return;this.Hc.push(t),this.qc.add(t)}}if(t,s){this.$c()?this.Zc.push({tf:"remove",sf:t,capture:s}):s?this.Vc.has(t)&&(this.Vc.delete(t),Ya.Ch(this.Yc,t)):this.qc.has(t)&&(this.qc.delete(t),Ya.Ch(this.Hc,t))}ef(){return!this.Yc.length&&!this.Hc.length}$c(){return this.Xc>0}nf(){const t=new Set,s=new Set;for(const i of this.Zc)if("add"===i.tf)this.Kc(i.sf,i.capture),i.capture?s.delete(i.sf):t.delete(i.sf);else{if("remove"!==i.tf)throw new Error("invalid op");i.capture?(this.Vc.delete(i.sf),s.add(i.sf)):(this.qc.delete(i.sf),t.add(i.sf))}Ya.Dh(this.Hc,t),Ya.Dh(this.Yc,s),Ya.wh(this.Zc)}rf(t){this.hf();let s=!1;for(let i=0,e=this.Yc.length;i<e;++i)if(this.Yc[i](t),t.Uc){s=!0;break}if(!s)for(let s=0,i=this.Hc.length;s<i&&(this.Hc[s](t),!t.Uc);++s);return this.af(),!t.defaultPrevented}uf(t){this.hf();for(let s=0,i=this.Yc.length;s<i;++s)this.Yc[s](t);for(let s=0,i=this.Hc.length;s<i;++s)this.Hc[s](t);return this.af(),!0}hf(){this.Xc++}af(){this.Xc--,0===this.Xc&&this.Zc.length>0&&this.nf()}lf(t){t?this.hf():this.af()}cf(t){let s=[];for(let i=0,e=this.Yc.length;i<e;++i){let e=this.Yc[i];s.push(Ya.ff((()=>e(t))))}for(let i=0,e=this.Hc.length;i<e;++i){let e=this.Hc[i];s.push(Ya.ff((()=>e(t))))}return Promise.all(s).then((()=>!t.defaultPrevented))}df(t){const s=[];this.hf();for(let i=0,e=this.Yc.length;i<e;++i){const e=this.Yc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Hc.length;i<e;++i){const e=this.Hc[i](t);e instanceof Promise&&s.push(e)}return this.af(),s.length?Promise.all(s).then((()=>!t.defaultPrevented)):!t.defaultPrevented}async pf(t){return await this.df(t)}async mf(t){this.hf();for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Hc.length;s<i;++s){const i=this.Hc[s](t);i instanceof Promise&&await i}return this.af(),!t.defaultPrevented}*gf(t){this.hf();for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);Ya.To(i)&&(yield*i)}for(let s=0,i=this.Hc.length;s<i;++s){const i=this.Hc[s](t);Ya.To(i)&&(yield*i)}this.af()}}}{const Va=self.Cs;Va.Event.yf=class extends Va.Un{constructor(){super(),this.Mf=new Map,this.wf=!1}Jn(){if(this.wf)throw new Error("already released");this.Sf(),this.wf=!0,Va.Jn(this)}Yn(){return this.wf}Sf(){if(this.Mf){for(let t of this.Mf.values())t.Jn();this.Mf.clear()}}Tf(t,s){let i=this.Mf.get(t);return i||(s?(i=Va.Qn(Va.Event.Qc,t),this.Mf.set(t,i),i):null)}bf(t){return this.Mf.has(t)}addEventListener(t,s,i){this.Tf(t,!0).Kc(s,!!i)}removeEventListener(t,s,i){let e=this.Tf(t,!1);e&&(e.if(s,!!i),e.ef()&&this.Mf.delete(t))}dispatchEvent(t){const s=this.Tf(t.type,!1);return!s||(t.cancelable?s.rf(t):s.uf(t))}xf(t){const s=this.Tf(t.type,!1);return s?(t.Wc=!0,s.cf(t)):Promise.resolve(!0)}async vf(t){const s=this.Tf(t.type,!1);if(!s)return!0;this.Mf.delete(t.type),t.Wc=!0;const i=await s.cf(t);return s.Jn(),i}async If(t){const s=this.Tf(t.type,!1);return!s||await s.pf(t)}Cf(t){const s=this.Tf(t.type,!1);return!s||s.df(t)}async Gf(t){const s=this.Tf(t.type,!1);return!s||await s.mf(t)}_f(t){const s=this.Tf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.gf(t)}lf(t){for(const s of this.Mf.values())s.lf(t)}}}{let Ha=function(t){tu=Ka&&0===su?requestIdleCallback(qa,{timeout:35}):setTimeout(qa,su>0?1:t)},qa=function(t){if(tu=-1,!$a.length)return;let s=performance.now(),i=s,e=0,n=0;do{Xa($a.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while($a.length&&(Ka&&0===su&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===tu&&$a.length){let t=i-s;Ha(Math.max(16-t,4))}},Xa=function(t){let s;try{s=t.sf()}catch(s){return void t.reject(s)}t.resolve(s)};0;const Za=self.Cs,Ka="undefined"!=typeof requestIdleCallback;let $a=[],tu=-1,su=0,iu=Za.Hs.Qs("disable-asyncify");iu&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Za.ff=function(t){let s=null;return Za.Rs&&(s=Za.Zi()),new Promise(((i,e)=>{$a.push({sf:t,resolve:i,reject:e,stack:s}),iu?Xa($a.pop()):-1===tu&&Ha(16)}))},Za.ff.Df=function(t){if(t)++su;else if(--su,su<0)throw new Error("already turned off high throughput mode")}}{let eu=function(){hu=-1},nu=function(){ou=-1,au=-1;let t=Date.now();for(let s of uu)if(s.Ef(t)){let t=s.Nf();(-1===au||t<au)&&(au=t)}else uu.delete(s);if(-1!==au){let s=Math.max(au-t+100,1e3);ou=self.setTimeout(nu,s)}};0;const ru=self.Cs;let hu=-1;ru.Af=function(){return-1===hu&&(hu=Date.now(),self.setTimeout(eu,16)),hu};let ou=-1,au=-1,uu=new Set;ru.Lf=class{constructor(t,s){this.Of=t,this.Rf=1e3*s,this.Pf=0,this.kf=!1}Ff(){let t=ru.Af();this.Pf=t+this.Rf,this.kf||(uu.add(this),this.kf=!0),-1===ou?(au=this.Pf,ou=self.setTimeout(nu,this.Rf+100)):this.Pf<au&&au>t+1e3&&(self.clearTimeout(ou),au=this.Pf,ou=self.setTimeout(nu,this.Rf+100))}Ef(t){return!(t>=this.Pf&&(this.Of()?(this.Pf=t+this.Rf,0):(this.kf=!1,1)))}Nf(){return this.Pf}jf(){this.kf&&(uu.delete(this),this.kf=!1,0===uu.size&&-1!==ou&&(self.clearTimeout(ou),ou=-1,au=-1))}Jn(){this.jf(),this.Of=null}}}{const lu=self.Cs;lu.zf=class t{constructor(t){this.Bf=!1,this.Uf=t}Wf(){this.Bf||(this.Bf=!0,this.Uf&&(this.Uf(),this.Uf=null))}Qf(){return this.Bf}Jn(){this.Wf()}static Jn(s){return new t((()=>s.Jn()))}static Jf(t,s,i,e,n){if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),s.includes(" ")){s=s.split(" ");const n=new lu.Yf;for(let r of s)t.addEventListener(r,i,e),n.Fl(lu.Qn(lu.zf,(()=>t.removeEventListener(r,i,e))));return n}return t.addEventListener(s,i,e),lu.Qn(lu.zf,(()=>t.removeEventListener(s,i,e)))}},lu.Vf=class extends lu.zf{Hf(t){this.Uf=t}},lu.Yf=class extends lu.zf{constructor(...t){super(),this.qf=new Set;for(let s of t)this.Fl(s)}Fl(...t){if(this.Bf)throw new Error("already disposed");for(let s of t)this.qf.add(s)}Xf(t){if(this.Bf)throw new Error("already disposed");this.qf.delete(t)}Zf(){if(this.Bf)throw new Error("already disposed");if(this.qf){for(let t of this.qf)t.Wf();this.qf.clear()}}Qf(){return this.Bf}Wf(){if(this.Bf)throw new Error("already disposed");this.Bf=!0;for(let t of this.qf)t.Wf();this.qf.clear(),this.qf=null}Jn(){this.Wf()}}}{const cu=self.Cs;cu.Kf=class extends cu.Un{constructor(){super(),this.$f=0,this.Da=0,this.td=0,this.sd=0}Fl(t){t=+t,this.Da=t-this.$f,this.td=this.sd+this.Da,this.$f=this.td-this.sd-this.Da,this.sd=this.td}ed(t){this.sd-=+t}Js(){return this.sd}Ff(){this.$f=0,this.Da=0,this.td=0,this.sd=0}Set(t){this.$f=0,this.Da=0,this.td=0,this.sd=+t}nd(t){this.$f=t.$f,this.Da=t.Da,this.td=t.td,this.sd=t.sd}Jn(){}}}{const fu=self.Cs,du={},pu=!0;du.rd=function(t){this.hd=t,this.right=this.hd.od,this.left=this.hd.od,this.parent=null,this.color=!1,this.key=null},du.ad=function(t){this.size=0,this.od=new du.rd(this),this.od.color=!1,this.root=this.od,this.root.parent=this.od,this.compare=t||this.ud},du.ad.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},du.ad.prototype.clone=function(){var t=new du.ad(this.compare);return t.ld(this),t},du.ad.prototype.clear=function(){this.size=0,this.od=new du.rd(this),this.od.color=!1,this.root=this.od,this.root.parent=this.od},du.ad.prototype.fd=function(t){var s=t.right;t.right=s.left,s.left!=this.od&&(s.left.parent=t),s.parent=t.parent,t.parent==this.od?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},du.ad.prototype.dd=function(t){var s=t.left;t.left=s.right,s.right!=this.od&&(s.right.parent=t),s.parent=t.parent,t.parent==this.od?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},du.ad.prototype.pd=function(t){if(this.contains(t))this.md(t).key=t;else{var s=new du.rd(this);s.key=t;for(var i=this.od,e=this.root;e!=this.od;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.od?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.od,s.right=this.od,s.color=pu,this.gd(s),this.size++}},du.ad.prototype.gd=function(t){for(;t!=this.od&&t!=this.root&&t.parent.color==pu;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==pu?(t.parent.color=!1,s.color=!1,t.parent.parent.color=pu,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.fd(t)),t.parent.color=!1,t.parent.parent.color=pu,t.parent.parent!=this.od&&this.dd(t.parent.parent)):(s=t.parent.parent.left).color==pu?(t.parent.color=!1,s.color=!1,t.parent.parent.color=pu,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=pu,t.parent.parent!=this.od&&this.fd(t.parent.parent))}this.root.color=!1},du.ad.prototype.yd=function(t){var s,i;(i=(s=t.left==this.od||t.right==this.od?t:this.Md(t)).left!=this.od?s.left:s.right).parent=s.parent,s.parent==this.od?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.wd(i),this.size--},du.ad.prototype.wd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==pu&&(s.color=!1,t.parent.color=pu,this.fd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=pu,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=pu,this.dd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.fd(t.parent),t=this.root)):((s=t.parent.left).color==pu&&(s.color=!1,t.parent.color=pu,this.dd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=pu,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=pu,this.fd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.dd(t.parent),t=this.root))}t.color=!1},du.ad.prototype.remove=function(t){var s=this.md(t);if(s!=this.od){var i=s.key;return this.yd(s),i}return null},du.ad.prototype.Sd=function(t,s){this.remove(s)},du.ad.prototype.min=function(t){for(;t.left!=this.od;)t=t.left;return t},du.ad.prototype.max=function(t){for(;t.right!=this.od;)t=t.right;return t},du.ad.prototype.Md=function(t){if(t.right!=this.od)return this.min(t.right);for(var s=t.parent;s!=this.od&&t==s.right;)t=s,s=s.parent;return s},du.ad.prototype.Td=function(t){if(t.left!=this.od)return this.max(t.left);for(var s=t.parent;s!=this.od&&t==s.left;)t=s,s=s.parent;return s},du.ad.prototype.bd=function(t){if(this.size>0){var s=this.md(t);if(s==this.od)return null;if(s.right!=this.od)return this.min(s.right).key;for(var i=s.parent;i!=this.od&&s==i.right;)s=i,i=i.parent;return i!=this.od?i.key:null}return null},du.ad.prototype.xd=function(t){if(this.size>0){var s=this.md(t);if(s==this.od)return null;if(s.left!=this.od)return this.max(s.left).key;for(var i=s.parent;i!=this.od&&s==i.left;)s=i,i=i.parent;return i!=this.od?i.key:null}return null},du.ad.prototype.vd=function(){return this.min(this.root).key},du.ad.prototype.Id=function(){return this.max(this.root).key},du.ad.prototype.md=function(t){for(var s=this.root;s!=this.od&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},du.ad.prototype.contains=function(t){return null!=this.md(t).key},du.ad.prototype.getValues=function(){var t=[];return this.forEach((function(s){t.push(s)})),t},du.ad.prototype.ld=function(t){if("array"==du.Cd(t))for(var s=0;s<t.length;s++)this.pd(t[s]);else if("function"==du.Cd(t.forEach))t.forEach(this.pd,this);else if("function"==du.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.pd(i[s])}else if("object"==du.Cd(t))for(var e in t)this.pd(t[e])},du.ad.prototype.Gd=function(t){if("array"==du.Cd(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==du.Cd(t.forEach))t.forEach(this.Sd,this);else if("function"==du.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==du.Cd(t))for(var e in t)this.remove(t[e])},du.ad.prototype._d=function(t){if("array"==du.Cd(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==du.Cd(t.forEach))return t.every(this.contains,this);if("function"==du.Cd(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==du.Cd(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},du.ad.prototype.range=function(t,s){var i=[];return this.Dd((function(t){i.push(t)}),t,s),i},du.ad.prototype.Ed=function(t,s){if(!this.Nd())for(var i=this.min(this.root);i!=this.od;){if(t.call(s,i.key,this))return;i=this.Md(i)}},du.ad.prototype.Ad=function(t,s,i){if(!this.Nd())for(var e=this.md(s);e!=this.od;){if(t.call(i,e.key,this))return;e=this.Md(e)}},du.ad.prototype.traverseTo=function(t,s,i){if(!this.Nd())for(var e=this.min(this.root),n=this.md(s);e!=n;){if(t.call(i,e.key,this))return;e=this.Md(e)}},du.ad.prototype.Dd=function(t,s,i,e){if(!this.Nd())for(var n=this.md(s),r=this.md(i);n!=r;){if(t.call(e,n.key,this))return;n=this.Md(n)}},du.ad.prototype.Ld=function(t,s){if(!this.Nd())for(var i=this.max(this.root);i!=this.od;){if(t.call(s,i.key,this))return;i=this.Td(i)}},du.ad.prototype.forEach=function(t,s){if(!this.Nd())for(var i=this.min(this.root);i!=this.od;i=this.Md(i))t.call(s,i.key,i.key,this)},du.ad.prototype.some=function(t,s){if(this.Nd())return!1;for(var i=this.min(this.root);i!=this.od;i=this.Md(i))if(t.call(s,i.key,i.key,this))return!0;return!1},du.ad.prototype.every=function(t,s){if(this.Nd())return!1;for(var i=this.min(this.root);i!=this.od;i=this.Md(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},du.ad.prototype.map=function(t,s){var i=[];if(this.Nd())return i;for(var e=this.min(this.root);e!=this.od;e=this.Md(e))i.push(t.call(s,e.key,e.key,this));return i},du.ad.prototype.filter=function(t,s){var i=[];if(this.Nd())return i;for(var e=this.min(this.root);e!=this.od;e=this.Md(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},du.ad.prototype.Od=function(){return this.size},du.ad.prototype.Nd=function(){return 0==this.size},du.ad.prototype.isSubsetOf=function(t){var s=du.Od(t);if(this.Od()>s)return!1;var i=0;if(this.Nd())return!0;for(var e=this.min(this.root);e!=this.od;e=this.Md(e))du.contains.call(t,t,e.key)&&i++;return i==this.Od()},du.ad.prototype.intersection=function(t){var s=new du.ad(this.compare);if(this.Nd())return s;for(var i=this.min(this.root);i!=this.od;i=this.Md(i))t.contains.call(t,i.key,i.key,this)&&s.pd(i.key);return s},fu.ad=class extends fu.Un{constructor(t){super(),this.Rd=new du.ad(t),this.Pd=!1,this.kd=new Set,this.Fd=new Set}Fl(t){this.Pd?this.Rd.contains(t)?this.Fd.delete(t):this.kd.add(t):this.Rd.pd(t)}Xf(t){this.Pd?this.Rd.contains(t)?this.Fd.add(t):this.kd.delete(t):this.Rd.remove(t)}Qs(t){return this.Pd?!!this.kd.has(t)||!this.Fd.has(t)&&this.Rd.contains(t):this.Rd.contains(t)}_l(){this.Rd.clear(),this.kd.clear(),this.Fd.clear()}toArray(){if(this.Pd)throw new Error("cannot be used in queueing mode");return this.Rd.getValues()}Al(){return this.Rd.Od()+this.kd.size-this.Fd.size}Dl(){return 0===this.Al()}jd(){if(this.Dl())throw new Error("empty set");if(this.Pd)throw new Error("cannot be used in queueing mode");const t=this.Rd;return t.min(t.root).key}zd(){if(this.Dl())throw new Error("empty set");if(this.Pd)throw new Error("cannot be used in queueing mode");const t=this.jd();return this.Xf(t),t}Bd(t){if(t=!!t,this.Pd!==t&&(this.Pd=t,!t)){for(const t of this.Fd)this.Rd.remove(t);this.Fd.clear();for(const t of this.kd)this.Rd.pd(t);this.kd.clear()}}Ud(t){this.Rd.forEach(t)}*values(){if(this.Dl())return;const t=this.Rd;for(let s=t.min(t.root);s!=t.od;s=t.Md(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const mu=self.Cs;mu.Wd=class{constructor(t=mu.hardwareConcurrency){this.Qd=t,this.Jd=[],this.Yd=0}Fl(t){return new Promise(((s,i)=>{this.Jd.push({sf:t,resolve:s,reject:i}),this.Vd()}))}Hd(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].sf===t)return s;return-1}qd(t,s){const i=this.Hd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Xd(t,s){const i=this.Hd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async Vd(){if(!this.Jd.length)return;if(this.Yd>=this.Qd)return;this.Yd++;const t=this.Jd.shift();try{const s=await t.sf();t.resolve(s)}catch(s){t.reject(s)}this.Yd--,this.Vd()}static async Zd(t,s){const i=[];let e=!1;const n=async t=>{let n;for(;n=s.pop();){if(e)return;try{i.push(await n())}catch(t){throw e=!0,t}}},r=[];for(;t--;)r.push(n());return await Promise.all(r),i}}}{const gu=self.Cs;gu.Kd=class{constructor(t,s,i){this.Of=t,this.$d=s,this.tp=i||2*s,this.sp=-1,this.ip=-1/0,this.ep=()=>this.np(),this.rp=!1,this.hp=!1,this.op=null}ap(t){this.hp=!!t}up(){return void 0!==gu.lp&&gu.lp.cp()?this.tp:this.$d}fp(...t){if(-1!==this.sp)return;this.op=t;let s=gu.Af(),i=s-this.ip,e=this.up();i>=e&&this.hp?(this.ip=s,this.pp()):this.sp=self.setTimeout(this.ep,Math.max(e-i,4))}pp(){this.rp=!0;const t=this.op;this.op=null,t?this.Of(...t):this.Of(),this.rp=!1}Ff(){this.rp||(this.mp(),this.op=null,this.ip=gu.Af())}np(){this.sp=-1,this.ip=gu.Af(),this.pp()}mp(){-1!==this.sp&&(self.clearTimeout(this.sp),this.sp=-1)}Jn(){this.mp(),this.Of=null,this.op=null,this.ep=null}}}{const yu=self.Cs;yu.gp=class{constructor(){this.yp=new Map,this.Mp=!1,this.wp=null,this.Sp=null,this.Tp=null,this.bp=null}xp(t){this.Mp=!!t}vp(){return this.Mp}Ip(t){this.wp=t}Cp(t){if(!this.wp)throw new Error("no get base size callback set");return this.wp(t)}Gp(t){this.Sp=t}_p(t,s,i,e,n,r){if(!this.Sp)throw new Error("no raster at size callback set");return this.Sp(t,s,i,e,n,r)}Dp(t){this.Tp=t}Ep(t){if(!this.Tp)throw new Error("no release result callback set");this.Tp(t)}Np(t){this.bp=t}Ap(){if(!this.bp)throw new Error("no redraw callback set");this.bp()}Lp(t){let s=this.yp.get(t);return s||(s=yu.Qn(yu.Op,this,t),this.yp.set(t,s)),s.Rp(),s}Pp(t){this.yp.delete(t.kp())}Fp(){for(const t of this.yp.values())t.jp(),t.zp()}}}{const Mu=self.Cs;Mu.Op=class{constructor(t,s){this.Bp=t,this.Up=s,this.Wp=0,this.Qp=0,this.Jp=0,this.Yp=this.Bp.Cp(s).then((t=>{this.Bp&&(this.Qp=t[0],this.Jp=t[1],this.Bp.Ap())})).catch((t=>{console.error("[SVG] Error loading SVG: ",t),this.Vp=!0,this.Bp&&this.Bp.Ap()})),this.Hp=0,this.qp=0,this.Xp=0,this.Zp=0,this.Kp=!1,this.$p=null,this.tm=!1,this.Vp=!1}Jn(){if(this.Wp<=0)throw new Error("already released");this.Wp--,0===this.Wp&&this.sm()}jp(){this.$p&&(this.Bp.Ep(this.$p),this.$p=null)}sm(){this.jp(),this.Bp.Pp(this),this.Bp=null}kp(){return this.Up}Rp(){this.Wp++}im(){return this.Wp>0}nm(){return this.$p}zp(){this.tm=!0}async rm(t,s,i){if(0===s||0===i||this.Vp)return;if(this.Kp)return;let e=Mu.Sr(Math.ceil(s)),n=Mu.Sr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Bp.vp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Hp&&n<=this.qp&&!this.tm)return;this.Kp=!0,this.Hp=e,this.qp=n;const h=await this.Bp._p(this.Up,t,this.Hp,this.qp,s,i);this.Bp&&(this.jp(),this.$p=h,this.Xp=s,this.Zp=i,this.Kp=!1,this.tm=!1,this.Bp.Ap())}hm(){return this.Yp}om(){return this.Qp}am(){return this.Jp}um(){return this.Xp}lm(){return this.Zp}fm(){return this.Vp}}}{let wu=function(t){return Iu.get(t)};0;const Su=self.Cs;Su.dm="\ufeff";const Tu=new Set("0123456789");Su.pm=function(t){return Tu.has(t)};const bu=new Set(" \t\n\r\u2028\u2029");Su.gm=function(t){return bu.has(t)},Su.ym=function(t){return[...t].filter((t=>!Su.gm(t))).join("")},Su.Mm=function(t){for(const s of t)if(!Su.gm(s))return!1;return!0},Su.wm=function(t){for(const s of t)if(!Su.gm(s))return!1;return!0},Su.Sm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Su.Tm=function(t){return[...t].filter((t=>!Su.Sm(t))).join("")};let xu=null;try{xu=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Su.bm=function(t){return!Su.gm(t)&&xu&&xu.test(t)};const vu=new Set("0123456789.+-e");Su.xm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!Tu.has(s))return!1;for(let s of t)if(!vu.has(s))return!1;return!0},Su.vm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Su.pm(i))break;--s}return t.substr(0,s)},Su.Im=function(t){let s=Su.vm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Iu=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Cu=/[&<>"']/g;Su.Cm=function(t){return t.replace(Cu,wu)},Su.Gm=function(t){let s=Su._m(t,"\\","\\\\");return s=Su._m(s,'"','\\"'),s=Su._m(s,"\t","\\t"),s=Su._m(s,"\r",""),Su._m(s,"\n","\\n")},Su.Dm=function(t){let s=Su._m(t,"&","&amp;");return s=Su._m(s,"<","&lt;"),s=Su._m(s,">","&gt;"),Su._m(s,'"',"&quot;")};const Gu=/[-[\]{}()*+?.,\\^$|#\s]/g;Su.Xi=function(t){return t.replace(Gu,"\\$&")},Su.Em=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Su.Nm=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Su.Am=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Su._m=function(t,s,i){return t.replaceAll(s,(()=>i))},Su.Lm=function(t,s,i){return t.replace(new RegExp(Su.Xi(s),"gi"),(()=>i))},Su.Om=function(t,s){"string"==typeof s?t.textContent=s:s.Rm()?t.textContent=s.toString():(t.innerHTML=s.Pm(),s instanceof Su.dn&&s.km(t))},Su.Fm=function(t,s){return t instanceof Su.fn||t instanceof Su.dn?t.equals(s):s instanceof Su.fn||s instanceof Su.dn?s.equals(t):t===s},Su.jm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Su.zm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Su.Bm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Su.Um=function(t,s){return t>s?1:t<s?-1:0},Su.Wm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const _u=new self.Intl.Segmenter;Su.Qm=function(t){const s=[];for(const i of _u.segment(t))s.push(i.segment);return s},Su.Jm=function*(t){for(const s of _u.segment(t))yield s.segment},Su.Ym=function(t){let s=0;for(const i of _u.segment(t))++s;return s};const Du=1073741824,Eu=1099511627776;Su.Vm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Hm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Du){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Eu){let s=t/Du;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Eu;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Nu={qm:!1,Xm:!0,Zm:!0,Km:!0,$m:!0};Su.tg=function(t,s){s=Object.assign({},Nu,s),Su.ig.sg("common.time");const i=[],e=self.lang,n=self.eg;if(s.Xm){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Km){const e=Math.floor(t/60);(e>0||i.length||!s.$m)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.$m){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.qm?e(".approx-prefix"):"")+i.join(e(".separator"));return Su.ig.ng(),r},Su.rg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Su.hg=function(t){return t.toLowerCase().replace(/\b\w/g,(t=>t.toUpperCase()))},Su.og=function(t,s){let i=t.split(".").map((t=>t.trim())),e=s.split(".").map((t=>t.trim()));Su.bh(i,4,"0"),Su.bh(e,4,"0"),i=i.map((t=>parseInt(t,10))),e=e.map((t=>parseInt(t,10)));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Su.ag=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)}))},Su.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Su.lg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let Au=function(t,s,i){const e=Ou.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${zu++}">`:t;if("string"==typeof e){if("a"===e&&0===Fu.length||"abbr"===e&&0===ju.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=ju.length)throw new Error("invalid bbcode tip substitution");const s=ju[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Lu._m(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Fu.length)throw new Error("invalid bbcode link substitution");const s=Fu[t];if("string"==typeof s)return`<a href="${Fu[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};0;const Lu=self.Cs,Ou=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),Ru=new Set(["icon"]),Pu=/\[(\/?)([a-zA-Z0-9]+)\]/g,ku=/\[(\/?)([^\[\n]*?)\]/g;let Fu=null,ju=null,zu=0;const Bu=/\n/g;Lu.dn=class{constructor(t,s){if(this.cg=s&&s.fg?t:Lu.Cm(t),this.dg="",this.pg=!1,this.mg=[],this.gg=[],s){if(this.pg=!!s.yg,s.links){if(s.links.length>9)throw new Error("too many links");this.mg=s.links}if(s.Mg){if(s.Mg.length>9)throw new Error("too many tips");this.gg=s.Mg}}this.wg=this.cg.includes("["),this.Sg=this.pg&&this.cg.includes("\n"),this.Tg=!this.wg&&!this.Sg&&!this.cg.includes("&"),this.bg=!1,this.xg=[]}toString(){return this.cg}valueOf(){return this.cg}Rm(){return this.Tg}vg(){return this.wg?this.cg.replace(Pu,""):this.cg}Pm(){if(this.Tg)return this.cg;if(!this.dg&&this.cg){let t=this.cg;this.wg&&(zu=0,Fu=this.mg,ju=this.gg,t=t.replace(Pu,Au),Fu=null,ju=null),this.Sg&&(t=t.replace(Bu,"<br>")),this.dg=t}return this.dg}km(t){if(this.mg.length)for(let s=0,i=this.mg.length;s<i;++s){const i=this.mg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Lu.fn?this.Pm()===t.Pm():t instanceof Lu.dn?this.cg===t.cg:this.cg===t}Ig(){if(this.bg)return this.xg;const t=[],s=this.cg,i=[];ku.lastIndex=0;let e=0,n=null;for(;null!==(n=ku.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],u=s.substring(e,r);if(e=r+h.length,u&&t.push({text:u,Cg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ru.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Cg:i.slice(0)})}else i.push({tag:s,Gg:e})}}e<s.length&&t.push({text:s.substring(e),Cg:i.slice(0)});for(const s of t)s.text&&(s.text=this._g(s.text));return this.xg=t.map((t=>t.icon?Lu.Qn(Lu.Dg,{icon:t.icon,Cg:t.Cg}):Lu.Qn(Lu.Eg,{Ng:Lu.Qm(t.text),Cg:t.Cg}))),this.bg=!0,this.xg}_g(t){return t=Lu._m(t,"\\[","["),Lu._m(t,"\\\\","\\")}static Ag(t){return Lu.Qn(Lu.dn,t,{fg:!0}).vg()}static Lg(t){return t.replace(ku,"")}}}{let Uu=function(t){return""!==t&&""!==t&&Vu.gm(t)},Wu=function(t){return Hu.has(t)},Qu=function(t){return Vu.bm(t)&&!Wu(t)},Ju=function(t){for(;t.length>0&&Uu(t.at(-1));)t.pop()},Yu=function(t){return"\n"===t||"\r\n"===t};0;const Vu=self.Cs,Hu=new Set("");Vu.Og=class{constructor(){this.Rg=[],this.Pg=null}kg(){return this.Rg}Fg(){return this.Rg.length}jg(t){this.Pg=t}zg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.Bg()){const t=s(o);o.Ug(t.height),o.Wg(t.fontBoundingBoxAscent||0),o.Qg(t.fontBoundingBoxDescent||0),o.Jg(t.Yg||0),o.Vg()?o.Hg(t.width):o.qg()&&o.Xg(this.Pg)}i+=o.Bg(),e=Math.max(e,o.Zg()),n=Math.max(n,o.Kg()),r=Math.max(r,o.$g()),h=Math.max(h,o.ty())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,Yg:h}}sy(t,s,i,e,n,r){this.Rg.push(Vu.Qn(Vu.Og.iy,{ey:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,Yg:r}))}Og(t,s,i,e,n){if("string"==typeof t&&(t=[Vu.Qn(Vu.Eg,{Ng:Vu.Qm(t)})]),Vu.wh(this.Rg),!t.length||1===t.length&&t[0].Vg()&&t[0].Dl()||i<2)return;if(1===t.length){const e=t[0];if(e.Vg()&&e.ny()<=100&&!e.hy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,Yg:a}=s(e);if(t+=n,e.Hg(t),e.Ug(r),e.Wg(h||0),e.Qg(o||0),e.Jg(a||0),t<=i)return void this.sy([e],t,r,h,o,a)}}let r;r="word"===e?this.oy(t):"cjk"===e?this.uy(t):this.ly(t),this.py(r,s,i,n)}oy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.my();if(n.qg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.gy())if(Yu(r))i.length>0&&s.push(i),s.push([Vu.Qn(Vu.Eg,{Ng:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(Vu.Qn(Vu.Eg,{Ng:[r],Cg:t})),e=Uu(r);else{const n=Uu(r);if(n===e){const s=i.at(-1);s.my()===t?s.yy(r):i.push(Vu.Qn(Vu.Eg,{Ng:[r],Cg:t}))}else s.push(i),i=[Vu.Qn(Vu.Eg,{Ng:[r],Cg:t})],e=n}}return i.length>0&&s.push(i),s}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.my();if(n.qg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.gy())if(Yu(r))i.length>0&&s.push(i),s.push([Vu.Qn(Vu.Eg,{Ng:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(Vu.Qn(Vu.Eg,{Ng:[r],Cg:t})),e=Wu(r);else if(e||Qu(r)){const s=i.at(-1);s.my()===t?s.yy(r):i.push(Vu.Qn(Vu.Eg,{Ng:[r],Cg:t})),e=Wu(r)}else s.push(i),i=[Vu.Qn(Vu.Eg,{Ng:[r],Cg:t})],e=Wu(r)}return i.length>0&&s.push(i),s}ly(t){const s=[];for(const i of t)if(i.Vg()){const t=i.gy();Vu.An(s,t.map((t=>[Vu.Qn(Vu.Eg,{Ng:[t],Cg:i.my()})])))}else s.push([i]);return s}My(t){return t.map((t=>t.wy()))}Sy(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.Vg()&&s[0].Vg()&&s[0].my()===i.my()&&(i.Ty(s[0].gy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.wy())}}py(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,u=0;for(const e of t){if(1===e.length&&e[0].Vg()&&1===e[0].ny()&&Yu(e[0].gy()[0])){if(0===h){const t=s(Vu.Qn(Vu.Eg,{Ng:[" "],Cg:e[0].my()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,u=t.Yg||0}this.sy(n,r,h,o,a,u),n=[],r=0,h=0,o=0,a=0,u=0;continue}const t=this.My(n);this.Sy(t,e);const l=this.zg(t,s),c=l.width;if(c>=i)if(n.length>0&&this.sy(n,r,h,o,a,u),n=[],e[0].Vg()&&Vu.wm(e[0].gy()))r=0,h=0,o=0,a=0,u=0;else{this.Sy(n,e);const t=this.zg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,u=t.Yg}else n=t,r=c,h=l.height,o=l.fontBoundingBoxAscent,a=l.fontBoundingBoxDescent,u=l.Yg}n.length>0&&this.sy(n,r,h,o,a,u),this.by(s,e)}by(t,s){for(const i of this.Rg){const e=i.xy();if(!e.length)continue;let n=e.at(-1);if(n.Vg()){const r=n.gy(),h=r.slice(0);if(Ju(h),0===h.length)i.vy(-n.Bg()),e.pop();else if(h.length<r.length){n.Iy(h);const s=t(n).width,e=n.Bg()-s;n.Hg(s),i.vy(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.vy(s),i.vy(s))}}}_l(){Vu.wh(this.Rg)}Cy(){return this.Rg.reduce(((t,s)=>Math.max(t,s.Bg())),0)}Gy(){return this.Rg.reduce(((t,s)=>t+s.Zg()),0)}}}self.Cs.Og.iy=class{constructor(t){this.xg=t.ey||[],this._y=t.width||-1,this.Dy=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Ny=t.fontBoundingBoxDescent||-1,this.Ay=t.Yg||-1,this.Ly=0,this.Oy=0}ey(){return this.xg.values()}*Ry(){const t=this.xg;for(let s=t.length-1;s>=0;--s)yield t[s]}xy(){return this.xg}vy(t){this._y+=t}Bg(){return this._y}Zg(){return this.Dy}Py(){return this.Ey}$g(){return this.Ny}ty(){return this.Ay}ky(t){this.Ly=t}Fy(){return this.Ly}jy(t){this.Oy=t}zy(){return this.Oy}};self.Cs.By=class{constructor(t){this.Uy=t.Cg||[],this._y=t.width||-1,this.Dy=t.height||-1,this.Ey=t.fontBoundingBoxAscent||-1,this.Ny=t.fontBoundingBoxDescent||-1,this.Ay=t.Yg||-1,this.Ly=0,this.Oy=0}Vg(){return!1}qg(){return!1}my(){return this.Uy}Wy(t){const s=this.Uy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}Qy(t){return!!this.Wy(t)}Jy(){const t=new Map;for(const s of this.Uy)t.set(s.tag,s.Gg);return t}vy(t){this._y+=t}Hg(t){this._y=t}Bg(){return this._y}Ug(t){this.Dy=t}Zg(){return this.Dy}Wg(t){this.Ey=t}Kg(){return this.Ey}Qg(t){this.Ny=t}$g(){return this.Ny}Jg(t){this.Ay=t}ty(){return this.Ay}ky(t){this.Ly=t}Fy(){return this.Ly}jy(t){this.Oy=t}zy(){return this.Oy}};{const qu=self.Cs;qu.Eg=class extends qu.By{constructor(t){super(t),this.Yy=t.Ng}Vg(){return!0}Ty(t){qu.An(this.Yy,t),this._y=-1,this.Dy=-1,this.Ey=-1,this.Ny=-1,this.Ay=-1}yy(t){this.Yy.push(t)}wy(){return qu.Qn(qu.Eg,{Ng:this.Yy.slice(0),Cg:this.Uy,width:this._y,height:this.Dy,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Ny,Yg:this.Ay})}gy(){return this.Yy}Iy(t){this.Yy=t}ny(){return this.Yy.length}Dl(){return 0===this.Yy.length}hy(){return this.Yy.includes("\n")}}}{const Xu=self.Cs;Xu.Dg=class extends Xu.By{constructor(t){super(t),this.Vy=t.icon}qg(){return!0}Hy(){return this.Vy}wy(){return Xu.Qn(Xu.Dg,{icon:this.Vy,Cg:this.Uy,width:this._y,height:this.Dy,fontBoundingBoxAscent:this.Ey,fontBoundingBoxDescent:this.Ny,Yg:this.Ay})}qy(t){if(!t)return null;let s=Number(this.Vy);return String(s)===this.Vy?(s=Math.floor(s),t.Xy(s)):t.Zy(this.Vy)}Xg(t){const s=this.qy(t);this._y=s?this.Dy*s.Bg()/s.Zg():0}Ky(t){const s=this.qy(t);return s?s.Ky():null}ny(){return 1}}}{const Zu=self.Cs;Zu.$y=class{constructor(t){this.tM=new Map,this.sM=t.iM,this.eM=t.nM}Jn(){for(const t of this.tM.values())t.Jn();this.tM.clear()}rM(t){let s=this.tM.get(t);if(s)return s;const i=this.sM(t);return s=Zu.Qn(Zu.hM,this,{source:t,oM:i}),this.tM.set(t,s),s}aM(t){return this.tM.has(t)}uM(t){const s=this.tM.get(t);s&&s.Jn(),this.tM.delete(t)}async lM(t){return await this.eM(t)}}}{const Ku=self.Cs;Ku.hM=class{constructor(t,s){this.cM=t,this.fM=s.source,this.dM=[],this.pM=new Map,this.mM=!1,this.gM=!1,this.yM=null;const i=s.oM.MM;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=Ku.Qn(Ku.wM,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.dM.push(e),s.tag&&this.pM.set(s.tag.toLowerCase(),e)}}Jn(){for(const t of this.dM)t.Jn();Ku.wh(this.dM),this.pM.clear(),this.cM=null,this.fM=null}SM(){return this.mM}TM(){return this.gM}bM(){return this.yM||(this.yM=this.xM()),this.yM}async xM(){if(this.mM)return;this.mM=!0,this.gM=!0;const t=await this.cM.lM(this.fM);if(!this.cM)return;const s=t.MM;for(let t=0,i=Math.min(s.length,this.dM.length);t<i;++t){const i=s[t].vM;this.dM[t].IM(i)}this.gM=!1}Xy(t){return(t=Math.floor(t))<0||t>=this.dM.length?null:this.dM[t]}Zy(t){return this.pM.get(t.toLowerCase())||null}}}self.Cs.wM=class{constructor(t,s){this.CM=t,this.fM=s.source||null,this.GM=s.index,this._M=s.tag,this._y=s.width,this.Dy=s.height,this.DM=null}Jn(){this._y=0,this.Dy=0,this.CM=null}EM(){return this.fM}Bg(){return this._y}Zg(){return this.Dy}IM(t){this.DM=t}Ky(){return this.DM}};{let $u=function(t,s,i,e){const n=ul;nl.A(ol,i,s),nl.A(al,t,s),nl.It(n,ol,al),nl.normalize(n,n),e.set(n[0],n[1],n[2],nl.vt(t,n))},tl=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,u=h.z,l=h.w,c=h.NM,f=h.AM,d=h.LM,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+u*i*d+u*r*g>=l||o*e*c+o*t*p+a*n*f+a*s*m+u*r*d+u*i*g>l},sl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};0;const il=self.Cs,el=self.hs,nl=el.ys,rl=el.Ms,hl=el.fs,ol=nl.create(),al=nl.create(),ul=nl.create(),ll=rl.create(),cl=hl.create(),fl=nl.create(),dl=nl.create(),pl=nl.create(),ml=nl.create(),gl=nl.create(),yl=nl.create(),Ml=nl.create(),wl=nl.create(),Sl=rl.M(0,0,1,1);il.OM={RM(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*u+n[12]*l,f=n[1]*o+n[5]*a+n[9]*u+n[13]*l,d=n[2]*o+n[6]*a+n[10]*u+n[14]*l,p=n[3]*o+n[7]*a+n[11]*u+n[15]*l;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},PM(t,s,i,e,n,r,h){const o=cl,a=ll;return hl.multiply(o,n,e),null!==hl.T(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,rl.Et(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},kM(t,s,i,e,n,r,h){const o=ol,a=al;if(!il.OM.PM(t,s,0,e,n,r,o))return!1;if(!il.OM.PM(t,s,1,e,n,r,a))return!1;const u=al;nl.A(u,a,o);const l=ul;nl.set(l,0,0,1);const c=-i,f=nl.vt(l,u);let d=0;if(0===f){if(0!==nl.vt(l,o)+c)return!1}else if(d=-(nl.vt(o,l)+c)/f,d<0)return!1;return nl.wt(h,o,u,d),!0}};class Tl{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.NM=NaN,this.AM=NaN,this.LM=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.NM=t>0?1:0,this.AM=s>0?1:0,this.LM=i>0?1:0}}il.OM.FM=class{constructor(){this.jM=new Tl,this.zM=new Tl,this.BM=new Tl,this.UM=new Tl,this.WM=new Tl,this.QM=new Tl}JM(t,s){const i=Sl;il.OM.PM(0,1,0,t,s,i,fl),il.OM.PM(1,1,0,t,s,i,dl),il.OM.PM(0,0,0,t,s,i,pl),il.OM.PM(1,0,0,t,s,i,ml),il.OM.PM(0,1,1,t,s,i,gl),il.OM.PM(1,1,1,t,s,i,yl),il.OM.PM(0,0,1,t,s,i,Ml),il.OM.PM(1,0,1,t,s,i,wl),$u(pl,fl,gl,this.jM),$u(fl,dl,yl,this.zM),$u(dl,ml,wl,this.BM),$u(ml,pl,Ml,this.UM),$u(Ml,gl,yl,this.QM),$u(ml,dl,fl,this.WM)}YM(t,s,i,e,n,r){return tl(t,s,i,e,n,r,this.jM)&&tl(t,s,i,e,n,r,this.zM)&&tl(t,s,i,e,n,r,this.BM)&&tl(t,s,i,e,n,r,this.UM)&&tl(t,s,i,e,n,r,this.WM)&&tl(t,s,i,e,n,r,this.QM)}VM(t,s,i){return!sl(t,s,i,this.WM)}}}{const bl=self.Cs,xl=self.hs,vl=xl.ys,Il=xl.Ms,Cl=xl.fs,Gl=Cl.create(),_l=vl.M(0,0,0),Dl=vl.M(0,0,0),El=vl.M(0,0,0),Nl=vl.M(0,1,0),Al=(Il.M(0,0,0,0),new bl.Gu),Ll=new bl.Rect,Ol=new bl.Gu(0,0,1,0,1,1,0,1),Rl={HM:1,qM:1e4},Pl=Cl.M(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);bl.OM.XM=class{constructor(t){t=Object.assign({},Rl,t),this._y=0,this.Dy=0,this.ZM=bl.Kn(45),this.KM=Math.tan(this.ZM/2),this.$M=Cl.create(),this.tw=Cl.create(),this.sw=!1,this.iw=t.HM,this.ew=t.qM,this.rw=[],this.hw=new Map,this.ow=null,this.aw=null,this.uw=null,this.lw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.gw=null,this.yw=null,this.Mw=null,this.ww=new Map,this.Sw=null,this.Tw=[],this.bw=new Map,this.xw=0,this.Iw=0,this.Cw=1,this.Gw=[this.Cw],this._w=1,this.Dw=[this._w],this.Ew=.5,this.Nw=[this.Ew],this.Aw=0,this.Lw=!0,this.Ow=!1}Rw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Pw(){this.xw=0,this.Iw=0,this.ow=null,this.aw=null,this.uw=null,this.lw=null,this.cw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=null,this.gw=null,this.yw=null,this.Mw=null,this.kw()}Fw(){this.Pw(),this.Sw=null}jw(){for(const t of this.rw)t.Jn();this.Pw()}Bg(){return this._y}Zg(){return this.Dy}zw(t){return this.Bw()?100:t/(2*this.Uw())}Ww(t){return this.Bw()?t/(2*this.Uw())/this.zw(t):1}Qw(t){this.iw=t}Jw(){return this.iw}Yw(t){this.ew=t}Vw(){return this.ew}Hw(t){this.ZM=t,this.KM=Math.tan(this.ZM/2)}qw(){return this.ZM}Uw(){return this.KM}Xw(){this.sw=!1}Zw(){this.sw=!0}Bw(){return!this.sw}Kw(){return this.sw}$w(t,s,i=.5,e=.5){const n=this.Jw(),r=this.Vw(),h=this.qw();if(.5===i&&.5===e)this.tS()?Cl.ut(t,h,s,n,r):Cl.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,u=2*e,l=this.Uw()*n,c=l*s;Cl.ht(t,h*c,o*c,a*l,u*l,n,r),this.tS()&&Cl.mul(t,Pl,t)}}sS(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.zw(i)*n*this.Uw()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,u=h,l=-o,c=o;this.tS()?Cl.dt(t,a,u,l,c,this.Jw(),this.Vw()):Cl.ft(t,a,u,l,c,this.Jw(),this.Vw())}iS(t,s,i,e,n,r=1){let h=1;this.Bw()&&(h=200*this.Uw()/n);const o=El;vl.set(o,h,-h,1);const a=_l,u=Dl;vl.multiply(a,s,o),vl.multiply(u,i,o),Cl.gt(t,a,u,e||Nl),o[2]=r,Cl.scale(t,t,o)}eS(t,s,i,e,n,r,h,o){return vl.set(_l,t,s,i),vl.set(Dl,e,n,r),this.iS(Gl,_l,Dl,Nl,h,o),Gl}nS(t){this.rw.push(t),this.hw.set(t._c(),t)}rS(t){const s=this.rw.indexOf(t);-1!==s&&this.rw.splice(s,1),this.hw.delete(t._c())}kw(){bl.wh(this.rw),this.hw.clear()}hS(t){return this.hw.get(t)||null}oS(){return this.ow}aS(){this.uS(this.ow)}lS(){return this.aw}cS(){this.uS(this.aw)}fS(){this.uS(this.uw)}dS(){this.uS(this.lw)}pS(){this.uS(this.cw)}mS(){this.uS(this.fw)}gS(){this.uS(this.dw)}yS(){this.uS(this.pw)}MS(){this.uS(this.mw)}wS(){this.uS(this.gw)}SS(){this.uS(this.yw)}TS(){this.uS(this.Mw)}bS(t){this.Sw=t}xS(){return this.Sw}vS(t,s,i,e){const n=bl.OM.CS.IS(t,s,i,e);let r=this.ww.get(n);return r||(r=bl.Qn(bl.OM.CS,this,t,s,i,e),this.ww.set(n,r)),r.GS(),r}_S(t){t.DS(),0===t.ES()&&(this.Sw===t&&(this.Sw=null),this.ww.delete(t.NS()),t.Jn())}AS(t){bl.wh(this.Tw),this.bw.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.Tw.push([e,n]),this.bw.set(t,{number:s,LS:e,OS:n}),s++}}RS(t){return this.Tw[t]}PS(t){return this.RS(t)[0]}kS(t){return this.RS(t)[1]}FS(t){const s=this.bw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}jS(t){const s=this.bw.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}zS(t){this.xw=t}BS(){return this.xw}US(t){this.Iw=t,this.Sw=null}WS(){return this.Iw}iy(t,s,i,e){const n=bl.nr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.Cw,a=r*o,u=h*o,l=this._w;2===l?this.QS(t,s,0,i,e,0,a,u):1===l?this.JS(t,s,0,i,e,0,a,u):this.YS(t,s,0,i,e,0,a,u)}VS(t,s,i,e,n,r){const h=bl.nr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),u=.5*this.Cw,l=o*u,c=a*u,f=this._w;2===f?this.QS(t,s,i,e,n,r,l,c):1===f?this.JS(t,s,i,e,n,r,l,c):this.YS(t,s,i,e,n,r,l,c)}QS(t,s,i,e,n,r,h,o){const a=this.Ew,u=t+a-o,l=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=u+h,g=l-o,y=u-h+d,M=l+o+p,w=c+h,S=f-o,T=c-h-d,b=f+o-p;this.HS(m,g,i,w,S,r,T,b,r,y,M,i,Ol)}JS(t,s,i,e,n,r,h,o){const a=this.Ew,u=t+a-o,l=s+a-h,c=e+a+o,f=n+a+h,d=u+h,p=l-o,m=u-h,g=l+o,y=c+h,M=f-o,w=c-h,S=f+o;this.HS(d,p,i,y,M,r,w,S,r,m,g,i,Ol)}YS(t,s,i,e,n,r,h,o){const a=this.Ew,u=t+a,l=s+a,c=e+a,f=n+a,d=u+h,p=l-o,m=u-h,g=l+o,y=c+h,M=f-o,w=c-h,S=f+o;this.HS(d,p,i,y,M,r,w,S,r,m,g,i,Ol)}qS(t,s,i,e,n,r){const h=bl.nr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),u=.5*this.Cw,l=o*u,c=a*u,f=this._w;2===f?this.XS(t,s,i,e,l,c,n,r):1===f?this.ZS(t,s,i,e,l,c,n,r):this.KS(t,s,i,e,l,c,n,r)}XS(t,s,i,e,n,r,h,o){const a=this.Ew,u=t+a-r,l=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=u+n,g=l-r,y=u-n+d,M=l+r+p,w=c+n,S=f-r,T=c-n-d,b=f+r-p;Al.set(m,g,w,S,T,b,y,M),Ll.set(h,0,o,0),this.$S(Al,Ll)}ZS(t,s,i,e,n,r,h,o){const a=this.Ew,u=t+a-r,l=s+a-n,c=i+a+r,f=e+a+n,d=u+n,p=l-r,m=u-n,g=l+r,y=c+n,M=f-r,w=c-n,S=f+r;Al.set(d,p,y,M,w,S,m,g),Ll.set(h,0,o,0),this.$S(Al,Ll)}KS(t,s,i,e,n,r,h,o){const a=this.Ew,u=t+a,l=s+a,c=i+a,f=e+a,d=u+n,p=l-r,m=u-n,g=l+r,y=c+n,M=f-r,w=c-n,S=f+r;Al.set(d,p,y,M,w,S,m,g),Ll.set(h,0,o,0),this.$S(Al,Ll)}tT(t,s,i,e){const n=.5*this.Cw,r=this._w;2===r?this.sT(t,s,i,e,n):1===r?this.iT(t,s,i,e,n):this.eT(t,s,i,e,n)}sT(t,s,i,e,n){this.QS(t,s,0,i,s,0,0,n),this.QS(i,s,0,i,e,0,n,0),this.QS(i,e,0,t,e,0,0,-n),this.QS(t,e,0,t,s,0,-n,0)}iT(t,s,i,e,n){this.JS(t,s,0,i,s,0,0,n),this.JS(i,s,0,i,e,0,n,0),this.JS(i,e,0,t,e,0,0,-n),this.JS(t,e,0,t,s,0,-n,0)}eT(t,s,i,e,n){this.YS(t,s,0,i,s,0,0,n),this.YS(i,s,0,i,e,0,n,0),this.YS(i,e,0,t,e,0,0,-n),this.YS(t,e,0,t,s,0,-n,0)}nT(t){this.tT(t.Za(),t.Ka(),t.$a(),t.tu())}rT(t){const s=bl.nr(t.Fr(),t.jr(),t.zr(),t.Br()),i=Math.sin(s),e=Math.cos(s),n=.5*this.Cw,r=i*n,h=e*n,o=this._w;2===o?this.hT(t,r,h):1===o?this.oT(t,r,h):this.aT(t,r,h)}hT(t,s,i){this.QS(t.Fr(),t.jr(),0,t.zr(),t.Br(),0,s,i),this.QS(t.zr(),t.Br(),0,t.Ur(),t.Wr(),0,i,-s),this.QS(t.Ur(),t.Wr(),0,t.Qr(),t.Jr(),0,-s,-i),this.QS(t.Qr(),t.Jr(),0,t.Fr(),t.jr(),0,-i,s)}oT(t,s,i){this.JS(t.Fr(),t.jr(),0,t.zr(),t.Br(),0,s,i),this.JS(t.zr(),t.Br(),0,t.Ur(),t.Wr(),0,i,-s),this.JS(t.Ur(),t.Wr(),0,t.Qr(),t.Jr(),0,-s,-i),this.JS(t.Qr(),t.Jr(),0,t.Fr(),t.jr(),0,-i,s)}aT(t,s,i){this.YS(t.Fr(),t.jr(),0,t.zr(),t.Br(),0,s,i),this.YS(t.zr(),t.Br(),0,t.Ur(),t.Wr(),0,i,-s),this.YS(t.Ur(),t.Wr(),0,t.Qr(),t.Jr(),0,-s,-i),this.YS(t.Qr(),t.Jr(),0,t.Fr(),t.jr(),0,-i,s)}uT(t){this.Cw=t,this.Gw[this.Gw.length-1]=t}lT(){return this.Cw}cT(t){if(this.Gw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Gw.push(t),this.Cw=t}fT(){if(this.Gw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Gw.pop(),this.Cw=this.Gw.at(-1)}dT(){this._w=0,this.Dw[this.Dw.length-1]=0}pT(){this._w=1,this.Dw[this.Dw.length-1]=0}mT(){this._w=2,this.Dw[this.Dw.length-1]=0}gT(t){if("butt"===t)this.yT();else if("square"===t)this.MT();else{if("zag"!==t)throw new Error("invalid line cap");this.wT()}}yT(){if(this.Dw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Dw.push(0),this._w=0}MT(){if(this.Dw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Dw.push(1),this._w=1}wT(){if(this.Dw.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Dw.push(2),this._w=2}ST(){if(this.Dw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Dw.pop(),this._w=this.Dw.at(-1)}TT(t){this.Ew=t,this.Nw[this.Nw.length-1]=t}bT(){return this.Ew}xT(t){if(this.Nw.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.Nw.push(t),this.Ew=t}vT(){if(this.Nw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Nw.pop(),this.Ew=this.Nw.at(-1)}IT(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],u=t[i+5];if(s===e)this.CT(n,r,h,o,a,u,a,u);else{const s=t[i+6],e=t[i+7];this.CT(n,r,h,o,a,u,s,e)}}}GT(){return 3}_T(){this.DT(!0),this.Aw++}ET(){return this.Aw}NT(){this.Aw++}AT(t){this.Lw=!!t}LT(){return this.Lw}OT(t){this.Ow=!!t}RT(){return this.Ow}PT(){return!1}tS(){return!1}kT(){}FT(){}jT(){}zT(){return this.kT()+this.FT()+this.jT()}BT(){return bl.Qn(bl.OM.UT,this)}}}self.Cs.OM.WT=class{constructor(t,s){this.Hn=s.name,this.QT=t,this.JT=s.YT||0,this.VT=s.HT||0,this.qT=!!s.XT,this.ZT=!!s.KT,this.$T=!!s.tb,this.sb=!!s.ib,this.eb=!!s.animated,this.nb=!!s.rb,this.hb=!!s.ob,this.ab=!1,this.ub=this.qT||this.nb||0!==this.JT||0!==this.VT}Jn(){this.QT=null}lb(){return this.QT}_c(){return this.Hn}cb(){return 0!==this.JT||0!==this.VT}fb(){return this.JT}pb(){return this.VT}mb(){return this.qT}gb(){return this.ZT}yb(){return this.$T}Mb(){return this.sb}wb(){return this.eb}Sb(){return this.nb}Tb(){return this.hb}bb(){return this.ab}xb(){return this.ub}Ib(){return!1}};{const kl=self.Cs;kl.OM.CS=class{constructor(t,s,i,e,n){this.QT=t,this.Wp=0,this.Cb=null,this.Gb="",this._b=i,this.Db=kl.Qn(kl.xo),this.Db.set(e),this.Eb=n,"string"==typeof s?this.Gb=s:(this.Cb=s,this.Gb=this.Cb._c())}Jn(){if(this.Wp>0)throw new Error("releasing state group still in use");this.QT=null,this.Cb=null,this.Gb=""}Nb(){const t=this.QT;t.uS(this.Cb),t.Ab(this._b),t.Lb(this.Db),t.US(this.Eb),t.bS(this)}NS(){return kl.OM.CS.IS(this.Gb,this._b,this.Db,this.Eb)}GS(){++this.Wp}DS(){--this.Wp}ES(){return this.Wp}Ob(){this.Cb=null}Rb(t){if(this.Cb=t.hS(this.Gb),!this.Cb)throw new Error("failed to restore shader program")}static IS(t,s,i,e){return("string"==typeof t?t:t._c())+","+s+","+i.ko()+","+i.Fo()+","+i.jo()+","+i.zo()+","+e}}}{let Fl=function(t,s,i){const e=i.Fr(),n=i.jr(),r=i.zr()-e,h=i.Br()-n;return[e+r*t+(i.Qr()-e)*s,n+h*t+(i.Jr()-n)*s]};0;const jl=self.Cs,zl=jl.Qn(jl.Gu);jl.OM.Pb=class{constructor(t,s,i){this.kb=t,this.Fb=s,this.jb=i,this._a=NaN,this.Da=NaN,this.Eb=NaN,this.zb=NaN,this.Bb=NaN,this._a=0,this.Da=0,this.Eb=0,this.zb=0,this.Bb=0}Ub(t,s,i,e){this._a=t,this.Da=s,this.zb=i,this.Bb=e}Wb(){return this._a}Qb(t){this._a!==t&&(this._a=t,this.kb.Jb())}Yb(){return this.Da}Vb(t){this.Da!==t&&(this.Da=t,this.kb.Jb())}Hb(){return this.Eb}qb(t){this.Eb!==t&&(this.Eb=Math.max(t,0),this.kb.Jb())}Xb(){return this.zb}Zb(t){this.zb=t}Kb(){return this.Bb}$b(t){this.Bb=t}tx(t,s,i){[this._a,this.Da]=Fl(t._a,t.Da,s),this.Eb=t.Eb,this.zb=jl.Ct(i.Za(),i.$a(),t.zb),this.Bb=jl.Ct(i.Ka(),i.tu(),t.Bb)}sx(t,s,i){[this._a,this.Da]=Fl(t._a,t.Da,s),this.Eb=t.Eb,[this.zb,this.Bb]=Fl(t.zb,t.Bb,i)}ix(){return{x:this.Wb(),y:this.Yb(),z:this.Hb(),u:this.Xb(),v:this.Kb()}}nx(t){this.Qb(t.x),this.Vb(t.y),t.hasOwnProperty("z")&&this.qb(t.z),this.Zb(t.u),this.$b(t.v)}hx(){return this.kb}ox(){return this.Fb}ux(){return this.jb}},jl.OM.lx=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.mx=t,this.gx=s,this.yx=i||null,this.Mx=[],this.wx=0,this.Sx=0,this.Tx=1,this.bx=1,this.xx=0,this.vx=!1;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=jl.Qn(jl.OM.Pb,this,r,i),h=r/e,o=i/n;t.Ub(h,o,h,o),s.push(t)}this.Mx.push(s)}}Jn(){jl.wh(this.Mx)}Ix(){return this.mx}Cx(){return this.gx}Gx(){return this.yx}_x(){return this.Mx}Jb(){this.vx=!0}Dx(){if(!this.vx)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.Mx)for(const h of r){const r=h.Wb(),o=h.Yb();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.Hb())}this.wx=t,this.Sx=s,this.Tx=i,this.bx=e,this.xx=n,this.vx=!1}Ex(){return this.Dx(),this.wx}Nx(){return this.Dx(),this.Sx}Ax(){return this.Dx(),this.Tx}Lx(){return this.Dx(),this.bx}Ox(){return this.Dx(),this.xx}Rx(){return this.Ox()>0}Px(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.mx||s<0||s>=this.gx?null:this.Mx[s][t]}kx(t,s,i){const e=i instanceof jl.Rect;if(t.Ix()!==this.Ix()||t.Cx()!==this.Cx())throw new Error("source mesh wrong size");const n=t.Mx,r=this.Mx;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.tx(n,s,i):r.sx(n,s,i)}}}Fx(t){const s=this.Mx;let i=s[0];for(let e=1,n=s.length;e<n;++e){const n=s[e];let r=i[0],h=n[0];for(let s=1,e=n.length;s<e;++s){const e=i[s],o=n[s];zl.set(r.Xb(),r.Kb(),e.Xb(),e.Kb(),o.Xb(),o.Kb(),h.Xb(),h.Kb()),t.HS(r.Wb(),r.Yb(),r.Hb(),e.Wb(),e.Yb(),e.Hb(),o.Wb(),o.Yb(),o.Hb(),h.Wb(),h.Yb(),h.Hb(),zl),r=e,h=o}i=n}}jx(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.Mx;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,u=h.length;i<u;++i){const l=e[i],c=h[i],[f,d,p]=s(o.Wb(),o.Yb(),o.Hb()),[m,g,y]=s(l.Wb(),l.Yb(),l.Hb()),[M,w,S]=s(c.Wb(),c.Yb(),c.Hb()),[T,b,x]=s(a.Wb(),a.Yb(),a.Hb());t.VS(f,d,p,m,g,y),t.VS(f,d,p,M,w,S),t.VS(f,d,p,T,b,x),i===u-1&&t.VS(m,g,y,M,w,S),n===r-1&&t.VS(T,b,x,M,w,S),o=l,a=c}e=h}}zx(t){const s=.001,i=.99999999,e=t.fl(),n=[],r=this.Ix()-1,h=this.Cx()-1,o=1/r,a=1/h,u=r-1,l=h-1;let c=e[0],f=e[1],d=jl.Xn(Math.floor(c*r),0,u),p=jl.Xn(Math.floor(f*h),0,l),m=!0,g=0,y=0,M=0,w=-1;const S=()=>{c=jl.Xn(jl.Ct(c,g,M),0,1),f=jl.Xn(jl.Ct(f,y,M),0,1),n.push(c,f)};for(let t=0,T=e.length;t<T;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=jl.Xn(Math.floor(c*r),0,u),p=jl.Xn(Math.floor(f*h),0,l);const b=(t+2)%T;for(g=e[b],y=e[b+1],w=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=jl.qr(c,f,t,e,r,e,r,h),0!==w&&(M=jl.Hr(c,f,g,y,t,e,r,h,-.001),M>=0&&M<=i))S(),m=!m,w=0;else if(p>0&&2!==w&&(M=jl.Hr(c,f,g,y,t,e,r,e,s),M>=0&&M<=i))S(),p--,m=!1,w=4;else if(d<u&&3!==w&&(M=jl.Hr(c,f,g,y,r,e,r,h,s),M>=0&&M<=i))S(),d++,m=!1,w=1;else if(d>0&&1!==w&&(M=jl.Hr(c,f,g,y,t,e,t,h,s),M>=0&&M<=i))S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&(M=jl.Hr(c,f,g,y,t,h,r,h,s),M>=0&&M<=i)))break;S(),p++,m=!0,w=2}}}return jl.Qn(jl.ol,n)}Bx(t,s){const i=this.Ux(t);this.Wx(i),s.pl(i)}Ux(t){const s=[],i=t.fl();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.Qx(e,n);s.push(r,h)}return s}Qx(t,s){const i=this.Ix()-1,e=this.Cx()-1,n=1/i,r=1/e,h=jl.Xn(Math.floor(t*i),0,i-1),o=jl.Xn(Math.floor(s*e),0,e-1),a=h*n,u=o*r,l=(h+1)*n,c=(o+1)*r,f=this.Px(h,o),d=this.Px(h+1,o+1),p=jl.qr(t,s,a,u,l,u,l,c),m=p?a+n:a,g=p?u:u+r,y=this.Px(h+(p?1:0),o+(p?0:1)),[M,w,S]=jl.Xr(t,s,a,u,m,g,l,c);return jl.Zr(M,w,S,f.Wb(),f.Yb(),f.Hb(),y.Wb(),y.Yb(),y.Hb(),d.Wb(),d.Yb(),d.Hb())}Wx(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const u=(o+2)%a,l=t[u],c=t[u+1],f=l-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=l,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&jl.xh(t,s)}ix(){return{cols:this.Ix(),rows:this.Cx(),points:this.Mx.map((t=>t.map((t=>t.ix()))))}}nx(t){const s=this.Ix(),i=this.Cx();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.Px(e,t).nx(i[e])}}}}{let Bl=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Jx:i,Yx:e,format:n,type:r}};0;const Ul=self.Cs,Wl=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Ql=new Set(["nearest","bilinear","trilinear"]),Jl=new Set(["default","low","high"]),Yl=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Vl={Vx:"clamp-to-edge",Hx:"clamp-to-edge",qx:"trilinear",Xx:0,Zx:"rgba8",Kx:!0,$x:"default",tv:!0,sv:!1,width:-1,height:-1},Hl={tv:!0,flipY:!1},ql=new Set;Ul.OM.ev=class{constructor(t){this.QT=t,this.nv=null,this._y=0,this.Dy=0,this.rv=!0,this.hv="clamp-to-edge",this.ov="clamp-to-edge",this.av="trilinear",this.uv=0,this.lv="rgba8",this.cv=!1,this.fv="default",this.Wp=0}dv(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer||null===t))throw new Error("invalid texture source");if(s=Object.assign({},Vl,s),this.nv)throw new Error("already created texture");if(this.hv=s.Vx,this.ov=s.Hx,this.av=s.qx,this.uv=s.Xx,this.lv=s.Zx,this.cv=!!s.Kx&&this.QT.LT(),this.fv=s.$x,!Yl.has(this.hv)||!Yl.has(this.ov))throw new Error("invalid wrap mode");if(!Ql.has(this.av))throw new Error("invalid sampling");if(!Wl.has(this.lv))throw new Error("invalid pixel format");if(!Jl.has(this.fv))throw new Error("invalid mipmap quality");if(this.rv=!0,t instanceof ArrayBuffer||null===t||s.sv){if(this._y=s.width,this.Dy=s.height,t instanceof ArrayBuffer&&t.byteLength!==this._y*this.Dy*4)throw new Error("ArrayBuffer wrong size")}else this._y=t.width,this.Dy=t.height;if(this._y<=0||this.Dy<=0)throw new Error("invalid texture data size");if(s.sv){const s=Ul.lo(this._y,this.Dy);s.getContext("2d").drawImage(t,0,0,this._y,this.Dy),t=s}const i=Ul.wr(this._y)&&Ul.wr(this.Dy),e=this.QT.pv();if(this._y>e||this.Dy>e)throw new Error("texture data exceeds maximum texture size");const n=this.QT.mv(),r=this.QT.gv();this.nv=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.nv),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.tv),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=Bl(this.lv,n);if(this.QT.yv()||i||!this.Mv())if(r>=2){let s;s=this.cv?Math.floor(Math.log2(Math.max(this._y,this.Dy))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.Jx,this._y,this.Dy),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this._y,this.Dy,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.Yx,this._y,this.Dy,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.Yx,this._y,this.Dy,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.Yx,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this._y,this.Dy)),t instanceof ImageData){const s=Ul.lo(this._y,this.Dy);s.getContext("2d").putImageData(t,0,0),t=s}const s=Ul.lo(Ul.Sr(this._y),Ul.Sr(this.Dy)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.av,i.drawImage(t,0,0,this._y,this.Dy,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.Yx,h.format,h.type,s)}null!==t&&this.wv(n),n.bindTexture(n.TEXTURE_2D,null),this.QT.Sv(),this.Wp=1,ql.add(this)}Tv(t,s,i){if(i=Object.assign({},Vl,i),this.nv)throw new Error("already created texture");if(this.hv=i.Vx,this.ov=i.Hx,this.av=i.qx,this.lv=i.Zx,this.cv=!!i.Kx&&this.QT.LT(),this.fv=i.$x,!Yl.has(this.hv)||!Yl.has(this.ov))throw new Error("invalid wrap mode");if(!Ql.has(this.av))throw new Error("invalid sampling");if(!Wl.has(this.lv))throw new Error("invalid pixel format");if(!Jl.has(this.fv))throw new Error("invalid mipmap quality");this.rv=!1,this._y=Math.floor(t),this.Dy=Math.floor(s);const e=Ul.wr(this._y)&&Ul.wr(this.Dy),n=this.QT.pv();if(this._y<=0||this.Dy<=0)throw new Error("invalid texture size");if(this._y>n||this.Dy>n)throw new Error("texture exceeds maximum texture size");if(!this.QT.yv()&&this.Mv()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.QT.mv(),h=this.QT.gv();this.nv=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.nv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.tv),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=Bl(this.lv,r),a=h>=2?o.Jx:o.Yx;r.texImage2D(r.TEXTURE_2D,0,a,this._y,this.Dy,0,o.format,o.type,null),this.wv(r),r.bindTexture(r.TEXTURE_2D,null),this.QT.Sv(),this.Wp=1,ql.add(this)}bv(t){if("default"===this.fv)return this.rv?t.NICEST:t.FASTEST;if("low"===this.fv)return t.FASTEST;if("high"===this.fv)return t.NICEST;throw new Error("invalid mipmap quality")}Mv(){return"clamp-to-edge"!==this.hv||"clamp-to-edge"!==this.ov}xv(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}wv(t){const s=Ul.wr(this._y)&&Ul.wr(this.Dy);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.xv(t,this.hv)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.xv(t,this.ov)),"nearest"===this.av)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.cv=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.QT.yv())&&this.cv){t.hint(t.GENERATE_MIPMAP_HINT,this.bv(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.av&&!this.QT.RT();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.cv=!1;const i=this.QT.vv();i&&this.uv>0&&"nearest"!==this.av&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.uv,this.QT.Iv()))}Cv(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.nv||this.Wp<=0)throw new Error("texture not created");if(this.rv)throw new Error("cannot update static texture");s=Object.assign({},Hl,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.QT.gv(),r=this.QT.mv();r.bindTexture(r.TEXTURE_2D,this.nv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.tv),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=Bl(this.lv,r),o=n>=2?h.Jx:h.Yx;try{if(this._y===i&&this.Dy===e){const s=Ul.wr(this._y)&&Ul.wr(this.Dy);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.QT.yv())&&this.cv&&(r.hint(r.GENERATE_MIPMAP_HINT,this.bv(r)),r.generateMipmap(r.TEXTURE_2D))}else{this._y=i,this.Dy=e;const s=Ul.wr(this._y)&&Ul.wr(this.Dy);if(!this.QT.yv()&&this.Mv()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.QT.yv())&&this.cv&&(r.hint(r.GENERATE_MIPMAP_HINT,this.bv(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.QT.Sv()}Gv(){if(this.Wp>0)throw new Error("texture still has references");if(!this.nv)throw new Error("already deleted texture");ql.delete(this),this.QT.mv().deleteTexture(this.nv),this.nv=null}_v(){return!!this.nv}Dv(){return this.nv}lb(){return this.QT}Ev(){this.Wp++}Nv(){if(this.Wp<=0)throw new Error("no more references");this.Wp--}Av(){return this.Wp}Bg(){return this._y}Zg(){return this.Dy}Lv(){return this.rv}Ov(){let t=this._y*this.Dy;switch(this.lv){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.cv&&(t+=Math.floor(t/3)),t}static Ob(){ql.clear()}static Rv(){return ql.values()}}}{const Xl=self.Cs,Zl=(self.assert,self.hs),Kl=(Zl.ys,Zl.fs),$l=new Set(["nearest","bilinear","trilinear"]),tc={qx:"trilinear",alpha:!0,depth:!1,Pv:!0,kv:!0,Fv:0},sc=new Set;Xl.OM.jv=class{constructor(t){this.QT=t,this.zv=null,this.Bv=null,this.nv=null,this.Uv=null,this._y=0,this.Dy=0,this.Wv=!0,this.av="trilinear",this.Qv=!0,this.Jv=!1,this.Yv=!0,this.Vv=0,this.Hv=Kl.create(),this.qv=0,this.Xv=0,this.Zv=0}Kv(t,s,i){i=Object.assign({},tc,i);const e=this.QT.gv();if(this.nv||this.Uv)throw new Error("already created render target");if(this.av=i.qx,this.Qv=!!i.alpha,this.Jv=!!i.depth,this.Yv=!!i.Pv,this.Wv=!!i.kv,this.Vv=i.Fv,!$l.has(this.av))throw new Error("invalid sampling");if(this.Vv>0&&(e<2||this.Yv))throw new Error("invalid use of multisampling");if(e<2&&(this.Yv=!0),this._y=t,this.Dy=s,this._y<=0||this.Dy<=0)throw new Error("invalid render target size");this.$v();const n=this.QT.mv();if(this.zv=n.createFramebuffer(),this.Jv&&(this.Bv=n.createFramebuffer()),this.Yv){this.nv=this.QT.tI(this._y,this.Dy,{qx:this.av,Zx:this.Qv?"rgba8":"rgb8",Kx:!1});const t=this.nv.Dv();n.bindFramebuffer(n.FRAMEBUFFER,this.zv),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.Jv&&(n.bindFramebuffer(n.FRAMEBUFFER,this.Bv),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.Uv=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.Uv);const t=this.Qv?n.RGBA8:n.RGB8;if(this.Vv>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.Vv>t&&(this.Vv=t)}else this.Vv=0}0===this.Vv?n.renderbufferStorage(n.RENDERBUFFER,t,this._y,this.Dy):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.Vv,t,this._y,this.Dy),n.bindFramebuffer(n.FRAMEBUFFER,this.zv),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.Uv),this.Jv&&(n.bindFramebuffer(n.FRAMEBUFFER,this.Bv),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.Uv)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.QT.sI();this.Jv&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.zv),this.QT.iI()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),sc.add(this)}eI(t,s){if(this._y===t&&this.Dy===s)return;this._y=t,this.Dy=s,this.$v();const i=this.QT.mv();i.bindFramebuffer(i.FRAMEBUFFER,this.zv),this.nv?this.nv.Cv(new ImageData(this._y,this.Dy)):(i.bindRenderbuffer(i.RENDERBUFFER,this.Uv),i.renderbufferStorage(i.RENDERBUFFER,this.Qv?i.RGBA8:i.RGB8,this._y,this.Dy),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.QT.sI();this.Jv&&e&&(this.QT.iI()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}Gv(){if(!this.nv&&!this.Uv)throw new Error("already deleted render target");sc.delete(this);const t=this.QT.mv();this.nv?(t.bindFramebuffer(t.FRAMEBUFFER,this.zv),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.Jv&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Bv),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.QT.nI(this.nv),this.nv=null):this.Uv&&(t.bindFramebuffer(t.FRAMEBUFFER,this.zv),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.Jv&&(t.bindFramebuffer(t.FRAMEBUFFER,this.Bv),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.Uv),this.Uv=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.QT.gv()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.zv),this.Jv&&t.deleteFramebuffer(this.Bv);const s=this.QT.rI();s.hI=null,s.oI=null,this.zv=null}$v(){this.QT.$w(this.Hv,this._y/this.Dy),this.qv=this.QT.qw(),this.Xv=this.QT.Jw(),this.Zv=this.QT.Vw()}aI(){return this.zv}uI(){return this.Bv}lb(){return this.QT}lI(){return this.nv}cI(){return this.QT.qw()===this.qv&&this.QT.Jw()===this.Xv&&this.QT.Vw()===this.Zv||this.$v(),this.Hv}fI(){return"nearest"!==this.av}dI(){return this.Qv}pI(){return this.Yv}mI(){return this.Jv}Bg(){return this._y}Zg(){return this.Dy}gI(){return this.Wv}yI(){return this.Vv}MI(){const t={qx:this.av,alpha:this.Qv,Pv:this.Yv};return this.Wv||(t.width=this._y,t.height=this.Dy),t}wI(t){return"nearest"!==(t=Object.assign({},tc,t)).qx===this.fI()&&!!t.alpha===this.dI()&&!!t.depth===this.mI()&&!(this.QT.gv()>=2&&!!t.Pv!==this.pI())&&("number"==typeof t.width||"number"==typeof t.height?!this.gI()&&this.Bg()===Math.floor(t.width)&&this.Zg()===Math.floor(t.height):this.gI())}SI(){return this.nv?this.nv.Dv():null}Ov(){return this.nv?this.nv.Ov():this._y*this.Dy*(this.Qv?4:3)}static async TI(t,s){const i=await t.bI(s,!0);return await Xl.do(i)}static Ob(){sc.clear()}static xI(){return sc.values()}static vI(t,s){for(const i of sc)i.gI()&&i.eI(t,s)}}}{const ic=self.Cs,ec=self.hs,nc=(ec.ys,ec.fs,new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));ic.OM.II=class extends ic.OM.WT{static async CI(t,s){const i=t.mv(),e=s.src,n=s.GI,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a);const u=t._I();if(u?await t.DI((()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR))):await ic.dh(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const l=ic.Tm(i.getProgramInfoLog(a)||"").trim();return l&&!ic.Mm(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(h),i.deleteShader(o),a}static async EI(t,s){const i=await ic.OM.II.CI(t,s);return new ic.OM.II(t,i,s)}constructor(t,s,i){super(t,i);const e=t.mv(),n=t.rI();t.DT(),e.useProgram(s),this.NI=e,this.Cb=s,this.AI="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex");this.LI=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.OI),e.vertexAttribPointer(r,t.GT(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.RI),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.LI&&(e.bindBuffer(e.ARRAY_BUFFER,t.kI),e.vertexAttribPointer(this.LI,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.LI)),e.bindBuffer(e.ARRAY_BUFFER,null),this.FI=new ic.OM.jI(this,"matP","mat4"),this.zI=new ic.OM.jI(this,"matMV","mat4"),this.BI=new ic.OM.jI(this,"color","vec4"),this.UI=new ic.OM.jI(this,"samplerFront","sampler"),this.WI=new ic.OM.jI(this,"pointTexStart","vec2"),this.QI=new ic.OM.jI(this,"pointTexEnd","vec2"),this.JI=new ic.OM.jI(this,"zElevation","float"),this.YI=new ic.OM.jI(this,"tileSize","vec2"),this.VI=new ic.OM.jI(this,"tileSpacing","vec2"),this.HI=new ic.OM.jI(this,"color2_","vec4"),this.qI=new ic.OM.jI(this,"outlineThickness","float"),this.XI=new ic.OM.jI(this,"samplerBack","sampler"),this.ZI=new ic.OM.jI(this,"samplerDepth","sampler"),this.KI=new ic.OM.jI(this,"destStart","vec2"),this.$I=new ic.OM.jI(this,"destEnd","vec2"),this.tC=new ic.OM.jI(this,"srcStart","vec2"),this.sC=new ic.OM.jI(this,"srcEnd","vec2"),this.iC=new ic.OM.jI(this,"srcOriginStart","vec2"),this.eC=new ic.OM.jI(this,"srcOriginEnd","vec2"),this.nC=new ic.OM.jI(this,"pixelSize","vec2"),this.rC=new ic.OM.jI(this,"seconds","float"),this.hC=new ic.OM.jI(this,"devicePixelRatio","float"),this.oC=new ic.OM.jI(this,"layerScale","float"),this.aC=new ic.OM.jI(this,"layerAngle","float"),this.uC=new ic.OM.jI(this,"layoutStart","vec2"),this.lC=new ic.OM.jI(this,"layoutEnd","vec2"),this.cC=new ic.OM.jI(this,"zNear","float"),this.fC=new ic.OM.jI(this,"zFar","float"),this.dC=!!(this.nC.pC()||this.rC.pC()||this.XI.pC()||this.KI.pC()||this.$I.pC()||this.tC.pC()||this.sC.pC()||this.iC.pC()||this.eC.pC()||this.hC.pC()||this.oC.pC()||this.aC.pC()||this.uC.pC()||this.lC.pC());const o=i.parameters||[];this.mC=[],this.ab=this.nC.pC()||this.tC.pC()||this.sC.pC()||this.iC.pC()||this.eC.pC(),this.gC=!1,this.yC=!1,this.BI.MC(1,1,1,1),this.HI.MC(1,1,1,1),this.UI.wC(0),this.XI.wC(1),this.ZI.wC(2),this.WI.SC(0,0),this.QI.SC(1,1),this.JI.TC(0),this.YI.SC(0,0),this.VI.SC(0,0),this.KI.SC(0,0),this.$I.SC(1,1),this.tC.SC(0,0),this.sC.SC(0,0),this.iC.SC(0,0),this.eC.SC(0,0),this.nC.SC(0,0),this.hC.TC(1),this.cC.TC(t.Jw()),this.fC.TC(t.Vw()),this.oC.TC(1),this.aC.TC(0),this.rC.TC(0),this.uC.SC(0,0),this.lC.SC(0,0),this.qI.TC(1);for(const t of o){const s=t[0],i=t[2],e=new ic.OM.jI(this,s,i);"color"===i?e.bC(0,0,0):e.TC(0),this.mC.push(e)}this.AI?this.xC(n.vC):(this.IC(n.vC,!0),this.CC(n.GC,!0));const a=n._C;e.useProgram(a?a.Cb:null)}Jn(){this.NI.deleteProgram(this.Cb),this.Cb=null,this.QT.rS(this),this.NI=null,super.Jn()}DC(){return this.NI}EC(){return this.Cb}NC(){return this.mC.length}AC(t){return t<0||t>=this.mC.length?null:this.mC[t].LC()}OC(t){for(let s=0,i=t.length;s<i;++s)if(!this.mC[s].RC(t[s]))return!1;return!0}PC(t){for(let s=0,i=t.length;s<i;++s)this.mC[s].kC(t[s])}FC(t,s,i,e,n,r,h,o,a,u){return!(this.XI.pC()||this.nC.pC()&&!this.nC.jC(n,r)||this.KI.pC()&&!this.KI.jC(t.Za(),t.Ka())||this.$I.pC()&&!this.$I.jC(t.$a(),t.tu())||this.hC.pC()&&!this.hC.zC(h)||this.oC.pC()&&!this.oC.zC(o)||this.aC.pC()&&!this.aC.zC(a)||this.tC.pC()&&!this.tC.jC(s.Za(),s.Ka())||this.sC.pC()&&!this.sC.jC(s.$a(),s.tu())||this.iC.pC()&&!this.iC.jC(i.Za(),i.Ka())||this.eC.pC()&&!this.eC.jC(i.$a(),i.tu())||this.uC.pC()&&!this.uC.jC(e.Za(),e.Ka())||this.lC.pC()&&!this.lC.jC(e.Ka(),e.tu())||this.rC.pC()&&!this.rC.zC(u))}BC(t,s,i,e,n,r,h,o,a,u){this.XI.pC()||(this.nC.pC()&&this.nC.UC(n,r),this.KI.pC()&&this.KI.UC(t.Za(),t.Ka()),this.$I.pC()&&this.$I.UC(t.$a(),t.tu()),this.hC.pC()&&this.hC.WC(h),this.oC.pC()&&this.oC.WC(o),this.aC.pC()&&this.aC.WC(a),this.tC.pC()&&this.tC.UC(s.Za(),s.Ka()),this.sC.pC()&&this.sC.UC(s.$a(),s.tu()),this.iC.pC()&&this.iC.UC(i.Za(),i.Ka()),this.eC.pC()&&this.eC.UC(i.$a(),i.tu()),this.uC.pC()&&this.uC.UC(e.Za(),e.Ka()),this.lC.pC()&&this.lC.UC(e.Ka(),e.tu()),this.rC.pC()&&this.rC.WC(u))}IC(t,s){this.gC&&!s||this.AI||(this.FI.pC()&&this.FI.QC(t),this.gC=!0)}JC(){this.gC=!1}CC(t,s){this.yC&&!s||this.AI||(this.zI.pC()&&this.zI.QC(t),this.yC=!0)}YC(){this.yC=!1}xC(t){if(!this.AI)throw new Error("not device transform shader");this.FI.QC(t);const s=this.QT,i=s.Bg()/2,e=s.Zg()/2,n=s.eS(i,e,s.zw(s.Zg()),i,e,0,s.Zg());this.zI.QC(n)}VC(t){this.BI.pC()&&this.BI.HC(t[0],t[1],t[2],t[3])}static qC(){return nc}static XC(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static ZC(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static KC(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static $C(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static tG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static sG(t){return["#version 300 es",ic.OM.II.XC(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static iG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static eG(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static nG(t){return["#version 300 es",ic.OM.II.XC(t),"in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static rG(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+ic.OM.II.XC(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= color;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static hG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static oG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static aG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static uG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static lG(t){return["#version 300 es",ic.OM.II.XC(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static cG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static fG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static dG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {","\thighmedp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static pG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static mG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static gG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static yG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static MG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const rc=self.Cs,hc=self.hs.fs,oc=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);rc.OM.jI=class{constructor(t,s,i){if(!oc.has(i))throw new Error("invalid uniform type");this.yx=t,this.NI=this.yx.DC(),this.Hn=s,this.Jc=i,this.wG="color"===this.Jc,this.SG=this.NI.getUniformLocation(this.yx.EC(),s),this.TG=!!this.SG;const e=oc.get(i);this.bG=new Float32Array(e),this.xG=new Float32Array(e)}Jn(){this.yx=null,this.NI=null,this.SG=null}pC(){return this.TG}LC(){return this.Jc}vG(){return this.wG}TC(t){this.pC()&&(this.bG[0]=t,this.xG.set(this.bG),this.NI.uniform1f(this.SG,t))}wC(t){this.pC()&&(this.bG[0]=t,this.xG.set(this.bG),this.NI.uniform1i(this.SG,t))}SC(t,s){this.pC()&&(this.bG[0]=t,this.bG[1]=s,this.xG.set(this.bG),this.NI.uniform2f(this.SG,t,s))}bC(t,s,i){this.pC()&&(this.bG[0]=t,this.bG[1]=s,this.bG[2]=i,this.xG.set(this.bG),this.NI.uniform3f(this.SG,t,s,i))}MC(t,s,i,e){this.pC()&&(this.bG[0]=t,this.bG[1]=s,this.bG[2]=i,this.bG[3]=e,this.xG.set(this.bG),this.NI.uniform4f(this.SG,t,s,i,e))}IG(t){t=Math.fround(t);const s=this.bG;s[0]!==t&&(s[0]=t,this.NI.uniform1f(this.SG,t))}CG(t){const s=this.bG;s[0]!==t&&(s[0]=t,this.NI.uniform1i(this.SG,t))}GG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.bG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.NI.uniform2f(this.SG,t,s))}_G(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.bG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.NI.uniform3f(this.SG,t,s,i))}HC(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.bG;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.NI.uniform4f(this.SG,t,s,i,e))}QC(t){const s=this.bG;hc.L(s,t)||(rc.yh(s,t,0),this.NI.uniformMatrix4fv(this.SG,!1,t))}RC(t){const s=this.xG;return this.vG()?s[0]===Math.fround(t.ko())&&s[1]===Math.fround(t.Fo())&&s[2]===Math.fround(t.jo()):s[0]===Math.fround(t)}kC(t){const s=this.xG;this.vG()?(s[0]=t.ko(),s[1]=t.Fo(),s[2]=t.jo()):s[0]=t}zC(t){return this.xG[0]===Math.fround(t)}jC(t,s){const i=this.xG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}WC(t){this.xG[0]=t}UC(t,s){const i=this.xG;i[0]=t,i[1]=s}}}{const ac=self.Cs,uc=self.hs,lc=uc.Ms,cc=uc.fs;ac.OM.DG=class{constructor(t){this.EG=t,this.GC=cc.create(),this.vC=cc.create(),this.hI=null,this.oI=null,this.NG=!1,this.AG=lc.M(1,1,1,1),this._C=null,this.LG=new ac.Rect,this.clearColor=ac.Qn(ac.xo,0,0,0,0)}},ac.OM.OG=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.PG=t,this.NI=t.EG.mv(),this.kG=0,this.FG=0,this.jG=null,this.zG=new Float32Array(s,0,16),this.BG=new Float32Array(s,64,4),this.UG=new Float32Array(s,80,4),this.WG=[]}QG(t,s){this.Jc=1,this.kG=t,this.FG=s}JG(){const t=this.NI;t.drawElements(t.TRIANGLES,this.FG,t.UNSIGNED_SHORT,this.kG)}YG(t){this.Jc=2,this.jG=t}VG(){const t=this.NI,s=this.jG;t.bindTexture(t.TEXTURE_2D,s?s.Dv():null)}HG(t){this.Jc=3,t.Uo(this.BG,0)}qG(){const t=this.BG,s=this.PG;lc.m(s.AG,t),s._C.VC(t)}XG(t){this.Jc=21,t.Uo(this.BG,0)}ZG(){const t=this.BG,s=this.PG._C;s.HI.pC()&&s.HI.HC(t[0],t[1],t[2],t[3])}KG(t,s){this.Jc=4,this.kG=t,this.FG=s}$G(){this.NI.blendFunc(this.kG,this.FG)}t_(t,s,i,e){this.Jc=5;const n=this.BG;n[0]=t,n[1]=s,n[2]=i,n[3]=e}s_(){const t=this.BG;this.NI.viewport(t[0],t[1],t[2],t[3])}i_(t){this.Jc=6,cc.m(this.zG,t)}e_(){const t=this.PG,s=t.EG.rw,i=t._C,e=this.zG;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.IC(e,!0):n.JC()}cc.m(t.vC,e)}n_(t){this.Jc=7,cc.m(this.zG,t)}r_(){const t=this.PG,s=t.EG.rw,i=t._C,e=this.zG;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.CC(e,!0):n.YC()}cc.m(t.GC,e)}h_(t){this.Jc=8,this.jG=t}o_(){const t=this.NI,s=this.jG,i=this.PG;s?(i.hI=s.aI(),i.oI=s.uI(),i.NG&&i.oI?t.bindFramebuffer(t.FRAMEBUFFER,i.oI):t.bindFramebuffer(t.FRAMEBUFFER,i.hI)):(i.hI=null,i.oI=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}a_(t){this.Jc=9,t.Uo(this.zG,0)}u_(t,s,i,e){this.Jc=9;const n=this.zG;n[0]=t,n[1]=s,n[2]=i,n[3]=e}l_(){const t=this.NI,s=this.zG,i=this.PG.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.Yo(e,n,r,h)||(t.clearColor(e,n,r,h),i._o(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}c_(t){this.Jc=15,t.Uo(this.zG,0)}f_(){const t=this.zG;this.PG.LG.set(t[0],t[1],t[2],t[3])}d_(t,s){this.Jc=10,this.kG=t,this.FG=1,this.zG[0]=s}p_(){const t=this.NI,s=this.PG,i=s.EG.aw;t.useProgram(i.Cb),i.IC(s.vC,!1),i.CC(s.GC,!1);const e=s.LG;i.WI.pC()&&i.WI.GG(e.Za(),e.Ka()),i.QI.pC()&&i.QI.GG(e.$a(),e.tu());const n=this.zG[0];if(i.JI.pC()&&i.JI.IG(n),i.BI.pC()){const t=s.AG;i.BI.HC(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.kG/4,this.FG),t.useProgram(s._C.Cb)}m_(t){this.Jc=11,this.jG=t}g_(){const t=this.NI,s=this.PG,i=this.jG;if(s._C=i,t.useProgram(i.Cb),i.IC(s.vC,!1),i.CC(s.GC,!1),i.BI.pC()){const t=s.AG;i.BI.HC(t[0],t[1],t[2],t[3])}}y_(){this.Jc=12}M_(){const t=this.PG._C,s=this.NI,i=this.zG,e=this.BG,n=this.UG;if(t.XI.pC()){const t=this.PG.EG,i=this.jG;t.w_!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.Dv():null),t.w_=i,s.activeTexture(s.TEXTURE0))}t.nC.pC()&&t.nC.GG(i[0],i[1]),t.KI.pC()&&t.KI.GG(i[2],i[3]),t.$I.pC()&&t.$I.GG(i[4],i[5]),t.hC.pC()&&t.hC.IG(this.FG),t.oC.pC()&&t.oC.IG(i[6]),t.aC.pC()&&t.aC.IG(i[7]),t.tC.pC()&&t.tC.GG(i[12],i[13]),t.sC.pC()&&t.sC.GG(i[14],i[15]),t.iC.pC()&&t.iC.GG(n[0],n[1]),t.eC.pC()&&t.eC.GG(n[2],n[3]),t.uC.pC()&&t.uC.GG(e[0],e[1]),t.lC.pC()&&t.lC.GG(e[2],e[3]),t.rC.pC()&&t.rC.IG(this.kG)}S_(){this.Jc=13}T_(){const t=this.PG._C.mC,s=this.WG;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.vG()?e._G(n.ko(),n.Fo(),n.jo()):e.IG(n)}}b_(t){this.Jc=14,this.jG=t}x_(){const t=this.NI,s=this.jG,i=this.PG.hI;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}v_(t,s,i){this.Jc=17;const e=this.zG,n=this.PG.EG;e[0]=t.Bg(),e[1]=t.Zg(),e[2]=s?s.Bg():n.Bg(),e[3]=s?s.Zg():n.Zg(),e[4]=t.fI()?1:0,e[5]="stretch"===i;const r=this.WG;ac.wh(r),r.push(t.aI()),r.push(s?s.aI():null)}I_(){const t=this.zG,s=this.WG,i=this.NI,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}C_(t){this.Jc=18,this.jG=t}G_(){this.jG.__(),this.jG=null}D_(t){this.Jc=19,this.jG=t}E_(){this.jG.N_(),this.jG=null}A_(t,s,i){this.Jc=20;const e=this.zG;e[0]=t,e[1]=s,e[2]=i}L_(){const t=this.PG._C,s=this.zG;t.nC.pC()&&t.nC.GG(s[0],s[1]),t.qI.pC()&&t.qI.IG(s[2])}O_(t,s,i,e,n,r,h){this.Jc=16;const o=this.zG;t.Uo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}R_(){const t=this.PG._C,s=this.zG;t.tC.pC()&&t.tC.GG(s[0],s[1]),t.nC.pC()&&t.nC.GG(s[4],s[5]),t.YI.pC()&&t.YI.GG(s[6],s[7]),t.VI.pC()&&t.VI.GG(s[8],s[9])}P_(t,s,i,e,n,r,h){this.Jc=29;const o=this.zG;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}k_(){const t=this.PG._C,s=this.zG;t.nC.pC()&&t.nC.GG(s[0],s[1]),t.YI.pC()&&t.YI.GG(s[2],s[3]),t.qI.pC()&&t.qI.IG(s[4]),t.VI.pC()&&t.VI.GG(s[5],s[6])}F_(t){this.Jc=22,this.kG=t?1:0}j_(){const t=this.NI,s=0!==this.kG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}z_(t){this.Jc=23,this.kG=t?1:0}B_(){const t=this.NI;0===this.kG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}U_(t){this.Jc=24,this.kG=t?1:0}W_(){const t=this.NI,s=this.PG,i=s.EG,e=0!==this.kG;s.NG=e,t.activeTexture(t.TEXTURE2),e?(s.oI&&t.bindFramebuffer(t.FRAMEBUFFER,s.oI),t.bindTexture(t.TEXTURE_2D,i.sI())):(t.bindTexture(t.TEXTURE_2D,null),s.oI&&t.bindFramebuffer(t.FRAMEBUFFER,s.hI)),t.activeTexture(t.TEXTURE0)}Q_(){this.Jc=25}J_(){const t=this.NI;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}Y_(){this.Jc=26}V_(){const t=this.NI;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}H_(){this.Jc=27}q_(){const t=this.NI;t.disable(t.STENCIL_TEST)}X_(t,s,i,e,n){this.Jc=28,this.kG=t?1:0;const r=this.zG;r[0]=s,r[1]=i,r[2]=e,r[3]=n}Z_(){const t=this.NI,s=this.zG;1===this.kG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}K_(){switch(this.Jc){case 1:return void this.JG();case 2:return void this.VG();case 3:return void this.qG();case 4:return void this.$G();case 5:return void this.s_();case 6:return void this.e_();case 7:return void this.r_();case 8:return void this.o_();case 9:return void this.l_();case 10:return void this.p_();case 11:return void this.g_();case 12:return void this.M_();case 13:return void this.T_();case 14:return void this.x_();case 15:return void this.f_();case 16:return void this.R_();case 17:return void this.I_();case 18:return void this.G_();case 19:return void this.E_();case 20:return void this.L_();case 21:return void this.ZG();case 22:return void this.j_();case 23:return void this.B_();case 24:return void this.W_();case 25:return void this.J_();case 26:return void this.V_();case 27:return void this.q_();case 28:return void this.Z_();case 29:return void this.k_()}}}}{let fc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},dc=function(t){return t*(4/3)},pc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};0;const mc=self.Cs,gc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),yc={timeout:60},Mc=new mc.xo(0,0,0,1),wc=new Set(["left","center","right"]),Sc=new Set(["top","center","bottom"]),Tc=new Set(["word","cjk","character"]),bc=new Set(["ltr","rtl"]),xc=new Set;mc.tD&&mc.tD.addEventListener("fontload",(t=>{const s=t.font._c();for(const t of xc)(t.sD()||mc.Ze(t.iD(),s))&&t.eD()}));let vc=!1,Ic=!1;mc.OM.UT=class{constructor(t,s){s=Object.assign({},yc,s),this.QT=t,this.nD="Arial",this.rD=16,this.hD=1,this.oD=0,this.aD=!1,this.uD=!1,this.lD="black",this.cD=!1,this.Pg=null,this.fD=!0,this.dD=null,this.pD=new Set,this.mD="left",this.gD="top",this.Fc="",this.yD=null,this.MD=mc.Qn(mc.Og),this.wD="word",this.SD="ltr",this.TD=!1,this.bD=!1,this.xD=!1,this.vD=-1,this.ID=0,this.CD=0,this.GD=0,this._y=0,this.Dy=0,this._D=1,this.DD=null,this.ED=null,this.ND=null,this.AD=null,this.LD=-1,this.OD=-1,this.RD="",this.PD="",this.kD="",this.FD=1,this.jD=1,this.zD=t=>this.BD(t),this.nv=null,this.UD=new mc.Rect,this.WD=1,this.QD=new mc.Lf((()=>{this.JD(),this.YD(8,8)}),s.timeout),this.VD=null,this.HD=!1,xc.add(this)}Jn(){this.dD=null,this.pD.clear(),this.Pg=null,this.yD=null,this.DD=null,this.ED=null,this.ND=null,this.AD=null,this.zD=null,this.QD.Jn(),this.VD=null,this.JD(),this.MD._l(),this.MD=null,this.QT=null,this.HD=!0,xc.delete(this)}qD(){this.xD=!0}XD(){this.qD(),this.bD=!0}eD(){this.XD(),this.TD=!0}ZD(t){if(t=!!t,this.cD===t)return;this.cD=t;const s=this.cD?"alphabetic":"top";this.ED&&(this.ED.textBaseline=s),this.ND&&(this.ND.textBaseline=s),this.eD()}sD(){return this.cD}jg(t){this.Pg!==t&&(this.Pg=t,this.MD.jg(t),this.Pg&&this.Pg.TM()&&this.Pg.bM().then((()=>this.qD())),this.eD())}KD(t){t=!!t,this.fD!==t&&(this.fD=t,this.qD())}$D(t){t||(t="serif"),this.nD!==t&&(this.nD=t,this.eD())}iD(){return this.nD}tE(t){t<.1&&(t=.1),this.rD!==t&&(this.rD=t,this.eD())}sE(){return this.rD}iE(t){this.hD!==t&&(this.hD=t,this.eD())}eE(t){this.oD!==t&&(this.oD=t,this.XD())}nE(){return this.oD}rE(t){t=!!t,this.aD!==t&&(this.aD=t,this.eD())}hE(){return this.aD}oE(t){t=!!t,this.uD!==t&&(this.uD=t,this.eD())}aE(){return this.uD}uE(t){t=Math.floor(t),this.vD!==t&&(this.vD=t,this.qD())}lE(){return this.vD}cE(t,s){let i=[];(this.aD||s.Qy("b"))&&i.push("bold"),(this.uD||s.Qy("i"))&&i.push("italic");const e=s.Wy("size"),n=(e?parseFloat(e.Gg):this.rD)*this.hD;t?i.push(n+"pt"):i.push(n*this.fE()+"pt");let r=this.nD;const h=s.Wy("font");return h&&h.Gg&&(r=h.Gg,this.dD&&!this.pD.has(r)&&(this.dD(r),this.pD.add(r))),r&&(gc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Lb(t){t instanceof mc.xo&&(t=t.$o()),this.lD!==t&&(this.lD=t,this.qD())}dE(t,s,i){Mc.Do(t,s,i),this.Lb(Mc)}pE(t){if(!wc.has(t))throw new Error("invalid horizontal alignment");this.mD!==t&&(this.mD=t,this.XD())}mE(){return this.mD}gE(t){if(!Sc.has(t))throw new Error("invalid vertical alignment");this.gD!==t&&(this.gD=t,this.XD())}yE(){return this.gD}ME(t){if(!Tc.has(t))throw new Error("invalid word wrap mode");this.wD!==t&&(this.wD=t,this.eD())}wE(){return this.wD}SE(t){if(!bc.has(t))throw new Error("invalid text direction");this.SD!==t&&(this.SD=t,this.ED&&(this.ED.direction=this.SD),this.ND&&(this.ND.direction=this.SD),this.eD())}TE(){return this.SD}Bc(t){this.Fc!==t&&(this.Fc=t,this.eD())}bE(){return this.Fc}fE(){return this.WD*this._D*self.devicePixelRatio}xE(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.CD===t&&this.GD===s&&this._D===i)return;const e=this.CD;this.CD=t,this.GD=s,this._D=i;const n=self.devicePixelRatio;this._y=this.CD*this._D*n,this.Dy=this.GD*this._D*n;const r=Math.max(this._y,this.Dy),h=Math.min(this.QT.pv(),4096);let o=1;r>h&&(o=h/r,this._y=Math.min(this._y*o,h),this.Dy=Math.min(this.Dy*o,h)),this.WD=o,this.CD!==e?this.eD():this.XD()}Bg(){return this._y}Zg(){return this.Dy}vE(){return this._D}IE(){return this.CE(),this.MD.Cy()}GE(){return this.CE(),this.MD.Gy()+this.MD.Fg()*(this.oD+4)-this.oD}_E(){this.CE();let t=0;for(const s of this.MD.kg())for(const i of s.ey())t+=i.ny();return t}lI(){return this.QD.Ff(),this.DE(),this.nv}EE(t,s){this.CE();const i=this.fE(),e=this.MD.kg();for(const n of e){const e=n.$g()*i;if(s>=n.zy()-n.Zg()*i+e&&s<n.zy()+e)for(const s of n.ey())if(t>=s.Fy()&&t<s.Fy()+s.Bg()*i)return s}return null}*NE(t){this.CE();const s=this.MD.kg();for(const i of s)for(const s of i.ey()){const i=s.Wy("tag");i&&mc.Ze(i.Gg,t)&&(yield s)}}AE(t,s){for(const i of this.NE(t)){if(0===s)return i;--s}return null}LE(t){let s=0;for(const i of this.NE(t))++s;return s}DE(){(!this.nv||this.xD||this.bD||this.TD)&&(this.HD||this._y<=0||this.Dy<=0||(this.xD=!1,this.OE()))}OE(){this.HD||(this.CE(),this.YD(Math.max(mc.Sr(Math.ceil(this._y)),128),Math.max(mc.Sr(Math.ceil(this.Dy)),64)),this.RE(),this.PE(),this.QD.Ff())}YD(t,s){this.DD||(this.DD=mc.lo(16,16));let i=!1;this.LD===t&&this.OD===s||(this.LD=t,this.OD=s,this.DD.width=t,this.DD.height=s,i=!0),this.ED||(this.ED=this.DD.getContext("2d"),i=!0),i?(this.ED.textBaseline=this.cD?"alphabetic":"top",this.ED.direction=this.SD,this.ED.font=this.RD,this.ED.fillStyle=this.kD,this.ED.strokeStyle=this.kD,this.ED.globalAlpha=this.FD,this.ED.lineWidth=this.jD):this.ED.clearRect(0,0,t,s)}kE(){this.ND||(this.ND=mc.lo(16,16).getContext("2d"),this.AD=mc.lo(16,16).getContext("2d"),this.ND.textBaseline=this.cD?"alphabetic":"top",this.AD.textBaseline="top",this.ND.direction=this.SD,this.AD.direction=this.SD)}FE(t){this.PD!==t&&(this.PD=t,this.ND.font=t,this.AD.font=t)}jE(){if(!vc){vc=!0,this.kE();const t=this.ND.measureText("test");Ic="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Ic}CE(){this.zE(),this.BE()}zE(){this.TD&&(this.kE(),!this.cD||this.yD&&this.yD.toString()===this.Fc||(this.yD=new mc.dn(this.Fc,{fg:!0})),this.MD.Og(this.cD?this.yD.Ig():this.Fc,this.zD,this.CD,this.wD,0),this.TD=!1)}BE(){this.bD&&(this.UE(),this.bD=!1)}BD(t){const s=t.Vg()?t.gy().join(""):" ";this.FE(this.cE(!0,t));const i=t.Wy("size"),e=(i?parseFloat(i.Gg):this.rD)*this.hD,n=this.ND.measureText(s);let r=0;if(this.cD&&this.jE()){const t=this.AD.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:dc(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,Yg:r}}WE(t){this.RD!==t&&(this.RD=t,this.ED.font=t)}QE(t){this.kD!==t&&(this.kD=t,this.ED.fillStyle=t,this.ED.strokeStyle=t)}JE(t){this.FD!==t&&(this.FD=t,this.ED.globalAlpha=t)}YE(t){this.jD!==t&&(this.jD=t,this.ED.lineWidth=t)}UE(){const t=this.fE(),s=(4+this.oD)*t;let i=0;const e=this.MD.kg();if(0===e.length)return;for(const t of e){t.ky(NaN),t.jy(NaN);for(const s of t.ey())s.ky(NaN),s.jy(NaN)}const n=this.cD&&this.jE();let r=e[0].Zg()*t;if("center"===this.gD){const h=e.reduce(((i,e)=>i+e.Zg()*t+s),0)-s;i=Math.max(this.Dy/2-h/2,0),n&&(r=e[0].ty()*t)}else if("bottom"===this.gD){const r=e.reduce(((i,e)=>i+e.Zg()*t+s),0)-this.oD*t,h=n?e.at(-1).$g()*t:0;i=this.Dy-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Zg()*t,a=i;if(this.cD){if(i+=0===n?r:o,n>0&&i>this.Dy-4*t)break}else if(n>0&&i>=this.Dy-o)break;a>=0&&this.VE(h,i,t),this.cD||(i+=o),i+=s}}VE(t,s,i){let e=0;"center"===this.mD?e=Math.floor((this._y-t.Bg()*i)/2):"right"===this.mD&&(e=this._y-t.Bg()*i),t.ky(e),t.jy(s);for(const n of"ltr"===this.SD?t.ey():t.Ry())this.HE(n,e,s,i),e+=n.Bg()*i}HE(t,s,i,e){const n=t.Wy("offsetx");s+=n?pc(n.Gg,t.Zg())*e:0;const r=t.Wy("offsety");if(i+=r?pc(r.Gg,t.Zg())*e:0,t.qg()){const s=t.Wy("iconoffsety");i+=s?pc(s.Gg,t.Zg())*e:.2*t.Zg()*e}t.ky(s),t.jy(i)}RE(){this.ED.imageSmoothingEnabled=this.fD,this.ED.imageSmoothingQuality="high",this.ID=0;const t=this.fE(),s=this.MD.kg();for(const i of s)this.qE(i,t)}qE(t,s){const i=t.Fy(),e=t.zy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.SD?t.ey():t.Ry())this.XE(i,s,t.Zg())}XE(t,s,i){const e=this.ED,n=t.Fy(),r=t.zy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.Bg()*s;const a=t.Zg()*s,u=t.Zg()/16,l=(4+this.oD)*s;let c=t.Vg()?t.gy():null;if(-1!==this.vD){if(this.ID>=this.vD)return;t.Vg()&&this.ID+c.length>this.vD&&(c=c.slice(0,this.vD-this.ID),o=this.BD(t).width*s),this.ID+=t.ny()}const f=t.Wy("background"),d=t.Qy("u"),p=t.Qy("s");if(t.Vg()&&mc.wm(c)&&!f&&!d&&!p||t.Qy("hide"))return;const m=t.Wy("color"),g=t.Wy("opacity");this.JE(g?parseFloat(g.Gg)/100:1),f&&(this.QE(f.Gg),e.fillRect(n,r-a,o,a+l));const y=t.Wy("linethickness"),M=y?parseFloat(y.Gg):1,w=t.Qy("stroke");if(w&&this.YE(.5*u*M*this.fE()),t.Vg()){const s=c.join("");if(this.WE(this.cE(!1,t)),!w){this.YE(.5*u*M*this.fE());const i=t.Wy("outlineback");i&&(this.QE(i.Gg),this.ZE(!0,s,n,r,o))}if(this.QE(m?m.Gg:this.lD),this.ZE(w,s,n,r,o),!w){this.YE(.5*u*M*this.fE());const i=t.Wy("outline");i&&(this.QE(i.Gg),this.ZE(!0,s,n,r,o))}}else if(t.qg()&&t.Bg()>0){const s=t.Ky(this.Pg);s&&e.drawImage(s,n,r-a,o,a)}if(this.QE(m?m.Gg:this.lD),d&&fc(e,w,n,r+s*h,o,s*h*M),p){const t=s*u,i=r-a/4+t/2;e.fillRect(n,i-t*M/2,o,t*M)}}ZE(t,s,i,e,n){"rtl"===this.SD&&(i+=n),t?"Gecko"===mc.Zs.ei?this.ED.strokeText(s,i,e,n):this.ED.strokeText(s,i,e):"Gecko"===mc.Zs.ei?this.ED.fillText(s,i,e,n):this.ED.fillText(s,i,e)}PE(){this.QT.KE()||(this.nv||(this.nv=this.QT.tI(this.DD.width,this.DD.height,{Kx:!0,$x:"high"})),this.QT.$E(this.DD,this.nv),this.UD.set(0,0,this._y/this.nv.Bg(),this.Dy/this.nv.Zg()),this.VD&&this.VD())}tN(){return this.UD}JD(){this.nv&&(this.QT.KE()||this.QT.nI(this.nv),this.nv=null)}static Ob(){for(const t of xc)t.JD()}static sN(){return xc.values()}}}{const Cc=self.Cs;class Gc{constructor(t){this.NI=t.mv(),this.iN=t.gv(),this.eN=t.nN(),this.rN=null,this.kf=!1,this.hN=!1,this.oN=0,1===this.iN?this.rN=this.eN.createQueryEXT():this.rN=this.NI.createQuery()}Jn(){this.aN(),this.NI=null,this.eN=null,this.hN=!1}aN(){this.rN&&(1===this.iN?this.eN.deleteQueryEXT(this.rN):this.NI.deleteQuery(this.rN),this.rN=null)}__(){if(this.kf)throw new Error("query already active");1===this.iN?this.eN.beginQueryEXT(this.eN.TIME_ELAPSED_EXT,this.rN):this.NI.beginQuery(this.eN.TIME_ELAPSED_EXT,this.rN),this.kf=!0}N_(){if(!this.kf)throw new Error("query not active");1===this.iN?this.eN.endQueryEXT(this.eN.TIME_ELAPSED_EXT):this.NI.endQuery(this.eN.TIME_ELAPSED_EXT),this.kf=!1}uN(){if(!this.rN||this.hN||this.kf)return;let t=!1;t=1===this.iN?this.eN.getQueryObjectEXT(this.rN,this.eN.QUERY_RESULT_AVAILABLE_EXT):this.NI.getQueryParameter(this.rN,this.NI.QUERY_RESULT_AVAILABLE);const s=this.NI.getParameter(this.eN.GPU_DISJOINT_EXT);t&&!s&&(1===this.iN?this.oN=this.eN.getQueryObjectEXT(this.rN,this.eN.QUERY_RESULT_EXT):this.oN=this.NI.getQueryParameter(this.rN,this.NI.QUERY_RESULT),this.oN/=1e9,this.hN=!0),(t||s)&&this.aN()}lN(){return this.hN}cN(){if(!this.hN)throw new Error("no result available");return this.oN}}Cc.OM.fN=class{constructor(t){this.QT=t,this.Aw=t.ET(),this.kf=!1,this.dN=null,this.pN=!1,this.mN=null,this.gN=[]}Jn(){for(const t of this.gN)t instanceof Gc&&t.Jn();Cc.wh(this.gN),this.dN=null,this.mN=null,this.QT=null}__(){if(this.kf)throw new Error("query already active");const t=this.QT.yN();t.length>0?(this.pN=!0,this.dN=t.at(-1),this.dN.MN(),this.dN.gN.push(this)):(this.pN=!1,this.dN=null),this.kf=!0,t.push(this),this.wN()}N_(){if(!this.kf)throw new Error("query not active");if(this.QT.yN().pop()!==this)throw new Error("can only end most nested query");this.kf=!1,this.MN(),this.dN&&(this.dN.wN(),this.dN=null)}wN(){this.mN=Cc.Qn(Gc,this.QT),this.gN.push(this.mN),this.mN.__()}MN(){this.mN.N_(),this.mN=null}uN(){for(const t of this.gN)t.uN()}SN(){return this.pN}lN(){return this.gN.every((t=>t.lN()))}cN(){return this.gN.reduce(((t,s)=>t+s.cN()),0)}ET(){return this.Aw}}}{const _c=self.Cs;_c.OM.TN=class{constructor(t,s=1e3){this.QT=t,this.bN=s,this.xN=[],this.QT.vN(this)}Jn(){this._l(),this.QT.IN(this),this.QT=null}_l(){for(const t of this.xN)t.Jn();_c.wh(this.xN)}CN(){const t=new _c.OM.fN(this.QT);return this.xN.push(t),this.xN.length>this.bN&&this.xN.shift().Jn(),t}GN(t){for(const s of this.xN){if(s.ET()>=t)return;if(s.SN())return;s.uN()}}_N(t,s){if(s<=t)return NaN;let i=0;for(const e of this.xN){if(e.ET()>=s)break;if(!(e.ET()<t)){if(!e.lN())return NaN;i+=e.cN()}}return i}DN(t){for(let s=0,i=this.xN.length;s<i;++s){const i=this.xN[s];if(!(i.ET()<t))return void(s>0&&this.xN.splice(0,s));i.Jn()}}}}{let Dc=function(){Wc=-1;for(const t of Uc)t.EN()&&(t.resolve(),Uc.delete(t));Uc.size>0&&(Wc=self.requestAnimationFrame(Dc))};0;const Ec=self.Cs,Nc=(self.assert,self.hs),Ac=(Nc.ys,Nc.Ms),Lc=Nc.fs,Oc={powerPreference:"default",NN:!0,alpha:!1,depth:!1,AN:!1,LN:2,failIfMajorPerformanceCaveat:!1},Rc=new Set(["default","low-power","high-performance"]),Pc=new Ec.Gu(0,0,1,0,1,1,0,1),kc=Lc.create(),Fc=Lc.create(),jc=new Ec.Gu,zc=new Ec.Rect;let Bc=null;Ec.Rs&&(self.ON=function(){Bc?Bc.loseContext():console.warn("WEBGL_lose_context not supported")},self.RN=function(){Bc?Bc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Uc=new Set;let Wc=-1;Ec.OM.PN=class extends Ec.OM.XM{constructor(t,s){if(super(s),s=Object.assign({},Oc,s),!Rc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.LN>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.NI=e,this.kN=e.getContextAttributes(),this.FN=e.getParameter(e.VERSION),this.iN=n,this.jN=Ac.create(),this.zN=!1,this.BN=Lc.create(),this.UN=!!s.depth,this.WN=!(!s.depth||!s.AN),this.QN=this.UN,this.JN=!1,this.YN=null,this.VN=!0,this.HN=0,this.qN=0,this.OI=null,this.RI=null,this.XN=null,this.kI=null,this.ZN=new Float32Array(8e3*this.GT()),this.KN=new Uint16Array(12e3),this.$N=new Float32Array(16e3),this.tA=new Float32Array(32e3),this.sA=0,this.iA=0,this.eA=0,this.nA=0,this.rA=null,this.hA=null,this.oA=[],this.aA=0,this.uA=0,this.lA=null,this.cA=0,this.PG=Ec.Qn(Ec.OM.DG,this),this.fA=Ec.Qn(Ec.xo,1,1,1,1),this.dA=null,this.w_=null,this.pA=0,this.mA=0,this.gA=new Ec.Rect,this.yA=Ec.Qn(Ec.Rect,0,0,-1,-1),this.MA=0,this.wA=-1,this.SA=0,this.TA=0,this.bA=0,this.xA="(unavailable)",this.vA="(unavailable)",this.IA=[],this.CA=!1,this.GA=null,this._A=null,this.DA=null,this.EA=null,this.NA=null,this.AA=null,this.LA=null,this.OA=0,this.RA=!!s.NN,this.eN=null,this.PA=new Set,this.kA=[],this.Rw(this.KN)}PT(){return!0}async Fw(){super.Fw();const t=this.NI,s=this.GT();this.fA._o(1,1,1,1),this.dA=null,this.w_=null,this.sA=0,this.eA=0,this.nA=8e3*s-4*s,Ec.wh(this.oA),this.aA=0,this.uA=0,this.rA=null,this.lA=null,this.gA.set(0,0,1,1),this.cA=0;const i=this.PG;i._C=null,i.hI=null,i.oI=null,Ac.set(i.AG,1,1,1,1),i.clearColor._o(0,0,0,0),i.LG.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.pA=t.ONE,this.mA=t.ONE_MINUS_SRC_ALPHA,this.FA(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.UN?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.QN=this.UN,this.JN=!1,this.kI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kI),t.bufferData(t.ARRAY_BUFFER,this.tA.byteLength,t.DYNAMIC_DRAW),this.OI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.OI),t.bufferData(t.ARRAY_BUFFER,this.ZN.byteLength,t.DYNAMIC_DRAW),this.RI=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.RI),t.bufferData(t.ARRAY_BUFFER,this.$N.byteLength,t.DYNAMIC_DRAW),this.XN=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.XN),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.KN,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.wA=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.SA=e[0],this.TA=e[1];const n=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this.bA=n&&r?Math.min(n.precision,r.precision):0,this.TA>2048&&(this.TA=2048),this.IA=t.getSupportedExtensions();const h=t.getExtension("WEBGL_debug_renderer_info");if(h&&(this.xA=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.vA=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.GA=t.getExtension("KHR_parallel_shader_compile"),Ec.Rs&&(Bc=t.getExtension("WEBGL_lose_context")),this.RA&&(1===this.gv()?this.eN=t.getExtension("EXT_disjoint_timer_query"):this.eN=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this._A=t.getExtension("EXT_texture_filter_anisotropic"),this._A?this.OA=t.getParameter(this._A.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.OA=0,this.gv()<2&&this.UN&&this.WN&&(this.EA=t.getExtension("WEBGL_depth_texture"),!this.EA))throw new Error("no depth texture support");this.gv()<2&&(this.NA=t.getExtension("EXT_frag_depth"),this.AA=t.getExtension("OES_standard_derivatives"),this.LA=t.getExtension("EXT_shader_texture_lod"));const o=Ec.OM.II,a=o.ZC(!1);let u=o.$C(),l=a,c=o.aG(),f=o.hG(),d=o.iG(),p=o.ZC(!0),m=!1;this.UN&&(this.gv()<2?this.NA&&(u=o.tG(),c=o.uG(),d=o.eG(),m=!0):(l=o.KC(),u=o.sG(this.jA()),c=o.lG(this.jA()),f=o.oG(),d=o.nG(this.jA()),p=o.KC(!0)));const g=o.rG(this.gv(),m,this.AA&&this.LA,this.jA()),y=this.gv()>=2?o.KC():a,M=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.cG(),a,"<fill>"],[o.fG(),a,"<lineargradient>"],[o.dG(),a,"<penumbra>"],[o.mG(),a,"<hardellipse>"],[o.gG(),a,"<hardellipseoutline>"],[o.yG(),a,"<smoothellipse>"],[o.MG(),a,"<smoothellipseoutline>"],[o.pG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map((t=>this.zA({src:t[0],GI:t[1],name:t[2]}))));this.ow=w[0],this.hA=w[1],this.aw=w[2],this.cw=w[3],this.fw=w[4],this.dw=w[5],this.pw=w[6],this.mw=w[7],this.gw=w[8],this.yw=w[9],this.Mw=w[10],this.uw=w[11],this.lw=w[12],this.aS()}async zA(t){const s=await Ec.OM.II.EI(this,t);return this.nS(s),s}BA(){this.rA=null}xE(t,s,i){if(this._y===t&&this.Dy===s&&!i)return;this.DT();const e=this.NI,n=this.PG;this._y=t,this.Dy=s,this.UA(0,0,t,s),this.$w(this.BN,t/s),this.WA(this.BN),this.hA&&(e.useProgram(this.hA.EC()),this.hA.xC(this.$M),this.rA=this.hA,this.PG._C=this.hA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.dA=null,this.w_=null,this.UN&&this.VN&&this.QA(this._y,this.Dy),this.lA&&this.lA.eI(this._y,this.Dy),e.bindFramebuffer(e.FRAMEBUFFER,null),this.lA=null,n.hI=null,n.oI=null}QA(t,s){const i=this.NI;this.YN&&this.HN===t&&this.qN===s||(this.WN?(this.YN&&i.deleteTexture(this.YN),this.YN=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.YN),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.gv()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.EA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.EA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.YN&&i.deleteRenderbuffer(this.YN),this.YN=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.YN),i.renderbufferStorage(i.RENDERBUFFER,this.iN>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.HN=t,this.qN=s)}JA(t,s){this.UN&&(this.VN=!1,this.QA(t,s))}YA(){this.UN&&(this.VN=!0,this.QA(this._y,this.Dy))}UA(t,s,i,e){const n=this.jN;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.VA().t_(t,s,i,e),Ac.set(n,t,s,i,e),this.uA=0)}Hw(t){super.Hw(t),this.$w(this.BN,this._y/this.Dy)}Qw(t){super.Qw(t),this.$w(this.BN,this._y/this.Dy)}Yw(t){super.Yw(t),this.$w(this.BN,this._y/this.Dy)}WA(t){Lc.L(this.$M,t)||(this.VA().i_(t),Lc.m(this.$M,t),this.uA=0,this.zN=!0)}HA(){let t,s,i;const e=this.lA;null===e?(t=this.BN,s=this.Bg(),i=this.Zg()):(t=e.cI(),s=e.Bg(),i=e.Zg()),this.WA(t),this.UA(0,0,s,i)}qA(t){Lc.L(this.tw,t)||(this.VA().n_(t),Lc.m(this.tw,t),this.uA=0,this.zN=!0)}XA(){this.zN=!1}ZA(){return this.zN}rI(){return this.PG}VA(){const t=this.oA;return this.aA===t.length&&t.push(new Ec.OM.OG(this.PG)),t[this.aA++]}DT(){0!==this.aA&&(this.KE()||(this.KA(),this.$A(),this.aA=0,this.sA=0,this.iA=0,this.eA=0,this.uA=0))}KA(){const t=this.NI;this.eA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.kI),t.bufferSubData(t.ARRAY_BUFFER,0,this.tA.subarray(0,this.eA))),this.sA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.OI),t.bufferSubData(t.ARRAY_BUFFER,0,this.ZN.subarray(0,this.sA)),t.bindBuffer(t.ARRAY_BUFFER,this.RI),t.bufferSubData(t.ARRAY_BUFFER,0,this.$N.subarray(0,this.iA)))}$A(){const t=this.oA;for(let s=0,i=this.aA;s<i;++s)t[s].K_()}tL(){return this.fA.zo()}sL(t,s,i,e){const n=this.fA;n.Yo(t,s,i,e)||(n._o(t,s,i,e),this.VA().HG(n),this.uA=0,this.Sw=null)}iL(t){const s=this.fA;s.zo()!==t&&(s.Ro(t),this.VA().HG(s),this.uA=0,this.Sw=null)}Lb(t){const s=this.fA;s.equals(t)||(s.set(t),this.VA().HG(s),this.uA=0,this.Sw=null)}eL(){this.sL(1,1,1,1)}nL(){return this.fA}rL(t){t!==this.dA&&(this.VA().YG(t),this.dA=t,this.uA=0)}Sv(){this.dA=null}Ab(t){const s=this.RS(t);this.hL(s[0],s[1])}oL(t){const s=this.FS(t);this.hL(s.LS,s.OS)}hL(t,s){t===this.pA&&s===this.mA||(this.VA().KG(t,s),this.pA=t,this.mA=s,this.uA=0,this.Sw=null)}aL(){return this.pA===this.NI.ONE&&this.mA===this.NI.ONE_MINUS_SRC_ALPHA}uL(){this.hL(this.NI.ONE,this.NI.ONE_MINUS_SRC_ALPHA)}lL(){this.hL(this.NI.SRC_ALPHA,this.NI.ONE_MINUS_SRC_ALPHA)}cL(){this.hL(this.NI.ONE,this.NI.ZERO)}Rect(t){this.fL(t.Za(),t.Ka(),t.$a(),t.tu())}fL(t,s,i,e){this.CT(t,s,i,s,i,e,t,e)}dL(){let t=this.sA;t>=this.nA&&(this.DT(),t=0),1===this.uA?this.oA[this.aA-1].FG+=6:(this.VA().QG(t,6),this.uA=1)}pL(t){t.Vu(this.ZN,this.sA,this.xw+this.Iw),this.sA+=12}Gu(t){this.dL(),this.pL(t),Pc.Uo(this.$N,this.iA),this.iA+=8}CT(t,s,i,e,n,r,h,o){this.dL();const a=this.ZN;let u=this.sA;const l=this.xw+this.Iw;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=n,a[u++]=r,a[u++]=l,a[u++]=h,a[u++]=o,a[u++]=l,this.sA=u,Pc.Uo(this.$N,this.iA),this.iA+=8}$S(t,s){this.dL(),this.pL(t),s.eu(this.$N,this.iA),this.iA+=8}mL(t,s){this.dL(),this.pL(t),s.Uo(this.$N,this.iA),this.iA+=8}gL(t,s,i,e,n,r,h,o,a,u,l,c,f){this.dL();const d=this.ZN;let p=this.sA;const m=this.xw+this.Iw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.sA=p,f.eu(this.$N,this.iA),this.iA+=8}HS(t,s,i,e,n,r,h,o,a,u,l,c,f){this.dL();const d=this.ZN;let p=this.sA;const m=this.xw+this.Iw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.sA=p,f.Uo(this.$N,this.iA),this.iA+=8}yL(t,s,i){const e=this.ZN,n=this.$N;if(i.length%3!=0)throw new Error("invalid index buffer length");for(let r=0,h=i.length;r<h;){const h=i[r++],o=i[r++],a=i[r++],u=3*h,l=3*o,c=3*a,f=2*h,d=2*o,p=2*a;this.dL();let m=this.sA,g=this.iA;e[m++]=t[u+0],e[m++]=t[u+1],e[m++]=t[u+2],e[m++]=t[l+0],e[m++]=t[l+1],e[m++]=t[l+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],n[g++]=s[f+0],n[g++]=s[f+1],n[g++]=s[d+0],n[g++]=s[d+1],n[g++]=s[p+0],n[g++]=s[p+1],n[g++]=s[p+0],n[g++]=s[p+1],this.sA=m,this.iA=g}}ML(t,s){this.US(0),Lc.m(kc,this.$M),Lc.m(Fc,this.tw),this.HA();const[i,e]=this.wL(this.lA),n=this.eS(0,0,this.zw(e),0,0,0,e);if(this.qA(n),"crop"===t&&this.lA&&s){const t=this._y/2,i=this.Dy/2,e=s.Bg(),n=s.Zg(),r=this.lA.Bg(),h=this.lA.Zg(),o=Math.min(r,e),a=Math.min(h,n),u=Math.max(n-h,0),l=Math.max(h-n,0);zc.set(-t,i-l,-t+o,i-a-l),jc.Hu(zc),zc.set(0,u,o,a+u),zc.Mt(e,n),this.$S(jc,zc)}else{const t=i/2,s=e/2;this.fL(-t,s,t,-s)}this.WA(kc),this.qA(Fc)}SL(t){this.gA.equals(t)||(this.gA.m(t),this.VA().c_(t),this.uA=0)}TL(){}bL(t,s,i,e){this.eA>=7996&&this.DT();let n=this.eA;const r=this.xw+this.Iw;2===this.uA&&this.cA===r?this.oA[this.aA-1].FG++:(this.VA().d_(n,r),this.uA=2,this.cA=r);const h=this.tA;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.eA=n}uS(t){this.rA!==t&&(this.VA().m_(t),this.rA=t,this.uA=0,this.Sw=null)}xL(){return this.rA}vL(){this.uS(this.hA)}IL(t){this.VA().XG(t),this.uA=0}CL(t,s,i=1){this.VA().A_(t,s,i),this.uA=0}GL(t,s,i,e,n,r,h){if(this.rA!==this.uw)throw new Error("must set tilemap fill mode first");this.VA().O_(t,s,i,e,n,r,h),this.uA=0}_L(t,s,i,e,n,r,h){if(this.rA!==this.lw)throw new Error("must set tile randomization mode first");this.VA().P_(t,s,i,e,n,r,h),this.uA=0}DL(t,s,i,e,n,r,h,o,a,u,l){const c=this.rA;if(l%=10800,!c.dC||c.FC(s,i,e,n,r,h,o,a,u,l))return;const f=this.VA();f.y_(),c.BC(s,i,e,n,r,h,o,a,u,l);const d=f.zG;d[0]=r,d[1]=h,s.Uo(d,2),d[6]=a,d[7]=u,i.Uo(d,12);const p=f.BG;n.Uo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Uo(f.UG,0),f.kG=l,f.FG=o,c.XI.pC()?f.jG=t?t.lI():null:f.jG=null,this.uA=0}EL(t){const s=this.rA;if(0===t.length||s.OC(t))return;const i=this.VA();i.S_(),s.PC(t),Ec.xh(i.WG,t),this.uA=0}NL(t,s,i,e){this.VA().u_(t,s,i,e),this.uA=0}_l(t){this.VA().a_(t),this.uA=0}AL(){}_T(){super._T(),this.NI.flush()}LL(){this.UN&&this.lA&&this.lA.mI()&&(this.VA().F_(this.QN),this.uA=0)}OL(t){t=!!t,this.QN!==t&&this.UN&&(this.QN=t,this.VA().z_(t),this.uA=0)}RL(){return this.QN}sI(){return this.YN}iI(){return this.WN}PL(t){if(t=!!t,this.WN&&this.JN!==t){if(t&&this.RL())throw new Error("depth still enabled");this.JN=t,this.VA().U_(t),this.uA=0}}kL(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.yA.Xa(t,s,i,e)||(this.yA.Wa(t,s,i,e),s=(n||this.wL(this.FL())[1])-s-e,this.VA().X_(!0,t,s,i,e),this.uA=0)}jL(){-1!==this.yA.$a()&&(this.yA.set(0,0,-1,-1),this.VA().X_(!1,0,0,0,0),this.uA=0)}zL(){for(const t of this.PA)t.GN(this.Aw)}KE(){return!this.NI||this.NI.isContextLost()||this.CA}Ob(){super.jw(),Ec.OM.ev.Ob(),Ec.OM.jv.Ob(),Ec.OM.UT.Ob();for(const t of this.PA)t._l();this.IA=[],this.eN=null,this.GA=null,this.DA=null,this._A=null,this.EA=null,this.NA=null,this.AA=null,this.LA=null,this.OA=0,this.xA="(unavailable)",this.vA="(unavailable)",this.rA=null,this.hA=null,this.YN=null;for(const t of this.ww.values())t.Ob()}async Rb(){this.CA=!0,await this.Fw(),this.CA=!1;for(const t of this.ww.values())t.Rb(this);this.xE(this._y,this.Dy,!0)}BL(t,s){if(this.KE())throw new Error("context lost");this.DT();const i=Ec.Qn(Ec.OM.ev,this);return i.dv(t,s),i}async UL(t,s){if(this.KE())throw new Error("context lost");if(s=Object.assign({},s),Ec.Ei.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.Vx&&"clamp-to-edge"!==s.Vx||s.Hx&&"clamp-to-edge"!==s.Hx,n=Ec.wr(i.width)&&Ec.wr(i.height);return this.yv()||n||!e?s.tv=!1:Ec.Ei.Oi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ec.Sr(i.width),resizeHeight:Ec.Sr(i.height)}),s.tv=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ec.ff((()=>this.BL(i,s)))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ec.uo(t);t=s}return await Ec.ff((()=>this.BL(t,s)))}tI(t,s,i){this.DT();const e=Ec.Qn(Ec.OM.ev,this);return e.Tv(t,s,i),e}$E(t,s,i){this.DT(),s.Cv(t,i)}nI(t){t&&(t.Nv(),t.Av()>0||(this.DT(),t===this.dA&&(this.NI.bindTexture(this.NI.TEXTURE_2D,null),this.dA=null),t===this.w_&&(this.NI.activeTexture(this.NI.TEXTURE1),this.NI.bindTexture(this.NI.TEXTURE_2D,null),this.NI.activeTexture(this.NI.TEXTURE0),this.w_=null),t.Gv()))}WL(t){let s=this._y,i=this.Dy,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.DT();const n=Ec.Qn(Ec.OM.jv,this);return n.Kv(s,i,Object.assign({kv:e},t)),this.lA=null,this.PG.hI=null,this.PG.oI=null,n}QL(t,s=!0){t!==this.lA&&(t&&t.gI()&&t.eI(this._y,this.Dy),this.VA().h_(t),this.lA=t,this.uA=0,s&&this.HA())}FL(){return this.lA}wL(t){return t?[t.Bg(),t.Zg()]:[this._y,this.Dy]}JL(t,s="stretch"){this.iN<2||this.lA&&this.lA.yI()>0?(this.cL(),this.eL(),this.YL(t,s)):(this.VA().v_(t,this.lA,s),this.uA=0)}YL(t,s="stretch"){const i=t.lI();if(!i)throw new Error("not a texture-backed render target");this.rL(i),this.ML(s,i)}VL(t){this.iN<2||(this.VA().b_(t.aI()),this.uA=0)}HL(t){this.QL(null),this.DT();const s=t.lI();s===this.dA&&(this.NI.bindTexture(this.NI.TEXTURE_2D,null),this.dA=null),s===this.w_&&(this.NI.activeTexture(this.NI.TEXTURE1),this.NI.bindTexture(this.NI.TEXTURE_2D,null),this.NI.activeTexture(this.NI.TEXTURE0),this.w_=null),t.Gv()}async bI(t,s,i){this.DT();const e=this.lA;let n,r,h;t?(n=t.Bg(),r=t.Zg(),h=t.aI()):(n=this.Bg(),r=this.Zg(),h=null);let o=0,a=0,u=n,l=r;if(i){o=Ec.Xn(Math.floor(i.Za()),0,n-1),a=Ec.Xn(Math.floor(i.Ka()),0,r-1);let t=i.width();t=0===t?n-o:Ec.Xn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Ec.Xn(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}const c=this.NI;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.lA=null,this.PG.hI=null,this.PG.oI=null,this.QL(e)};let d;if(!s&&this.gv()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=u*l*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.DI((()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED)),c.deleteSync(e),d=new ImageData(u,l),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}qL(){this.OL(!0),this.VA().Q_(),this.uA=0,this.MA=1}XL(){this.OL(!1),this.VA().Y_(),this.uA=0,this.MA=2}ZL(){return 2===this.MA}KL(){this.OL(!0),this.VA().H_(),this.uA=0,this.MA=0}$L(t){this.tO()&&(this.VA().C_(t),this.uA=0)}sO(t){this.tO()&&(this.VA().D_(t),this.uA=0)}DI(t){const s=new Promise((s=>Uc.add({resolve:s,EN:t})));return-1===Wc&&(Wc=self.requestAnimationFrame(Dc)),s}kT(){return this._y*this.Dy*(this.kN.alpha?4:3)}FT(){let t=0;for(const s of Ec.OM.jv.xI())s.lI()||(t+=s.Ov());return t}jT(){let t=0;for(const s of Ec.OM.ev.Rv())t+=s.Ov();return t}iO(){return this.FN}gv(){return this.iN}eO(){return"webgl"+this.gv()}yv(){return this.gv()>=2}pv(){return this.wA}nO(){return this.SA}rO(){return this.TA}hO(){return 0!==this.bA}oO(){return this.bA}aO(){return this.xA}uO(){return this.vA}lO(){if(this.gv()>=2)return"webgl2";{const t=[];return this.NA&&t.push("EXT_frag_depth"),this.AA&&t.push("OES_standard_derivatives"),this.LA&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}cO(){return this.IA}tO(){return!!this.eN}nN(){return this.eN}_I(){return this.GA}jA(){return!!this.DA}vv(){return this._A}Iv(){return this.OA}vN(t){this.PA.add(t)}IN(t){this.PA.delete(t)}yN(){return this.kA}mv(){return this.NI}FA(t){this.AS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}fO(){return this.BT()}}}{const Qc=self.Cs,Jc={dO:null,pO:null,mO:null,getTime:null,gO:null};Qc.OM.yO=class{constructor(t){t=Object.assign({},Jc,t),this.MO=t.dO,this.wO=t.pO,this.SO=t.mO,this.TO=t.getTime,this.bO=t.gO,this.xO=null,this.vO=new Set}IO(t){this.vO.add(t)}CO(t){this.vO.delete(t)}Ob(){this.xO=null;for(const t of this.vO)t.Ob()}GO(t){return this.MO?this.MO(t):[t.Bg(),t.Zg()]}FL(t){return this.wO(t)}_O(t,s){this.SO(t,s)}DO(){return this.TO()}Ap(t){this.bO(t)}EO(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.xO||this.xO.Bg()===s&&this.xO.Zg()===i||(t.nI(this.xO),this.xO=null),null===this.xO&&(this.xO=t.BL(null,{width:s,height:i,qx:"nearest",Kx:!1})),this.xO}}}{const Yc=self.Cs,Vc=(self.assert,self.hs.fs),Hc=Yc.Qn(Yc.Rect),qc=Yc.Qn(Yc.Rect),Xc=Yc.Qn(Yc.Rect),Zc=Yc.Qn(Yc.Rect),Kc=Vc.create(),$c=Vc.create(),tf={NO:null,AO:null,LO:null,OO:!1},sf={RO:null,PO:!1,kO:!1,FO:!1,jO:!1,zO:!1,BO:!1};Yc.OM.UO=class{constructor(t,s){s=Object.assign({},tf,s),this.Bp=t,this.WO=s.NO,this.QO=s.AO,this.JO=s.LO,this.YO=null,this.VO=[],this.HO=[],this.qO=[],this.XO=!1,this._b=0,this.ZO=!1,this.KO=!1,this.$O=!1,this.tR=!1,this.sR=!1,this.iR=!1,this.zN=!1,this.eR=!1,this.nR=!1,this.rR=!1,this.hR=!1,this.oR=!1,this.aR=0,this.uR=[null,null,null],this.lR=!!s.OO,this.cR=0,this.fR=0,this.dR=0,this.pR=0,this.mR=null,this.gR=null,this.yR=Yc.Qn(Yc.Rect),this.MR=Yc.Qn(Yc.Rect),this.wR=Yc.Qn(Yc.Rect),this.SR=Yc.Qn(Yc.Rect),this.TR=Yc.Qn(Yc.Rect),this.bR=1,this.xR=1,this.vR=0,this.IR=0,this.CR=null,this.GR=null,this._R=0,this.DR=0,this.ER=0,this.NR=0,this.AR=!1,this.Hv=Vc.create(),this.LR=Vc.create(),this.Bp.IO(this)}Jn(){this.Bp.CO(this),Yc.wh(this.qO),Yc.wh(this.VO),Yc.wh(this.HO),this.mR=null,this.gR=null,this.WO=null,this.QO=null,this.JO=null}Ob(){this.XO=!0,Yc.wh(this.qO),Yc.wh(this.VO),Yc.wh(this.HO)}OR(){return this.XO}RR(t,s){if(s=Object.assign({},sf,s),Yc.wh(this.qO),this.cR=0,this.fR=0,this.ZO=!1,this.KO=!1,this.$O=!1,this.tR=!1,this.sR=!1,this.iR=!1,this.aR=0,this.oR=!!s.jO,this.hR=!!s.BO,this.XO=!1,Yc.xh(this.VO,t),0===t.length)return;if(s.RO){if(s.RO.length!==t.length)throw new Error("incorrect indexMap length");Yc.xh(this.HO,s.RO)}else{Yc.wh(this.HO);for(let s=0,i=t.length;s<i;++s)this.HO.push(s)}for(const s of t)this.cR+=s.fb(),this.fR+=s.pb(),s.wb()&&(this.ZO=!0),s.Tb()&&(this.KO=!0),s.Sb()&&(this.$O=!0),s.mb()&&(this.tR=!0),s.Ib()&&(this.sR=!0);this.iR=this.PR(t[0].lb());const i=this.kR(t[0],s),e=this.FR(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.rR=!0);this.rR=!1;let n=0;i&&(this.aR=1,this.qO.push(Yc.Qn(Yc.OM.UO.zR.jR,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.aR=Math.max(this.aR,t),this.qO.push(Yc.Qn(Yc.OM.UO.zR.BR,this,n,t,s)),n=t}else this.aR=1,this.qO.push(Yc.Qn(Yc.OM.UO.zR.UR,this,-1,1,s)),n=1;e&&this.qO.push(Yc.Qn(Yc.OM.UO.zR.WR,this,n,0))}kR(t,s){return!!(s.PO||t.gb()||s.FO&&!t.Mb()||t.Tb()&&!this.hR||0!==this.cR||0!==this.fR)||(t.lb().PT()?t.Sb()&&(s.zO||s.jO)||t.bb()&&s.jO:t.Sb()&&!this.iR&&s.zO)}FR(t,s){return!!s.kO||(t.lb().PT()?t.Sb()||t.mb():(t.Sb()||t.mb())&&this.QR())}PR(t){return t.tS()&&this.$O&&!this.tR}JR(t,s,i){t.tS()&&null===s&&(s=t.YR()),this.CR=s,this.mR=i.VR||null,this.gR=i.HR||null,this._b=i.qR||0,this.bR=i.devicePixelRatio||1,this.xR=i.XR||1,this.vR=i.ZR||0,this.IR="number"==typeof i.time?i.time:this.Bp.DO(),this.zN=!1,t.XA(),this.ZO&&this.KR();let e=!1;if(this.$R()&&(this.tP(t,i),e=!0,this.GR=this.Bp.EO(t,this.dR,this.pR),Hc.m(this.MR),Hc.wu(),t.tS()&&t.sP(this.CR),t.iP(this.CR.lI(),this.GR,Hc.Za(),Hc.Ka(),Hc.width(),Hc.height())),this.rR)this.eP(t,i);else if(e||this.tP(t,i),0!==this.wR.width()||0!==this.wR.height()){t.uL(),t.eL(),t.zS(0),t.US(0),this.YO=i.nP||null,this._R=i.rP||0,this.DR=i.hP||0,this.ER=i.oP||0,this.NR=i.aP||0,this.AR=!!i.uP,this.lP(t),this.uR[0]=s,this.uR[1]=this.aR>=1?this.cP():null,this.uR[2]=2===this.aR?this.cP():null;for(const s of this.qO){const i=this.fP(s.dP()),e=this.fP(s.pP());t.tS()?s.mP(t,i,e):s.gP(t,i,e)}t.rL(null),this.uR[1]&&this.yP(this.uR[1]),this.uR[2]&&this.yP(this.uR[2]),this.uR.fill(null),this.MP(t),this.CR=null,this.GR=null,this.mR=null,this.gR=null,this.YO=null}}tP(t,s){const[i,e]=this.Bp.GO(t);this.wP(t,i,e),this.SP(s)}wP(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.dR===s&&this.pR===i||this.TP(t,s,i,0,0,this.Hv,this.LR),this.dR=s,this.pR=i}TP(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.$w(r,s/i);const u=t.eS(o,a,t.zw(i),o,a,0,i);Vc.m(h,u)}SP(t){this.yR.m(t.bP),t.xP?this.MR.m(t.xP):this.MR.set(0,0,this.dR,this.pR),this.wR.m(this.MR),this.wR.Mt(this.dR,this.pR);const s=this.xR*this.bR;this.MR.lu(this.cR*s,this.fR*s),this.TR.m(this.MR),this.TR.Mt(this.dR,this.pR),this.MR.Su(0,0,this.dR,this.pR),this.SR.m(this.MR),this.SR.Mt(this.dR,this.pR)}lP(t){if(this.eR=t.RL(),this.nR=t.ZL(),this.hR)t.OL(!1),this.KO&&t.PL(!0);else{if(Hc.m(this.MR),t.PT()){const t=this.xR*this.bR;Hc.lu(Math.max(this.cR,1)*t,Math.max(this.fR,1)*t),Hc.wu(),Hc.Xn(0,0,this.dR,this.pR)}else Hc.wu();t.kL(Hc.Za(),Hc.Ka(),Hc.width(),Hc.height(),this.pR)}}vP(t){t.eL(),this.hR||(this.nR&&t.KL(),t.OL(!1),this.KO&&t.PL(!0)),t.tS()&&t.IP(!0)}MP(t){t.PL(!1),this.nR&&t.XL(),t.OL(this.eR),this.hR||t.jL(),t.tS()&&t.IP(!1),this.zN=t.ZA()}CP(){this.TR.Xn(0,0,1,1)}fP(t){return t<0?null:this.uR[t]}cP(){return this.Bp.FL(this)}GP(){return this.CR}yP(t){this.Bp._O(t,this)}_P(t){return this.VO[t]}DP(t){this.YO?this.YO(this,t,(()=>this.WO(t,this))):this.WO(t,this),this.rR||this.vP(t)}EP(t){if(this.hR)return!0;if(0!==this._R||0!==this.DR||0!==this.ER||0!==this.NR)return!1;const[s,i]=t.wL(t.FL());return s===this.dR&&i===this.pR}NP(t,s){let i=this.Hv,e=this.LR;if(s&&!this.EP(t)){let s,n;i=Kc,e=$c,0!==this.ER&&0!==this.NR?[s,n]=[this.ER,this.NR]:[s,n]=t.wL(t.FL()),this.TP(t,s,n,this._R,this.DR,i,e),this.hR||t.jL()}t.WA(i),t.qA(e)}KR(){this.Bp.Ap(this)}AP(t,s){return this.JO(this.HO[t],s)}LP(t,s){let i=this.TR,e=this.SR,n=this.wR;t.PT()&&(qc.m(i),qc.du(1),i=qc,Xc.m(e),Xc.du(1),e=Xc,Zc.m(n),Zc.du(1),n=Zc),this.OP(t,s,e,n,i,1/this.dR,1/this.pR)}RP(t,s){let i=this.SR,e=this.wR,n=1/this.dR,r=1/this.pR;if(this.QO){let{PP:t,kP:s,FP:h}=this.QO(this.mR);t||(Hc.set(0,0,0,0),t=Hc),s||(s=this.dR),h||(h=this.pR),i=t,e=t,n=1/s,r=1/h}else t.PT()&&(Xc.m(i),Xc.du(1),i=Xc,Zc.m(e),Zc.du(1),e=Zc);let h=this.TR;t.PT()&&(h=qc,h.m(this.TR),h.du(1)),this.OP(t,s,i,e,h,n,r),t.tS()&&this.sR&&t.jP(this.oR)}zP(t){return this.$O?t.tS()?this.$R()?this.GR:this.CR.lI():this.CR:null}OP(t,s,i,e,n,r,h){t.DL(this.zP(t),n,i,e,this.yR,r,h,this.bR,this.xR,this.vR,this.IR),t.EL(this.AP(s,t))}eP(t,s){const i=this.VO[0],e=t.RL(),n=i.Tb();n&&(t.OL(!1),t.PL(!0),this.TR.set(0,0,1,1),this.wR.set(0,0,1,1)),t.uS(i),t.Ab(this._b),t.QL(this.CR);let r=0,h=1;if(this.wR.set(0,0,1,1),i.bb()&&this.QO){const{PP:t,kP:s,FP:i}=this.QO(this.mR);t&&this.wR.m(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Bp.GO(t);r=1/s,h=1/i}s.bP?this.yR.m(s.bP):this.yR.set(0,0,0,0),t.DL(this.zP(t),this.TR,this.wR,this.wR,this.yR,r,h,this.bR,this.xR,this.vR,this.IR),t.EL(this.AP(0,t)),t.tS()&&this.sR&&t.jP(this.oR),t.zS(0),this.DP(t),n&&(t.PL(!1),t.OL(e))}$R(){return this.iR}QR(){return!this.iR}BP(){return this.$O}UP(){return!!this.rR&&!this.$R()}WP(){return this.hR}QP(){return this.mR}JP(){return this.gR}YP(){return this._b}VP(){return this.AR}ZA(){return this.zN}HP(){return this.MR}qP(){return this.SR}XP(){return this.lR}async ZP(t,s,i){}}}self.Cs.OM.UO.zR=class{constructor(t,s,i,e=-1){this.KP=t,this.$P=s,this.tk=i,this.GM=e}sk(){return this.KP}dP(){return this.$P}pP(){return this.tk}ik(){return this.GM}EC(){return this.sk()._P(this.ik())}gP(t,s,i){}mP(t,s,i){}};{const ef=self.Cs;ef.OM.UO.zR.jR=class extends ef.OM.UO.zR{constructor(t,s,i,e){super(t,s,i,e)}gP(t,s,i){const e=this.sk();t.uL(),t.aS(),t.QL(i,e.VP()),t.NL(0,0,0,0),e.DP(t),e.CP()}mP(t,s,i){const e=this.sk();t.uL(),t.aS(),t.QL(i,!1),t.NL(0,0,0,0),e.DP(t),e.CP()}}}{const nf=self.Cs,rf=nf.Qn(nf.Rect),hf=nf.Qn(nf.Gu);nf.OM.UO.zR.WR=class extends nf.OM.UO.zR{constructor(t,s,i,e){super(t,s,i,e)}gP(t,s,i){const e=this.sk();t.aS(),t.QL(i),e.NP(t,!0),t.Ab(e.YP()),t.rL(s.lI()),hf.Hu(e.HP()),rf.m(e.qP()),rf.du(1),t.$S(hf,rf),e.XP()&&t.VL(s)}mP(t,s,i){const e=this.sk();t.aS(),t.QL(i,!1),e.EP(t)?hf.Hu(e.qP()):(t.IP(!1),e.NP(t,!0),hf.Hu(e.HP())),t.ek(null),t.Ab(e.YP()),t.rL(s.lI()),e.WP()?t.ML():t.$S(hf,e.qP())}}}{const of=self.Cs;of.OM.UO.zR.UR=class extends of.OM.UO.zR{constructor(t,s,i,e){super(t,s,i,e)}gP(t,s,i){const e=this.sk();t.QL(i,e.VP()),t.NL(0,0,0,0),t.cL(),t.uS(this.EC()),e.RP(t,this.ik()),e.DP(t),e.CP()}mP(t,s,i){const e=this.sk();t.QL(i,!1),t.NL(0,0,0,0),t.cL(),t.uS(this.EC()),e.RP(t,this.ik()),e.DP(t),e.CP()}}}{const af=self.Cs,uf=af.Qn(af.Rect),lf=af.Qn(af.Gu);af.OM.UO.zR.BR=class extends af.OM.UO.zR{constructor(t,s,i,e){super(t,s,i,e)}gP(t,s,i){const e=this.sk();t.QL(i);const n=0===this.pP();n?t.Ab(e.YP()):(t.NL(0,0,0,0),t.cL()),t.uS(this.EC()),e.LP(t,this.ik()),t.rL(s.lI()),e.NP(t,n),lf.Hu(e.HP()),uf.m(e.qP()),uf.du(1),t.$S(lf,uf),e.XP()&&t.VL(s)}mP(t,s,i){const e=this.sk();t.QL(i,!1),0===this.pP()?(t.Ab(e.YP()),t.ek(null),e.EP(t)?lf.Hu(e.qP()):(t.IP(!1),e.NP(t,!0),lf.Hu(e.HP()))):(t.NL(0,0,0,0),t.cL(),lf.Hu(e.qP())),t.uS(this.EC()),e.LP(t,this.ik()),t.rL(s.lI()),e.WP()?t.ML():t.$S(lf,e.qP())}}}{let cf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};0;const ff=self.Cs,df=self.ks;let pf=null;const mf=new Set,gf=[],yf=[];let Mf=!1,wf=!1,Sf=!1;const Tf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.nk=class{constructor(t){pf=t,Object.defineProperties(this,{rk:{value:pf.ak().hk(),writable:!1},uk:{value:pf.ck().lk(),writable:!1},fk:{value:{},writable:!1},dk:{value:{},writable:!1},pk:{value:pf.mk(),writable:!1},gk:{value:pf.yk(),writable:!1},Mk:{value:new Date(pf.wk()),writable:!1},storage:{value:new self.Sk(pf),writable:!1},Tk:{value:pf.bk(),writable:!1},xk:{value:pf.vk(),writable:!1},Ik:{value:pf.Ck(),writable:!1},qx:{value:pf.Gk(),writable:!1},_k:{value:pf.Dk(),writable:!1},Ek:{value:new self.Nk(t),writable:!1},Ak:{value:new self.Lk(t),writable:!1}}),pf.Ok().addEventListener("keydown",(t=>{mf.has(t.key)?t.stopPropagation():mf.add(t.key)})),pf.Ok().addEventListener("keyup",(t=>mf.delete(t.key))),pf.yf().addEventListener("window-blur",(()=>mf.clear())),pf.bk()&&(self.alert=t=>(Mf||(Mf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}Rk(t){Object.defineProperties(this.fk,t)}Pk(t){Object.defineProperties(this.dk,t)}addEventListener(t,s){pf.Ok().addEventListener(t,s)}removeEventListener(t,s){pf.Ok().removeEventListener(t,s)}kk(t,...s){df.ue(t);const i=pf.Fk(),e=i.jk(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Il())return e.zk();if(s.length<e.Bk())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.Bk()} expected)`);const n=e.Uk();let r=n.Wk();const h=i.Qk();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.Wk())t.has(s)||(r.push(s),t.add(s));for(const s of i.Jk())t.has(s)||(r.push(s),t.add(s))}return n.Yk(r,e.Vk(),e.Hk(),e.zk(),...s)}qk(t){const s=pf.Zk().Xk();if(!s)throw new Error("not in a function which returns a value");switch(s.Kk()){case 1:"number"==typeof t&&s.$k(t);break;case 2:"string"==typeof t&&s.$k(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.$k(t)}}signal(t){df.ue(t),pf.Fk().tF(t)}sF(t){return df.ue(t),pf.Fk().iF(t)}eF(){return[pf.vk(),pf.Ck()]}get nF(){return pf.rF()}get hF(){return pf.oF()}get aF(){return pf.uF()}get lF(){return pf.cF()}get fF(){return pf.dF()}get pF(){return pf.mF()}set pF(t){df.re(t),pf.gF(t)}get yF(){return wf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),wf=!0),pf.MF()}get framesPerSecond(){return pf.MF()}get wF(){return pf.SF()}get TF(){return pf.bF()}get xF(){return pf.vF()}get IF(){return pf.CF()}set IF(t){if(!Tf.has(t))throw new Error("invalid framerate mode");pf.GF(t)}get _F(){return pf.DF()}set _F(t){df.re(t),pf.EF(t)}get NF(){return pf.AF()}set NF(t){pf.LF(t)}get OF(){return pf.ak().RF()}get PF(){return pf.ak().kF()}random(){return pf.FF()}get layout(){const t=pf.jF();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.zF()}BF(t){const s=pf.UF();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.WF(t),!i)throw new Error("invalid layout");return i.zF()}QF(){return pf.UF().JF().map((t=>t.zF()))}YF(t){const s=pf.UF();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.WF(t),!i)throw new Error("invalid layout");s.VF()||s.HF(i)}get keyboard(){const t=pf.qF().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get XF(){const t=pf.qF().XF;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get ZF(){const t=pf.qF().ZF;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get KF(){const t=pf.qF().KF;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}$F(t,s){df.ue(t),df.ue(s),pf.tj(t,s)}sj(t){df.re(t);const s=pf.ij(t);return s?s.ej():null}nj(t,s){df.Ne(s);const i=pf.rj();for(const s of t){const t=pf.hj(s),i=t.oj();gf.push([i.aj().ik(),i.uj()]),yf.push(t)}if(0===gf.length)return;gf.sort(cf),yf.sort(((t,i)=>s(t.ej(),i.ej())));let e=!1;for(let t=0,s=gf.length;t<s;++t){const s=yf[t],n=i.lj(gf[t][0]),r=gf[t][1],h=n.cj();h[r]!==s&&(h[r]=s,s.oj().fj(n,!0),n.dj(s),e=!0)}e&&pf.pj(),ff.wh(gf),ff.wh(yf)}async mj(t,s){Sf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Sf=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await pf.gj("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return pf.gj("runtime","alert",{message:t+(pf.bk()?" [via Web Worker]":"")})}yj(t){return df.re(t),pf.Mj(t)}wj(t){pf.Sj(t)}async Tj(t,s,i){df.le(t),df.se(s),df.je(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=pf.bj();if(!e)return;pf.pj();const n=await e.xj(t||"image/png",s,i.x,i.y,i.width,i.height);return await pf.vj(ff._j.Gj.Cj.Ij,null),n}}}{const bf=self.Cs;self.ks;let xf=null;self.Dj=class{constructor(t){xf=t,Object.defineProperties(this,{Ej:{value:!0,writable:!1}})}Nj(t){const s=self.Lj.Aj(t);if(!s)throw new Error("invalid IImageInfo");s.Oj(xf.Rj())}Pj(t){return xf.so(t)}kj(t){return xf.io(t)}Fj(t){return xf.eo(t)}jj(t){return xf.no(t)}zj(t){return xf.Bj(t)}Uj(t){return"flat"===xf.Wj()&&bf.Zh(t)&&(t=t.toLowerCase()),xf.Qj(t)}get Jj(){return xf.Yj()}async Vj(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}Hj(...t){return xf.qj(...t)}Xj(t){return xf.Zj(t)}Kj(t){return xf.$j(t)}}}{const vf=self.Cs,If=self.ks;let Cf=null;self.tz=class{constructor(t){Cf=t,Object.defineProperties(this,{runtime:{value:Cf.Rj(),writable:!1}})}sz(t,s){const i=Cf.Rj(),e=i.hj(t),n=i.hj(s);return Cf.iz(e,n)}ez(t,s){const i=Cf.Rj(),e=i.hj(t);for(const t of s){const s=i.hj(t);if(Cf.iz(e,s))return t}return null}nz(t){const s=Cf.Rj().hj(t),i=Cf.rz(s);return i?i.ej():null}hz(t,s){if(If.re(t),If.re(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Cf.oz(t,s)}az(){return Cf.uz()}lz(t,s){const i=Cf.Rj();let e;e=Array.isArray(t)?t.map((t=>i.cz(t))):[i.cz(t)];const n=vf.Rect.qa(s),r=[];return Cf.fz(null,e,n,r),r.map((t=>t.ej()))}}}{const Gf=self.Cs;self.ks;let _f=null;const Df=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Ef=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Nf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.Nk=class{constructor(t){_f=t,Object.defineProperties(this,{dz:{value:Gf.Zs.hi,writable:!1},os:{value:Df.get(Gf.Zs.Ks)||"unknown",writable:!1},pz:{value:Gf.Zs.$s,writable:!1},browser:{value:Ef.get(Gf.Zs.ti)||"unknown",writable:!1},mz:{value:Gf.Zs.si,writable:!1},gz:{value:Nf.get(Gf.Zs.ei)||"unknown",writable:!1}})}get yz(){let t=_f.Mz();return _f.wz()?t="nwjs":_f.Sz()?t="windows-webview2":"cordova"===t?t="Android"===Gf.Zs.Ks?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get EG(){return _f.bj().Tz()}get bz(){return _f.bj().xz()}get vz(){return _f.bj().Iz()}get Cz(){return _f.bj().Gz()}get _z(){return _f.bj().Dz()}get Ez(){return _f.bj().Nz()}get Az(){return _f.bj().Lz()}get Oz(){return _f.bj().Rz()}get devicePixelRatio(){return _f.Pz()}}}{self.Cs;const Af=self.ks;self.Sk=class{constructor(t){this.kz=t.Fz()}getItem(t){return Af.ue(t),this.kz.getItem(t)}setItem(t,s){return Af.ue(t),this.kz.setItem(t,s)}removeItem(t){return Af.ue(t),this.kz.removeItem(t)}clear(){return this.kz.clear()}keys(){return this.kz.keys()}}}{const Lf=self.Cs,Of=(self.ks,Lf.Gs());self.jz=class{#t;constructor(){const t=Lf.Bz.zz(Of);this.#t=t,Object.defineProperties(this,{runtime:{value:t.Rj().Uz(),writable:!1},id:{value:t.Wz(),writable:!1},Qz:{value:t.Jz(),writable:!1},Yz:{value:t.Vz(),writable:!1},qz:{value:t.Xz(),writable:!1},Zz:{value:t.Kz(),writable:!1},$z:{value:t.tB(),writable:!1},sB:{value:t.iB(),writable:!1},eB:{value:t.nB(),writable:!1},rB:{value:t.hB(),writable:!1}}),t.Rj().oB(this,t)}static aB(t){if(!t)return null;const s=Lf.Bz.uB(t);return s?s.lB():null}cB(){return this.#t.dB().fB()}pB(){return this.#t.mB().ej()}}}{const Rf=self.Cs,Pf=self.ks,kf=Rf.Gs();self.gB=class{#t;constructor(){const t=Rf.Bz.zz(kf);this.#t=t,Object.defineProperties(this,{name:{value:t._c(),writable:!1},runtime:{value:t.Rj().Uz(),writable:!1},yB:{value:t.MB().lB(),writable:!1}}),t.Rj().oB(this,t)}addEventListener(t,s){Pf.ue(t),Pf.Ne(s),this.#t.Ok().addEventListener(t,s)}removeEventListener(t,s){Pf.ue(t),Pf.Ne(s),this.#t.Ok().removeEventListener(t,s)}wB(){return[...this.SB()]}TB(){return Rf.jh(this.SB())}bB(){return[...this.xB()]}vB(){return Rf.jh(this.xB())}IB(t){const s=this.#t,i=s.Rj().CB(t),e=s.GB(i);return e?e.ej():null}*SB(){for(const t of this.#t._B())yield t.ej()}*xB(){for(const t of this.#t.EB().DB())yield t.ej()}NB(t){Pf.Ne(t);const s=this.#t;if(s.AB()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.LB(t)}Ii(t,s,i,e,n){if(Pf.te(s),Pf.te(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.Rj(),o=h.jF().aj(t);if(!o)throw new Error("invalid layer");const a=h.OB(r,o,s,i,e,n);e&&o.RB(a);const u=h.Fk();return u.PB(!0),a.kB(),u.PB(!1),u.jB()||h.UF().zB()||h.BB(),a.ej()}}}{self.Cs;const Ff=self.ks,jf=new WeakMap,zf=["above","below","top-sublayer","bottom-sublayer"];self.UB=class{constructor(t){jf.set(this,t);const s=[],i=t.WB(),e=i.QB().length;for(let t=0;t<e;++t)s.push(new self.JB(i,t));Object.defineProperties(this,{name:{value:t._c(),writable:!1},index:{value:t.ik(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Ff.ue(t),Ff.Ne(s),jf.get(this).Ok().addEventListener(t,s)}removeEventListener(t,s){Ff.ue(t),Ff.Ne(s),jf.get(this).Ok().removeEventListener(t,s)}get width(){return jf.get(this).Bg()}set width(t){Ff.re(t),jf.get(this).Hg(t)}get height(){return jf.get(this).Zg()}set height(t){Ff.re(t),jf.get(this).Ug(t)}YB(t,s){Ff.re(t),Ff.re(s);const i=jf.get(this);i.Hg(t),i.Ug(s)}getSize(){const t=jf.get(this);return[t.Bg(),t.Zg()]}set scale(t){Ff.re(t),jf.get(this).VB(t)}get scale(){return jf.get(this).HB()}set angle(t){Ff.re(t),jf.get(this).qB(t)}get angle(){return jf.get(this).XB()}set scrollX(t){Ff.te(t),jf.get(this).ZB(t)}get scrollX(){return jf.get(this).KB()}set scrollY(t){Ff.te(t),jf.get(this).$B(t)}get scrollY(){return jf.get(this).tU()}scrollTo(t,s){Ff.te(t),Ff.te(s);const i=jf.get(this);i.ZB(t),i.$B(s)}sU(){const t=jf.get(this);return[t.KB(),t.tU()]}iU(t){const s=jf.get(this);let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.aj(t),i?i.eU():null}nU(){return jf.get(this).rU().map((t=>t.eU()))}*hU(){for(const t of jf.get(this).hU())yield t.eU()}oU(t,s,i){const e=jf.get(this),n=self.aU;Ff.ue(t),Ff.je(s,n);const r=s?e.Rj().uU(s):null,h=zf.indexOf(i);if(h<0)throw new Error("invalid location");e.lU(t,r,h)}cU(t,s,i){const e=jf.get(this),n=e.Rj(),r=self.aU;Ff.Fe(t,r);const h=n.uU(t);if(!h)throw new Error("invalid layer");Ff.je(s,r);const o=s?n.uU(s):null,a=zf.indexOf(i);if(a<0)throw new Error("invalid location");e.fU(h,o,a)}dU(t){const s=jf.get(this),i=self.aU;Ff.Fe(t,i);const e=s.Rj().uU(t);if(!e)throw new Error("invalid layer");const n=e.Rj();s.pU(e),n.Fk().jB()||n.BB()}mU(){const t=jf.get(this),s=t.Rj();t.gU(),s.Fk().jB()||s.BB()}yU(t,s){Ff.re(t),Ff.re(s),jf.get(this).MU(t,s)}wU(){return jf.get(this).SU()}set W(t){Ff.ue(t);const s=jf.get(this);if("perspective"===t)s.TU();else{if("orthographic"!==t)throw new Error("invalid projection");s.bU()}}get W(){return jf.get(this).xU()?"orthographic":"perspective"}}}{const Bf=self.Cs,Uf=self.ks,Wf=new WeakMap,Qf=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Jf=new Map([...Qf.entries()].map((t=>[t[1],t[0]]))),Yf=new Set(["2d","3d"]),Vf=Bf.Qn(Bf.xo);self.aU=class{constructor(t){Wf.set(this,t);const s=[],i=t.WB(),e=i.QB().length;for(let t=0;t<e;++t)s.push(new self.JB(i,t));Object.defineProperties(this,{name:{value:t._c(),writable:!1},layout:{value:t.WF().zF(),writable:!1},effects:{value:s,writable:!1}}),t.Rj().oB(this,t)}get vU(){const t=Wf.get(this).IU();return t?t.eU():null}*CU(){for(const t of Wf.get(this).CU())yield t.eU()}*GU(){for(const t of Wf.get(this)._U())yield t.eU()}*DU(){for(const t of Wf.get(this)._U())for(const s of t.EU())yield s.eU()}get index(){return Wf.get(this).ik()}get isVisible(){return Wf.get(this).NU()}set isVisible(t){Wf.get(this).AU(t)}get LU(){return Wf.get(this).OU()}get RU(){return Wf.get(this).PU()}set RU(t){Wf.get(this).kU(t)}get FU(){return Wf.get(this).jU()}set FU(t){Wf.get(this).zU(!!t)}get BU(){return Wf.get(this).UU()}get opacity(){return Wf.get(this).tL()}set opacity(t){t=Bf.Xn(+t,0,1),isNaN(t)||Wf.get(this).iL(t)}set scale(t){Uf.re(t),Wf.get(this).WU(t)}get scale(){return Wf.get(this).QU()}set JU(t){Uf.re(t),Wf.get(this).YU(t)}get JU(){return Wf.get(this).VU()}set angle(t){Uf.re(t),Wf.get(this).qB(t)}get angle(){return Wf.get(this).HU()}set qU(t){Uf.re(t),Wf.get(this).XU(t)}get qU(){return Wf.get(this).ZU()}set KU(t){Uf.re(t),Wf.get(this).$U(t)}get KU(){return Wf.get(this).tW()}set sW(t){Uf.re(t),Wf.get(this).qb(t)}get sW(){return Wf.get(this).Hb()}set renderingMode(t){if(!Yf.has(t))throw TypeError("invalid rendering mode");Wf.get(this).iW("3d"===t)}get renderingMode(){return Wf.get(this).eW()?"3d":"2d"}set nW(t){Wf.get(this).rW(t)}get nW(){return Wf.get(this).hW()}set oW(t){Wf.get(this).aW(t)}get oW(){return Wf.get(this).uW()}set qR(t){Uf.ue(t);const s=Qf.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");Wf.get(this).Ab(s)}get qR(){return Jf.get(Wf.get(this).lW())}set backgroundColor(t){if(Uf.ve(t),t.length<3)throw new Error("expected 3 elements");Vf.Do(t[0],t[1],t[2]);const s=Wf.get(this),i=s.cW();i.Qo(Vf)||(i.Po(Vf),s.Rj().pj())}get backgroundColor(){const t=Wf.get(this).cW();return[t.ko(),t.Fo(),t.jo()]}set scrollX(t){Uf.te(t);const s=Wf.get(this);s.fW(!0),s.ZB(t)}get scrollX(){return Wf.get(this).KB()}set scrollY(t){Uf.te(t);const s=Wf.get(this);s.fW(!0),s.$B(t)}get scrollY(){return Wf.get(this).tU()}scrollTo(t,s){Uf.te(t),Uf.te(s);const i=Wf.get(this);i.fW(!0),i.ZB(t),i.$B(s)}sU(){const t=Wf.get(this);return[t.KB(),t.tU()]}dW(){Wf.get(this).fW(!1)}getViewport(){return Wf.get(this).pW().su()}mW(t,s,i=0){Uf.te(t),Uf.te(s),Uf.te(i);const e=Wf.get(this),n=e.Rj();return e.gW(t-n.Iz(),s-n.Gz(),i)}yW(t,s,i=0){Uf.te(t),Uf.te(s),Uf.te(i);const e=Wf.get(this),n=e.Rj(),[r,h]=e.MW(t,s,i);return[r+n.Iz(),h+n.Gz()]}wW(t,s,i=0){return Uf.te(t),Uf.te(s),Uf.te(i),Wf.get(this).SW(t,s,i)}TW(t,s,i=0){return Uf.te(t),Uf.te(s),Uf.te(i),Wf.get(this).bW(t,s,i)}get xW(){return Wf.get(this).vW()}}}{let Hf=function(t){let s=Zf.get(t);return s||(s=qf.Qn(qf.Event.yf),Zf.set(t,s),s)};0;const qf=self.Cs,Xf=self.ks,Zf=new WeakMap,Kf=qf.Gs();self.IW=class{#t;constructor(){const t=qf.Bz.zz(Kf);this.#t=t;const s={runtime:{value:t.Rj().Uz(),writable:!1},objectType:{value:t.GW().fB(),writable:!1},yB:{value:t.MB().lB(),writable:!1}};t._W(s),t.DW(s),Object.defineProperties(this,s),t.Rj().oB(this,t)}static EW(){return qf.Bz.NW()}AW(){const t=Zf.get(this);t&&(t.Jn(),Zf.delete(this))}addEventListener(t,s,i){Xf.ue(t),Xf.Ne(s),Hf(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Xf.ue(t),Xf.Ne(s),Hf(this).removeEventListener(t,s,i)}dispatchEvent(t){Hf(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.Rj();s.LW(t),s.Fk().jB()||s.UF().zB()||s.Fk().OW()||s.BB()}RW(){const t=this.#t.PW();return t?t.map((t=>t.ej())):[]}*kW(){const t=this.#t;if(t.FW())for(const s of t.jW())yield s.ej()}get uid(){return this.#t.zW()}get BW(){return this.#t.UW()}get WW(){return this.#t.QW()}set pF(t){Xf.re(t),this.#t.gF(t)}get pF(){return this.#t.JW()}YW(){this.#t.VW()}get hF(){const t=this.#t;return t.Rj().oF(t)}HW(...t){Xf.ve(t);const s=new Set(t),i=this.#t.qW();return s.isSubsetOf(i)}XW(t){Xf.Fe(t,Set),this.#t.ZW(t)}KW(){return new Set(this.#t.qW())}signal(t){Xf.ue(t);const s=this.#t;s.Rj().Fk().$W(s,t)}sF(t){Xf.ue(t);const s=this.#t;return s.Rj().Fk().tQ(s,t)}}}{const $f=self.Cs,td=self.ks,sd=$f.Gs();self.sQ=class extends self.IW{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=$f.Bz.zz(sd),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.iQ,this.#h=t?.eQ}AW(){this.nQ(!1),this.rQ(!1),super.AW()}hQ(){return $f.Bz.oQ()}aQ(t){const s=this.#t;s.Rj().uQ(t,s)}lQ(t){const s=this.#t;return s.Rj().vj(t,s)}cQ(t,s){if(td.ue(t),td.Ne(s),!this.#r)throw new Error("no DOM component id set");this.#t.Rj().fQ(this.#r,t,s)}dQ(t){td.ve(t);for(const[s,i]of t)this.cQ(s,i)}pQ(t,s){if(td.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.Rj().zc(this.#r,t,s)}mQ(t,s){if(td.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.Rj().gj(this.#r,t,s)}gQ(t,s){if(!this.#t.Rj().bk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.pQ(t,s)}nQ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.Rj();if(t){if(!this.#i)if(this.#t.Rj().yQ()){const t=globalThis.MQ,s=this.yB;this.#i=()=>{const i=performance.now();this.wQ(),t.SQ(s,performance.now()-i)}}else this.#i=()=>this.wQ();s.yf().addEventListener("tick",this.#i)}else s.yf().removeEventListener("tick",this.#i)}TQ(){return this.#s}wQ(){}rQ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.Rj();if(t){if(!this.#n)if(this.#t.Rj().yQ()){const t=globalThis.MQ,s=this.yB;this.#n=()=>{const i=performance.now();this.bQ(),t.SQ(s,performance.now()-i)}}else this.#n=()=>this.bQ();s.yf().addEventListener("tick2",this.#n)}else s.yf().removeEventListener("tick2",this.#n)}xQ(){return this.#e}bQ(){}vQ(){return[]}IQ(){return null}CQ(t){}GQ(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.Rj()._Q(this.#h)}DQ(t,s){if(td.ue(t),td.Ne(s),!this.#h)throw new Error("no wrapper component id set");this.#t.Rj().EQ(this.#h,t,s)}NQ(t){td.ve(t);for(const[s,i]of t)this.DQ(s,i)}AQ(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.Ak.LQ(this.#h,t,s)}OQ(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.Ak.RQ(this.#h,t,s)}}}{let id=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=ed.Bz.zz(ud),i=s.oj();this.#t=s,this.#s=i,ad.set(this,s);const e=[],n=i.PQ();if(n){const t=i.GW().WB().QB().length;for(let s=0;s<t;++s)e.push(new self.JB(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.WF().zF()}get kQ(){return this.#s.aj().eU()}get x(){return this.#s.Wb()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.Wb()===t||(s.Qb(t),s.FQ())}get y(){return this.#s.Yb()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.Yb()===t||(s.Vb(t),s.FQ())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Wb()===t&&i.Yb()===s||(i.jQ(t,s),i.FQ())}zQ(){const t=this.#s;return[t.Wb(),t.Yb()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.BQ(t,s),i.FQ()}set UQ(t){t=+t;const s=this.#s;isNaN(t)||s.WQ()===t||(s.QQ(t),s.FQ())}get UQ(){return this.#s.WQ()}set JQ(t){t=+t;const s=this.#s;isNaN(t)||s.YQ()===t||(s.VQ(t),s.FQ())}get JQ(){return this.#s.YQ()}HQ(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.WQ()===t&&i.YQ()===s||(i.QQ(t),i.VQ(s),i.FQ())}qQ(){const t=this.#s;return[t.WQ(),t.YQ()]}get sW(){return this.#s.Hb()}set sW(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.Hb()===t||(i.qb(t),s.Rj().pj())}get XQ(){return this.#s.ZQ()}get width(){return this.#s.Bg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.Bg()===t||(s.Hg(t),s.FQ())}get height(){return this.#s.Zg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Zg()===t||(s.Ug(t),s.FQ())}YB(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Bg()===t&&i.Zg()===s||(i.xE(t,s),i.FQ())}getSize(){const t=this.#s;return[t.Bg(),t.Zg()]}get angle(){return this.#s.XB()}set angle(t){t=ed.Zn(+t);const s=this.#s;isNaN(t)||s.XB()===t||(s.qB(t),s.FQ())}get KQ(){return ed.$n(this.angle)}set KQ(t){this.angle=ed.Kn(t)}Zu(t){return t?(this.#s.$Q(hd,od,!1),hd.su()):this.#s.tJ().su()}sJ(t){return t?(this.#s.$Q(hd,od,!1),od.Ju()):this.#s.iJ().Ju()}eJ(){return this.#s.nJ()}get isVisible(){return this.#s.OU()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.OU()!==t&&(i.AU(t),s.Rj().pj())}get opacity(){return this.#s.tL()}set opacity(t){t=ed.Xn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.tL()===t||(i.iL(t),s.Rj().pj())}set rJ(t){if(nd.ve(t),t.length<3)throw new Error("expected 3 elements");fd.Do(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.hJ().Qo(fd)||(i.oJ(fd),s.Rj().pj())}get rJ(){const t=this.#s.hJ();return[t.ko(),t.Fo(),t.jo()]}set qR(t){nd.ue(t);const s=ld.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.Ab(s),i.Rj().pj()}get qR(){return cd.get(this.#s.lW())}aJ(){this.#s.uJ()}lJ(){this.#s.cJ()}fJ(t){nd.Fe(t,rd);const s=this.#t,i=s.Rj().uU(t);if(!i)throw new Error("invalid layer");s.oj().dJ(i)}pJ(t,i){nd.Fe(t,s),this.#s.mJ(ad.get(t),i)}get zIndex(){return this.#s.uj()}get gJ(){return this.#s.yJ()}set gJ(t){this.#s.MJ(!!t)}xu(t,s){return nd.te(t),nd.te(s),this.#s.wJ(+t,+s)}sz(t){nd.Fe(t,s);const i=this.#t,e=ad.get(t);return i.Rj().ck().iz(i,e)}nz(){const t=this.#t,s=t.Rj().ck().rz(t);return s?s.ej():null}getParent(){const t=this.#t.SJ();return t?t.ej():null}TJ(){const t=this.#t.bJ();return t?t.ej():null}*xJ(){for(const t of this.#t.xJ())yield t.ej()}vJ(){return this.#t.IJ()}CJ(t){const s=this.#t.GJ(t);return s?s.ej():null}*children(){for(const t of this.#t.children())yield t.ej()}*_J(){for(const t of this.#t._J())yield t.ej()}DJ(t,i){nd.Fe(t,s),nd.ye(i),i||(i={});const e=this.#t,n=ad.get(t);e.EJ(n,i)}removeChild(t){nd.Fe(t,s);const i=this.#t,e=ad.get(t);i.NJ(e)}AJ(){const t=this.#t;t.LJ()&&t.SJ().NJ(t)}OJ(){const t=this.#s;return{RJ:t.PJ(),kJ:t.FJ(),jJ:t.zJ(),BJ:t.UJ(),WJ:t.QJ(),JJ:t.YJ(),VJ:t.HJ(),qJ:t.XJ(),ZJ:t.KJ()}}$J(t,s){nd.re(t),nd.re(s),this.#s.tY(t,s)}sY(){const t=this.#s;t.iY(),t.FQ()}eY(t,s,i){nd.re(t),nd.re(s),nd.ge(i);const e=this.#s;e.nY(t,s,i)&&e.FQ()}rY(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.hY()){const a=o.oY().Px(t,s);null!==a&&(i=a.Wb(),e=a.Yb(),n=a.Hb(),r=a.Xb(),h=a.Kb())}return{x:i,y:e,sW:n,aY:r,uY:h}}lY(){const t=this.#s;if(!t.hY())return[0,0];const s=t.oY();return[s.Ix(),s.Cx()]}}};0;const ed=self.Cs,nd=self.ks,rd=(self.IW,self.aU),hd=ed.Qn(ed.Rect),od=ed.Qn(ed.Gu),ad=new WeakMap,ud=ed.Gs(),ld=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),cd=new Map([...ld.entries()].map((t=>[t[1],t[0]]))),fd=ed.Qn(ed.xo);self.cY=id(self.IW),self.fY=id(self.sQ)}{self.Cs;const dd=self.ks;self.dY=class extends self.cY{#t;constructor(){super(),this.#t=self.IW.EW()}pY(){return this.#t.gY().mY()}focus(){this.#t.gY().yY()}blur(){this.#t.gY().MY()}wY(t,s){dd.ue(t),this.#t.gY().SY(t,s)}}}{let pd=function(t){let s=yd.get(t);return s||(s=md.Qn(md.Event.yf),yd.set(t,s),s)};0;const md=self.Cs,gd=self.ks,yd=new WeakMap,Md=md.Gs();self.TY=class{#t;constructor(){const t=md.Bz.zz(Md);this.#t=t;const s={runtime:{value:t.Rj().Uz(),writable:!1},behavior:{value:t.xY().bY(),writable:!1},vY:{value:t.CY().IY(),writable:!1}};Object.defineProperties(this,s),t.Rj().oB(this,t)}static EW(){return md.Bz.NW()}get GY(){return this.#t._Y().ej()}AW(){const t=yd.get(this);t&&(t.Jn(),yd.delete(this))}addEventListener(t,s,i){gd.ue(t),gd.Ne(s),pd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){gd.ue(t),gd.Ne(s),pd(this).removeEventListener(t,s,i)}dispatchEvent(t){pd(this).dispatchEvent(t)}}}{const wd=self.Cs,Sd=(self.ks,wd.Gs());self.DY=class{constructor(){const t=wd.Bz.zz(Sd),s={runtime:{value:t.Rj().Uz(),writable:!1},behavior:{value:t.xY().bY(),writable:!1},name:{value:t._c(),writable:!1}};Object.defineProperties(this,s)}}}{const Td=self.Cs,bd=(self.ks,Td.Gs());self.EY=class{#s;constructor(){const t=Td.Bz.zz(bd);this.#s=t;const s={runtime:{value:t.Rj().Uz(),writable:!1},id:{value:t.Wz(),writable:!1}};Object.defineProperties(this,s),t.Rj().oB(this,t)}wB(){return this.#s.DB().map((t=>t.ej()))}static aB(t){if(!t)return null;const s=Td.Bz.NY(t);return s?s.bY():null}}}{const xd=self.Cs,vd=self.ks,Id=xd.Qn(xd.xo);self.JB=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.QB()[this.index]._c()}get isActive(){return this.#t.AY(this.index)}set isActive(t){t=!!t;const s=this.#t;s.AY(this.index)!==t&&(s.LY(this.index,t),s.OY(),s.Rj().pj())}setParameter(t,s){vd.re(t),t=Math.floor(+t);const i=this.#t,e=i.RY(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof xd.xo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Id.Do(s[0],s[1],s[2]),s=Id}else if("number"!=typeof s)throw new TypeError("expected number");i.PY(this.index,t,s)&&i.AY(this.index)&&i.Rj().pj()}getParameter(t){vd.re(t),t=Math.floor(+t);const s=this.#t.RY(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof xd.xo?[s.ko(),s.Fo(),s.jo()]:s}}}self.Cs,self.ks;self.kY=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t._c(),writable:!1}})}get speed(){return this.#t.FY()}get jY(){return this.#t.zY()}get BY(){return this.#t.UY()}get WY(){return this.#t.QY()}get JY(){return this.#t.YY()}get frameCount(){return this.#t.VY()}HY(){return this.#t.qY().map((t=>t.XY()))}*frames(){for(const t of this.#t.qY())yield t.XY()}};self.Cs,self.ks;self.Lj=class{#s;constructor(t){this.#s=t}static Aj(t){return t.#s}get width(){return this.#s.Bg()}get height(){return this.#s.Zg()}getSize(){const t=this.#s;return[t.Bg(),t.Zg()]}ZY(t){return t.KY(this)}$Y(){return this.#s.tN().su()}};{self.Cs;const Cd=self.ks;self.tV=class extends self.Lj{#s;constructor(t){super(t.sV()),this.#s=t,Object.defineProperties(this,{duration:{value:t.iV(),writable:!1},UQ:{value:t.WQ(),writable:!1},JQ:{value:t.YQ(),writable:!1}})}qQ(){const t=this.#s;return[t.WQ(),t.YQ()]}eV(){return this.#s.nV()}rV(t){return this.hV(t)[0]}oV(t){return this.hV(t)[1]}hV(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.aV(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.uV(t)}return i?[i.Wb(),i.Yb()]:this.qQ()}lV(){const t=this.#s.cV();return t?t.dl():0}fV(t){return this.dV(t)[0]}pV(t){return this.dV(t)[1]}dV(t){Cd.re(t),t=Math.floor(t);const s=this.#s.cV();if(!s||t<0||t>=s.dl())return[0,0];const i=s.fl();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.mV()}}}{let Gd=function(t){const s=Dd.get(t);if(s.gV())throw new Error("timeline/tween was released and is no longer valid");return s};0;self.Cs;const _d=self.ks,Dd=new WeakMap;self.yV=class{constructor(t){Dd.set(this,t),t.Rj().oB(this,t)}pause(){Gd(this).MV()}resume(){Gd(this).wV()}stop(){Gd(this).Ff()}HW(t){return Gd(this).SV(t)}set time(t){_d.re(t),Gd(this).TV(t)}get time(){return Gd(this).DO()}set totalTime(t){_d.re(t),Gd(this).bV(t)}get totalTime(){return Gd(this).xV()}set jY(t){Gd(this).vV(!!t)}get jY(){return Gd(this).IV()}set JY(t){Gd(this).CV(!!t)}get JY(){return Gd(this).GV()}set playbackRate(t){_d.re(t),Gd(this)._V(t)}get playbackRate(){return Gd(this).DV()}get progress(){const t=Gd(this);return t.DO()/t.xV()}get tags(){return Gd(this).EV()}get finished(){return Gd(this).NV()}get AV(){return Gd(this).IsPlaying()}get LV(){return Gd(this).OV()}get RV(){return Dd.get(this).gV()}}}{let Ed=function(t){const s=Nd.get(t);if(s.gV())throw new Error("timeline was released and is no longer valid");return s};0;self.Cs,self.ks;const Nd=new WeakMap;self.PV=class extends self.yV{constructor(t){super(t),Nd.set(this,t);const s={name:{value:t._c(),writable:!1}};Object.defineProperties(this,s)}}}{let Ad=function(t){const s=Od.get(t);if(s.gV())throw new Error("tween was released and is no longer valid");return s};0;self.Cs;const Ld=self.ks,Od=new WeakMap,Rd=new WeakMap;let Pd=null;self.kV=class extends self.yV{constructor(t,s,i){super(t),Pd||(Pd=i.FV),Od.set(this,t),s&&Rd.set(this,s)}stop(){const t=Ad(this);Rd.get(this).jV(t)}zV(t){Ld.ue(t);const s=self.Bl.hc(Pd(t));Ad(this).BV(s)}get GY(){const t=Ad(this).UV();return t?t.ej():null}get WV(){return Ad(this).QV()}set WV(t){Ad(this).JV(!!t)}get value(){const t=Ad(this);if("value"!==t.YV())throw new Error("not a value tween");return t.HV("value").VV()}}}self.Cs,self.ks;self.qV=class extends self.jz{constructor(){super()}};{const kd=self.Cs,Fd=self.ks,jd=kd.Gs();self.XV=class extends self.qV{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=kd.Bz.zz(jd),!t?.iQ)throw new Error("no DOM component ID specified");this.#i=t.iQ,this.ZV("elem-focused",(t=>t.KV())),this.ZV("elem-blurred",(t=>{t&&t.$V()}))}tH(t){const s=this.#s++;return this.#r.set(s,t),s}sH(t){this.#r.delete(t)}ZV(t,s){this.#t.Rj().fQ(this.#i,t,(t=>{const i=this.#r.get(t.elementId);s(i,t)}))}iH(t){Fd.ve(t);for(const[s,i]of t)this.iH(s,i)}}}{const zd=self.Cs,Bd=(self.ks,zd.Gs());self.eH=class extends self.gB{#t;constructor(){super(),this.#t=zd.Bz.zz(Bd)}nH(){}rH(){return this.#t.sV().hH()}oH(t){}aH(t){}uH(){}lH(t){}}}{const Ud=self.Cs,Wd=(self.ks,Ud.Gs());self.cH=class extends self.fY{#t;#n=null;#s=null;constructor(t){super(t),this.#t=Ud.Bz.zz(Wd)}AW(){if(super.AW(),this.#n){const t=this.#t.Rj().yf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}fH(){if(this.#n)return;this.#n=()=>this.dH(),this.#s=()=>this.pH();const t=this.#t.Rj().yf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}dH(){}pH(){}mH(t){}}}{const Qd=self.Cs,Jd=(self.ks,Qd.Qn(Qd.Rect)),Yd=new WeakMap,Vd=Qd.Gs();self.gH=class extends self.cH{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Qd.Qn(Qd.Rect,0,0,-1,-1);#o=0;#a=0;#u=-1;#l=-1;#c=!1;constructor(t){if(!t?.iQ)throw new Error("no DOM component ID specified");super(t);const s=Qd.Bz.zz(Vd);Yd.set(this,s),this.#t=this.yB.tH(this);const i=s.Rj().bj();this.#o=i.yH(),this.#a=i.MH(),this.nQ(!0)}AW(){super.AW(),this.yB.sH(this.#t),this.wH("destroy"),this.#t=-1,Yd.delete(this)}SH(){if(Yd.get(this).Rj().bk())throw new Error("not valid in worker mode");return this.TH("get-element")}wH(t,s){s||(s={}),s.elementId=this.#t,this.pQ(t,s)}TH(t,s){return s||(s={}),s.elementId=this.#t,this.gQ(t,s)}bH(t,s){return s||(s={}),s.elementId=this.#t,this.mQ(t,s)}xH(t){t||(t={});const s=Yd.get(this).oj();t.elementId=this.#t,t.isVisible=s.OU(),t.htmlIndex=s.aj().vH(),t.htmlZIndex=s.IH(),Object.assign(t,this.CH()),this.#s=!!t.isVisible,this.gQ("create",t),this.GH(!0)}_H(t){t=!!t,this.#s!==t&&(this.#s=t,this.wH("set-visible",{isVisible:t}))}wQ(){this.GH(!1)}DH(){const t=Yd.get(this).Rj().bj().EH();return"Android"===Qd.Zs.Ks&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}GH(t){const s=Yd.get(this);if(s.NH())return;const i=s.oj(),e=i.aj(),n=i.tJ();let[r,h]=e.MW(n.Za(),n.Ka()),[o,a]=e.MW(n.$a(),n.tu());const u=s.Rj().bj(),l=u.Dz(),c=u.Nz();if(!i.OU()||!e.OU())return void this._H(!1);if(!this.DH()&&(o<=0||a<=0||r>=l||h>=c))return void this._H(!1);Jd.set(r,h,o,a);const f=u.yH(),d=u.MH(),p=e.vH(),m=i.IH();if(!t&&Jd.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#u===p&&this.#l===m)return void this._H(!0);this.#h.m(Jd),this.#o=f,this.#a=d,this.#u=p,this.#l=m,this._H(!0);let g=null;this.#e&&(g=e.AH()+this.#i),this.wH("update-position",{left:Math.round(this.#h.Za()),top:Math.round(this.#h.Ka()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}LH(){this.TH("focus",{focus:!0})}OH(){this.TH("focus",{focus:!1})}KV(){this.#r=!0}$V(){this.#r=!1}RH(){return this.#r}PH(t,s){this.kH("set-css-style",{prop:Qd.So(t),val:s})}FH(t,s){this.kH("set-attribute",{name:t,val:s})}jH(t){this.kH("remove-attribute",{name:t})}zH(){this.#c||(this.#c=!0,Promise.resolve().then((()=>{this.#c=!1,this.wH("update-state",this.CH())})))}CH(){}BH(){return this.#t}}}self.Cs,self.ks;self.UH=class extends self.EY{constructor(){super()}};self.Cs,self.ks;self.WH=class extends globalThis.DY{constructor(){super()}nH(){}};{const Hd=self.Cs,qd=(self.ks,new WeakMap),Xd=Hd.Gs();self.QH=class extends self.TY{#e=!1;#s=!1;#t=!1;constructor(){super(),qd.set(this,Hd.Bz.zz(Xd))}AW(){super.AW(),this.nQ(!1),this.rQ(!1),this.JH(!1),qd.delete(this)}hQ(){return Hd.Bz.oQ()}YH(){}aQ(t){const s=qd.get(this);s.Rj().uQ(t,s._Y(),s.CY())}lQ(t){const s=qd.get(this);return s.Rj().vj(t,s._Y(),s.CY())}nQ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=qd.get(this).Rj();t?s.VH(this):s.HH(this)}TQ(){return this.#e}wQ(){}rQ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=qd.get(this).Rj();t?s.qH(this):s.XH(this)}xQ(){return this.#s}bQ(){}JH(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=qd.get(this).Rj();t?s.ZH(this):s.KH(this)}$H(){return this.#t}tq(){}vQ(){return[]}IQ(){return null}CQ(t){}}}{self.Cs;const Zd=self.ks;let Kd=null;self.Lk=class{constructor(t){Kd=t}wj(t){Kd.Sj(t)}LQ(t,s,i){Zd.ue(t),Zd.ue(s),Zd.Ie(i),Kd.sq(t,s,i)}RQ(t,s,i){return Zd.ue(t),Zd.ue(s),Zd.Ie(i),Kd.iq(t,s,i)}eq(t){return Zd.le(t),new self.nq(Kd,t)}set rq(t){Kd.hq(!!t)}get rq(){return Kd.oq()}aq(t){Kd.uq(!!t)}lq(t){Zd.te(t);const s=Kd.cq(t);return s?s.fB():null}}}self.Cs,self.ks;self.nq=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.Fk(),e=t.Qk();this.#s=e,this.#h=e.fq();const n=t.Zk();this.#i=n.pq(),this.#r=n.mq(e);const r=i.gq().mq();this.#n=r,s&&r.yq(s),t.Mq(!1)}wq(){const t=this.#t.Fk(),s=this.#h,i=this.#n;t.Sq(s),this.#s.Tq(this.#i,this.#r),t.bq(s),i.xq(i.ik()+1)}get vq(){return this.#n.Iq()}release(){const t=this.#t,s=t.Zk(),i=t.Fk().gq();t.Mq(!0),i.Cq(),s.Cq()}};{const $d=self.Cs,tp=self.ks;let sp=null,ip=null;self.Gq=class{constructor(t,s){ip=t,sp=s}_q(){sp.uL()}Dq(t){sp.oL(t)}Eq(){sp.pS()}Nq(){sp.aS()}Aq(){sp.TS()}setColor(t){sp.sL(t[0],t[1],t[2],t[3])}Lq(t,s,i,e){sp.sL(t,s,i,e)}Oq(){sp.eL()}Rq(t){sp.iL(t)}Pq(t){sp.US(t)}kq(){sp.WS()}rect(t){sp.fL(t.left,t.top,t.right,t.bottom)}Fq(t,s,i,e){sp.fL(t,s,i,e)}jq(t){sp.Gu($d.Gu.Yu(t))}zq(t,s,i,e,n,r,h,o){sp.CT(t,s,i,e,n,r,h,o)}Bq(t,s){sp.$S($d.Gu.Yu(t),$d.Rect.iu(s))}Uq(t,s){sp.mL($d.Gu.Yu(t),$d.Gu.Yu(s))}Wq(t,s,i,e,n,r,h,o,a,u,l,c,f){sp.gL(t,s,i,e,n,r,h,o,a,u,l,c,$d.Rect.iu(f))}Qq(t,s,i,e,n,r,h,o,a,u,l,c,f){sp.HS(t,s,i,e,n,r,h,o,a,u,l,c,$d.Gu.Yu(f))}Jq(t,s,i){sp.yL(t,s,i)}Yq(t){sp.IT(t)}line(t,s,i,e){sp.iy(t,s,i,e)}Vq(t,s,i,e,n,r){sp.qS(t,s,i,e,n,r)}Hq(t,s,i,e){sp.tT(t,s,i,e)}qq(t){sp.nT($d.Rect.iu(t))}Xq(t){sp.rT($d.Gu.Yu(t))}Zq(t){sp.cT(t)}Kq(){sp.fT()}$q(t){sp.gT(t)}tX(){sp.ST()}sX(t){tp.je(t,self.iX);const s=t?ip.uU(t):null;sp.rL(s)}eX(t,s){const i=self.Lj.Aj(t);if(!i)throw new Error("invalid IImageInfo");return i.nX(sp,{Vx:s?.Vx??"clamp-to-edge",Hx:s?.Hx??"clamp-to-edge",qx:s?.qx??"trilinear",Kx:s?.Kx??!0})}rX(t){const s=self.Lj.Aj(t);if(!s)throw new Error("invalid IImageInfo");s.JD()}KY(t){const s=self.Lj.Aj(t);if(!s)throw new Error("invalid IImageInfo");const i=s.lI();return self.iX.hX(ip,i)}oX(t,s,i){tp.re(t),tp.re(s);const e=sp.tI(t,s,{Vx:i?.Vx??"clamp-to-edge",Hx:i?.Hx??"clamp-to-edge",qx:i?.qx??"trilinear",Kx:i?.Kx??!0});return self.iX.hX(ip,e)}aX(t,s,i){tp.Fe(s,self.iX);const e=ip.uU(s);sp.$E(t,e,{tv:i?.tv??!0})}deleteTexture(t){tp.Fe(t,self.iX);const s=ip.uU(t);sp.nI(s)}uX(){const t=sp.BT();return new self.lX(ip,t)}cX(){ip.bj().fX(sp)}dX(t){tp.Fe(t,globalThis.aU),ip.uU(t).pX(sp)}}}{self.Cs,self.ks;const ep=new WeakMap,np=new WeakMap;self.iX=class{constructor(t,s){ep.set(this,{runtime:t,texture:s}),np.set(s,this),t.oB(this,s),Object.defineProperties(this,{width:{value:s.Bg(),writable:!1},height:{value:s.Zg(),writable:!1}})}static hX(t,s){if(!s)return null;return np.get(s)||new self.iX(t,s)}}}{let rp=function(t){return op.get(t).mX};0;self.Cs;const hp=self.ks,op=new WeakMap;self.lX=class{constructor(t,s){op.set(this,{runtime:t,mX:s}),t.oB(this,s)}release(){rp(this).Jn()}set gX(t){hp.ue(t),rp(this).$D(t)}get gX(){return rp(this).iD()}set yX(t){hp.re(t),rp(this).tE(t)}get yX(){return rp(this).sE()}set lineHeight(t){hp.re(t),rp(this).eE(t)}get lineHeight(){return rp(this).nE()}set MX(t){rp(this).rE(t)}get MX(){return rp(this).hE()}set wX(t){rp(this).oE(t)}get wX(){return rp(this).aE()}setColor(t){hp.ve(t),this.SX(t[0],t[1],t[2])}SX(t,s,i){rp(this).dE(t,s,i)}TX(t){hp.ue(t),rp(this).Lb(t)}set bX(t){rp(this).pE(t)}get bX(){return rp(this).mE()}set verticalAlign(t){rp(this).gE(t)}get verticalAlign(){return rp(this).yE()}set xX(t){rp(this).ME(t)}get xX(){return rp(this).wE()}set vX(t){rp(this).SE(t)}get vX(){return rp(this).TE()}set text(t){hp.ue(t),rp(this).Bc(t)}get text(){return rp(this).bE()}YB(t,s,i){hp.re(t),hp.re(s),hp.re(i),rp(this).xE(t,s,i)}ZY(){const{runtime:t,mX:s}=op.get(this),i=s.lI();return self.iX.hX(t,i)}$Y(){return rp(this).tN().su()}IX(t){hp.Ne(t),rp(this).VD=t}CX(){rp(this).JD()}get GX(){return rp(this).IE()}get _X(){return rp(this).GE()}}}{let ap=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return fp.get(i)||""},up=function(t){return new Promise(((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)}))};0;const lp=self.Cs,cp=new Set(["local","remote"]),fp=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);lp.DX=class extends lp.Un{constructor(t,s){super();const i=s.exportType;this.kc=t,this.EX="folders",this.NX=new Map,this.AX="cordova"===i,this.LX=!!s.isiOSCordova,this.OX=!!s.isFileProtocol,this.RX=s.swClientId,this.PX=s.supportedAudioFormats||{},this.kX=new Map,this.FX=!1,this.jX=s.scriptFolder,this.zX="",this.BX="",this.UX="",this.WX=s.fileMap||new Map,this.QX=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.JX=e?"remote":"local",this.YX=new Map,this.VX=[],this.HX=[],this.qX=!1,this.XX=0,this.ZX=0,this.KX=0,this.$X=!1,this.tZ=lp.Qn(lp.Kd,(()=>this.sZ()),50),this.iZ=lp.Qn(lp.Wd,Math.max(lp.hardwareConcurrency,8)),this.eZ=lp.Qn(lp.Wd,20),this.nZ=new self.Dj(this)}Jn(){for(const t of this.YX.values())t.Jn();this.YX.clear(),lp.wh(this.HX),this.kc=null}Rj(){return this.kc}rZ(t){this.EX=t}Wj(){return this.EX}hZ(){return this.jX}oZ(t){this.zX=t}Yj(){return this.zX}aZ(t){this.BX=t}uZ(){return this.BX}lZ(t){this.UX=t}cZ(){return this.UX}fZ(){return this.OX}eo(t,s){return s=s||this.JX,lp.Zh(t)?("flat"===this.EX&&(t=t.toLowerCase()),this.AX&&this.OX?this.dZ(t):"playable-ad-single-file"===this.kc.Mz()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.iZ.Fl((()=>lp.eo(t))):this.eZ.Fl((()=>lp.eo(t)))):lp.eo(t)}no(t){return lp.Zh(t)?("flat"===this.EX&&(t=t.toLowerCase()),this.AX&&this.OX?this.pZ(t):"playable-ad-single-file"===this.kc.Mz()?lp.ho(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.JX?this.iZ.Fl((()=>lp.no(t))):this.eZ.Fl((()=>lp.no(t)))):lp.no(t)}so(t){return lp.Zh(t)?("flat"===this.EX&&(t=t.toLowerCase()),this.AX&&this.OX?this.mZ(t):"playable-ad-single-file"===this.kc.Mz()?lp.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.JX?this.iZ.Fl((()=>lp.so(t))):this.eZ.Fl((()=>lp.so(t)))):lp.so(t)}async io(t){const s=await this.so(t);return JSON.parse(s)}gZ(t,s){return"flat"===this.EX&&(t=t.toLowerCase()),this.kc.gj("runtime","cordova-fetch-local-file",{filename:t,as:s})}mZ(t){return this.gZ(t,"text")}async dZ(t){const s=await this.gZ(t,"buffer"),i=ap(t);return new Blob([s],{type:i})}async yZ(t){"flat"===this.EX&&(t=t.toLowerCase());let s=this.NX.get(t);if(s)return s;const i=await this.dZ(t);return s=URL.createObjectURL(i),this.NX.set(t,s),s}pZ(t){return this.gZ(t,"buffer")}Qj(t){"flat"===this.EX&&(t=t.toLowerCase());let s=this.zX+t;return"Gecko"===lp.Zs.ei&&"preview"===this.kc.Mz()&&(s=this.MZ(s)),s}Bj(t){return lp.Xh(t)?Promise.resolve(t):this.AX&&this.OX?this.yZ(t):"playable-ad-single-file"===this.kc.Mz()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.EX&&(t=t.toLowerCase()),Promise.resolve(t))}wZ(t){if(lp.Xh(t)||"preview"!==this.kc.Mz()||!this.RX||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.RX),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}SZ(t){return this.Bj(t)}TZ(t){if(t.bZ&&!cp.has(t.bZ))throw new Error("invalid load policy");let s=this.YX.get(t.url);return s||(s=lp.Qn(lp.xZ,this,{url:t.url,size:t.size||0,bZ:t.bZ||this.JX}),this.YX.set(s.vZ(),s),this.qX||(this.XX+=s.Al(),this.HX.push(s.IZ().then((()=>this.CZ(s.Al()))))),s)}GZ(t){this.YX.delete(t.vZ())}async _Z(){try{await Promise.all(this.HX),this.KX=1}catch(t){console.error("Error loading: ",t),this.$X=!0,this.sZ()}}DZ(){this.qX=!0}EZ(){return this.$X}CZ(t){this.ZX+=t,this.tZ.fp()}sZ(){const t=lp.Qn(lp.Event,"loadingprogress");this.KX=lp.Xn(this.ZX/this.XX,0,1),t.progress=this.KX,this.kc.yf().dispatchEvent(t)}RF(){return this.KX}kF(){return this.kc.AZ().NZ()}LZ(t){lp.xh(this.VX,t),this.VX.length&&this.HX.push(this.OZ())}async OZ(){const t=[],s=[];for(const[i,e,n]of this.VX)this.XX+=n,t.push(this.RZ(i,e,s).then((()=>this.CZ(n))));await Promise.all(t),this.kc.bk()&&s.length>0&&await this.kc.gj("runtime","load-webfonts",{webfonts:s})}async RZ(t,s,i){try{let e=await this.Bj(s);"Gecko"===lp.Zs.ei&&(t=`'${t}'`),("Gecko"===lp.Zs.ei&&"preview"===this.kc.Mz()||"playable-ad-single-file"===this.kc.Mz())&&(e=this.MZ(e));const n=new FontFace(t,`url('${e}')`);this.kc.bk()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.kc.bk()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}PZ(t){return!!this.PX[t]}kZ(t,s){this.FX=!!s;for(const[s,i,e]of t)this.kX.set(s,{fileName:s,FZ:i.map((t=>({type:t[0],jZ:t[1],fullName:s+t[1],fileSize:t[2]}))),zZ:e})}BZ(t){"flat"===this.EX&&(t=t.toLowerCase());const s=this.kX.get(t);if(!s)return null;let i=null;for(const t of s.FZ)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.PZ(t.type))return t;return i}UZ(t){const s=this.BZ(t);return s?{url:this.Qj(s.fullName),type:s.type}:null}WZ(){if(this.FX){const t=[];for(const s of this.kX.values()){if(s.zZ)continue;const i=this.BZ(s.fileName);i&&t.push({QZ:s.fileName,url:this.Qj(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}JZ(t){return"preview"===this.kc.Mz()&&(t=new URL(t,location.href).toString()),this.WX.get(t)||null}MZ(t){let s=this.QX.get(t);if(s)return s;const i=this.JZ(t);return i?(s=URL.createObjectURL(i),this.QX.set(t,s),s):t}hk(){return this.nZ}async qj(...t){const s=await Promise.all(t.map((t=>this.Bj(t))));if(this.kc.bk())if(1===t.length){const s=t[0];await import((lp.Zh(s)?"./":"")+s)}else{const s=t.map((t=>`import "${lp.Zh(t)?"./":""}${t}";`)).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map((t=>up(t))))}async Zj(t){if(WebAssembly.compileStreaming){const s=await this.Bj(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await lp.no(t);return await WebAssembly.compile(s)}}async $j(t){const s=await this.Bj(t);return await this.kc.gj("runtime","add-stylesheet",{url:s})}}}{const dp=self.Cs;dp.YZ=class extends dp.Un{constructor(t,s){super(),this.VZ=t,this.kc=t.Rj(),this.HZ=s.url||"",this.qZ=s.size,this.XZ=s.bZ,this.ZZ=s.blob||null,this.KZ=!!this.ZZ,this.yM=null}Jn(){this.yM=null,this.VZ=null,this.kc=null,this.ZZ=null}vZ(){return this.HZ}Al(){return this.qZ}IZ(){return"local"===this.XZ||this.ZZ?(this.KZ=!0,Promise.resolve()):(this.yM||(this.yM=this.VZ.eo(this.HZ,this.XZ).then((t=>(this.KZ=!0,this.yM=null,this.ZZ=t,t))).catch((t=>{console.error("Error loading resource: ",t),this.yM=null}))),this.yM)}$Z(){return this.KZ}tK(){return this.ZZ?Promise.resolve(this.ZZ):this.yM?this.yM:this.VZ.eo(this.HZ,this.XZ)}}}{const pp=self.Cs,mp=new pp.Wd,gp=new Set;pp.xZ=class extends pp.YZ{constructor(t,s){super(t,s),this.sK=null,this.iK=null,this.Wp=0,this.eK=-1,this.nK=-1,gp.add(this)}Jn(){if(0!==this.Wp)throw new Error("released image asset which still has texture references");this.VZ.GZ(this),this.sK=null,gp.delete(this),super.Jn()}static rK(){for(const t of gp)t.sK=null,t.iK=null,t.Wp=0}nX(t,s){return s=s||{},this.Wp++,this.iK?Promise.resolve(this.iK):(this.sK||(s.Xx=this.kc.bj().hK(),this.sK=this.oK(t,s)),this.sK)}async oK(t,s){try{const i=await this.tK();return 0===this.Wp?(this.sK=null,null):await mp.Fl((async()=>{const e=await t.UL(i,s);return this.sK=null,0===this.Wp?(t.nI(e),null):(this.iK=e,this.eK=e.Bg(),this.nK=e.Zg(),this.iK)}))}catch(t){throw console.error("Failed to load texture: ",t),t}}JD(){if(this.Wp<=0)throw new Error("texture released too many times");this.Wp--,0===this.Wp&&this.iK&&(this.iK.lb().nI(this.iK),this.iK=null)}aK(){return this.Wp}lI(){return this.iK}Bg(){return this.eK}Zg(){return this.nK}async uK(){const t=await this.tK();return pp.Ei.ImageBitmap?await createImageBitmap(t):await pp.uo(t)}}}{let yp=function(t,s){return t.oj().lK()-s.oj().lK()};0;const Mp=self.Cs;self.assert;Mp.cK=class extends Mp.Un{constructor(t,s,i){super(),this.fK=t,this._a=s,this.Da=i,this.dK=[],this.pK=!0,this.mK=new Set,this.gK=!1}Jn(){Mp.wh(this.dK),this.mK.clear(),this.fK=null}Ff(){Mp.wh(this.dK),this.pK=!0,this.mK.clear(),this.gK=!1}yK(){this.pK=!1}Dl(){return!this.dK.length||!(this.dK.length>this.mK.size)&&(this.MK(),!0)}wK(t){if(this.mK.has(t))return this.mK.delete(t),void(0===this.mK.size&&(this.gK=!1));this.dK.push(t),this.pK=1===this.dK.length}Xf(t){this.mK.add(t),this.gK=!0,this.mK.size>=50&&this.MK()}MK(){this.gK&&(this.dK.length!==this.mK.size?(Mp.Dh(this.dK,this.mK),this.mK.clear(),this.gK=!1):this.Ff())}SK(){this.pK||(this.dK.sort(yp),this.pK=!0)}TK(t){this.MK(),this.SK(),this.dK.length&&t.push(this.dK)}}}{const wp=self.Cs;wp.bK=class extends wp.Un{constructor(t,s){super(),this.xK=t,this.vK=s,this.IK=wp.Qn(wp.Cl)}Jn(){this.IK.Jn(),this.IK=null}CK(t,s,i){let e=this.IK.Js(t,s);return e||(i?(e=wp.Qn(wp.cK,this,t,s),this.IK.Set(t,s,e),e):null)}GK(t){return Math.floor(t/this.xK)}_K(t){return Math.floor(t/this.vK)}DK(t,s,i){if(s)for(let e=s.Za(),n=s.$a();e<=n;++e)for(let n=s.Ka(),r=s.tu();n<=r;++n){if(i&&i.xu(e,n))continue;const s=this.CK(e,n,!1);s&&(s.Xf(t),s.Dl()&&this.IK.El(e,n))}if(i)for(let e=i.Za(),n=i.$a();e<=n;++e)for(let n=i.Ka(),r=i.tu();n<=r;++n)s&&s.xu(e,n)||this.CK(e,n,!0).wK(t)}EK(t,s){let i=this.GK(t.Za());const e=this._K(t.Ka()),n=this.GK(t.$a()),r=this._K(t.tu());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.CK(i,t,!1);e&&e.TK(s)}}NK(t){let s=t.Za();const i=t.Ka(),e=t.$a(),n=t.tu();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.CK(s,t,!1);i&&i.yK()}}}}{let Sp=function(t,s){return t.oj().lK()-s.oj().lK()},Tp=function(t,s){return t.oj().Hb()-s.oj().Hb()};0;const bp=self.Cs,xp=(self.assert,new bp.Rect),vp=new bp.Gu,Ip=[],Cp=(new bp.Rect,new bp.Rect,self.hs),Gp=Cp.ys,_p=Cp.Ms,Dp=Cp.fs,Ep=Dp.create(),Np=Gp.create(),Ap=_p.create(),Lp=Gp.create(),Op=Gp.create(),Rp=Gp.create(),Pp=bp.Qn(bp.Ga),kp=(bp.Qn(bp.Rect),[]),Fp=[],jp=[],zp={name:"",AK:-1,LK:!1,isVisible:!0,RU:!0,FU:!1,backgroundColor:[1,1,1,1],nW:!0,RK:[1,1],opacity:1,oW:!1,PK:!1,kK:!1,FK:!1,JU:1,qR:0,sW:0,jK:[],zK:[],BK:[]};bp.UK=class extends bp.Un{constructor(t,s,i){super(),i=Object.assign({},zp,i),this.WK=t,this.kc=t.Rj(),this.QK=s,this.Hn=i.name,this.GM=-1,this.JK=!!i.FU,this.YK=-1,this.VK=i.AK,this.HK=!!i.LK,this.qK=!!i.isVisible,this.XK=!!i.RU,this.ZK=bp.Qn(bp.xo),this.ZK.ya(i.backgroundColor),this.KK=!!i.nW,this.$K=i.RK[0],this.t$=i.RK[1],this.Db=bp.Qn(bp.xo,1,1,1,i.opacity),this.s$=bp.Qn(bp.xo),this.i$=!!i.oW,this.e$=!!i.PK,this.n$=!!i.kK,this.r$=!!i.FK,this.h$=i.JU,this._b=i.qR,this.o$=null,this.a$=1,this.Eb=i.sW,this.u$=0,this.l$=0,this.c$=0,this.f$=!1,this.jN=bp.Qn(bp.Rect),this.d$=bp.Qn(bp.Rect),this.p$=bp.Qn(bp.Rect),this.m$=!0,this.Hv=Dp.create(),this.g$=!0,this.LR=Dp.create(),this.y$=!0,this.M$=bp.Qn(bp.OM.FM),this.w$=!0,this.S$=[],this.T$=i.jK,this.b$=[],this.x$=[],this.v$=new Map,this.dK=[],this.I$=!1,this.C$=!1,this.G$=!1;const e=this.kc.bj();this._$=bp.Qn(bp.D$,this,i.zK),this.KP=bp.Qn(bp.OM.UO,e.E$(),{NO:(t,s)=>{const i=s.QP(),n=i.FL();t.Lb(i.N$()),t.YL(n),t.VL(n),e.A$(n)},LO:t=>this.WB().L$(t)}),this.O$=!0,this.R$=!0,this.P$=null,this.k$=[],this.F$=!1,this.j$=bp.Qn(bp.Rect,0,0,-1,-1),this.z$=bp.Qn(bp.Rect,0,0,-1,-1),this.B$=new self.aU(this),this.U$(),this.W$()&&(this.P$=bp.Qn(bp.bK,this.kc.vk(),this.kc.Ck())),this.Q$=i.BK.map((t=>bp.UK.J$(this.WK,this,t)))}Y$(){for(const t of this.T$){const s=this.kc.V$(t[1]);this.WK.H$(s),s.q$()||(s.X$(t),s.Z$(this.GM)),this.b$.push(t),this.v$.set(t[2],t)}bp.xh(this.S$,this.b$),this.T$=null}static J$(t,s,i){return bp.Qn(bp.UK,t,s,{name:i[0],AK:i[2],isVisible:i[3],RU:i[13],FU:i[19],backgroundColor:i[4].map((t=>t/255)),nW:i[5],RK:[i[6],i[7]],opacity:i[8],oW:i[9],PK:i[17],kK:i[18],FK:i[10],JU:i[11],qR:i[12],sW:i[16],jK:i[14],zK:i[15],BK:i[20]})}Jn(){for(const t of this.Q$)t.Jn();bp.wh(this.Q$);for(const t of this.dK)this.kc.LW(t);bp.wh(this.dK),this._$.Jn(),this._$=null,this.KP.Jn(),this.KP=null,this.B$=null,this.QK=null,this.WK=null,this.kc=null}K$(t){return this.v$.get(t)}$$(t){const s=this.WK.t0();let i=0;const e=this.b$;for(let n=0,r=e.length;n<r;++n){const r=e[n],h=this.kc.V$(r[1]);let o=!0;if(!h.s0()||s){const s=this.kc.i0(r,this,!0);t.push(s),h.e0()&&(o=!1,this.x$.push(s.zW()))}o&&(e[i]=e[n],++i)}bp.Mh(e,i),this.kc.BB(),this.dj()}n0(t,s){if(!t.MB().Vz())throw new Error("instance is not of world type");const i=t.oj();if(i.aj()!==this)throw new Error("instance added to wrong layer");this.dK.push(t),0!==i.Hb()&&(this.G$=!0),s&&this.W$()&&t.oj().FQ(),this.dj(t)}r0(t){this.dK.includes(t)||(this.dK.push(t),0!==t.oj().Hb()&&(this.G$=!0),this.dj(t))}h0(t,s){const i=t.oj();if(i.aj()!==this)throw new Error("instance added to wrong layer");this.dK.unshift(t),0!==i.Hb()&&(this.G$=!0),this.dj(t),s&&this.W$()&&t.oj().FQ()}o0(t,s){const i=this.dK.indexOf(t);i<0||(s&&this.W$()&&t.oj().a0(),this.dK.splice(i,1),this.dj(t),this.u0())}l0(){this.G$=!0}u0(){0===this.dK.length&&(this.G$=!1)}c0(t){if(t){const t=new Set;for(const s of this.dK){const i=s.oj().lK();i>=0&&t.add(i)}let s=-1;for(const i of this.dK){const e=i.oj();if(!(e.lK()>=0)){for(++s;t.has(s);)++s;e.f0(s)}}}this.dK.sort(Sp)}d0(){}p0(){for(const t of this.dK)t.GW().e0()||this.kc.LW(t);this.kc.BB(),bp.wh(this.dK),this.G$=!1,this.dj()}m0(t,s,i,e,n,r){const h=this.kc.Fk(),o=this.kc.g0(),a=t.y0(),u=[];for(const l of this.b$){const c=l[0],f=c[0],d=c[1];if(!s.xu(f,d))continue;const p=o[l[1]];if(p!==t){if(!a)continue;if(!t.M0(p))continue}let m=n;if(!m){const t=this.kc.rj();this.WF()===t?m=this:(m=t.w0(this._c()),m||(m=t.lj(this.ik())))}const g=this.kc.i0(l,m,!1,void 0,void 0,!1,r);m.RB(g);const y=g.oj();y.BQ(i,e),y.FQ(),h.PB(!0),g.kB(),h.PB(!1),u.push(g)}return u}AB(){return this.dK.length}WF(){return this.WK}_c(){return this.Hn}S0(t){this.GM=t}ik(){return this.GM}T0(t){this.YK=t}vH(){return this.YK}jU(){return this.JK}zU(t){t=!!t,this.JK!==t&&(this.JK=t,this.WK.b0(),this.kc.pj())}x0(){let t=-1;const s=this.IU();return t=s?s._U().indexOf(this):this.WF().v0().indexOf(this),t}I0(){return this.VK}Rj(){return this.kc}C0(){return this.HK}G0(){for(const t of this.CU())if(t.C0())return!0;return!1}Pz(){return this.kc.Pz()}WB(){return this._$}sk(){return this._0(),this.KP}_0(){const t=this.D0();if(!this.O$&&t===this.R$&&!this.KP.OR())return;const s=this.WB().E0();this.KP.RR(s.map((t=>t.EC())),{RO:s.map((t=>t.ik())),PO:!t,BO:!0}),this.O$=!1,this.R$=t}OY(){this.WB().OY(),this.O$=!0}W$(){return this.r$&&!this.n$}N0(){return this.P$}A0(){this.F$=!1}OU(){for(const t of this.L0())if(!t.NU())return!1;return!0}NU(){return this.qK}AU(t){t=!!t,this.qK!==t&&(this.qK=t,this.kc.pj())}kU(t){this.XK=!!t}PU(){return this.XK}UU(){for(const t of this.L0())if(!t.PU())return!1;return!0}fW(t){if(t=!!t,this.f$!==t){if(this.f$=t,t){const t=this.WF();this.l$=t.KB(),this.c$=t.tU()}this.O0(),this.kc.pj()}}R0(){return this.f$}ZB(t){const s=this.WF(),i=s.P0(),e=s.k0();t>e&&(t=e),t<i&&(t=i),this.l$!==t&&(this.l$=t,this.R0()&&(this.O0(),this.kc.pj()))}$B(t){const s=this.WF(),i=s.F0(),e=s.j0();t>e&&(t=e),t<i&&(t=i),this.c$!==t&&(this.c$=t,this.R0()&&(this.O0(),this.kc.pj()))}KB(){return this.R0()?this.l$:this.WF().KB()}tU(){return this.R0()?this.c$:this.WF().tU()}pW(){return this.z0(),this.jN}B0(){return this.z0(),this.d$}U0(){return this.z0(),this.p$}SU(){const t=this.WF();return[t.W0(),t.Q0()]}zw(t){return this.kc.zw(t)}J0(t,s){const i=this.B0();if(0===t)s.m(i);else{let e=i.ru(),n=i.hu();const r=this.Y0(t),h=i.width()/r,o=i.height()/r,[a,u]=this.SU();if(.5!==a||.5!==u){const s=this.V0(),i=this.kc,r=this.zw()/s;let h=(a-.5)*i.H0()/r,o=(u-.5)*i.q0()/r;const l=this.XB();0!==l&&(Pp.set(h,o),Pp.rotate(l),h=Pp.Aa(),o=Pp.Oa());const c=bp.pr(s,0,t);e+=bp.Ct(h,0,c),n+=bp.Ct(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}tL(){return this.Db.zo()}iL(t){t=bp.Xn(t,0,1),this.Db.zo()!==t&&(this.Db.Ro(t),this.U$(),this.kc.pj())}U$(){this.s$.m(this.Db),this.s$.Xo()}N$(){return this.s$}D0(){return this.Db.Yo(1,1,1,1)}VU(){return this.h$}YU(t){this.h$!==t&&(this.h$=t,this.O0(),this.kc.pj())}ZU(){return this.$K}tW(){return this.t$}X0(t,s){this.$K===t&&this.t$===s||(this.$K=t,this.t$=s,this.O0(),this.kc.pj())}XU(t){this.X0(t,this.tW())}$U(t){this.X0(this.ZU(),t)}qb(t){this.Eb!==t&&(this.Eb=t,this.kc.pj())}Hb(){return this.Eb}qB(t){t=bp.Zn(t),this.u$!==t&&(this.u$=t,this.O0(),this.kc.pj())}XB(){return bp.Zn(this.WK.XB()+this.u$)}HU(){return this.u$}Z0(){return this.dK.length>0}cj(){return this.dK}K0(){return this.$0()&&this.n$?(bp.xh(jp,this.cj()),jp.sort(((t,s)=>this.t1(t,s))),jp):this.cj()}s1(t){bp.An(t,this.K0());for(const s of this.Q$)s.OU()&&s.tL()>0&&s.s1(t)}t1(t,s){const i=this.WF().i1(),e=i[0],n=i[1],r=i[2],h=t.oj(),o=s.oj(),a=h.Wb()-e,u=h.Yb()-n,l=h.Hb()-r,c=o.Wb()-e,f=o.Yb()-n,d=o.Hb()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}cW(){return this.ZK}hW(){return this.KK}rW(t){t=!!t,this.KK!==t&&(this.KK=t,this.kc.pj())}uW(){return this.i$}aW(t){t=!!t,this.i$!==t&&(this.i$=t,this.kc.pj())}iW(t){t=!!t,this.e$!==t&&(this.e$=t,this.O0(),this.kc.pj())}eW(){return this.e$}e1(){return!this.Rj().n1()||!this.e$}$0(){return!this.e1()}h1(){return this.$0()&&this.WF().o1()}a1(){if(!this.h1())return!1;for(const t of this.Q$)if(!t.a1())return!1;return!0}Ab(t){this._b!==t&&(this._b=t,this.kc.pj())}lW(){return this._b}u1(){return!this.QK}IU(){return this.QK}l1(t){this.QK=t}_U(){return this.Q$}c1(){return this.Q$.length>0}f1(t,s=!0){s?this.Q$.push(t):this.Q$.unshift(t)}d1(t,s,i){let e=this.Q$.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Q$.splice(e,0,t)}m1(t){const s=this.Q$.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Q$.splice(s,1)}g1(){for(const t of this.Q$)if(t.M1())return!0;return!1}*EU(){for(const t of this.Q$)yield*t.EU();yield this}*CU(){let t=this.IU();for(;t;)yield t,t=t.IU()}*L0(){yield this,yield*this.CU()}w1(t){for(const s of this.CU())if(s===t)return!0;return!1}S1(t){return this===t||this.$K===t.$K&&this.t$===t.t$&&this.a$===t.a$&&this.h$===t.h$&&this.u$===t.u$&&this.KB()===t.KB()&&this.tU()===t.tU()}T1(){return{parallaxX:this.ZU(),parallaxY:this.tW(),scale:this.QU(),scaleRate:this.VU(),angle:this.HU(),hasOwnScroll:this.R0(),scrollX:this.KB(),scrollY:this.tU()}}b1(t){this.X0(t.parallaxX,t.parallaxY),this.WU(t.scale),this.YU(t.scaleRate),this.qB(t.angle),this.fW(t.hasOwnScroll),this.ZB(t.scrollX),this.$B(t.scrollY),this.z0()}v1(t){0!==t.size&&bp.Dh(this.dK,t)>0&&(this.u0(),this.dj())}dj(t){this.I$=!1,this.F$=!1,t&&!t.GW().MB().Xz()||(this.C$=!1)}I1(){if(!this.I$){if(this.dK.sort(Tp),this.W$())for(let t=0,s=this.dK.length;t<s;++t){const s=this.dK[t].oj();s.f0(t),this.P$.NK(s.C1())}else for(let t=0,s=this.dK.length;t<s;++t)this.dK[t].oj().f0(t);this.I$=!0}}G1(){if(this.C$)return;const t=this.WK._1(this.vH()).map((t=>[...t.EU()])).flat();let s=0;for(const i of t){for(const t of i.cj())t.GW().MB().Xz()&&t.oj().D1(s++);i.E1()}}E1(){this.C$=!0}N1(){return{isVisible:this.OU(),opacity:this.tL(),isInteractive:this.PU()}}A1(t,s,i){const e=t.oj(),n=s.oj();if(e.aj()!==this||n.aj()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.uj();let h=n.uj();return r!==h+(i?1:-1)&&(bp.Ih(this.dK,r),r<h&&h--,i&&h++,h===this.dK.length?this.dK.push(t):this.dK.splice(h,0,t),this.dj(t),!0)}L1(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.oj().lK()<h.oj().lK()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}O1(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.L1(i,n))}return i%2==1&&s.push(t[i-1]),s}R1(t){for(;t.length>1;)t=this.O1(t);return t[0]}P1(){return this.I1(),bp.wh(Ip),this.P$.EK(this.pW(),Ip),Ip.length?1===Ip.length?Ip[0]:this.R1(Ip):[]}M1(){return this.OU()&&this.tL()>0&&this.F1()}F1(){if(this.Z0()||!this.hW())return!0;for(const t of this.Q$)if(t.F1())return!0;return!1}j1(){return this.uW()||!this.D0()||0!==this.lW()||this._$.z1()}B1(){if(this.j1())return!0;for(const t of this.Q$)if(t.B1())return!0;return!1}FL(){return this.o$}Y0(t){if(this.WK.xU())return 1;{const s=this.U1();return s/(s-t)}}W1(t){const s=this.kc.vW();if(this.WK.xU())return s;{const i=this.U1();return this.zw()/Math.abs(i-t)*s}}O0(){this.y$=!0,this.w$=!0,this.m$=!0}Q1(t){return this.y$&&(this.J1(t,this.LR,0,0,null),this.y$=!1),this.LR}V0(t){return this.zw(t)/this.Y1()}U1(){return this.h1()?this.WF().i1()[2]:this.V0()}V1(){if(this.h1()){const t=this.WF().i1();return[t[0],t[1],t[2]]}return this.H1()}H1(t=0,s=0,i=0){const e=this.kc,n=this.WF(),r=e.q1(),h=e.X1();let o=(this.KB()-r)*this.$K+r,a=(this.tU()-h)*this.t$+h;e.Dk()&&(o=Math.round(o),a=Math.round(a));let u=o+t,l=a+s;const c=n.xU()?this.zw(i):this.V0(i),[f,d]=this.SU();if(.5!==f||.5!==d){const t=this.zw(i)/c;let s=(f-.5)*e.H0()/t,n=(d-.5)*e.q0()/t;const r=this.XB();0!==r&&(Pp.set(s,n),Pp.rotate(r),s=Pp.Aa(),n=Pp.Oa()),u+=s,l+=n}return[u,l,c]}J1(t,s,i,e,n){const r=this.kc,h=this.WF();if(this.h1()){Gp.m(Lp,h.i1()),Gp.m(Op,h.Z1()),Gp.m(Rp,h.K1());const t=r.q1(),s=r.X1(),i=Op[0]-Lp[0],e=Op[1]-Lp[1],n=Op[2]-Lp[2];Lp[0]=(Lp[0]-t)*this.$K+t,Lp[1]=(Lp[1]-s)*this.t$+s,Lp[2]*=Math.max(this.$K,this.t$),Op[0]=Lp[0]+i,Op[1]=Lp[1]+e,Op[2]=Lp[2]+n}else{const[t,s,r]=this.H1(i,e,n);Gp.set(Lp,t,s,r),Gp.set(Op,t,s,r-100);const h=this.XB();0===h?Gp.set(Rp,0,1,0):Gp.set(Rp,Math.sin(h),Math.cos(h),0)}t.iS(s,Lp,Op,Rp,n||r.q0())}t2(){this.g$=!0,this.w$=!0,this.m$=!0}s2(t){return this.g$&&(this.i2(t),this.g$=!1),this.Hv}i2(t){const s=this.kc.bj(),[i,e]=this.SU();if(this.WK.xU())t.sS(this.Hv,s.e2(),s.n2());else if(.5===i&&.5===e)Dp.m(this.Hv,s.h2());else{const n=s.e2(),r=s.n2();t.$w(this.Hv,n/r,i,e)}}pX(t,s=!0,i=0,e=0,n=0){s&&t.WA(this.s2(t));let r=null;0===i&&0===e&&0===n?r=this.Q1(t):(this.J1(t,Ep,i,e,n),r=Ep),t.qA(r)}o2(t){this.pX(t),t.zS(this.Hb())}a2(t){let s=null;if(t.PT()&&this.kc.u2()){const i=this.kc.bj().l2(this);i&&(s=i.CN(),t.$L(s))}return s}c2(t){if(t.tS()&&this.kc.u2()){const s=2*(this.ik()+1);t.f2(s,s+1)}}Fx(t,s,i){const e=this.kc.bj(),n=this.j1();let r=null;const h=this.a2(t);if(this.c2(t),n){const s={qx:this.kc.Gk(),Pv:!0,d2:!!t.tS()&&this.kc.m2()};"low"===e.g2()&&(s.width=e.e2(),s.height=e.n2()),r=this.kc.M2(s),this.o$=r,t.QL(r),this.hW()&&t.NL(0,0,0,0)}else this.o$=s,t.QL(s);if(this.hW()||t._l(this.ZK),this.WK.w2(t,this.o$,this.Q$,n&&this.hW()),this.c2(t),this.pX(t),t.zS(this.Hb()),t.OL(this.$0()),this.Y1()>Number.EPSILON){this.I1();const s=this.W$()&&0===this.Hb()&&!this.G$;this.h1()?this.S2(t):s?this.T2(t):this.b2(t,this.K0())}t.zS(0),t.US(0),n&&(t.OL(!1),this.v2(t,r,s,i)),h&&t.sO(h),this.o$=null}b2(t,s){const i=this.pW(),e=this.o$,n=this.WF().xU(),r=this.WF().I2();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const u=a.oj();u.OU()&&u.C2(i,r,n)&&this.G2(a,u,t,e)}}S2(t){const s=this.o$,i=this._2(),e=kp,n=Fp,r=this.K0();for(let h=0,o=r.length;h<o;){const a=r[h],u=a.oj();if(!u.OU()||!u.D2(i)){++h;continue}(!a.E2()||u.N2()>0)&&n.push(a);const l=a.oj().ZQ();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.oj();if(s.OU()&&s.D2(i)){if(s.ZQ()!==l)break;t.E2()?(s.N2()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].A2()){this.L2(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.oj();r.O2(!0),this.G2(e,r,t,s),r.O2(!1)}}else{this.G2(a,u,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.oj();r.aj().G2(e,r,t,s)}}h=c,bp.wh(e),bp.wh(n)}}L2(t,s){const i=this.o$;t.qL();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.oj();n.R2(!0),this.P2(e,n,t)}t.XL();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.oj();this.G2(n,r,t,i),r.R2(!1)}t.KL()}T2(t){const s=this.P$,i=this.z$,e=this.j$,n=this.pW();let r;i.set(s.GK(n.Za()),s._K(n.Ka()),s.GK(n.$a()),s._K(n.tu())),this.F$&&i.equals(e)?r=this.k$:(r=this.P1(),this.F$=!0,e.m(i)),this.b2(t,r),r!==this.k$&&bp.xh(this.k$,r)}G2(t,s,i,e){s.z1()?this.F2(t,s,i,e):this.P2(t,s,i)}P2(t,s,i){const e=s.j2();i.xS()!==e&&e.Nb(),t.Fx(i)}F2(t,s,i,e){this.z2(t,s,i,e,null)&&this.pX(i)}z2(t,s,i,e,n){const r=s.PQ().sk();return r.JR(i,e,{VR:t,qR:s.lW(),devicePixelRatio:this.kc.B2(),time:t.U2(),XR:this.kc.W2()*this.Y1(),ZR:this.XB(),bP:s.tJ(),xP:r.UP()?null:this.Q2(s),nP:n&&n.nP,rP:n&&n.rP,hP:n&&n.hP,oP:n&&n.oP,aP:n&&n.aP,uP:n&&n.uP}),i.zS(this.Hb()),r.ZA()}v2(t,s,i,e){const n=this._$.E0(),r=this.kc;0===n.length?(t.QL(i),t.aS(),e&&0===this._b&&this.D0()?t.JL(s):(t.Ab(this._b),t.Lb(this.s$),t.YL(s)),t.VL(s),r.A$(s)):this.sk().JR(t,i,{VR:this,qR:this.lW(),devicePixelRatio:r.B2(),XR:r.W2()*this.Y1(),ZR:this.XB(),bP:this.pW(),xP:null,OO:!0})}QU(){return this.a$}WU(t){this.a$!==t&&(this.a$=t,this.WK.J2(),this.O0(),this.kc.pj())}vW(){return this.Y1()*this.kc.vW()}AH(){return this.Y1()*this.kc.AH()}Y1(){return(this.a$*this.WK.HB()-1)*this.h$+1}z0(){if(!this.m$)return;this.m$=!1;const t=this.kc.q1(),s=this.kc.X1(),i=(this.KB()-t)*this.$K+t,e=(this.tU()-s)*this.t$+s,n=this.Y1(),r=this.kc.H0()/n,h=this.kc.q0()/n;let o=i-r/2,a=e-h/2;this.kc.Dk()&&(o=Math.round(o),a=Math.round(a));const u=this.d$;u.set(o,a,o+r,a+h);const l=this.XB();0!==l&&(xp.m(u),xp.offset(-u.ru(),-u.hu()),vp.qu(xp,l),vp.Zu(xp),xp.offset(u.ru(),u.hu()),u.m(xp));const c=this.Eb;this.J0(c,this.jN),this.h1()?this.Y2(c,this.p$):this.p$.m(this.jN)}Y2(t,s){const i=this.kc.bj(),e=i.Dz(),n=i.Nz(),[r,h]=this.gW(0,0,t),[o,a]=this.gW(e,0,t),[u,l]=this.gW(e,n,t),[c,f]=this.gW(0,n,t);let d=Math.min(r,o,u,c),p=Math.min(h,a,l,f),m=Math.max(r,o,u,c),g=Math.max(h,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}gW(t,s,i=0){return this.V2(t,s,i,this.AH())}SW(t,s,i=0){return this.V2(t,s,i,this.vW()*this.Pz())}V2(t,s,i,e){const n=this.kc,r=n.lb(),h=this.Y1(),o=n.H0()/h,a=n.q0()/h,u=Ap;_p.set(u,0,0,o,a),t/=e,s=u[3]-s/e;const l=this.s2(r),c=this.Q1(r),f=Np;return bp.OM.kM(t,s,i,c,l,u,f)?[f[0],f[1]]:[NaN,NaN]}H2(t,s){const i=this.a$,e=this.h$,n=this.$K,r=this.t$,h=this.u$;this.a$=1,this.h$=1,this.$K=1,this.t$=1,this.u$=0,this.O0();const o=this.gW(t,s);return this.a$=i,this.h$=e,this.$K=n,this.t$=r,this.u$=h,this.O0(),o}MW(t,s,i=0){return this.q2(t,s,i,this.AH())}bW(t,s,i=0){return this.q2(t,s,i,this.vW()*this.Pz())}q2(t,s,i,e){const n=this.kc,r=n.lb(),h=this.Y1(),o=n.H0()/h,a=n.q0()/h,u=Ap;_p.set(u,0,0,o,a);const l=this.s2(r),c=this.Q1(r),f=Np;return bp.OM.RM(t,s,i,c,l,u,f)?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}X2(t,s){return t*=this.vW()*this.Pz(),0!==s&&(t*=this.Y0(s)),t}Q2(t){const s=t.tJ(),i=t.ZQ(),e=t.N2(),n=i+e,r=s.Za(),h=s.Ka(),o=s.$a(),a=s.tu();if(this.h1()){if(this.Z2(r,h,i)||this.Z2(o,h,i)||this.Z2(o,a,i)||this.Z2(r,a,i))return null;if(e>0&&(this.Z2(r,h,n)||this.Z2(o,h,n)||this.Z2(o,a,n)||this.Z2(r,a,n)))return null}else if(n>=this.V0())return null;let[u,l]=this.bW(r,h,i),[c,f]=this.bW(o,a,i);if(0!==this.XB()||e>0||this.h1()){const[t,s]=this.bW(o,h,i),[d,p]=this.bW(r,a,i);if(e>0){const[i,e]=this.bW(r,h,n),[m,g]=this.bW(o,h,n),[y,M]=this.bW(o,a,n),[w,S]=this.bW(r,a,n);let T=Math.min(u,c,t,d,i,m,y,w);c=Math.max(u,c,t,d,i,m,y,w),u=T,T=Math.min(l,f,s,p,e,g,M,S),f=Math.max(l,f,s,p,e,g,M,S),l=T}else{let i=Math.min(u,c,t,d);c=Math.max(u,c,t,d),u=i,i=Math.min(l,f,s,p),f=Math.max(l,f,s,p),l=i}}return xp.set(u,l,c,f),xp}_2(){return this.w$&&(this.K2(),this.w$=!1),this.M$}K2(){const t=this.kc.lb(),s=this.s2(t),i=this.Q1(t);this.M$.JM(i,s)}Z2(t,s,i){return this._2().VM(t,s,i)}t3(){return{d:this.C0(),s:this.QU(),a:this.HU(),v:this.NU(),i:this.PU(),html:this.jU(),bc:this.ZK.toJSON(),t:this.hW(),sx:this.l$,sy:this.c$,hosp:this.f$,px:this.ZU(),py:this.tW(),c:this.Db.toJSON(),sr:this.VU(),fx:this._$.ix(),cg:this.x$}}s3(t){this.HK=!!t.d,this.a$=t.s,this.u$=t.a,this.qK=!!t.v,this.XK=!t.hasOwnProperty("i")||t.i,this.JK=!!t.html,this.ZK.ya(t.bc),this.KK=!!t.t,t.hasOwnProperty("sx")&&(this.l$=t.sx),t.hasOwnProperty("sy")&&(this.c$=t.sy),t.hasOwnProperty("hosp")&&(this.f$=!!t.hosp),this.$K=t.px,this.t$=t.py,this.Db.ya(t.c),this.U$(),this.h$=t.sr,bp.xh(this.x$,t.cg),bp.xh(this.b$,this.S$);const s=new Set(this.x$);let i=0;for(let t=0,e=this.b$.length;t<e;++t)s.has(this.b$[t][2])||(this.b$[i]=this.b$[t],++i);bp.Mh(this.b$,i),this._$.nx(t.fx),this.O$=!0}i3(){this.c0(!1),this.dj(),this.O0(),this.t2()}eU(){return this.B$}RB(t,s=!1){if(this.dK.includes(t))s&&this.dK.sort(((t,s)=>t.oj().e3()-s.oj().e3()));else if(t.n3()){const s=[...t._J()];s.push(t),s.sort(((t,s)=>t.oj().e3()-s.oj().e3()));for(const t of s)if(t.FW())for(const i of t.jW()){if(s.includes(i))continue;const t=[...i._J()];t.push(i),t.sort(((t,s)=>t.oj().e3()-s.oj().e3())),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.MB().Vz()&&this.n0(t,!0)}else{if(t.MB().Vz()&&this.n0(t,!0),!t.FW())return;for(const s of t.jW()){const t=[...s._J()];if(t.push(s),t.sort(((t,s)=>t.oj().e3()-s.oj().e3())),t&&t.length)for(const s of t)s.MB().Vz()&&this.n0(s,!0)}}}}}{let Bp=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Up=function(t,s){Kp!==t&&(t.o2(s),Kp=t)};0;const Wp=self.Cs,Qp=self.MQ,Jp=(self.assert,Wp.Qn(Wp.Rect),Wp.Qn(Wp.Rect),Wp.Qn(Wp.Rect)),Yp=Wp.Qn(Wp.xo),Vp=self.hs.ys,Hp=[],qp=[],Xp=[],Zp=[];let Kp=null;Wp.r3=class extends Wp.Un{constructor(t,s,i){super(),this.h3=t,this.kc=t.Rj(),this.Hn=i[0],this.o3=i[1],this.a3=i[2],this._y=i[1],this.Dy=i[2],this.u3=!!i[3],this.l3=!!i[4],this.c3=i[5],this.f3=i[6],this.d3=i[7],this.m3=null,this.VK=i[8],this.GM=s,this.l$=0,this.c$=0,this.a$=1,this.u$=0,this.g3=new Set,this.y3=new Set,this.M3=new Set,this.w3=[],this.S3=[],this.T3=new Map,this.b3=new Map,this.x3=[],this.v3=!1,this.I3=Vp.create(),this.C3=Vp.create(),this.G3=Vp.create(),this._3=[],this.D3=[],this.E3=new Map,this.N3=new Map,this.A3=-1;const e=this.kc.bj();this._$=Wp.Qn(Wp.D$,this,i[11]),this.KP=Wp.Qn(Wp.OM.UO,e.E$(),{NO:(t,s)=>{const i=s.QP().FL();t.eL(),t.YL(i),t.VL(i),e.A$(i)},LO:t=>this.WB().L$(t)}),this.O$=!0,this.L3=!1,this.o$=null,this.O3={},this.R3=new Map,this.P3=!0,this.F3=new self.UB(this),this.j3=Wp.Qn(Wp.Event.yf);for(const t of i[9])this._3.push(Wp.UK.J$(this,null,t));this.z3();for(const t of this.hU())t.Y$();for(const t of i[10]){const s=this.kc.V$(t[1]);if(!s)throw new Error("missing nonworld object class");s.q$()||s.X$(t),this.x3.push(t),this.H$(s)}}Jn(){for(const t of this.D3)t.Jn();Wp.wh(this.D3),this.M3.clear(),this.m3=null,this.h3=null,this.kc=null}Rj(){return this.kc}_c(){return this.Hn}I0(){return this.VK}ik(){return this.GM}WB(){return this._$}sk(){return this._0(),this.KP}_0(){const t="low"===this.kc.bj().g2();if(!this.O$&&this.L3===t&&!this.KP.OR())return;const s=this.WB().E0();this.KP.RR(s.map((t=>t.EC())),{RO:s.map((t=>t.ik())),kO:t,BO:!0}),this.O$=!1,this.L3=t}OY(){this.WB().OY(),this.O$=!0}B3(){let t=this.D3[0].Y1();for(let s=1,i=this.D3.length;s<i;++s){const i=this.D3[s];0===i.ZU()&&0===i.tW()||(t=Math.min(t,i.Y1()))}return t}U3(){return.5*this.kc.H0()/this.B3()}W3(){return.5*this.kc.q0()/this.B3()}P0(){return this.Q3()?-1/0:this.U3()}k0(){return this.Q3()?1/0:this.Bg()-this.U3()}F0(){return this.Q3()?-1/0:this.W3()}j0(){return this.Q3()?1/0:this.Zg()-this.W3()}ZB(t){const s=this.P0(),i=this.k0();t>i&&(t=i),t<s&&(t=s),this.l$!==t&&(this.l$=t,this.J3(),this.kc.pj())}KB(){return this.l$}$B(t){const s=this.F0(),i=this.j0();t>i&&(t=i),t<s&&(t=s),this.c$!==t&&(this.c$=t,this.J3(),this.kc.pj())}tU(){return this.c$}Q3(){return this.u3}J2(){this.ZB(this.KB()),this.$B(this.tU());for(const t of this.D3)t.R0()&&(t.ZB(t.KB()),t.$B(t.tU()))}MU(t,s){this.c3===t&&this.f3===s||(this.c3=t,this.f3=s,this.Y3()&&(this.V3(),this.J3(),this.kc.pj()))}W0(){return this.xU()?.5:this.c3}Q0(){return this.xU()?.5:this.f3}I2(){const t=this.W0(),s=this.Q0();return t<0||t>1||s<0||s>1}TU(){this.l3&&(this.l3=!1,this.V3(),this.J3(),this.kc.pj())}bU(){this.l3||(this.l3=!0,this.V3(),this.J3(),this.kc.pj())}xU(){return this.l3}Y3(){return!this.xU()}H3(t){t=!!t,this.v3!==t&&(this.v3=t,this.J3(),this.kc.pj())}o1(){return this.v3}q3(t,s,i,e,n,r,h,o,a){Bp(this.I3,t,s,i)&&Bp(this.C3,e,n,r)&&Bp(this.G3,h,o,a)||(Vp.set(this.I3,t,s,i),Vp.set(this.C3,e,n,r),Vp.set(this.G3,h,o,a),this.X3())}X3(){this.J3(),this.kc.pj()}i1(){return this.I3}Z1(){return this.C3}K1(){return this.G3}HB(){return this.a$}VB(t){this.a$!==t&&(this.a$=t,this.J3(),this.J2(),this.kc.pj())}qB(t){t=Wp.Zn(t),this.u$!==t&&(this.u$=t,this.J3(),this.kc.pj())}XB(){return this.u$}Bg(){return this._y}Hg(t){!isFinite(t)||t<1||(this._y=t)}Zg(){return this.Dy}Ug(t){!isFinite(t)||t<1||(this.Dy=t)}Z3(){return this.m3}v0(){return this._3}*hU(){for(const t of this._3)yield*t.EU()}rU(){return this.D3}K3(){return this.D3.length}aj(t){return"number"==typeof t?this.lj(t):this.w0(t.toString())}lj(t){return t=Wp.Xn(Math.floor(t),0,this.D3.length-1),this.D3[t]}w0(t){return this.E3.get(t.toLowerCase())||null}t4(t){return!!this.w0(t)}s4(t){return this.N3.get(t)||null}V3(){for(const t of this.D3)t.t2()}J3(){for(const t of this.D3)t.O0()}lU(t,s,i){if(this.t4(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.IU(),n=Wp.Qn(Wp.UK,this,e,{name:t,AK:Math.floor(1e15*Math.random()),LK:!0});this.i4(n,s,i),this.Rj().pj(),this.b0()}fU(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.e4(t),this.i4(t,s,i),this.Rj().pj(),this.b0())}pU(t){if(this.e4(t)){const s=this.kc.Fk();s.PB(!0),t.Jn(),s.PB(!1),this.Rj().pj(),this.b0()}}gU(){const t=new Set;for(const s of this.hU())s.C0()&&!s.G0()&&t.add(s);if(0===t.size)return;const s=this.kc.Fk();s.PB(!0);for(const s of t)this.e4(s),s.Jn();s.PB(!1),this.Rj().pj(),this.b0()}i4(t,s,i){if(i>=2)if(s){if(s===t||s.w1(t))throw new Error(`cannot move layer '${t._c()}' to sub-layer of itself`);s.f1(t,2===i),t.l1(s)}else 2===i?this._3.push(t):this._3.unshift(t),t.l1(null);else{const e=s.IU();if(e){if(s.w1(t))throw new Error(`cannot move layer '${t._c()}' to sub-layer of itself`);e.d1(t,s,0===i),t.l1(e)}else{let e=this._3.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this._3.splice(e,0,t),t.l1(null)}}}e4(t){const s=t.IU();if(s)return s.m1(t),!0;if(this._3.length>1){const s=this._3.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this._3.splice(s,1),!0}return!1}z3(){this.D3=[...this.hU()],this.E3.clear(),this.N3.clear();for(let t=0,s=this.D3.length;t<s;++t){const s=this.D3[t];s.S0(t),this.E3.set(s._c().toLowerCase(),s),this.N3.set(s.I0(),s)}}n4(){let t=0;for(const s of this._3){for(const i of s.EU())i.T0(t);s.jU()&&t++}}r4(){return this._3.at(-1).vH()+1}async b0(){this.z3(),this.n4(),this.A3=this.r4()}h4(){return this.A3}o4(){this.A3=-1}_1(t){const s=[];for(const i of this._3){const e=i.vH();if(e===t)s.push(i);else if(e>t)break}return s}T1(){return{scrollX:this.KB(),scrollY:this.tU(),scale:this.HB(),angle:this.XB(),vpX:this.W0(),vpY:this.Q0()}}b1(t){this.ZB(t.scrollX),this.$B(t.scrollY),this.VB(t.scale),this.qB(t.angle),this.MU(t.vpX,t.vpY)}a4(){let t=this._3.filter((t=>t.M1()))[0];for(;t;){if(!t.hW())return Yp.Po(t.cW()),Yp.Ro(1),Yp;if(t.j1())return Yp._o(0,0,0,0),Yp;t=t._U().filter((t=>t.M1()))[0]}return Yp._o(0,0,0,0),Yp}t0(){return this.P3}u4(){return[...this.g3]}H$(t){if(t.FW())for(const s of t.c4().l4())this.g3.add(s);else this.g3.add(t)}f4(){return[...this.y3]}d4(t,s){if(t===this||!s)return Promise.resolve();t&&(Wp.po(this.y3,t.y3),t.y3.clear());const i=[];for(const t of this.g3)this.y3.has(t)||(i.push(t.m4(s)),this.y3.add(t));return Promise.all(i)}async g4(t){if(t.y0())throw new Error("cannot load textures for family");const s=this.kc.lb();if(!s||s.KE()||this.y3.has(t))return;this.y3.add(t);const i=t.m4(s);this.y4(i),await i,t.M4(),this.kc.pj()}y4(t){this.M3.add(t),t.then((()=>this.M3.delete(t))).catch((()=>this.M3.delete(t)))}w4(){return Promise.all([...this.M3])}S4(t){if(t.y0()||t.AB()>0)throw new Error("cannot unload textures");const s=this.kc.lb();s&&this.y3.has(t)&&(this.y3.delete(t),t.T4(s))}b4(t,s){if(t!==this&&s)for(const s of this.y3)s.e0()||t.g3.has(s)||(s.T4(),this.y3.delete(s))}x4(){this.y3.clear()}async v4(t){const s=this.kc,i=this.h3,e=s.Fk();this.d3&&(this.m3=e.I4(this.d3),this.m3.C4()),i.G4(this),this._y=this.o3,this.Dy=this.a3,this.l$=s.vk()/2,this.c$=s.Ck()/2,this.J2(),this.V3(),this.J3(),this.n4(),await this.kc.bj()._4(this.r4(),!0),this.D4(t),this.kc.E4(!0),this.N4(),this.P3||this.A4(),this.L4(this.w3),this.L4(this.S3),this.O4(),i.R4(),s.BB(),this.kc.E4(!1);const n=this.kc.P4();if(await Promise.all(n),Wp.wh(n),!s.F4()){for(const t of this.w3)t.j4();for(const t of this.S3)t.z4(this.T3,this.b3);for(const[t,s]of Object.entries(this.O3)){const i=this.kc.cq(parseInt(t,10));i&&!i.y0()&&i.s0()&&Wp.wh(s)}for(const t of this.w3)t.B4();for(const t of this.S3)t.B4();for(const t of this.w3)t.LJ()||t.U4();for(const t of this.S3)t.LJ()||t.U4()}Wp.wh(this.w3),Wp.wh(this.S3),this.T3.clear(),this.b3.clear(),await Promise.all([...this.g3].map((t=>t.W4(this.kc.lb())))),t&&(s.yf().dispatchEvent(new Wp.Event("beforefirstlayoutstart")),await s.Q4(new Wp.Event("beforeprojectstart"))),await this.J4(new Wp.Event("beforeanylayoutstart")),s.yf().dispatchEvent(new Wp.Event("beforelayoutstart")),await this.Q4(new Wp.Event("beforelayoutstart")),s.F4()||await s.vj(Wp._j.Gj.Cj.Y4,null,null),s.yf().dispatchEvent(new Wp.Event("afterlayoutstart")),await this.Q4(new Wp.Event("afterlayoutstart")),await this.J4(new Wp.Event("afteranylayoutstart")),t&&(s.yf().dispatchEvent(new Wp.Event("afterfirstlayoutstart")),await s.Q4(new Wp.Event("afterprojectstart"))),e.V4(i),await this.w4(),this.P3=!1}D4(t){for(const t of this.kc.g0())if(!t.y0()&&t.Vz())for(const s of t.DB()){const t=s.oj(),i=t.aj(),e=Wp.Xn(i.ik(),0,this.D3.length-1),n=this.D3[e];t.fj(n,!0),n.r0(s)}if(!t)for(const t of this.D3)t.c0(!1)}N4(){for(const t of this.D3)t.$$(this.w3),t.d0()}A4(){let t=!1;for(const[s,i]of Object.entries(this.O3)){const e=this.kc.cq(parseInt(s,10));if(e&&!e.y0()&&e.s0())for(const s of i){let i=null;if(e.Vz()&&(i=s.hasOwnProperty("instJson")?this.s4(s.instJson.w.l):this.s4(s.w.l),!i))continue;const n=this.kc.i0(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.nx(s.instJson):n.nx(s),t=!0,this.S3.push(n),s.hasOwnProperty("instJson")&&(this.T3.set(n,s),this.b3.set(s.index,n))}}for(const t of this.D3)t.c0(!0),t.dj();t&&(this.kc.BB(),this.kc.H4())}L4(t){for(const s of t){if(!s.FW())continue;const i=s.oj(),e=s.UW();for(const n of s.GW().c4().q4()){if(n===s.GW())continue;const r=n.DB();if(r.length>e)s.X4(r[e]);else{let e;e=i?this.kc.i0(n,i.aj(),!0,i.Wb(),i.Yb(),!0):this.kc.i0(n,null,!0,0,0,!0),this.kc.BB(),n.Z4(),s.X4(e),t.push(e)}}}}O4(){for(const t of this.x3)this.kc.V$(t[1]).FW()||this.kc.i0(t,null,!0)}K4(){const t=[],s=this.x3;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.kc.V$(n[1]);r.e0()?r.FW()&&r.c4().t5()||t.push(this.kc.i0(n,null,!0)):(s[i]=n,++i)}Wp.Mh(s,i),this.kc.BB(),this.L4(t)}m0(t,s,i,e,n,r,h){if(i)return i.m0(t,s,n,r,e,h);{const i=[];for(const o of this.D3)i.push(o.m0(t,s,n,r,e,h));return i.flat()}}async s5(){const t=this.h3;this.kc.F4()||(await this.J4(new Wp.Event("beforeanylayoutend")),await this.Q4(new Wp.Event("beforelayoutend")),await this.kc.vj(Wp._j.Gj.Cj.i5,null,null),await this.Q4(new Wp.Event("afterlayoutend")),await this.J4(new Wp.Event("afteranylayoutend"))),t.e5(!0),this.kc.Fk().n5(),this.P3||this.r5();for(const t of this.D3)t.p0();for(const t of this.kc.g0())if(!(t.e0()||t.Vz()||t.MB().Jz()||t.y0())){for(const s of t.DB())this.kc.LW(s);this.kc.BB()}t.e5(!1),t.jF()===this&&t.G4(null)}h5(t,s){const i=t.GW().I0().toString();this.O3.hasOwnProperty(i)||(this.O3[i]=[]);const e=this.O3[i],n={index:s,instJson:t.ix(),sceneGraphJson:{children:[]}};e.push(n),this.R3.set(t,n)}o5(t){const s=this.R3.get(t);for(const i of t.a5()){const t=this.R3.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Wp.l5.u5(i.oj())})}}r5(){this.R3.clear();let t=0;for(const s of this.D3){s.I1();for(const i of s.cj()){const s=i.GW();!s.e0()&&s.s0()&&(this.h5(i,t),t++)}}for(const t of this.D3)for(const s of t.cj()){const t=s.GW();!t.e0()&&t.s0()&&this.o5(s)}this.R3.clear()}c5(){this.O3={},this.P3=!0}FL(){return this.o$}j1(){const t=this.kc,s=t.lb().PT();return"low"===t.bj().g2()||s&&t.m2()||this._$.z1()||s&&t.n1()}f5(t){const s=this.kc.bj();if(this.j1()){t.QL(null),t.NL(0,0,0,0);const i={qx:this.kc.Gk(),Pv:t.tS()||this.kc.m2()||this._$.z1(),d2:!!t.tS()&&this.kc.m2()};"low"===s.g2()&&(i.width=s.e2(),i.height=s.n2()),this.o$=this.kc.M2(i)}else this.o$=null}d5(t){this.kc.p5(t)&&(t.OL(!1),t.QL(null),t.aS(),t.JL(this.o$))}m5(t){this.j1()&&(t.OL(!1),this.g5(t,this.o$))}y5(t){t.QL(this.o$),t._l(this.a4()),this.kc.n1()&&t.LL();const s=this._1(0);this.w2(t,this.o$,s,!0),t.tS()&&t.f2(0,1),this.m5(t),this.o$=null}M5(t,s){let i=null;this.kc.p5(t)&&(i=this.o$),t.QL(i),t.NL(0,0,0,0),this.kc.n1()&&t.LL();const e=this._1(s);this.w2(t,i,e,!0),this.d5(t),t.DT(),this.kc.bj().w5(s)}w2(t,s,i,e){const n=i.filter((t=>t.M1()));for(let i=0,r=n.length;i<r;){const h=n[i];if(h.a1()&&!h.B1()){Hp.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.a1()||s.B1())break;Hp.push(n[t])}if(Hp.length>=2||1===Hp.length&&Hp[0].g1()){this.S5(t,s,Hp),i+=Hp.length,Wp.wh(Hp);continue}Wp.wh(Hp)}h.Fx(t,s,e&&0===i),++i}}g5(t,s){const i=this._$.E0(),e=this.kc;0===i.length?(t.QL(null),t.aS(),t.JL(s),t.VL(s),e.A$(s)):(Jp.set(0,0,e.H0(),e.q0()),this.sk().JR(t,null,{VR:this,qR:3,devicePixelRatio:this.kc.B2(),XR:this.kc.W2()*this.HB(),ZR:this.XB(),bP:Jp,xP:null,OO:!0}))}S5(t,s,i){i[0].hW()||(Yp.Po(i[0].cW()),Yp.Ro(1),t._l(Yp)),this.kc.bj(),t.OL(!0);const e=qp,n=Xp,r=Zp;for(const t of i)t.I1(),t.s1(e);const h=i[0],o=h.a2(t);h.c2(t);for(let i=0,h=e.length;i<h;){const o=e[i],a=o.oj(),u=a.aj();if(!a.OU()||!a.D2(u._2())){++i;continue}(!o.E2()||a.N2()>0)&&r.push(o);const l=o.oj().ZQ();n.push(o);let c=i+1;for(;c<h;++c){const t=e[c],s=t.oj();if(s.OU()&&s.D2(s.aj()._2())){if(s.ZQ()!==l)break;t.E2()?(s.N2()>0&&r.push(t),n.push(t)):r.push(t)}}if(1!==n.length||n[0].A2()){this.T5(t,s,n);for(let i=0,e=r.length;i<e;++i){const e=r[i],n=e.oj(),h=n.aj();n.O2(!0),Up(h,t),h.G2(e,n,t,s),n.O2(!1)}}else{Up(u,t),u.G2(o,a,t,s);for(let i=0,e=r.length;i<e;++i){const e=r[i];if(e===o)continue;const n=e.oj(),h=n.aj();Up(h,t),h.G2(e,n,t,s)}}i=c,Wp.wh(n),Wp.wh(r)}o&&t.sO(o),Wp.wh(e),Kp=null}T5(t,s,i){t.qL();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.oj(),r=n.aj();n.R2(!0),Up(r,t),r.P2(e,n,t)}t.XL();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.oj(),h=r.aj();Up(h,t),h.G2(n,r,t,s),r.R2(!1)}t.KL()}t3(){const t={sx:this.KB(),sy:this.tU(),s:this.HB(),a:this.XB(),w:this.Bg(),h:this.Zg(),ortho:this.xU(),vpX:this.W0(),vpY:this.Q0(),fv:this.P3,persist:this.O3,fx:this._$.ix(),layers:{},dynamicLayers:[]};for(const s of this.D3)if(s.C0()){const i=s.IU();t.dynamicLayers.push({sid:s.I0(),name:s._c(),parentSid:i?i.I0():null,siblingIndex:s.x0(),data:s.t3()})}else t.layers[s.I0().toString()]=s.t3();return t}s3(t){this.l$=t.sx,this.c$=t.sy,this.a$=t.s,this.u$=t.a,this._y=t.w,this.Dy=t.h,this.l3=!!t.ortho,t.hasOwnProperty("vpX")&&(this.c3=t.vpX),t.hasOwnProperty("vpY")&&(this.f3=t.vpY),this.P3=!!t.fv,this.O3=t.persist,this._$.nx(t.fx),this.O$=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.s4(t);e&&e.s3(i)}if(t.hasOwnProperty("dynamicLayers")){this.gU(),this.kc.BB();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.z3(),this.t4(r)||this.s4(n))continue;let u,l;if(null===h)u=null,l=this._3;else{if(u=this.s4(h),!u)continue;l=u._U()}const c=Wp.Qn(Wp.UK,this,u,{name:r,AK:n,LK:!0});l.push(c);let f=s.get(l);f||(f=[],s.set(l,f)),f.push({kQ:c,b5:o}),c.s3(a)}for(const[t,i]of s){i.sort(((t,s)=>t.b5-s.b5));for(const s of i){const i=s.kQ,e=s.b5;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.b0(),this.V3(),this.J3()}zF(){return this.F3}Ok(){return this.j3}x5(t){t.layout=this.zF();const s=this.kc,i=s.yQ()&&!s.Fk().jB();i&&Qp.v5(),this.j3.dispatchEvent(t),i&&Qp.I5()}Q4(t){return t.layout=this.zF(),this.j3.If(t)}J4(t){return t.layout=this.zF(),this.kc.Q4(t)}C5(){this.G5(this._3)}G5(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t._c()}`),this.G5(t._U(),s+1)}}}{const $p=self.Cs;$p._5=class extends $p.Un{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Jn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,$p.wh(this.#i),this.#f.clear(),this.#a.clear(),$p.wh(this.#t)}EI(t){const s=$p.Qn($p.r3,this,this.#i.length,t);this.#i.push(s),this.#f.set(s._c().toLowerCase(),s),this.#a.set(s.I0(),s)}Rj(){return this.#s}D5(t){this.#r=t}E5(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}N5(t){return this.#f.get(t.toLowerCase())||null}A5(t){return this.#a.get(t)||null}L5(t){return t=$p.Xn(Math.floor(t),0,this.#i.length-1),this.#i[t]}WF(t){return"number"==typeof t?this.L5(t):this.N5(t.toString())}JF(){return this.#i}G4(t){this.#e=t}jF(){return this.#e}O5(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}R5(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*P5(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}k5(t){return this.#e===t||this.#t.includes(t)}e5(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}zB(){return this.#h>0}HF(t){this.#d=t}R4(){this.#d=null}VF(){return!!this.#d}F5(){return this.#d}j5(){const t=this.jF();t&&t.V3()}z5(){const t=this.jF();t&&t.J3()}}}{const tm=self.Cs,sm=new RegExp("<(.+?)>","g");tm.B5=class extends tm.Un{constructor(t){super(),this.kc=t,this.U5=tm.Qn(tm.W5),this.Q5=null,this.J5=[],this.Y5=new Map,this.V5=new Map,this.H5=new Map,this.q5=[],this.X5=[],this.Z5=[],this.K5=!1,this.t6=!1,this.s6=!1,this.i6=()=>this.e6(),this.n6=()=>this.r6(),this.h6=()=>this.o6(),this.a6=()=>this.u6(),this.l6=t=>this.c6(t.GY),this.f6=t=>this.d6(),this.p6=t=>this.m6(),this.g6=t=>this.y6(),this.M6=[],this.w6=0}Jn(){this.S6(),this.i6=null,this.n6=null,this.h6=null,this.a6=null,this.l6=null,this.p6=null;for(const t of this.J5)t.MV(),t.Jn();tm.wh(this.J5),this.J5=null,this.U5.Jn(),this.U5=null,tm.wh(this.q5),this.q5=null,tm.wh(this.X5),this.X5=null,tm.wh(this.Z5),this.Z5=null,this.Y5.clear(),this.Y5=null,this.V5.clear(),this.V5=null,this.H5.clear(),this.H5=null,tm.wh(this.M6),this.M6=null,this.kc=null}T6(){const t=this.kc.yf();t.addEventListener("pretick",this.i6),t.addEventListener("tick2",this.n6),t.addEventListener("beforelayoutchange",this.h6),t.addEventListener("layoutchange",this.a6),t.addEventListener("instancedestroy",this.l6),t.addEventListener("beforeload",this.f6),t.addEventListener("afterload",this.p6),t.addEventListener("afterlayoutstart",this.g6)}S6(){const t=this.kc.yf();t.removeEventListener("pretick",this.i6),t.removeEventListener("tick2",this.n6),t.removeEventListener("beforelayoutchange",this.h6),t.removeEventListener("layoutchange",this.a6),t.removeEventListener("instancedestroy",this.l6),t.removeEventListener("beforeload",this.f6),t.removeEventListener("afterload",this.p6),t.removeEventListener("afterlayoutstart",this.g6)}EI(t){this.U5.Fl(t);const s=tm.x6.b6(t,this);this.Fl(s),this.v6(s),this.H5.set(s._c(),0)}I6(t){const s=this.C6(),i=t.QW(),e=s.Js(i),n=tm.x6.I6(`${i}:${this.H5.get(i)}`,e,this);return this.G6(i),this.Fl(n),n}G6(t){this.H5.set(t,this.H5.get(t)+1)}_6(){for(const t of this.J5){if(t.D6())continue;const s=t.QW();this.G6(s)}}E6(){for(const t of this.H5.keys())this.H5.set(t,0)}Fl(t){this.J5.push(t),this.Y5.set(t._c().toLowerCase(),t)}Xf(t){t.N6(),t.D6()||(tm.Ch(this.J5,t),tm.Ch(this.q5,t),tm.Ch(this.X5,t),tm.Ch(this.Z5,t),this.Y5.delete(t._c().toLowerCase()),this.A6(t),t.gV()||t.Jn())}uQ(t){this.kc.uQ(t,this.Q5,null)}Rj(){return this.kc}C6(){return this.U5}L6(t){this.Q5=t}O6(){return this.Q5}*R6(){for(const t of this.J5)yield t}*P6(){for(const t of this.X5)yield t}k6(t,s){this.V5.has(t)||this.V5.set(t,new Set),this.V5.get(t).add(s)}v6(t){for(const s of t.F6())this.k6(s,t)}A6(t){for(const[s,i]of this.V5.entries())i.has(t)&&(i.delete(t),0===i.size&&this.V5.delete(s))}j6(t){if(this.V5.has(t))return this.V5.get(t)}z6(t,s){if(s)for(const i of this.J5)if(s.every((t=>i.B6(t.GY,t.trackId)))&&i._c().includes(t._c()))return i}U6(t){return this.Y5.get(t.toLowerCase())||null}W6(t){for(const s of this.q5)if(s._c()===t)return s;for(const s of this.X5)if(s._c()===t)return s;return null}*Q6(t){if(sm.test(t)){let s;sm.lastIndex=0;const i=new Set;do{if(s=sm.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.U6(t);s&&(yield s)}i.clear()}else{const s=this.U6(t);s&&(yield s)}}*J6(t){for(const s of this.J5)s.SV(t)&&(yield s)}Y6(t){this.q5.includes(t)||this.q5.push(t),this.V6()}H6(t){tm.Ch(this.X5,t),this.q6()}X6(t){this.X5.includes(t)?(t.Z6(!0),t.K6(!1),t.t8(!1)):(t.Z6(!1),t.K6(!0),t.t8(!1),this.q5.includes(t)||this.q5.push(t)),this.V6()}s8(t){t.Z6(!1),t.K6(!1),t.i8(),tm.Ch(this.q5,t),this.q6()}e8(t){t.Z6(!1),t.K6(!1),this.X5.includes(t)&&(t.t8(!0),this.Z5.push(t),tm.Ch(this.X5,t)),this.q5.includes(t)&&t.t8(!0)}n8(t){t.Z6(!1),t.K6(!1),t.t8(!1),t._V(1),tm.Ch(this.X5,t)}r8(t){this.e8(t),t.i8()}e6(){const t=this.Rj();if(t.F4())return;if(!this.K5)return;if(this.t6)return;let s=0;for(t.yQ()&&(s=performance.now()),this.s6=!0;this.q5.length;){const t=this.q5.pop();t.h8()?(t.o8(),this.Z5.push(t)):(t.a8(),this.X5.push(t)),0!==t.u8()&&(this.w6=1)}const i=this.kc.l8(),e=this.kc.c8(),n=this.kc.mF();for(let t=this.X5.length-1;t>=0;t--){const s=this.X5[t];s&&s.f8(i,n,e)}this.s6=!1,t.yQ()&&globalThis.MQ.d8(performance.now()-s),0!==this.w6&&t.pj()}r6(){const t=this.Rj();if(t.F4())return;if(!this.K5)return;if(this.t6)return;let s,i=0;t.yQ()&&(i=performance.now());for(let t=0,i=this.Z5.length;t<i;t++){const i=this.Z5[t];s||(s=new Set),i.N6(),this.p8(i),s.add(i)}if(s){tm.Dh(this.Z5,s),this.w6=0;for(let t=0,s=this.X5.length;t<s;t++)if(0!==this.X5[t].u8()){this.w6=1;break}}this.q6(),t.yQ()&&globalThis.MQ.d8(performance.now()-i)}p8(t){t.gV()||t.m8()&&t.g8()&&t.y8()&&t.M8()}V6(){this.K5||(this.K5=!0)}q6(){this.Z5.length||this.X5.length||this.q5.length||this.s6||(this.K5=!1)}o6(){for(this.t6=!0;this.q5.length;)this.s8(this.q5.pop());const t=new Set;for(const s of this.X5)s.o6()&&(s.N6(),t.add(s));tm.Dh(this.X5,t),t.clear();for(const s of this.Z5)s.o6()&&(s.N6(),t.add(s));tm.Dh(this.Z5,t),this.q6();for(const t of this.J5)t.w8()}u6(){this.t6=!1}c6(t){const s=t.GW(),i=this.j6(s);if(i)if(this.kc.F4())this.M6.push(t);else for(const t of i)t.D6()||(t.gV()?this.Xf(t):t.m8()||(this.p8(t),this.Xf(t)))}d6(){for(const t of this.q5.map((t=>t)))this.p8(t),this.Xf(t);for(const t of this.X5.map((t=>t)))this.p8(t),this.Xf(t)}m6(){for(const t of this.M6)this.c6(t);tm.wh(this.M6);for(const t of this.J5)t.m6()}y6(){const t=this.kc.UF().jF();if(t)for(const s of this.J5){const i=s.S8();i&&t._c()===i&&this.X6(s)}}t3(){return{timelinesJson:this.T8(),scheduledTimelinesJson:this.b8(),playingTimelinesJson:this.x8(),markedForRemovalTimelinesJson:this.v8(),hasRuntimeListeners:this.K5,changingLayout:this.t6,isTickingTimelines:this.s6}}s3(t){t&&(this.E6(),this.I8(t.timelinesJson),this.C8(t.scheduledTimelinesJson),this.G8(t.playingTimelinesJson),this._8(t.markedForRemovalTimelinesJson),this.K5=!t.hasRuntimeListeners,this.t6=!!t.changingLayout,this.s6=!!t.isTickingTimelines,this._6(),this.V6(),this.q6())}T8(){return this.J5.map((t=>t.t3()))}I8(t){for(const s of t){let t=this.U6(s.name);if(t)t.s3(s);else{const i=this.D8(s);if(!i)continue;const e=this.U6(i);t=this.I6(e),t.s3(s)}t.E8()||this.Xf(t)}}D8(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}b8(){return this.N8(this.q5)}C8(t){this.A8(t,this.q5)}x8(){return this.N8(this.X5)}G8(t){this.A8(t,this.X5)}v8(){return this.N8(this.Z5)}_8(t){this.A8(t,this.Z5)}L8(t,s){if(!s)return!1;for(const i of s)if(i===t._c())return!0;return!1}N8(t){return t.map((t=>t._c()))}A8(t,s){const i=new Set;for(const e of s)this.L8(e,t)||i.add(e);if(tm.Dh(s,i),t){const i=t=>s=>s._c()===t;for(const e of t){const t=this.U6(e);t&&(s.find(i(e))||s.push(t))}}}}}{const im=self.Cs,em=[0,0],nm=[0,0],rm=[0,0],hm=[0,0,0,0,0],om=new Array(4),am=[{x:0,y:0,t:0,St:0},{x:0,y:0,t:0,St:0},{x:0,y:0,t:0,St:0}],um={x:0,y:0,t:0,St:0};im.O8=class{constructor(t,s){this.P8=!1,this.k8=t,this.F8=[];let i=null;if(i=s?this.k8.j8(s):im.jh(this.k8.z8()),!i)return;const e=i.HV("offsetX"),n=i.HV("offsetY");if(!e||!n)return;this.B8=e,this.U8=n;const r=e.W8(),h=n.W8();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.Q8(),s.J8()),e=h[t],n=(e.Q8(),e.J8());i&&"cubic-bezier"===i.Y8()&&n&&"cubic-bezier"===n.Y8()?this.F8.push(im.Qn(im.V8,i,n,s,e,this.F8.length)):(i&&"line"===i.Y8()&&n&&n.Y8(),this.F8.push(im.Qn(im.H8,s,e,this.F8.length)))}this.P8=!0}Jn(){for(const t of this.F8)t.Jn();im.wh(this.F8),this.F8=null,this.k8=null,this.B8=null,this.U8=null}q8(){return this.P8}X8(){return this.F8}Z8(t){const s="relative"===this.B8.K8()?t.Wb():0,i="relative"===this.U8.K8()?t.Yb():0;for(const t of this.F8)t.Z8(s,i)}RM(t,s,i){let e=NaN,n=this.F8.length;for(let i=0;i<n;i++){const n=this.F8[i];if("cubic-bezier"===n.LC()){const i=n.RM(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],rm[0]=i[2],rm[1]=n.ik())}}return rm}t7(t,s,i){const e=i.s7;im.$i(e[0])||(e[0]=0),im.$i(e[1])||(e[1]=1);let n=NaN,r=this.F8.length;for(let i=0;i<r;i++){const r=this.F8[i];if("cubic-bezier"===r.LC()){const i=r.i7(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],rm[0]=i[2],rm[1]=r.ik())}}return rm}e7(t,s){return this.F8[s].e7(t)}n7(t,s){return this.F8[s].n7(t)}},im.V8=class{constructor(t,s,i,e,n){this.GM=n;const r=t.r7("cubic-bezier"),h=i.r7("cubic-bezier"),o=s.r7("cubic-bezier"),a=e.r7("cubic-bezier");this.h7=t.o7(),this.a7=s.o7(),this.u7=t.o7()+r.l7(),this.c7=s.o7()+o.l7(),this.f7=i.o7()+h.d7(),this.p7=e.o7()+a.d7(),this.m7=i.o7(),this.g7=e.o7(),this.y7=0,this.M7=0,this.w7=0,this.S7=0,this.T7=0,this.b7=0,this.x7=0,this.v7=0,this.I7=0,this.C7=0,this.G7=0,this._7=0,this.D7=0,this.E7=0,this.N7=0,this.A7=0,this.L7=0,this.O7=0,this.R7=0,this.P7=0,this.k7=NaN,this.P8=!1,this.F7=100,this.j7=new Array(this.F7+1),this.j7[0]=0,this.z7=0,this.B7=[],this.U7=[];for(let t=0;t<100;t++)this.U7.push({x:0,y:0,t:0,St:0});this.W7()}Jn(){im.wh(this.j7),this.j7=null,im.wh(this.B7),this.B7=null,im.wh(this.U7),this.U7=null}LC(){return"cubic-bezier"}ik(){return this.GM}Q7(){return Math.floor(this.z7/25)}J7(){return 1/this.Q7()}Z8(t,s){this.Y7=t,this.V7=s,this.j7=new Array(this.F7+1),this.j7[0]=0,this.W7(),this.y7=this.h7+this.Y7,this.M7=this.a7+this.V7,this.w7=this.u7+this.Y7,this.S7=this.c7+this.V7,this.T7=this.f7+this.Y7,this.b7=this.p7+this.V7,this.x7=this.m7+this.Y7,this.v7=this.g7+this.V7,this.I7=3*(this.w7-this.y7),this.C7=3*(this.S7-this.M7),this.G7=3*(this.T7-this.w7),this._7=3*(this.b7-this.S7),this.D7=3*(this.x7-this.T7),this.E7=3*(this.v7-this.b7),this.N7=3*(this.w7-this.y7),this.A7=3*(this.y7+this.T7-2*this.w7),this.L7=this.x7-this.y7+3*(this.w7-this.T7),this.O7=3*(this.S7-this.M7),this.R7=3*(this.M7+this.b7-2*this.S7),this.P7=this.v7-this.M7+3*(this.S7-this.b7)}Map(t){if(!this.P8)return NaN;const s=this.H7(t);return nm[0]=this.q7(s),nm[1]=this.X7(s),nm}RM(t,s){const i=this.Z7(100),e=this.K7(t,s,i),n=this.t9(t,s,i,e);return hm[0]=n.x,hm[1]=n.y,hm[2]=n.t,hm[3]=n.St,hm}i7(t,s,i){const e=this.Z7(100),n=this.s9(t,s,e,i),r=this.t9(t,s,e,n);return hm[0]=r.x,hm[1]=r.y,hm[2]=r.t,hm[3]=r.St,hm}e7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.I7+e*this.G7+n*this.D7,h=i*this.C7+e*this._7+n*this.E7,o=im.tr(r,h);return em[0]=r/o,em[1]=h/o,em}n7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.I7+e*this.G7+n*this.D7,h=i*this.C7+e*this._7+n*this.E7;return Math.atan2(h,r)}H7(t){if(!this.P8)return;let s=t*this.j7[this.F7],i=0,e=this.F7,n=0;for(;i<e;)n=i+((e-i)/2|0),this.j7[n]<s?i=n+1:e=n;this.j7[n]>s&&n--;const r=this.j7[n];return r===s?n/this.F7:(n+(s-r)/(this.j7[n+1]-r))/this.F7}q7(t){return this.P8?self.Bl.nc("cubicbezier")(t,this.h7+this.Y7,this.u7+this.Y7,this.f7+this.Y7,this.m7+this.Y7):NaN}X7(t){return this.P8?self.Bl.nc("cubicbezier")(t,this.a7+this.V7,this.c7+this.V7,this.p7+this.V7,this.g7+this.V7):NaN}Z7(t){if(t=t||100,this.B7.length>=t)return this.B7;this.B7=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.N7*i,h=this.A7*e,o=this.L7*n,a=this.O7*i,u=this.R7*e,l=this.P7*n,c=this.y7+r+h+o,f=this.M7+a+u+l;this.U7[s].x=c,this.U7[s].y=f,this.U7[s].t=i,this.U7[s].St=0,this.B7[s]=this.U7[s]}return this.B7}K7(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.k7))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.St=o*o+a*a,h.St<n&&(n=h.St,r=e)}else{for(let e=this.k7;e<this.k7+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.St=o*o+a*a,h.St<n&&(n=h.St,r=e)}for(let e=this.k7;e>this.k7-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.St=o*o+a*a,h.St<n&&(n=h.St,r=e)}}return this.k7=r,r}s9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.k7))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,u=o.y-s;o.St=a*a+u*u,o.t>=e[0]&&o.t<=e[1]&&o.St<n&&(n=o.St,r=h)}else{for(let h=this.k7;h<this.k7+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,u=o.y-s;o.St=a*a+u*u,o.t>=e[0]&&o.t<=e[1]&&o.St<n&&(n=o.St,r=h)}for(let h=this.k7;h>this.k7-5&&!(h<0);h--){const o=i[h],a=o.x-t,u=o.y-s;o.St=a*a+u*u,o.t>=e[0]&&o.t<=e[1]&&o.St<n&&(n=o.St,r=h)}}return this.k7=r,r}t9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,u=i[o].t,l=(i[a].t-u)/4;if(l<.001)break;om[0]=i[o];for(let i=1;i<=2;i++){const r=u+i*l,o=r**2,a=r**3,c=this.N7*r,f=this.A7*o,d=this.L7*a,p=this.O7*r,m=this.R7*o,g=this.P7*a,y=this.y7+c+f+d,M=this.M7+p+m+g,w=y-t,S=M-s,T=w*w+S*S;if(T<h){h=T,e=i,um.x=y,um.y=M,um.t=r,um.St=T,n=um;break t}const b=am[i-1];b.x=y,b.y=M,b.t=r,b.St=T,om[i]=b}om[3]=i[a],i=om}while(r++<20);return n}W7(){this.P8=!0;let t=this.q7(0),s=this.X7(0),i=0;for(let e=1;e<=this.F7;e++){const n=this.q7(.01*e),r=this.X7(.01*e),h=t-n,o=s-r;i+=im.tr(h,o),this.j7[e]=i,t=n,s=r}this.z7=i}},im.H8=class{constructor(t,s,i){this.GM=i,this.i9=t.o7(),this.e9=s.o7(),this.Y7=0,this.V7=0}Jn(){}LC(){return"line"}ik(){return this.GM}Z8(t,s){this.Y7=t,this.V7=s}Wb(){return this.i9+this.Y7}Yb(){return this.e9+this.V7}}}{const lm=self.Cs;lm.x6=class extends lm.Un{constructor(t,s,i){super(),this.kc=i.Rj(),this.n9=i,this.r9=s,this.Hn=t,this.h9=[],this.o9=0,this.a9=null,this.u9=0,this.l9(),this.c9=null,this.f9=null,this.d9=0,this.p9=0,this.m9=1,this.g9=0,this.y9=-1,this.M9=1,this.w9=!1,this.S9=!1,this.T9=!1,this.b9=!0,this.x9=!1,this.v9=!1,this.I9=-1,this.C9=!1,this.G9=!1,this._9=!1,this.D9=!1,this.E9=NaN,this.N9=[""],this.A9="",this.L9=!1,this.w6=0,this.O9=0,this.R9=null,this.P9=null}static b6(t,s){const i=s.C6(),e=i.k9(),n=i.Js(t[e]),r=lm.Qn(lm.x6,t[e],n,s);return r.F9(!0),r}static I6(t,s,i){return lm.Qn(lm.x6,t,s,i)}Jn(){if(this.gV())return;const t=this.kc.yf();this.n9.s8(this),this.n9.r8(this);for(const t of this.h9)t.Jn();lm.wh(this.h9),this.h9=null,this.kc=null,this.n9=null,this.r9=null,this.x9=!0,this.c9=null,this.f9=null,this.j9(t)}j9(t){const s=lm.Qn(lm.Event,"timelinestatereleased");s.z9=this,t.dispatchEvent(s)}LC(){return 0}l9(){for(const t of this.r9.U9().B9())this.o9=this.h9.push(lm.W9.EI(this,t))}Q9(){return this.n9}Rj(){return this.kc}z8(){return this.h9}J9(t,s,i,e){if(!this.O9)return;let n;for(let r=0;r<this.h9.length;r++){let h=this.h9[r];if(t!==h.UV())continue;const o=h.HV(i);o&&s.constructor===o.Y9().constructor&&o.K8()===e.K8()&&(n||(n=[]),n.push(o))}return n}E8(){return!!this.h9.length}j8(t){for(const s of this.h9)if(lm.Ze(s.YV(),t))return s;return null}V9(t){for(const s of this.h9)if(!s.H9()&&lm.Ze(s._c(),t))return s;return null}yq(t){this.Hn=t}_c(){return this.Hn}q9(){return this.r9}QW(){return this.r9._c()}xV(){return this.r9.xV()}bV(t){this.r9.bV(t)}X9(){return this.r9.X9()}Z9(t){this.r9.Z9(t)}K9(){return this.r9.K9()}ttt(t){this.r9.ttt(t)}K8(){return this.r9.K8()}stt(t){this.r9.K8(t)}BV(t){for(const s of this.z8())s.BV(t)}IV(){return this.r9.IV()}vV(t){return this.r9.vV(t)}GV(){return this.r9.GV()}CV(t){return this.r9.CV(t)}UY(){return this.r9.UY()}itt(t){return this.r9.itt(t)}_V(t){return this.m9=t}DV(){return this.m9}S8(){return this.r9.S8()}ett(){return this.r9.ett()}ntt(){return this.r9.ntt()}htt(){return this.g9}ott(){return!this.IsPlaying()||this.m9>0}NV(){return this.c9||(this.c9=new Promise((t=>{this.f9=t}))),this.c9}i8(){this.c9&&(this.f9(),this.c9=null,this.f9=null)}att(t){this.N9=lm.x6.utt(t),this.L9=!0}EV(){return this.N9}ltt(){return this.L9&&(this.A9=this.N9.join(" ")),this.L9=!1,this.A9}SV(t){if(!this.N9)return!1;if(!this.N9.length)return!1;const s=lm.x6.utt(t);return!!s&&!!s.length&&s.every(lm.x6.ctt,this)}ftt(){lm._j.dtt&&this.constructor===lm.x6&&(lm._j.dtt.Cj.ptt(this),this.n9.uQ(lm._j.dtt.Cj.mtt),this.n9.uQ(lm._j.dtt.Cj.gtt),this.n9.uQ(lm._j.dtt.Cj.ytt),this.n9.uQ(lm._j.dtt.Cj.Mtt),lm._j.dtt.Cj.wtt())}Stt(){this.I9=this.kc.Ttt()}M8(){this._9||(this._9=!0,lm._j.dtt&&this.constructor===lm.x6&&(lm._j.dtt.Cj.ptt(this),this.n9.uQ(lm._j.dtt.Cj.btt),this.n9.uQ(lm._j.dtt.Cj.xtt),this.n9.uQ(lm._j.dtt.Cj.vtt),this.n9.uQ(lm._j.dtt.Cj.Itt),lm._j.dtt.Cj.wtt()))}Z6(t){this.w9=t}Ctt(){return this.I9===this.kc.Ttt()}IsPlaying(t=!1){return!!this.Ctt()||!(!this.Gtt()||t)||this.w9}_tt(){return this.IsPlaying(!0)}OV(){return this.Dtt()}Dtt(){return!(this.gV()||this.Gtt()||this._tt()||this.g8())}K6(t){this.S9=t}Gtt(){return this.S9}Ett(t){this.b9=t;const s=this.IV(),i=this.GV();if(s||i){if(s&&!i);else if(!s&&i){const t=this.DO();1===this.g9&&(t<=0||t>=this.xV())&&(this.b9=!0)}}else{const t=this.DO();(t<=0||t>=this.xV())&&(this.b9=!0)}}g8(){return this.b9}gV(){return this.x9}t8(t){this.v9=t}h8(){return this.v9}Ntt(t){this.C9=t}Att(){return this.C9}F9(t){this.G9=!!t}D6(){return this.G9}y8(){return this.T9}DO(){return this.d9}TV(t){const s=this.DO();this.Ltt(t),this.Ett(!1),this.g8()||this.Ntt(!0),(this._tt()||this.Gtt()||!this.T9)&&(this._tt()||this.Gtt()||this.T9?this._tt()?this.MV():this.Gtt()&&(this.n9.s8(this),this.Ott()):this.Ott()),this.Rtt(),this.Ptt(this.DO(),!1,!0,!0,s),this.ktt(),this.w6&&this.Rj().pj(),this.Ftt()}Ltt(t){lm.$i(t)||(t=this.xV()),t<0?this.d9=0:t>=this.xV()?this.d9=this.xV():this.d9=t}jtt(t){lm.$i(t)||(t=this.xV()),t<0?this.d9=0:t>=this.xV()?this.d9=this.xV():this.d9=t;for(const t of this.h9)t.ztt()}Ftt(){lm._j.dtt&&this.constructor===lm.x6&&(lm._j.dtt.Cj.ptt(this),this.n9.uQ(lm._j.dtt.Cj.Btt),this.n9.uQ(lm._j.dtt.Cj.Utt),this.n9.uQ(lm._j.dtt.Cj.Wtt),lm._j.dtt.Cj.wtt())}Qtt(){if(this.IV())return!0;if(this.GV()&&1===this.g9){if(this.ott()){if(this.DO()>=this.xV())return!1}else if(this.DO()<=0)return!1}else if(!this.IV()&&!this.GV())if(this.ott()){if(this.DO()>=this.xV())return!1}else if(this.DO()<=0)return!1;return!0}wV(){this.gV()||this.Qtt()&&this.Play(!0)}Play(t=!1){return!this.gV()&&!this.Gtt()&&(this._tt()&&this.Ctt()?this.Jtt():!this._tt()&&!!(this.g8()||t||this.Att())&&this.Ytt())}Jtt(){return this.Ntt(!1),this.n9.H6(this),this.n9.X6(this),this.NV(),!0}Ytt(){return this.Ntt(!1),this.n9.X6(this),this.NV(),!0}MV(t=!1){this.gV()||(this.Ett(t),this.n9.e8(this),this.g8()&&this.i8())}Ff(t=!0,s=!1){if(this.gV())return;if(!this._tt()&&this.Gtt())return this.n9.s8(this);if(this.g8())return;this.MV(!0),this.ott()?this.Ltt(0):this.Ltt(this.xV());const i=this.DO();this.Rtt(),s?this.Vtt(i):this.Ptt(i,!1,!1,!0),t&&this.Ftt(),this.ktt(),this.w6&&t&&this.Rj().pj()}Htt(){this.Ff(!1,!0)}Vtt(t){this.Ptt(t,!1,!1,!0,NaN,!1,!0)}o6(){return!!this.gV()||!(!this.Rj().F4()&&this.qtt())&&(this.n9.n8(this),this.Rj().F4()||this.Htt(),!0)}Ott(){this.a8(!0)}o8(){this.a8(!1,!0),this.Z6(!1),this.K6(!1)}a8(t=!1,s=!1){if(!this.h8()||s)if(t){this._9=!1,this.T9=!0,this.D9=!0,this.Rtt();for(const t of this.h9)t.a8();this.ktt()}else if(this.Z6(!0),this.K6(!1),this.ftt(),this.g8()){this.I9=-1,0!==this.g9&&(this.m9=Math.abs(this.m9)),this.g9=0,this.y9=-1,this.M9=1,this.b9=!1,this._9=!1,this.T9=!0,this.D9=!0,this.ott()?this.Ltt(0):this.Ltt(this.xV()),this.Rtt();for(const t of this.h9)t.a8();this.ktt()}else{-1!==this.y9&&(this.g9=this.y9),this.D9=!0,this._9=!1,this.Rtt();for(const t of this.h9)t.Xtt();this.ktt()}}u8(){return this.w6}Rtt(){this.O9=0;for(const t of this.h9)t.SN()&&(this.O9=1)}ktt(){this.w6=0;for(const t of this.h9)t.Ztt(),0===this.w6&&1===t.u8()&&(this.w6=1),this.a9||1!==t.Ktt()||(this.a9||(this.a9=[]),this.u9=this.a9.push(t))}f8(t,s,i){if(this.ntt()){if(0===t&&0===this.E9)return;this.E9=t,t=i}else{if(0===i&&0===this.E9)return;this.E9=i,t=i,s=1}const e=this.d9+this.p9,n=e+t*s*this.m9,r=this.r9.$tt;n<0?(this.d9=0,this.p9=-n):n>=r?(this.d9=r,this.p9=this.d9-n):(this.d9=n,this.p9=0);let h=!1,o=!1;const a=this.IV(),u=this.GV();let l;a||u?a&&!u?this.m9>0?this.d9>=r&&(this.jtt(0),o=!0):this.d9<=0&&(this.jtt(r),o=!0):!a&&u?this.m9>0?this.d9>=r&&(this.Ltt(r),this._V(-1*this.DV()),o=!0,1===this.g9?this.M9<this.UY()?(this.M9++,this.g9=0):h=!0:0===this.g9&&(this.g9=1)):this.d9<=0&&(this.Ltt(0),this._V(-1*this.DV()),o=!0,1===this.g9?this.M9<this.UY()?(this.M9++,this.g9=0):h=!0:0===this.g9&&(this.g9=1)):a&&u&&(this.m9>0?this.d9>=r&&(this.Ltt(r),this._V(-1*this.DV()),o=!0,this.g9++,lm.wrap(this.g9,0,2)):this.d9<=0&&(this.Ltt(0),this._V(-1*this.DV()),o=!0,this.g9++,lm.wrap(this.g9,0,2))):this.m9>0?this.d9>=r&&(this.M9<this.UY()?(this.M9++,this.jtt(0),o=!0):(this.Ltt(r),h=!0)):this.d9<=0&&(this.M9<this.UY()?(this.M9++,this.jtt(r),o=!0):(this.Ltt(0),h=!0));const c=this.o9;if(h){for(l=0;l<c;l++)this.h9[l].tst();return this.MV(!0),void this.Stt()}const f=this.u9;for(l=0;l<f;l++)this.a9[l].sst();if(1===this.O9)for(l=0;l<c;l++){const t=this.h9[l],s=t.ist();this.d9-s<0&&e-s>0?(this.d9=s<0?0:s>=r?r:s,t.Mc(s,!0,!1,o,this.D9,!1)):t.Mc(this.d9,!0,!1,o,this.D9,!1)}else for(l=0;l<c;l++)this.h9[l].Mc(this.d9,!0,!1,o,this.D9,!1);if(!this.IsPlaying()&&this.R9){const t=this.R9.DO()+this.R9.nst().est().ist(),s=this.d9-t;this.d9-=s,0!==this.p9&&(this.p9-=s),this.R9=null}for(l=0;l<f;l++)this.a9[l].rst();this.D9&&(this.D9=!1)}hst(t){this.R9=t}ost(){return this.R9}Ptt(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.h9)t.sst();for(const r of this.h9){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.DO()-r.ist(),s=n-r.ist();t<0&&s>0&&(o=r.ist(),this.Ltt(o))}r.Mc(o,s,i,e,this.D9,h)}for(const t of this.h9)t.rst();this.D9&&r&&(this.D9=!1)}ast(){const t=this.r9.U9().ust(),s=lm.W9.EI(this,t);return this.o9=this.h9.push(s),s}N6(){if(!this.gV())for(const t of this.h9)t.lst()}w8(){for(const t of this.h9)t.w8()}cst(){for(const t of this.h9)t.fst()}dst(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.h9[i];if(!t)return;return t.pst(s),void this.n9.k6(s.GW(),this)}for(const i of this.h9)if(i.H9()){if(t){if(i.YV()!==t)continue;i.pst(s),this.n9.k6(s.GW(),this);break}if(!i.mst()){i.pst(s),this.n9.k6(s.GW(),this);break}}}}B6(t,s){for(const i of this.h9)if(i.H9())if(s){if(s===i.YV()&&t===i.UV())return!0}else if(t===i.UV())return!0;return!1}m8(){return this.h9.some((t=>!t.H9()||t.gst()))}qtt(){return this.h9.some((t=>{if(t.H9()){if(!t.gst())return!1;const s=t.GW();return!!s&&s.e0()}return!1}))}HV(t){for(const s of this.z8())for(const i of s.yst())if(i.Mst()===t)return i}wst(t){for(const s of this.h9)if(t===s.UV())return s;return null}Sst(t){let s=t?t.split(" "):[];const i=new Set(s.map((t=>t.toLowerCase().trim())));s=[...i.values()];for(const t of this.z8())for(const i of t.Tst())if(s.every((t=>i.bst(t))))return i}F6(){const t=[];for(const s of this.z8())t.push(s.GW());return t.filter((t=>t))}m6(){for(const t of this.z8())t.m6()}t3(){return{tracksJson:this.xst(),name:this.Hn,playheadTime:this.DO(),playbackRate:this.m9,pingPongState:this.g9,resumePingPongState:this.y9,currentRepeatCount:this.M9,isPlaying:this.w9,isScheduled:this.S9,initialStateSet:this.T9,finishedTriggers:this._9,complete:this.b9,released:this.x9,markedForRemoval:this.v9,completedTick:this.I9,implicitPause:this.C9,isTemplate:this.G9,tags:this.N9.join(" "),stringTags:this.A9,tagsChanged:this.L9,firstTick:this.D9}}s3(t){t&&(this.vst(t.tracksJson),this.Hn=t.name,this.d9=t.playheadTime,this.m9=t.playbackRate,this.g9=t.pingPongState,this.y9=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.M9=t.currentRepeatCount,this.w9=!!t.isPlaying,this.S9=!!t.isScheduled,this.T9=!!t.initialStateSet,this._9=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.b9=!!t.complete,this.x9=!!t.released,this.v9=!!t.markedForRemoval,this.I9=t.completedTick,this.C9=!!t.implicitPause,this.G9=!!t.isTemplate,this.N9=t.tags.split(" "),this.A9=t.stringTags,this.L9=!!t.tagsChanged,this.D9=!!t.firstTick)}xst(){return this.h9.map((t=>t.t3()))}vst(t){this.cst(),t.forEach(((t,s)=>{this.h9[s].s3(t)})),this.h9.filter((t=>t.gst()))}static ctt(t){const s=this.EV();return""===t?1===s.length&&""===s[0]:s.map((t=>t.toLowerCase())).includes(t.toLowerCase())}static utt(t){if(lm.xe(t))return t.slice(0);if(lm.ae(t))return t.split(" ");throw new Error("invalid tags")}Ist(){return this.P9||(this.P9=lm.Qn(self.PV,this)),this.P9}}}{const cm=self.Cs;cm.W9=class extends cm.Un{constructor(t,s){super(),this.k8=t,this.Cst=s,this.Gst=s.U9(),this._st=NaN,this.Dst=NaN,this.Est=null,this.Nst=null,this.Ast=!1,this.pN=s.ist()>0,this.Lst=!1,this.Ost=!1,this.Rst=NaN,this.Pst=null,this.kst=this.Cst.nst().Fst(),this.jst=[],this.zst(),this.Bst=0,this.w6=0,this.Ust=0}static EI(t,s){return cm.Qn(cm.W9,t,s)}Jn(){this.kst=null;for(const t of this.jst)t.Jn();cm.wh(this.jst),this.jst=null,this.k8=null,this.Est=null,this.Nst=null,this.Cst=null,this.Pst=null}zst(){for(const t of this.Cst.Qst().Wst())this.jst.push(cm.Jst.EI(this,t))}lst(){for(const t of this.jst)t.lst()}w8(){for(const t of this.jst)t.w8();this.Est=null,this.Nst=null}Yst(){return this.k8}Rj(){return this.k8.Rj()}Tst(){return this.kst||(this.kst=this.Cst.nst().Fst()),this.kst}yst(){return this.jst}HV(t){for(let s=0;s<this.jst.length;s++){const i=this.jst[s];if(i.Mst()===t)return i}}Vst(){this.Est||this.UV()}Hst(){return!!this.Est&&!this.Est.NH()}gst(){if(!this.H9())return!1;const t=this.qst(),s=this.Rj().ij(t);return!!s&&!s.NH()}GW(){if(!this.H9())return;const t=this.Xst();return-1!==t?this.Rj().V$(t):void 0}Zst(){return this.k8.z8().indexOf(this)}fst(){this.Est=null,this._st=NaN,this.Nst=null,this.Dst=NaN,this.Ast=!0}mst(){return!!this.Est}UV(){if(this.Ast)return;if(this.Est&&this.Hst())return this.Est;const t=this.qst();return this.Est=this.Rj().ij(t),this.Est}pst(t){if(this.Ast=!1,this.Est!==t){this.w8(),this.Est=t,this.Dst=t.GW().ik(),this._st=t.zW(),this.Nst=t.oj();for(const s of this.Kst()){const i=s.$st,e=s.tit;switch(i.sit()){case"instance-variable":{e.iit();const i=t.GW(),n=i.eit(s.name),r=i.nit(n),h=i.rit(n);r===s.name&&h===s.type&&e.hit(n);break}case"behavior":{const i=s.vY,n=this.GW(),r=t.GW(),h=e.CY(r);if(i&&h){const t=i._c();n.oit(t),r.oit(t),e.iit(),e.ait(h.I0())}break}}}}}*Kst(){for(const t of this.jst){const s=t.Y9(),i=this.GW(),e={$st:t,tit:s};switch(t.sit()){case"world-instance":e.uit=t.Mst();break;case"instance-variable":{const t=s.iit();e.name=i.nit(t),e.type=i.rit(t);break}case"effect":{const t=i.WB(),n=s.lit(t);e.cit=n;break}case"behavior":{const t=s.CY(i);e.vY=t;break}case"plugin":e.yB=i.MB()}yield e}}oj(){if(this.Nst&&this.Hst())return this.Nst;const t=this.UV();return t&&(this.Nst=t.oj()),this.Nst}est(){return this.Cst}qst(){return isNaN(this._st)?this.Cst.qst():this._st}fit(t){this.Cst.fit(t)}K9(){return this.Cst.K9()}ttt(t){this.Cst.ttt(t)}K8(){return this.Cst.K8()}YV(){return this.Cst.YV()}ist(){return this.Cst.ist()}dit(){return this.Cst.dit()}pit(t){this.Cst.pit(t)}stt(t){this.Cst.stt(t)}BV(t){for(const s of this.Tst())s.BV(t);for(const s of this.yst())s.BV(t)}mit(){return this.Cst.mit()}git(t){this.Cst.git(t)}Xst(){return isNaN(this.Dst)?this.Cst.Xst():this.Dst}yit(t){this.Cst.yit(t)}Mit(t){this.Cst.Mit(t)}wit(){const t=this.UV();return t&&t.gY().Sit()?t.gY().wit():this.Cst.wit()}Tit(t){this.Cst.Tit(t)}bit(){const t=this.UV();return t&&t.gY().Sit()?t.gY().bit():this.Cst.bit()}LC(){return this.Cst.LC()}_c(){return this.Cst._c()}H9(){return 0===this.LC()}xit(){return 1===this.LC()}vit(){return 2===this.LC()}Iit(){return this.Bst}u8(){return this.w6}Ktt(){return this.Ust}SN(){return this.pN}ztt(){for(const t of this.jst)t.ztt()}a8(){if(this.Vst(),!this.Hst()&&this.H9())return;const t=this.Yst().ott(),s=t?0:this.dit();for(const t of this.jst)t.a8(s),0===this.Bst&&1===t.Iit()&&(this.Bst=1),0===this.w6&&1===t.u8()&&(this.w6=1);this.Ust=0,this.jst.some((t=>t.Ktt()))&&(this.Ust=1),this.Pst=t?this.Cit(s):this.Git(s),this.Lst=!1,this.Ost=!1,this.Mc(s),this._it(this.Pst)}Xtt(){if(this.Vst(),!this.Hst()&&this.H9())return;const t=this.k8.ott(),s=this.k8.DO()-this.ist();this.Pst=t?this.Cit(s):this.Git(s);for(const t of this.jst)t.Xtt(s)}tst(){if(!this.Yst().g8()&&(this.Vst(),(this.Hst()||!this.H9())&&!this.pN)){const t=this.k8.DO();t>=this.ist()+this.dit()?this.Mc(this.dit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Mc(0,!0,!1,!0,!1,!1,!0)}}Ztt(){for(let t=0,s=this.jst.length;t<s;t++){const s=this.jst[t];s.Ztt(),0===this.Bst&&1===s.Iit()&&(this.Bst=1),0===this.w6&&1===s.u8()&&(this.w6=1)}}sst(){const t=this.jst.length;for(let s=0;s<t;s++)this.jst[s].sst()}Mc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Est||this.UV();const o=this.Est&&!this.Est.NH(),a=0===this.Cst.Jc;if((o||!a)&&!(r&&a&&this.GW().e0()||(t-=this.ist())<0)){this.Dit(t,s),this.Eit(t,s,n),!this.Yst().IsPlaying()&&this.Yst().ost()&&(t=this.Yst().ost().DO());for(let s=0,n=this.jst.length;s<n;s++)this.jst[s].Mc(t,i,e,h);this.Nit(t,s),0!==this.Bst&&(this.Nst||(this.Nst=this.Est.oj()),this.Nst&&this.Nst.FQ())}}rst(){const t=this.jst.length;for(let s=0;s<t;s++)this.jst[s].rst()}Dit(t,s){if(s&&this.pN&&!this.Lst){if(this.Yst().ott()){if(t<0)return}else if(t>this.dit())return;for(const t of this.jst)t.a8();this.Lst=!0}}Nit(t,s){if(s&&this.pN&&!this.Ost)if(this.Yst().ott()){if(t>=this.dit()){for(const t of this.jst)t.Mc(this.dit(),!1,!0);this.Ost=!0}}else if(t<=0){for(const t of this.jst)t.Mc(0,!1,!0);this.Ost=!0}}Eit(t,s,i){if(i)return;if(!s)return;if(!cm._j.dtt)return;const e=this.Yst();if(e.ott()){const s=this.Pst.Q8(),i=this.Pst.DO(),n=s?s.DO():e.xV();(t<=i||t>=n)&&(this.Pst=this.Gst.Ait(t,this.Cst),s&&this._it(this.Pst))}else{if(!this.Gst.Lit(t,this.Cst))return;this.Pst||(this.Pst=this.Gst.Lit(t,this.Cst));const s=this.Pst.Oit(),i=this.Pst.DO(),e=s?s.DO():0;(t>=i||t<=e)&&(this.Pst=this.Gst.Lit(t,this.Cst),this.Pst&&this._it(this.Pst))}}Cit(t){return this.Gst.Rit(t,this.Cst)||this.Gst.Ait(t,this.Cst)}Git(t){return this.Gst.Rit(t,this.Cst)||this.Gst.Lit(t,this.Cst)}_it(t){if(!cm._j.dtt)return;const s=this.Yst(),i=s.Q9();cm._j.dtt.Cj.ptt(s),cm._j.dtt.Cj.Pit(t),i.uQ(cm._j.dtt.Cj.kit),i.uQ(cm._j.dtt.Cj._it),s.IsPlaying()||s.hst(t),cm._j.dtt.Cj.wtt(s),cm._j.dtt.Cj.Fit(t)}jit(){return this.Cst.nst().zit()}Bit(){const t=this.Cst.Qst().Uit(),s=cm.Jst.EI(this,t);return this.jst.push(s),s}Wit(t){this.Cst.nst().Qit(t)}Jit(t){for(const s of this.jst)s.Jit(t)}Yit(){for(const t of this.jst)t.Yit()}Vit(){if(this.Vst(),this.Hst()||!this.H9())for(const t of this.jst)t.Vit()}Hit(){if(this.Vst(),!this.Hst()&&this.H9())return;let t=!1;for(const s of this.jst){const i=s.Hit();!t&&i&&(t=!0)}if(t){const t=this.jit();t.TV(this.Yst().DO()),t.BV("noease"),t.git(!0),t.att("")}}m6(){isNaN(this.Rst)||this.qit(this.Rst),this.Rst=NaN}t3(){const t=this.UV(),s=t?t.zW():this.qst();return{propertyTracksJson:this.Xit(),lastKeyframeDataItemJson:this.Zit(),initialStateOfNestedSet:this.Lst,endStateOfNestedSet:this.Ost,instanceUid:s,cleared:this.Ast}}s3(t){if(t){this.Kit(t.propertyTracksJson),this.$it(t.lastKeyframeDataItemJson),this.Rst=t.instanceUid,this.Lst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Lst=t.initialStateOfNestedSet),this.Ost=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Ost=t.endStateOfNestedSet),this.Ast=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.jst)0===this.Bst&&1===t.Iit()&&(this.Bst=1),0===this.w6&&1===t.u8()&&(this.w6=1);this.Ust=0,this.jst.some((t=>t.Ktt()))&&(this.Ust=1)}}Zit(){return this.Cst.nst().tet(this.Pst)}Xit(){return this.jst.map((t=>t.t3()))}Kit(t){t.forEach(((t,s)=>{this.jst[s].s3(t)}))}qit(t){if(!cm.$i(t))return;const s=this.Rj().ij(t);s&&this.Yst().dst(this.Cst.YV(),s,this.Zst())}$it(t){const s=this.Cst.nst();this.Pst=s.iet(t)}}}{const fm=self.Cs;fm.Jst=class extends fm.Un{constructor(t,s){super(),this.eet=t,this.net=s,this.ret=s.Qst(),this.Bst=0,this.w6=0,this.Ust=0,this.het=this.Y9(),this.oet=this.net.uet().aet(),this.let=null,this.cet=null}static EI(t,s){return fm.Qn(fm.Jst,t,s)}Jn(){this.eet=null,this.het&&(this.het.Jn(),this.het=null),this.oet=null,this.net=null,this.ret=null}Iit(){return this.Bst}u8(){return this.w6}Ktt(){return this.Ust}fet(){return!!this.cet}det(t){this.cet=t}pet(){return this.cet}met(){return this.eet}yet(){return this.net}Qst(){return this.ret}Yst(){return this.eet.Yst()}Rj(){return this.eet.Rj()}UV(){return this.eet.UV()}Y9(){if(this.het)return this.het;let t;switch(this.net.sit()){case"behavior":t=new fm.Jst.Met(this);break;case"effect":t=new fm.Jst.wet(this),this.w6=1;break;case"instance-variable":t=new fm.Jst.Tet(this);break;case"plugin":t=new fm.Jst.bet(this),this.w6=1;break;case"world-instance":t=new fm.Jst.xet(this),this.w6=1,this.Bst=1;break;case"value":t=new fm.Jst.vet(this);break;case"audio":t=new fm.Jst.Iet(this)}return this.het=t,this.het}sit(){return this.net.sit()}Cet(t){this.net.Cet(t)}Get(){return this.net._et()}Det(t){this.net.Eet(t)}VV(){return this.Y9().Net()}Mst(){return this.net.Aet()}Let(t){this.net.Oet(t)}Ret(){return this.net.LC()}Pet(t){this.net.ket(t)}Fet(){return this.Qst().jet(this.net).LC()}zet(){return this.net.zet()}Bet(t){this.net.Bet(t)}Uet(){return this.net.Uet()}Wet(t){this.net.Wet(t)}mit(){return this.net.mit()}git(t){this.net.git(t)}K9(){return this.net.K9()}ttt(t){this.net.ttt(t)}K8(){return this.net.K8()}stt(t){this.net.stt(t)}BV(t){for(const s of this.Qet())s.BV(t)}Jet(){return this.net.Jet()}Qet(){return this.oet||(this.oet=this.net.uet().aet()),this.oet}W8(){return this.net.uet().W8()}Yet(t){return this.ret.Yet(t,this.net)}Vet(t){return this.ret.Vet(t,this.net)}Het(t){let s,i=this.ret.Yet(t,this.net);return i?s=this.ret.qet(t,this.net):(i=this.ret.Vet(t,this.net),s=this.ret.Xet(t,this.net)),{start:i,end:s}}*Zet(){for(const t of this.Qet())yield t.o7()}*Ket(){for(const t of this.Qet())yield t.DO()}lst(){this.Y9().lst()}w8(){this.Y9().w8()}$et(){return this.Y9().$et()}ztt(){this.Y9().ztt()}a8(t){this.Y9().a8(),this.let=this.tnt(t),this.Ztt()}Xtt(t){this.Y9().Xtt(),this.let=this.tnt(t)}Ztt(){const t=this.met();if(this.Ust=0,t.H9()){const s=this.Yst(),i=t.UV(),e=this.Y9(),n=this.Mst();if(e.snt()){const t=s.J9(i,e,n,this);t&&t.length&&(this.Ust=1)}else this.Ust=0}}tnt(t){const s=this.Yst();return this.ret.Yet(t,this.net)||(s.ott()?this.ret.Vet(t,this.net):this.ret.Xet(t,this.net))}sst(){this.het.sst()}Mc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.ret.Vet(t,this.net);else{if(this.let){const s=this.Yst(),i=this.let.Q8(),e=this.let.DO(),n=i?i.DO():s.xV();(t<=e||t>=n)&&(this.let=this.ret.Vet(t,this.net),h=!0)}else this.let=this.ret.Vet(t,this.net),h=!0;n=this.let}n&&(r=n.Q8()),this.het.Mc(t,n,r,s,i,e,h)}int(t){if(this.let){const s=this.Yst(),i=this.let.Q8(),e=this.let.DO(),n=i?i.DO():s.xV();(t<=e||t>=n)&&(this.let=this.ret.Vet(t,this.net))}else this.let=this.ret.Vet(t,this.net);const s=this.let,i=s.Q8();return this.het.int(t,s,i)}ent(t,s,i){return this.het.int(t,s,i)}rst(){this.het.rst()}static nnt(t,s){const i=s.yet();return s.ret.Vet(t,i)}static rnt(t,s){const i=s.yet();return s.ret.Xet(t,i)}hnt(){const t=this.net.uet().ont();return this.let=null,t}Jit(t){this.let=null,this.net.uet().ant(t)}Yit(){this.Y9().Yit()}Vit(){if(this.Y9().Vit()){const t=this.ret.jet(this.net),s=this.Y9().$et();t.unt(s)}}Hit(){const t=this.Y9().Hit();return t&&this.lnt(),this.Y9().cnt(),t}lnt(){const t=this.Yst().DO(),s=this.Y9(),i=fm.Jst.nnt(t,this),e=this.hnt();e.ket(i.LC()),e.TV(t),e.BV(i.fnt()),e.git(!0),e.dnt(s.pnt()),e.unt(s.$et())}t3(){return{sourceAdapterJson:this.Y9().t3()}}s3(t){t&&this.Y9().s3(t.sourceAdapterJson)}}}{const dm=self.Cs.Jst;dm.xet=class{constructor(t){this.mnt=t,this.gnt=null,this.ynt()}Jn(){this.gnt&&(this.gnt.Jn(),this.gnt=null),this.mnt=null}snt(){return this.gnt.snt()}HV(){return this.mnt}lst(){this.gnt&&this.gnt.lst()}w8(){this.gnt&&this.gnt.w8()}ynt(){return this.gnt||(this.gnt=this.Mnt()),this.gnt}iit(){}ik(){return this.iit()}wnt(){}ztt(){this.ynt().ztt()}a8(){this.ynt().a8()}Xtt(){this.ynt().Xtt()}sst(){this.gnt.Snt()}Mc(t,s,i,e,n,r,h){let o;switch(this.mnt.Fet()){case"numeric":o=dm.Tnt.Mc(t,s,i,this.mnt);break;case"angle":o=dm.bnt.Mc(t,s,i,this.mnt);break;case"boolean":o=dm.xnt.Mc(t,s,i,this.mnt);break;case"color":o=dm.vnt.Mc(t,s,i,this.mnt);break;case"text":o=dm.Int.Mc(t,s,i,this.mnt)}this.gnt.Cnt(t,o,s,i,e,n,r,h)}int(t,s,i){switch(this.mnt.Fet()){case"numeric":return dm.Tnt.Mc(t,s,i,this.mnt);case"angle":return dm.bnt.Mc(t,s,i,this.mnt);case"boolean":return dm.xnt.Mc(t,s,i,this.mnt);case"color":return dm.vnt.Mc(t,s,i,this.mnt);case"text":return dm.Int.Mc(t,s,i,this.mnt)}}rst(){this.gnt.Gnt()}Yit(){this.ynt()._nt()}cnt(){this.ynt().cnt()}$et(){return this.ynt().$et()}Vit(){return this.ynt().Vit()}Hit(){return this.ynt().Hit()}pnt(){const t=this.mnt,s=t.met().Yst().DO(),i=dm.nnt(s,t),e=i.Q8();switch(t.Fet()){case"numeric":return dm.Tnt.Mc(s,i,e,t);case"angle":return dm.bnt.Mc(s,i,e,t);case"boolean":return dm.xnt.Mc(s,i,e,t);case"color":return dm.vnt.Mc(s,i,e,t);case"text":return dm.Int.Mc(s,i,e,t)}}Mnt(){const t=this.mnt;switch(t.Jet()?t.Fet():""){case"combo":case"boolean":case"text":case"string":return new dm.Ent.Dnt(this);case"numeric":case"number":case"angle":return"combo"===this.mnt.Ret()?new dm.Ent.Dnt(this):new dm.Ent.Nnt(this);case"color":case"offsetColor":return new dm.Ent.Ant(this);default:return new dm.Ent.Nnt(this)}}t3(){return{propertyAdapterJson:this.ynt().t3()}}s3(t){t&&this.ynt().s3(t.propertyAdapterJson)}}}{const pm=self.Cs;class mm extends pm.Jst.xet{constructor(t){super(t),this.Lnt=NaN}iit(){return this.mnt.yet()._et()[0]}ik(){return this.Lnt?this.Lnt:super.ik()}wnt(){return this.mnt.met().UV()}hit(t){this.mnt.yet()._et()[0]!==t&&(this.Lnt=t)}Mc(t,s,i,e,n,r,h){this.ynt().Ont(s.Net())&&super.Mc(t,s,i,e,n,r,h)}int(t,s,i){if(this.ynt().Ont(s.Net()))return super.int(t,s,i)}t3(){return Object.assign(super.t3(),{index:this.Lnt})}s3(t){t&&(super.s3(t),this.Lnt=t.index)}}pm.Jst.Tet=mm}{const gm=self.Cs;class ym extends gm.Jst.xet{constructor(t){super(t),this.VK=NaN}iit(){return this.mnt.yet()._et()[1]}wnt(){const t=this.mnt.yet(),s=this.mnt.met(),i=this.VK?this.VK:t._et()[0],e=s.UV(),n=e.Rnt(i);return e.Pnt()[n].gY()}CY(t){const s=this.mnt.yet()._et()[2];return t.knt(s)}ait(t){this.mnt.yet()._et()[0]!==t&&(this.VK=t)}Mc(t,s,i,e,n,r,h){const o=this.mnt.met().UV();this.CY(o.GW())&&super.Mc(t,s,i,e,n,r,h)}int(t,s,i){const e=this.mnt.met().UV();if(this.CY(e.GW()))return super.int(t,s,i)}t3(){return Object.assign(super.t3(),{sid:this.VK})}s3(t){t&&(super.s3(t),this.VK=t.sid)}}gm.Jst.Met=ym}{const Mm=self.Cs;class wm extends Mm.Jst.xet{constructor(t){super(t)}iit(){return this.mnt.yet()._et()[1]}wnt(){const t=this.mnt.met().oj().PQ(),s=t.WB(),i=this.lit(s).ik();return t.AY(i)?t.Fnt(i):null}lit(t){const s=this.mnt.yet()._et()[0];return t.jnt(s)}Mc(t,s,i,e,n,r,h){this.znt()&&super.Mc(t,s,i,e,n,r,h)}int(t,s,i){if(this.znt())return super.int(t,s,i)}znt(){const t=this.mnt.met().oj().PQ(),s=t.WB(),i=this.lit(s);if(!i)return;const e=i.ik();return t.AY(e)}}Mm.Jst.wet=wm}{const Sm=self.Cs;class Tm extends Sm.Jst.xet{constructor(t){super(t)}iit(){return this.mnt.yet()._et()[0]}wnt(){return this.mnt.met().UV().gY()}Mc(t,s,i,e,n,r,h){const o=this.mnt.met();o.GW().MB()===o.UV().GW().MB()&&super.Mc(t,s,i,e,n,r,h)}int(t,s,i){const e=this.mnt.met();if(e.GW().MB()===e.UV().GW().MB())return super.int(t,s,i)}Bnt(){const t=this.mnt.met().GW().MB();if(Sm._j.Unt&&t instanceof Sm._j.Unt&&("initial-frame"===this.mnt.Mst()||"initial-animation"===this.mnt.Mst()))switch(this.mnt.K8()){case"relative":case"absolute":return null}}}Sm.Jst.bet=Tm}{const bm=self.Cs;class xm extends bm.Jst.xet{constructor(t){super(t),this.Wnt=0,this.Qnt=!1}snt(){return!1}a8(){const t=this.mnt.Qst();let s=this.mnt.yet();s=t.jet(s),this.Wnt=s.o7()}Xtt(){}Net(){return this.Qnt||this.mnt.Mc(0),this.Wnt}Mc(t,s,i,e,n,r,h){this.Wnt=bm.Jst.Tnt.Mc(t,s,i,this.mnt),this.Qnt=!0}Yit(){}cnt(){}$et(){return this.Wnt}Vit(){return!1}Hit(){return!1}t3(){return{value:this.Wnt,init:this.Qnt}}s3(t){t&&(this.Wnt=t.value,this.Qnt=!t.hasOwnProperty("init")||t.init)}}bm.Jst.vet=xm}{const vm=self.Cs;class Im extends vm.Jst.xet{constructor(t){super(t),this.Jnt=!1,this.Ynt=null,this.Vnt=null,this.Hnt=null,this.k8=this.mnt.Yst(),this.eet=this.mnt.met(),this.qnt=this.mnt.Get(),this.Xnt=this.qnt[0],this.Znt=this.qnt[1],this.qnt[3]?this.Knt=this.qnt[3]:this.Knt=Math.random().toString(36).slice(2),this.$nt=NaN,this.trt=NaN,this.srt=NaN,this.irt=null,this.ert()}Jn(){super.Jn(),this.Ynt=null,this.Vnt=null,this.Hnt=null,this.k8=null,this.eet=null,this.qnt=null,this.Xnt=null,this.irt=null}ert(){if(!self.Cs._j.Audio)return;const t=this.mnt.Rj().nrt(self.Cs._j.Audio);t&&(this.Ynt=t.mB().gY()),this.Vnt=self.Cs._j.Audio.rrt,this.Hnt=self.Cs._j.Audio.hrt}ort(){if(this.irt)return;const t=this.mnt.met().HV("audioSource");t&&(this.irt=t.Y9())}art(){const t=this.mnt.met().HV("volume");return t?t.Y9().trt:this.trt}lst(){super.lst(),this.Jnt=!1,this.Ynt&&(this.Hnt&&(this.$nt=this.Hnt.urt.call(this.Ynt,this.Knt),this.trt=this.Hnt.lrt.call(this.Ynt,this.Knt)),this.Vnt&&this.Vnt.MV.call(this.Ynt,this.Knt))}crt(){return this.Knt}frt(){return this.srt}drt(t){this.srt=t}a8(){super.a8(),this.$nt=NaN,this.Jnt=!1}Xtt(){super.Xtt();const t=this.mnt.Yst().DO();switch(this.$nt=t-this.Znt,this.mnt.Mst()){case"audioSource":break;case"volume":this.trt=this.mnt.int(t)}this.Jnt=!1}Mc(t,s,i,e,n,r,h){if(this.Ynt)switch(this.mnt.Mst()){case"audioSource":{if(!this.k8.ott())return;if(e)return void(this.Vnt&&this.Vnt.MV.call(this.Ynt,this.Knt));if(t<this.Znt)return void(this.Jnt=!1);const s=this.Hnt.prt.call(this.Ynt,this.Knt),i=this.k8.DV();if(i!==s&&this.Vnt._V.call(this.Ynt,this.Knt,i),this.Jnt)return;if(!this.mnt.Yst().IsPlaying())return;if(this.Jnt=!0,isNaN(this.$nt)){const s=self.performance.now(),i=t-this.Znt;if("suspended"===this.Ynt.mrt())return void(this.Jnt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.Vnt){let t=this.frt();isNaN(t)?(this.drt(0),t=0):this.drt(t),this.Vnt.grt.call(this.Ynt,this.Xnt,t,this.Knt,e)}}else{const t=this.$nt;this.$nt=NaN;const s=this.art();if(this.trt=NaN,"suspended"===this.Ynt.mrt())return void(this.Jnt=!1);this.Vnt&&(this.drt(s),this.Vnt.grt.call(this.Ynt,this.Xnt,s,this.Knt,t))}break}case"volume":this.ort(),super.Mc(t,s,i,e,n,r,h)}}int(t,s,i){if(this.Ynt)switch(this.mnt.Mst()){case"audioSource":return;case"volume":return this.ort(),super.int(t,s,i)}}yrt(t,s){return this.irt?this.irt.frt():0}Mrt(t,s,i,e){this.irt&&this.irt.drt(this.yrt()+s),this.Vnt&&this.irt&&this.Vnt.drt.call(this.Ynt,this.irt.crt(),this.irt.frt())}wrt(t,s,i){this.irt&&this.irt.drt(s),this.Vnt&&this.irt&&this.Vnt.drt.call(this.Ynt,this.irt.crt(),this.irt.frt())}Srt(){return!0}t3(){return{audioPlaybackStarted:this.Jnt,audioTag:this.Knt,pauseTime:this.$nt,pauseVolume:this.trt,volume:this.srt}}s3(t){t&&(this.Jnt=t.audioPlaybackStarted,this.Knt=t.audioTag,this.$nt=t.pauseTime,this.trt=t.pauseVolume,this.srt=t.volume,this.ert())}}vm.Jst.Iet=Im}self.Cs.Jst.Ent=class{constructor(t){this.het=t,this.mnt=t.HV(),this.Nst=this.mnt.met().oj(),this.Trt=this.mnt.Mst(),this.brt=!1,this.xrt=null,this.vrt=null}Jn(){this.het=null,this.mnt=null,this.Nst=null,this.xrt=null,this.vrt=null}snt(){return!1}lst(){}w8(){this.Nst=null,this.xrt=null,this.vrt=null}Y9(){return this.het}HV(){return this.mnt}oj(){return this.Nst||(this.Nst=this.mnt.met().oj()),this.Nst}Irt(t){this.brt=!!t}Crt(){return this.brt}ztt(){}a8(){}Xtt(){}_nt(){this.xrt=this.$et()}cnt(){this.xrt=null}$et(){}Vit(){}Hit(){}Ont(t){return typeof this.Grt()==typeof t}Snt(){}Cnt(t,s,i,e,n,r,h,o){}Gnt(){}_rt(){return this.Ert((()=>{const t=this.mnt.yet();return this.mnt.Qst().jet(t)}),(()=>{const t=this.mnt.yet();return this.mnt.Qst().Nrt(t)})).Drt()}Art(){const t=this.mnt.Yst().DO()-this.mnt.met().ist();return this.Ert((()=>{const s=this.mnt.yet();return this.mnt.Qst().Vet(t,s)}),(()=>{const s=this.mnt.yet(),i=this.mnt.Qst();return i.Xet(t,s)||i.Nrt(s)})).Drt()}Ert(t,s){return this.mnt.Yst().ott()?t():s()}Lrt(t,s){return"relative"===this.mnt.K8()?t():s()}Ort(t,s){return this.Crt()?(this.Irt(!1),t()):s()}Rrt(t){}Prt(){return this.het.ik()}krt(){return this.vrt||(this.vrt=this.het.wnt()),this.vrt}Frt(t,s,i,e,n,r){switch(this.mnt.sit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}t3(){return{firstAbsoluteUpdate:this.brt,saveState:this.xrt}}s3(t){t&&(this.brt=t.firstAbsoluteUpdate,this.xrt=t.saveState)}jrt(t,s=!1){const i=[];for(const e of t){const t=e.met().ist();for(const n of e.Qet())s&&0===n.DO()?i.push({time:t+n.DO(),value:n.Drt()}):s||i.push({time:t+n.DO(),value:n.Drt()})}return i.sort(((t,s)=>t.time-s.time))}zrt(t,s,i){return this.Brt(s,i)}Brt(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}};{const Cm=self.Cs,Gm=new Map,_m=[0,0,0];class Dm extends Cm.Jst.Ent{constructor(t){super(t)}ztt(){}a8(){}Xtt(){}$et(){const t=this.mnt.sit(),s=this.krt(),i=this.Prt();switch(t){case"behavior":case"plugin":return this.Urt(s.Wrt(i));case"effect":return this.Urt(s[i]);case"world-instance":return this.Urt(this.Grt())}}Vit(){const t=this._rt();return!this.Qrt(t,this.Grt())}Hit(){return!Cm.ie(this.xrt)&&!this.Qrt(this.xrt,this.Grt())}Qrt(t,s){return t=this.Jrt(t),s=this.Jrt(s),t.Qo(s)}_rt(){const t=super._rt();return this.Jrt(t)}Art(){const t=super.Art();return this.Jrt(t)}Rrt(t){}Urt(t){return Cm.Pe(t,Cm.xo)?t.toArray().slice(0,3):t.slice(0,3)}Jrt(t){return Cm.Pe(t,Cm.xo)?t:new Cm.xo(t[0],t[1],t[2],1)}Ont(t){return!0}snt(){return!0}Snt(){const t=this.mnt.Yst(),s=this.mnt.UV(),i=this.mnt.Y9(),e=t.J9(s,i,this.Trt,this.mnt);if(e&&e.length>1){Gm.has(s)||Gm.set(s,new Map);const t=Gm.get(s),i=this.mnt.sit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Trt)||e.set(this.Trt,{Yrt:!1,color:new Cm.xo(0,0,0,1)})}}Vrt(t,s,i){const e=Gm.get(t).get(s).get(i);return e.Yrt=!0,e.color}Cnt(t,s,i,e,n,r,h,o){const a=this.mnt.Yst(),u=this.mnt.met(),l=this.mnt.UV(),c=this.mnt.Y9(),f=this.mnt.sit(),d=this.Trt,p=a.J9(l,c,d,this.mnt);if(p&&p.length>1){const t=this.jrt(p,!0),i=this.zrt(a,a.DO(),t);if(i){const t=u.ist(),e=i.time-t;if(0===e)this.Vrt(l,f,this.Trt).Eo(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.mnt.Mc(e,!1,!0),h=Cm.xo.Ta(t,r[0]),o=Cm.xo.Ta(i,r[1]),a=Cm.xo.Ta(n,r[2]);this.Vrt(l,f,this.Trt).Eo(h,o,a)}}}else this.Hrt(s[0],s[1],s[2])}Gnt(){const t=this.mnt.UV();if(!Gm.has(t))return;const s=Gm.get(t),i=this.mnt.sit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Trt))return;const n=e.get(this.Trt),r=n.Yrt,h=n.color;r&&this.Hrt(h.ko(),h.Fo(),h.jo()),0===e.size&&s.delete(i),0===s.size&&Gm.delete(t)}Grt(){const t=this.mnt.sit(),s=this.krt(),i=this.Prt();switch(t){case"behavior":case"plugin":return this.Jrt(s.Wrt(i));case"effect":return s[i].clone();case"world-instance":return this.oj().hJ().clone()}}Hrt(t,s,i){const e=this.mnt.sit(),n=this.krt(),r=this.Prt();switch(e){case"behavior":case"plugin":_m[0]=t,_m[1]=s,_m[2]=i,n.qrt(r,_m);break;case"effect":n[r].Do(t,s,i);break;case"world-instance":this.oj().Xrt(t,s,i)}}t3(){}s3(t){}}Cm.Jst.Ent.Ant=Dm}{const Em=self.Cs,Nm=Em.Jst;class Am extends Em.Jst.Ent{constructor(t){super(t)}ztt(){}a8(){}Xtt(){}$et(){return this.Grt()}Vit(){return this._rt()!==this.$et()}Hit(){return!Em.ie(this.xrt)&&this.xrt!==this.$et()}snt(){return!1}Cnt(t,s,i,e,n,r,h,o){const a=this.mnt,u=a.met(),l=a.sit(),c=a.Yst(),f=u.UV(),d=a.Y9(),p=this.Trt,m=c.J9(f,d,p,a);if(m&&m.length>1){const i=this.jrt(m),e=t+u.ist(),n=this.zrt(c,e,i);n&&(s=n.value)}switch(a.Fet()){case"numeric":if(!Nm.Tnt.Zrt(this.Prt(),this.krt(),s,l))return;break;case"angle":if(!Nm.bnt.Zrt(this.Prt(),this.krt(),s,l))return;break;case"boolean":if(!Nm.xnt.Zrt(this.Prt(),this.krt(),s,l))return;break;case"color":if(!Nm.vnt.Zrt(this.Prt(),this.krt(),s,l))return;break;case"text":if(!Nm.Int.Zrt(this.Prt(),this.krt(),s,l))return}this.Hrt(s)}Grt(){const t=this.mnt.sit(),s=this.krt(),i=this.Prt();switch(t){case"behavior":case"plugin":return s.Wrt(i);case"effect":return s[i];case"instance-variable":return s.Krt(i)}}Hrt(t){const s=this.mnt.sit(),i=this.krt(),e=this.Prt();switch(s){case"behavior":case"plugin":i.qrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.$rt(e,t)}}}Em.Jst.Ent.Dnt=Am}{const Lm=self.Cs,Om=(Lm.Jst.Ent,new Map),Rm=(t,s,i,e,n,r=!1,h=null,o=null)=>{Om.set(t,{tht:s,sht:i,iht:e,round:n,eht:r,init:h,reset:o})};Rm("offsetX",((t,s,i,e)=>{"relative"===e.mnt.K8()?t.nht(s,i.Yst().ett()):t.nht(s)}),((t,s)=>t.Qb(s)),(t=>t.Wb()),!0),Rm("offsetY",((t,s,i,e)=>{"relative"===e.mnt.K8()?t.rht(s,i.Yst().ett()):t.rht(s)}),((t,s)=>t.Vb(s)),(t=>t.Yb()),!0),Rm("offsetWidth",((t,s,i,e,n)=>{if(0===s)return;const r="relative"===e.mnt.K8(),h=1===e.hht.LC();if((r||h)&&t.LJ()&&t.zJ()){if(isNaN(e.oht)){const s=[];let n=t.SJ();for(;n;)s.push(n),n=n.SJ();s.reverse();const r=(t,s)=>s.Yst().wst(t.UV()),o=(t,s)=>{const i=r(t,s);if(i)return i.wit();const e=t.UV().gY();return e.Sit()?e.wit():t.uht().aht()},a=(t,s,i,e=0)=>{const n=r(t,s);if(!n)return e;const h=n.HV(i);if(!h)return e;const o=h.yet().uet();if(!o)return e;const a=o.Nrt();return a?a.Net():e};let u;if(h)u=s[s.length-1].Bg();else{let t=s[0];u=t.uht().aht()*t.uht().lht(),u+=a(t,i,"offsetWidth"),u+=o(t,i)*a(t,i,"offsetScaleX");for(let e=1;e<s.length;e++)t=s[e],u*=t.uht().lht(),u+=a(t,i,"offsetWidth"),u+=o(t,i)*a(t,i,"offsetScaleX")}e.oht=0===u?Number.EPSILON:u}if(n)return;t.vy(s/e.oht,!0)}else t.vy(s)}),((t,s)=>t.Hg(s)),(t=>t.Bg()),!0),Rm("offsetHeight",((t,s,i,e,n)=>{if(0===s)return;const r="relative"===e.mnt.K8(),h=1===e.hht.LC();if((r||h)&&t.LJ()&&t.UJ()){if(isNaN(e.oht)){const s=[];let n=t.SJ();for(;n;)s.push(n),n=n.SJ();s.reverse();const r=(t,s)=>s.Yst().wst(t.UV()),o=(t,s)=>{const i=r(t,s);if(i)return i.bit();const e=t.UV().gY();return e.Sit()?e.bit():t.uht().cht()},a=(t,s,i,e=0)=>{const n=s.Yst().wst(t.UV());if(!n)return e;const r=n.HV(i);if(!r)return e;const h=r.yet().uet();if(!h)return e;const o=h.Nrt();return o?o.Net():e};let u;if(h)u=s[s.length-1].Zg();else{let t=s[0];u=t.uht().cht()*t.uht().fht(),u+=a(t,i,"offsetHeight"),u+=o(t,i)*a(t,i,"offsetScaleY");for(let e=1;e<s.length;e++)t=s[e],u*=t.uht().fht(),u+=a(t,i),u+=o(t,i)*a(t,i,"offsetScaleY")}e.oht=0===u?Number.EPSILON:u}if(n)return;t.dht(s/e.oht,!0)}else t.dht(s)}),((t,s)=>t.Ug(s)),(t=>t.Zg()),!0),Rm("offsetAngle",((t,s,i,e,n)=>{t.pht(s)}),((t,s)=>t.qB(s)),(t=>t.XB()),!1,!0),Rm("offsetOpacity",((t,s,i,e,n)=>{s/=e.mht?e.mht:1;const r=t.tL()+s;if(0===e.ght)r>1?e.ght+=r-1:r<0&&(e.ght+=r),t.yht(s);else{const i=t.tL()+s;s>0&&e.ght>0?i>1&&(e.ght+=i-1):s>0&&e.ght<0?(e.ght+=s,e.ght>0&&(t.yht(e.ght),e.ght=0)):s<0&&e.ght>0?(e.ght+=s,e.ght<0&&(t.yht(e.ght),e.ght=0)):s<0&&e.ght<0&&i<0&&(e.ght+=i)}}),((t,s)=>{t.iL(s)}),(t=>t.tL()),!1,!0,((t,s,i)=>{switch(t.ght=0,t.mnt.K8()){case"relative":{t.mnt.Qst();const s=t.mnt.yet().uet().aet();let i=t.oj().tL(),e=i;for(const n of s){const s=n.DO();e=i+t.mnt.int(s),e=Lm.Xn(e,0,1)}t.Mht=i-e,t.Mht=Math.round(100*(t.Mht+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].DO();e-=t.mnt.int(n),e=Lm.Xn(e,0,1)}t.wht=e,t.wht=Math.round(100*(t.wht+Number.EPSILON))/100;break}}const e="relative"===t.mnt.K8(),n=1===t.hht.LC();if((e||n)&&s.LJ()&&s.HJ()){const e=[];let n=s.SJ();for(;n;)e.push(n),n=n.SJ();e.reverse();const r=(t,s,i)=>{const e=s.Yst().wst(t.UV());if(!e)return 0;const n=e.HV(i);if(!n)return 0;const r=n.yet().uet();if(!r)return 0;const h=r.Nrt();return h?h.Net():0};let h=e[0].uht().Sht();h+=r(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)h+=r(e[t],i,"offsetOpacity");t.mht=0===h?1:h}}),(t=>{switch(t.mnt.K8()){case"relative":{t.ght=0;const s=t.oj();let i=s.tL();i=Math.round(100*(i+Number.EPSILON))/100,t.mnt.Yst().ott()?(s.iL(i+t.Mht),t.bG=0):(s.iL(i-t.wht),t.bG=t.Y9().pnt());break}}})),Rm("offsetOriginX",((t,s)=>t.Tht(s)),((t,s)=>t.QQ(s)),(t=>t.WQ()),!1),Rm("offsetOriginY",((t,s)=>t.bht(s)),((t,s)=>t.VQ(s)),(t=>t.YQ()),!1),Rm("offsetZElevation",((t,s)=>t.xht(s)),((t,s)=>t.qb(s)),(t=>t.Hb()),!0),Rm("offsetScaleX",((t,s,i,e)=>{if(0===s)return;const n=t.Bg()<0?-1:1;if("relative"===e.mnt.K8()&&t.LJ()&&t.zJ()){const r=i.wit()*n*s;isNaN(e.oht)&&Om.get("offsetWidth").tht(t,1,i,e,!0),t.vy(r/e.oht,!0)}else t.vy(i.wit()*n*s)}),((t,s,i)=>{t.Hg(i.wit()*s)}),((t,s)=>{const i=t.Bg()<0?-1:1;if(t.zJ()){const e=t.SJ(),n=s.Yst().wst(e.UV());let r=NaN;if(n)r=e.Bg()/n.wit();else{const t=e.UV().gY();r=t.Sit()?e.Bg()/t.wit():1}return t.Bg()*i/(s.wit()*r)}return t.Bg()*i/s.wit()}),!1),Rm("offsetScaleY",((t,s,i,e)=>{if(0===s)return;const n=t.Zg()<0?-1:1;if("relative"===e.mnt.K8()&&t.LJ()&&t.UJ()){const r=i.bit()*n*s;isNaN(e.oht)&&Om.get("offsetHeight").tht(t,1,i,e,!0),t.dht(r/e.oht,!0)}else t.dht(i.bit()*n*s)}),((t,s,i)=>{t.Ug(i.bit()*s)}),((t,s)=>{const i=t.Zg()<0?-1:1;if(t.UJ()){const e=t.SJ(),n=s.Yst().wst(e.UV());let r=NaN;if(n)r=e.Zg()/n.bit();else{const t=e.UV().gY();r=t.Sit()?e.Zg()/t.bit():1}return t.Zg()*i/(s.bit()*r)}return t.Zg()*i/s.bit()}),!1);class Pm extends Lm.Jst.Ent{constructor(t){super(t),this.bG=0,this.ght=0,this.Mht=0,this.wht=0,this.mht=NaN,this.oht=NaN,this.vht=void 0,this.Iht=void 0,this.Cht=null,this.Ght=null,this._ht=null,this.Dht=null,this.Eht=null,this.Nht=null,this.Aht=null,this.Lht=null,this.Oht=!1,this.Rht=!1,Lm.Pe(this.mnt.Yst(),Lm.Pht)?this.hht=new Lm.Jst.Ent.kht(this):this.hht=new Lm.Jst.Ent.Fht(this);const s=this.mnt.Mst();switch(this.mnt.sit()){case"world-instance":{const t=Om.get(s);this.Cht=t.iht,this.Ght=t.tht,this._ht=t.sht,this.Oht=t.round,this.Rht=t.eht,this.Eht=t.init,this.Dht=t.reset;break}case"audio":this.Nht=t.yrt,this.Aht=t.Mrt,this.Lht=t.wrt,this.Oht=!!t.Srt(),this.Rht=!1}}Jn(){this.hht=null,this.Cht=null,this.Ght=null,this._ht=null,this.Dht=null,this.Eht=null,this.Nht=null,this.Aht=null,this.Lht=null,super.Jn()}snt(){return this.hht.snt()}jht(){return this.bG}zht(t){this.bG=t}ztt(){this.Dht&&this.Dht(this)}a8(){const t=this.hht.a8();if("number"==typeof t&&(this.bG=t),this.Eht){const t=this.oj(),s=this.mnt.met();this.Eht(this,t,s)}}Xtt(){const t=this.hht.Xtt();"number"==typeof t&&(this.bG=t)}$et(){return this.Grt()}Vit(){return this._rt()!==this.$et()}Hit(){return!Lm.ie(this.xrt)&&this.xrt!==this.$et()}Snt(){this.hht.Snt()}Cnt(t,s,i,e,n,r,h,o){return this.hht.Cnt(t,s,i,e,n,r,h,o)}Gnt(){this.hht.Gnt()}Grt(){const t=this.krt(),s=this.Prt(),i=this.oj(),e=this.mnt.met();switch(this.mnt.sit()){case"behavior":case"plugin":return t.Wrt(s);case"effect":return t[s];case"instance-variable":return t.Krt(s);case"world-instance":return this.Cht(i,e);case"audio":return this.Nht.call(this.Y9(),i,e)}}Hrt(t,s,i){const e=this.krt(),n=this.Prt(),r=this.oj(),h=this.mnt.met();switch(this.mnt.sit()){case"behavior":e.Bht(n,t);break;case"effect":e[n]+=t;break;case"instance-variable":e.Uht(n,t);break;case"plugin":e.Bht(n,t,this.Y9().Bnt());break;case"world-instance":this.Ght(r,t,h,this);break;case"audio":this.Aht.call(this.Y9(),r,t,h,this)}}Wht(t,s,i){let e=this.mnt.K9();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.mnt.Yst().DO();if(!this.mnt.Yet(t))return}const n=this.krt(),r=this.Prt(),h=this.oj(),o=this.mnt.met();switch(this.mnt.sit()){case"behavior":n.qrt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.$rt(r,t);break;case"plugin":n.qrt(r,t,this.Y9().Bnt());break;case"world-instance":this._ht(h,t,o);break;case"audio":this.Lht.call(this.Y9(),h,t,o)}}Qht(t,s,i,e,n,r,h,o){this.hht.Qht(t,s,i,e,n,r,h,o)}Jht(t,s,i,e,n){"angle"===this.mnt.Ret()&&(t=Lm.$n(t));const r=(t.toString().split(".")[1]||"").length,h=this.Grt();let o;switch(o=0===r?this.Oht?Math.round(h):this.Rht?"angle"===this.mnt.Ret()?Lm.Kn(Math.round(Lm.$n(h))):Number(Lm.toFixed(h,2)):h:this.Oht?Number(Lm.toFixed(h,r)):(this.Rht,h),this.Hrt(o-h,s,i),this.mnt.Mst()){case"offsetWidth":case"offsetScaleX":{const t=this.oj(),s=t.Bg(),i=Number(Lm.toFixed(s,2));t.vy(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.oj(),s=t.Zg(),i=Number(Lm.toFixed(s,2));t.dht(i-s);break}}}t3(){return Object.assign(super.t3(),{v:this.bG,a:this.ght,fod:this.Mht,bod:this.wht,of:this.mht,sf:this.oht,armorf:this.vht,armandf:this.Iht})}s3(t){t&&(super.s3(t),this.bG=t.v,this.ght=t.a,this.Mht=Lm.$i(t.fod)?t.fod:0,this.wht=Lm.$i(t.bod)?t.bod:0,this.mht=Lm.$i(t.of)?t.of:NaN,this.oht=Lm.$i(t.sf)?t.sf:NaN,this.vht=Lm.$i(t.armorf)?t.armorf:void 0,this.Iht=Lm.$i(t.armandf)?t.armandf:void 0)}}Lm.Jst.Ent.Nnt=Pm}{const km=self.Cs;class Fm{constructor(t){this.Yht=!1,this.Wnt=0,this.Vht=!1,this.Hht=!1,this.jst=t;for(let t=0,s=this.jst.length;t<s;t++)this.jst[t].det(this)}yst(){return this.jst}qht(){this.Yht=!0}Xht(){return this.Yht}dnt(t){this.Wnt=t}Net(){return this.Wnt}Zht(t){this.Vht=t}Kht(){return this.Vht}tst(t){this.Hht=t}$ht(){return this.Hht}Ff(){this.Yht=!1,this.Wnt=0,this.Vht=!1,this.Hht=!1}}class jm{constructor(t){this.tot=t}Jn(){this.tot=null}LC(){return 0}a8(){const t=this.tot;return this.tot.HV(),t.Lrt((()=>t.Ert((()=>0),(()=>t.Y9().pnt()))),(()=>{}))}Xtt(){}snt(){switch(this.tot,this.tot.HV().K8()){case"relative":return!1;case"absolute":return!0}}Snt(){this.tot;const t=this.tot.HV(),s=t.Mst();switch(t.K8()){case"relative":break;case"absolute":if(t.fet())t.pet().Ff();else{const i=t.Yst(),e=t.UV(),n=t.Y9(),r=i.J9(e,n,s,t);r&&r.length>1&&new Fm(r)}}}Cnt(t,s,i,e,n,r,h,o){const a=this.tot,u=this.tot.HV();switch(u.K8()){case"relative":{const h=a.jht();a.Hrt(s-h,i,e),r&&this.Qht(t,i,e,n,h,s),a.zht(s);break}case"absolute":{const t=u.Yst(),i=u.met();if(u.UV(),u.Y9(),u.fet()){const e=u.pet(),n=e.yst(),r=a.jrt(n,!0),l=a.zrt(t,t.DO(),r);if(l){const t=i.ist(),n=l.time-t;if(0===n)e.tst(h),e.Zht(o),e.qht(),e.dnt(e.Net()+s);else{if(n<0)return;const t=u.int(n);e.tst(h),e.Zht(o),e.qht(),e.dnt(e.Net()+(s-t))}}}else a.Wht(s,o,h);break}}}Gnt(){const t=this.tot,s=this.tot.HV();switch(s.K8()){case"relative":break;case"absolute":if(s.fet()){const i=s.pet();i.Xht()&&t.Wht(i.Net(),i.Kht(),i.$ht())}}}Qht(t,s,i,e,n,r){const h=this.tot;e||(s&&t===s.DO()?h.Jht(s.o7(),s,i):i&&t===i.DO()?h.Jht(i.o7(),s,i):r-n==0&&h.Jht(s.o7(),s,i))}}km.Jst.Ent.Fht=jm}{const zm=self.Cs;class Bm{constructor(t){this.tot=t}Jn(){this.tot=null}LC(){return 1}a8(){const t=this.tot;return t.Irt(!0),this.Rrt(t._rt())}Xtt(){const t=this.tot;if(t._rt()!==t.Art())return t.Irt(!0),this.Rrt(t.Art())}snt(){return!1}Snt(){}Cnt(t,s,i,e,n,r,h,o){const a=this.tot,u=a.jht();switch(a.HV().K8()){case"relative":a.Hrt(s-u,i,e),r&&this.Qht(t,i,e,n,u,s,!1,h);break;case"absolute":a.Crt()?(a.Irt(!1),a.Hrt(u,i,e)):0===t&&0===a.HV().Yst().xV()?a.Wht(s,!0,!1):(a.Hrt(s-u,i,e),r&&this.Qht(t,i,e,n,u,s,this.sot(),h))}a.zht(s)}Gnt(){}Rrt(t){return t-this.tot.$et()}sot(){const t=this.tot,s=t.oj().UV(),i=t.HV().Rj().Q9();let e=0;for(const t of i.P6())0===t.LC()?t.B6(s)&&e++:1===t.LC()&&t.UV()===s&&e++;return e<=1}Qht(t,s,i,e,n,r,h,o){const a=this.tot;e?s&&t===s.DO()?a.Jht(s.o7(),s,i,h,o):i&&t===i.DO()?a.Jht(i.o7(),s,i,h,o):i||a.Jht(s.o7(),s,i,h,o):s&&t===s.DO()?a.Jht(s.o7(),s,i,h,o):i&&t===i.DO()?a.Jht(i.o7(),s,i,h,o):r-n==0&&a.Jht(s.o7(),s,i,h,o)}}zm.Jst.Ent.kht=Bm}{const Um=self.Cs,Wm=self.Bl;Um.Jst.Tnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Krt(t)}return n!==i}static Mc(t,s,i,e){if(!i){let t=e.yet();return t=e.Qst().Nrt(t),t.o7()}let n=e.K9();if("default"===n&&(n="continuous"),"combo"===e.Ret()&&(n="discrete"),"discrete"===n)return s.o7();if("continuous"===n||"step"===n){const r=e.Yst().X9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.o7(),o=i.o7(),a=s.r7("cubic-bezier"),u=i.r7("cubic-bezier"),l=a&&a.iot()&&u&&u.eot();if(!l&&h===o)return h;const c=s.DO(),f=i.DO();"step"===n&&0!==r&&(t=Um.Xn(t,c,f));const d=Um.normalize(t,c,f),p=s.fnt();let m;if(l){const t=f-c;m=Wm.nc(p)(t*d,0,1,t),m=Wm.nc("cubicbezier")(m,h,h+a.l7(),o+u.d7(),o)}else m=Wm.nc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Ret()?Math.floor(m):m}}}}{const Qm=self.Cs;Qm.Jst.bnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Krt(t)}return n!==i}static Mc(t,s,i,e){if(!i){let t=e.yet();return t=e.Qst().Nrt(t),t.o7()}let n=e.K9();if("default"===n&&(n="continuous"),"combo"===e.Ret()&&(n="discrete"),"discrete"===n)return s.o7();if("continuous"===n||"step"===n){const r=e.Yst().X9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.DO(),o=i.DO(),a=s.o7(),u=i.o7();"step"===n&&0!==r&&(t=Qm.Xn(t,h,o));const l=s.r7("angle");if(!l){if(a===u)return a;const i=Qm.normalize(t,h,o),e=self.Bl.nc(s.fnt());return Qm.ur(a,u,e(i,0,1,1))}{const i=l.not();if(a===u&&0===i)return a;const e=Qm.normalize(t,h,o),n=self.Bl.nc(s.fnt())(e,0,1,1);switch(l.rot()){case"closest":return Qm.ur(a,u,n,i);case"clockwise":return Qm.lr(a,u,n,i);case"anti-clockwise":return Qm.cr(a,u,n,i)}}}}}}self.Cs.Jst.xnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Krt(t)}return!!n!=!!i}static Mc(t,s,i,e){if(!i){let t=e.yet();return t=e.Qst().Nrt(t),t.o7()?1:0}return s.o7()?1:0}};{const Jm=self.Cs,Ym=[0,0,0],Vm=[0,0,0],Hm=[0,0,0];Jm.Jst.vnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Krt(t)}return Array.isArray(i)?(Ym[0]=i[0],Ym[1]=i[1],Ym[2]=i[2]):(Hm.ra(i),Ym[0]=Math.floor(255*Hm.ko()),Ym[1]=Math.floor(255*Hm.Fo()),Ym[2]=Math.floor(255*Hm.jo())),Array.isArray(n)?(Vm[0]=n[0],Vm[1]=n[1],Vm[2]=n[2]):(Hm.ra(n),Vm[0]=Math.floor(255*Hm.ko()),Vm[1]=Math.floor(255*Hm.Fo()),Vm[2]=Math.floor(255*Hm.jo())),Ym[0]!==Vm[0]||Ym[1]!==Vm[1]||Ym[2]!==Vm[2]}static Mc(t,s,i,e){if(!i){let t=e.yet();t=e.Qst().Nrt(t);const s=t.o7();return Ym[0]=s[0],Ym[1]=s[1],Ym[2]=s[2],Ym}let n=e.K9();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.o7();return Ym[0]=t[0],Ym[1]=t[1],Ym[2]=t[2],Ym}if("continuous"===n||"step"===n){const r=e.Yst().X9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.DO(),o=i.DO(),a=s.o7(),u=i.o7();"step"===n&&0!==r&&(t=Jm.Xn(t,h,o));const l=Jm.normalize(t,h,o),c=s.fnt(),f=a[0],d=a[1],p=a[2],m=u[0],g=u[1],y=u[2],M=self.Bl.nc(c),w=o-h,S=w*l;return Ym[0]=f===m?f:M(S,f,m-f,w),Ym[1]=d===g?d:M(S,d,g-d,w),Ym[2]=p===y?p:M(S,p,y-p,w),Ym}}}}self.Cs.Jst.Int=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Krt(t)}return n!==i}static Mc(t,s,i,e){if(!i){let t=e.yet();return t=e.Qst().Nrt(t),t.o7()}return s.o7()}};{const qm=self.Cs;qm.W5=class{constructor(){this.hot=new Map}Jn(){for(const t of this.hot.values())t.Jn();this.hot.clear(),this.hot=null}Fl(t){const s=new qm.oot(t),i=s._c();this.hot.set(i,s)}Js(t){return this.hot.get(t)}k9(){return 0}static aot(t,s,i,e){if(s)for(const n of s)qm.W5.uot("create",n,t,i,e)}static lot(t,s,i,e){if(s)for(const n of s)qm.W5.uot("create-including-disabled",n,t,i,e)}static cot(t,s,i,e){t.length?s.forEach(((s,i)=>{t[i].s3(s)})):s.forEach((s=>{qm.W5.uot("load",s,t,i,e)}))}static uot(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.fot],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.s3(s),i.push(r);break;case"create":if("function"==typeof r.mit&&!r.mit())return r.Jn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Xm=self.Cs;Xm.oot=class{constructor(t){this.Hn="",this.$tt=NaN,this.dot=0,this.pot="default",this.mot="default",this.got=!1,this.yot=!1,this.Mot=1,this.Gst=null,this.wot="",this.Sot=!1,this.Tot=!0,t&&(this.Hn=t[0],this.$tt=t[1],this.dot=t[2],this.pot=t[3],this.mot=t[4],this.got=!!t[6],this.yot=!!t[7],this.Mot=t[8],this.wot=t[9],this.Sot=!!t[10],this.Tot=!!t[11],this.Gst=new Xm.bot(t[5],this))}Jn(){this.Gst.Jn(),this.Gst=null}U9(){return this.Gst||(this.Gst=new Xm.bot(null,this)),this.Gst}_c(){return this.Hn}yq(t){this.Hn=t}xV(){return this.$tt}bV(t){this.$tt=t}X9(){return this.dot}Z9(t){this.dot=t}K9(){return this.pot}ttt(t){this.pot=t}K8(){return this.mot}stt(t){this.mot=t}IV(){return this.got}vV(t){this.got=t}GV(){return this.yot}CV(t){this.yot=t}UY(){return this.Mot}itt(t){this.Mot=t}S8(){return this.wot}ett(){return this.Sot}ntt(){return this.Tot}t3(){return{trackDataJson:this.Gst.t3(),name:this.Hn,totalTime:this.$tt,step:this.dot,interpolationMode:this.pot,resultMode:this.mot,loop:this.got,pingPong:this.yot,repeatCount:this.Mot,startOnLayout:this.wot,transformWithSceneGraph:!!this.Sot,useSystemTimescale:this.Tot}}s3(t){t&&(this.U9().s3(t.trackDataJson),this.Hn=t.name,this.$tt=t.totalTime,this.dot=t.step,this.pot=t.interpolationMode,this.mot=t.resultMode,this.got=t.loop,this.yot=t.pingPong,this.Mot=t.repeatCount,this.wot=t.startOnLayout,this.Sot=!!t.transformWithSceneGraph,this.Tot=!!t.useSystemTimescale)}}}{const Zm=self.Cs;class Km{constructor(t,s){this.Gst=s,this.xot=null,this.vot=null,this._st=NaN,this.Dst=NaN,this.pot="default",this.mot="default",this.cl=!1,this.Iot=null,this.ret=null,this.jc="",this.Cot=null,this.Got=0,this._ot=this.Gst.q9().xV(),this.Jc=0,this.Hn="",t&&(t[0]&&(this.xot=t[0],this._st=t[0][2],this.Dst=t[0][1]),this.pot=t[1],this.mot=t[2],this.cl=!!t[3],t[6]&&(this.jc=t[6]),t[7]&&(this.Cot=t[7],this.Got=t[7][0],this._ot=t[7][1]),t[8]&&(this.vot=t[8]),t[8]&&(this.vot=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.Hn=t[10]),this.Iot=new Zm.Dot(t[4],this),this.ret=new Zm.Eot(t[5],this))}Jn(){this.xot=null,this.Gst=null,this.Iot&&(this.Iot.Jn(),this.Iot=null),this.ret&&(this.ret.Jn(),this.ret=null),this.Cot=null}U9(){return this.Gst}nst(){return this.Iot||(this.Iot=new Zm.Dot(null,this)),this.Iot}Qst(){return this.ret||(this.ret=new Zm.Eot(null,this)),this.ret}Not(){return this.xot}Xst(){return this.Dst}yit(t){this.Dst=t}qst(){return this._st}fit(t){this._st=t}K9(){return this.pot}ttt(t){this.pot=t}K8(){return this.mot}stt(t){this.mot=t}mit(){return this.cl}git(t){this.cl=!!t}YV(){return this.jc}ist(){return this.Got}dit(){return this._ot}pit(t){this._ot=t}wit(){return this.vot[0]}Mit(t){this.vot||(this.vot=[]),this.vot[0]=t}bit(){return this.vot||(this.vot=[]),this.vot[1]}Tit(t){this.vot||(this.vot=[]),this.vot[1]=t}LC(){return this.Jc}_c(){return this.Hn}t3(){return{keyframeDataJson:this.Iot.t3(),propertyTrackDataJson:this.ret.t3(),instanceData:this.xot,additionalInstanceData:this.vot,instanceUid:this._st,objectClassIndex:this.Dst,interpolationMode:this.pot,resultMode:this.mot,enabled:this.cl,id:this.jc,nestedData:this.Cot,type:this.Jc,name:this.Hn}}s3(t){t&&(this.xot=t.instanceData,this._st=t.instanceUid,this.Dst=t.objectClassIndex,this.pot=t.interpolationMode,this.mot=t.resultMode,this.cl=t.enabled,this.jc=t.id,this.Jc=t.type?t.type:0,this.Hn=t.name?t.name:"",this._ot=this.Gst.q9().xV(),t.nestedData&&(this.Cot=t.nestedData,this.Got=this.Cot[0],this._ot=this.Cot[1]),t.additionalInstanceData&&(this.vot=t.additionalInstanceData),this.nst().s3(t.keyframeDataJson),this.Qst().s3(t.propertyTrackDataJson))}}Zm.bot=class{constructor(t,s){this.r9=s,this.Aot=[],Zm.W5.aot(this.Aot,t,Km,this)}Jn(){this.r9=null;for(const t of this.Aot)t.Jn();Zm.wh(this.Aot),this.Aot=null}q9(){return this.r9}ust(){const t=new Km(null,this);return this.Aot.push(t),t}Lot(t){return t.nst().Fst()[0]}Oot(t){return t.nst().Fst().at(-1)}Rit(t,s){const i=s.nst().Fst(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.DO()===t)return e}}Rot(t,s){const i=s.nst().Fst(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.DO()>t)return e}}Lit(t,s){const i=s.nst().Fst(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.DO()>=t)return e}}Ait(t,s){const i=s.nst().Fst();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.DO()<=t)return e}}*B9(){for(const t of this.Aot)yield t}t3(){return{trackDataItemsJson:this.Aot.map((t=>t.t3()))}}s3(t){t&&Zm.W5.cot(this.Aot,t.trackDataItemsJson,Km,this)}}}{const $m=self.Cs;class tg{constructor(t,s){this.ret=s,this.Pot="",this.kot=null,this.Trt=null,this.Jc=null,this.Fot=NaN,this.jot=NaN,this.pot="default",this.mot="default",this.cl=!1,this.zot=null,this.Bot=!0,t&&(this.Pot=t[0][0],this.kot=t[0].slice(1),this.Trt=t[1],this.Jc=t[2],this.Fot=t[3],this.jot=t[4],this.pot=t[5],this.mot=t[6],this.cl=!!t[7],this.zot=new $m.Uot(t[8],this),this.Bot=t[9])}Jn(){this.zot.Jn(),this.zot=null,this.ret=null,this.kot=null}Qst(){return this.ret}uet(){return this.zot||(this.zot=new $m.Uot(null,this)),this.zot}sit(){return this.Pot}Cet(t){this.Pot=t}_et(){return this.kot}Eet(t){this.kot=t}Aet(){return this.Trt}Oet(t){this.Trt=t}LC(){return this.Jc}ket(t){this.Jc=t}zet(){return this.Fot}Bet(t){this.Fot=t}Uet(){return this.jot}Wet(t){this.jot=t}K9(){return this.pot}ttt(t){this.pot=t}K8(){return this.mot}stt(t){this.mot=t}mit(){return this.cl}git(t){this.cl=!!t}Jet(){return!!this.Bot}t3(){return{propertyKeyframeDataJson:this.zot.t3(),sourceAdapterId:this.Pot,sourceAdapterArguments:this.kot,property:this.Trt,type:this.Jc,min:this.Fot,max:this.jot,interpolationMode:this.pot,resultMode:this.mot,enabled:this.cl,canHavePropertyKeyframes:this.Bot}}s3(t){t&&(this.Pot=t.sourceAdapterId,this.kot=t.sourceAdapterArguments,this.Trt=t.property,this.Jc=t.type,this.Fot=t.min,this.jot=t.max,this.pot=t.interpolationMode,this.mot=t.resultMode,this.cl=t.enabled,this.Bot=t.canHavePropertyKeyframes,this.uet().s3(t.propertyKeyframeDataJson))}}$m.Eot=class{constructor(t,s){this.Cst=s,this.Wot=[],$m.W5.aot(this.Wot,t,tg,this)}Jn(){this.Cst=null;for(const t of this.Wot)t.Jn();$m.wh(this.Wot),this.Wot=null}est(){return this.Cst}Uit(){const t=new tg(null,this);return this.Wot.push(t),t}jet(t){return t.uet().aet()[0]}Nrt(t){return t.uet().aet().at(-1)}Yet(t,s){const i=s.uet().aet(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.DO()===t)return e}}qet(t,s){const i=s.uet().aet(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.DO()>t)return e}}Xet(t,s){const i=s.uet().aet(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.DO()>=t)return e}}Vet(t,s){const i=s.uet().aet();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.DO()<=t)return e}}*Wst(){for(const t of this.Wot)yield t}t3(){return{propertyTrackDataItemsJson:this.Wot.map((t=>t.t3()))}}s3(t){t&&$m.W5.cot(this.Wot,t.propertyTrackDataItemsJson,tg,this)}}}{const sg=self.Cs;class ig{constructor(t,s){if(this.Iot=s,this.IR=-1,this.Qot="noease",this.Jot=!1,this.N9=null,this.Yot=null,!t)return;this.IR=t[0],this.Qot=t[1],this.Jot=!!t[2];const i=t[3];this.N9=i?i.split(" "):[],this.Yot=new Set(this.N9.map((t=>t.toLowerCase()))),this.Vot=null,this.Hot=null}Jn(){this.Iot=null,sg.wh(this.N9),this.N9=null,this.Yot.clear(),this.Yot=null,this.Vot=null}nst(){return this.Iot}Q8(){return this.Vot}qot(t){this.Vot=t}Oit(){return this.Hot}Xot(t){this.Hot=t}DO(){return this.IR}TV(t){this.IR=t,this.Iot.Zot()}fnt(){return this.Qot}BV(t){this.Qot=t}mit(){return this.Jot}git(t){this.Jot=!!t}EV(){return this.N9}att(t){this.N9=t?t.split(" "):[],this.Yot=new Set(this.N9.map((t=>t.toLowerCase())))}Kot(){return this.Yot}bst(t){return this.Yot.has(t.toLowerCase())}t3(){return{time:this.IR,ease:this.Qot,enable:this.Jot,tags:this.N9}}s3(t){t&&(this.IR=t.time,this.Qot=t.ease,this.Jot=t.enable,this.N9=t.tags,this.Yot=new Set(this.N9.map((t=>t.toLowerCase()))))}}sg.Dot=class{constructor(t,s){this.Cst=s,this.kst=[],sg.W5.aot(this.kst,t,ig,this),this.Zot()}Jn(){this.Cst=null;for(const t of this.kst)t.Jn();sg.wh(this.kst),this.kst=null}Zot(){this.kst.sort(((t,s)=>t.DO()-s.DO()));for(let t=0;t<this.kst.length;t++){const s=this.kst[t];s.qot(this.kst[t+1]),s.Xot(this.kst[t-1])}}est(){return this.Cst}$ot(){return this.kst.length}Fst(){return this.kst}zit(){const t=new ig(null,this);return this.kst.push(t),this.Zot(),t}Qit(t){for(const s of this.kst){if(!t(s))continue;const i=this.kst.indexOf(s);-1!==i&&(s.Jn(),this.kst.splice(i,1))}this.tat(),this.Zot()}tat(){this.kst.sort(((t,s)=>t.DO()-s.DO()))}tet(t){return this.kst.indexOf(t)}iet(t){return this.kst[t]}*sat(){for(const t of this.kst)yield t}*iat(){for(let t=this.kst.length-1;t>=0;t--)yield this.kst[t]}t3(){return{keyframeDataItemsJson:this.kst.map((t=>t.t3()))}}s3(t){t&&(sg.W5.cot(this.kst,t.keyframeDataItemsJson,ig,this),this.Zot())}}}{const eg=self.Cs;class ng{constructor(t,s){this.zot=s,this.Wnt=null,this.eat=null,this.Jc="",this.IR=NaN,this.Qot="noease",this.Jot=!1,this.nat=null,this.rat=void 0,this.hat="line",t&&(this.Wnt=t[0][0],this.eat=t[0][1],this.Jc=t[0][2],this.IR=t[1],this.Qot=t[2],this.Jot=!!t[3],this.hat=t[5],this.nat=null,t[4]&&(this.nat=new eg.oat(t[4],this)),this.Vot=null,this.aat=null)}Jn(){this.zot=null,this.nat&&(this.nat.Jn(),this.nat=null),this.Vot=null,this.aat=null}uat(){return this.nat}qot(t){this.Vot=t}Q8(){return this.Vot}lat(t){this.aat=t}J8(){return this.aat}Net(){return this.Wnt}dnt(t){"color"===this.Jc&&eg.$i(t)?(this.Wnt[0]=eg.Dr(t),this.Wnt[1]=eg.Er(t),this.Wnt[2]=eg.Nr(t)):this.Wnt=t}Drt(){return this.eat}unt(t){"color"===this.Jc&&eg.$i(t)?(this.eat[0]=eg.Dr(t),this.eat[1]=eg.Er(t),this.eat[2]=eg.Nr(t)):this.eat=t}o7(){const t=this.zot.yet().K8();return"relative"===t?this.Net():"absolute"===t?this.Drt():void 0}LC(){return this.Jc}ket(t){this.Jc=t}DO(){return this.IR}TV(t){this.IR=t,this.zot.cat()}fnt(){return this.Qot}BV(t){this.Qot=t}mit(){return this.Jot}git(t){this.Jot=!!t}Y8(){return this.hat}r7(t){if(!this.nat)return;if(this.rat||null===this.rat)return this.rat;const s=this.nat.fat();if(!s)return this.rat=null,this.rat;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.YV()===t)return this.rat=i,this.rat}return this.rat=null,this.rat}t3(){const t=this.nat;return{addonDataJson:t?t.t3():t,value:this.Wnt,aValue:this.eat,type:this.Jc,time:this.IR,ease:this.Qot,enable:this.Jot}}s3(t){t&&(t.addonDataJson&&this.nat.dat(t.addonDataJson),this.Wnt=t.value,this.eat=t.aValue,this.Jc=t.type,this.IR=t.time,this.Qot=t.ease,this.Jot=t.enable)}}eg.Uot=class{constructor(t,s){this.net=s,this.oet=[],this.pat=[],eg.W5.aot(this.oet,t,ng,this),eg.W5.lot(this.pat,t,ng,this),this.cat()}Jn(){this.net=null;for(const t of this.oet)t.Jn();eg.wh(this.oet),this.oet=null;for(const t of this.pat)t.Jn();eg.wh(this.pat),this.pat=null}cat(){let t=this.oet;t.sort(((t,s)=>t.DO()-s.DO()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.qot(t[s+1]),s-1>=0&&i.lat(t[s-1])}t=this.pat,t.sort(((t,s)=>t.DO()-s.DO()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.qot(t[s+1]),s-1>=0&&i.lat(t[s-1])}}ont(){const t=new ng(null,this);return this.oet.push(t),this.cat(),t}ant(t){for(const s of this.oet){if(!t(s))continue;const i=this.oet.indexOf(s);-1!==i&&(s.Jn(),this.oet.splice(i,1))}this.mat(),this.cat()}mat(){this.oet.sort(((t,s)=>t.DO()-s.DO()))}yet(){return this.net}gat(){return this.oet.length}Nrt(){return this.oet[this.oet.length-1]}aet(){return this.oet}W8(){return this.pat}*yat(){for(const t of this.oet)yield t}*Mat(){for(let t=this.oet.length-1;t>=0;t--)yield this.oet[t]}t3(){const t=this.oet,s=this.pat;return{propertyKeyframeDataItemsJson:t.map((t=>t.t3())),propertyKeyframeDataItemsIncludingDisabledJson:s.map((t=>t.t3()))}}s3(t){t&&(eg.W5.cot(this.oet,t.propertyKeyframeDataItemsJson,ng,this),eg.W5.cot(this.pat,t.propertyKeyframeDataItemsIncludingDisabledJson,ng,this),this.cat())}}}{const rg=self.Cs;class hg{constructor(t,s){this.nat=s,this.jc=t[0],this.wat=t[1]}Jn(){this.nat=null,this.wat=null}uat(){return this.nat}YV(){return this.jc}t3(){return{id:this.jc,data:this.wat}}s3(t){t&&(this.jc=t.id,this.wat=t.data)}}class og extends hg{constructor(t,s){super(t,s),this.Sat=this.wat[0],this.Tat=!!this.wat[1],this.bat=this.wat[2],this.xat=!!this.wat[3]}Jn(){super.Jn()}l7(){return this.Sat}iot(){return this.Tat}d7(){return this.bat}eot(){return this.xat}t3(){return Object.assign(super.t3(),{startAnchor:this.Sat,startEnable:!!this.Tat,endAnchor:this.bat,endEnable:!!this.xat})}s3(t){t&&(super.s3(t),this.Sat=t.startAnchor,this.Tat=!!t.startEnable,this.bat=t.endAnchor,this.xat=!!t.endEnable)}}class ag extends hg{constructor(t,s){super(t,s),this.vat=this.wat[0],this.Iat=this.wat[1]}Jn(){super.Jn()}rot(){return this.vat}not(){return this.Iat}t3(){return Object.assign(super.t3(),{direction:this.vat,revolutions:this.Iat})}s3(t){t&&(super.s3(t),this.vat=t.direction,this.Iat=t.revolutions)}}rg.oat=class{constructor(t,s){this.Cat=s,this.Gat=[],rg.W5.aot(this.Gat,t,{fot:0,map:new Map([["cubic-bezier",og],["angle",ag]])},this)}Jn(){this.Cat=null;for(const t of this.Gat)t.Jn();rg.wh(this.Gat),this.Gat=null}_at(){return this.Cat}fat(){return this.Gat}*Dat(){for(const t of this.Gat)yield t}t3(){return{addonDataItemsJson:this.Gat.map((t=>t.t3()))}}s3(t){t&&rg.W5.cot(this.Gat,t.addonDataItemsJson,{fot:"id",map:new Map([["cubic-bezier",og],["angle",ag]])},this)}}}{const ug=self.Cs;let lg=0;ug.Pht=class extends ug.x6{constructor(t,s){super("tween-"+lg++,t,s),this.jc="",this.Eat=!1,this.Nat="start-value",this.Est=null,this.Aat=null,this.Lat=null,this.eet=null,this.Oat=null}j9(t){const s=ug.Qn(ug.Event,"tweenstatereleased");s.Rat=this,t.dispatchEvent(s)}LC(){return 1}l9(){for(const t of this.r9.U9().B9())this.h9.push(ug.Pat.EI(this,t));this.eet=this.h9[0]}ast(){const t=this.r9.U9().ust(),s=ug.Pat.EI(this,t);return this.h9.push(s),this.kat(),s}kat(){this.eet=this.h9[0]}HV(t){return this.eet.yst()[0]}Pet(t){this.Fat=t}UV(){const t=this.z8();if(!t||!t.length)return;const s=t[0];if(this.eet=s,!s)return;const i=s.UV();return s.Hst()?i:void 0}jat(t){this.Lat||(this.Lat=[]),this.Lat.push(t)}zat(t){this.Aat||(this.Aat=[]),this.Aat.push(t)}Bat(t){if(!this.Lat)return;const s=this.Lat.indexOf(t);-1!==s&&this.Lat.splice(s,1)}Uat(t){if(!this.Aat)return;const s=this.Aat.indexOf(t);-1!==s&&this.Aat.splice(s,1)}Wat(t,s){for(const i of this.h9)for(const e of i.jst){if(e.Mst()!==s)continue;const i=e.Qst(),n=e.yet(),r=i.jet(n);r.dnt(t),r.unt(t)}}Qat(t){for(const s of this.h9)for(const i of s.jst)if(i.Mst()===t)return i}Jat(t){for(const s of t){const t=this.Qat(s);this.Wat(t.$et(),s)}if(this.ott()){const t=this.xV()-this.DO();this.bV(t);for(const s of this.h9)s.pit(t);this.Ltt(0)}else{const t=this.DO();this.bV(t);for(const s of this.h9)s.pit(t);this.Ltt(t)}this.Ott()}Yat(t,s){const i=this.Qat(s),e=i.Qst(),n=i.yet(),r=e.Nrt(n);r.TV(this.xV()),r.dnt(t),r.unt(t)}Vat(t){this.jc=t}YV(){return this.jc}Hat(t){this.Nat=t}qat(){return this.Nat}JV(t){this.Eat=t}QV(){return this.Eat}ftt(){if(this.Lat)for(const t of this.Lat)t(this);if(!this.g8())for(const t of this.h9)t.Hit()}Stt(){this.I9=this.kc.Ttt()}M8(){if(!this._9&&(this._9=!0,this.Aat))for(const t of this.Aat)t(this)}TV(t){this.Xat(),super.TV(t)}jtt(t){ug.$i(t)||(t=this.xV()),t<0?this.d9=0:t>=this.xV()?this.d9=this.xV():this.d9=t,this.eet.ztt()}a8(t){if(!this.y8()&&"current-state"===this.qat())for(const t of this.h9)t.Vit();super.a8(t)}MV(t=!1){if(super.MV(t),!this.g8())for(const t of this.h9)t.Yit()}Ff(t=!0,s=!1){this.Xat(),super.Ff(t,s)}Xat(){for(const t of this.h9){const s=t=>{const s=t.DO(),i=this.xV();return 0!==s&&s!==i};t.Wit(s),t.Jit(s)}}o6(){if(this.gV())return!0;const t=this.UV();return!(t&&t.GW().e0()||(this.n9.n8(this),this.Htt(),0))}f8(t,s,i){if(this.Est||(this.Est=this.UV()),!this.Est||this.Est.NH())return this.MV(!0),void this.Stt();const e=this.Est.mF();if(-1!==e&&(t=i*e),0===t&&0===this.E9)return;this.E9=t;const n=this.d9+this.p9+t*this.m9,r=this.r9.$tt;n<0?(this.d9=0,this.p9=-n):n>=r?(this.d9=r,this.p9=this.d9-n):(this.d9=n,this.p9=0);let h=!1,o=!1;const a=this.IV(),u=this.GV();if(a||u?a&&!u?this.m9>0?this.d9>=r&&(this.jtt(0),this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),o=!0):this.d9<=0&&(this.jtt(r),this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),o=!0):!a&&u?this.m9>0?this.d9>=r&&(this.Ltt(r),this._V(-1*this.DV()),o=!0,1===this.g9?this.M9<this.UY()?(this.M9++,this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut),this.IsPlaying()?this.g9=0:this.y9=0):(this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut),h=!0):0===this.g9&&(this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut),this.IsPlaying()?this.g9=1:this.y9=1)):this.d9<=0&&(this.Ltt(0),this._V(-1*this.DV()),o=!0,1===this.g9?this.M9<this.UY()?(this.M9++,this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut),this.IsPlaying()?this.g9=0:this.y9=0):(h=!0,this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut)):0===this.g9&&(this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut),this.IsPlaying()?this.g9=1:this.y9=1)):a&&u&&(this.m9>0?this.d9>=r&&(this.Ltt(r),this._V(-1*this.DV()),o=!0,0===this.g9&&(this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut)),1===this.g9&&(this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut)),this.IsPlaying()?(this.g9++,this.g9=ug.wrap(this.g9,0,2)):(this.y9=this.g9+1,this.y9=ug.wrap(this.y9,0,2))):this.d9<=0&&(this.Ltt(0),this._V(-1*this.DV()),o=!0,0===this.g9&&(this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut)),1===this.g9&&(this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),this.Zat(ug.tut.$at.Cj.iut),this.Zat(ug.tut.$at.Cj.eut)),this.IsPlaying()?(this.g9++,this.g9=ug.wrap(this.g9,0,2)):(this.y9=this.g9+1,this.y9=ug.wrap(this.y9,0,2)))):this.m9>0?this.d9>=r&&(this.M9<this.UY()?(this.M9++,this.jtt(0),this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),o=!0):(this.Ltt(r),h=!0)):this.d9<=0&&(this.M9<this.UY()?(this.M9++,this.jtt(r),this.Zat(ug.tut.$at.Cj.Kat),this.Zat(ug.tut.$at.Cj.sut),o=!0):(this.Ltt(0),h=!0)),this.IsPlaying()){if(h)return this.eet.tst(),this.MV(!0),void this.Stt();this.eet.Mc(this.d9,!0,!1,o,this.D9,!1),this.D9&&(this.D9=!1)}}Zat(t){const s=this.UV(),i=s.nut(ug.tut.$at);i.rut(this),this.kc.uQ(t,s,i.CY()),i.hut()}t3(){const t=super.t3(),s=this.q9();return Object.assign(t,{tweenDataItemJson:s.t3(),id:this.jc,destroyInstanceOnComplete:this.Eat,initialValueMode:this.Nat})}s3(t){t&&(this.q9().s3(t.tweenDataItemJson),super.s3(t),this.jc=t.id,this.Eat=t.destroyInstanceOnComplete,this.Nat=t.initialValueMode,this.kat())}static IsPlaying(t){return t.IsPlaying()}static OV(t){return t.OV()}static out(t){return!!t.GV()&&0===t.htt()}static aut(t){return!!t.GV()&&1===t.htt()}static uut(t){const s=t.runtime.Q9(),i=new ug.oot;if(t.json){i.s3(t.json.tweenDataItemJson);const e=new ug.Pht(i,s);return e.s3(t.json),e}{const e=new ug.Pht(i,s);ug.xe(t.lut)||(t.lut=[t.lut]),e.Vat(t.id),e.att(t.tags),e.Hat(t.cut),e.JV(t.fut),e.vV(t.loop),e.CV(t.dut),e.bV(t.time),e.Z9(0),e.ttt("default"),e.stt(t.lut[0].mut),e.itt(t.BY);const n=e.ast();n.fit(t.GY.zW()),n.ttt("default"),n.stt(t.lut[0].mut),n.git(!0),n.yit(t.GY.GW().ik());const r=t.GY.gY(),h=r.Sit()?r.wit():t.GY.oj().Bg(),o=r.Sit()?r.bit():t.GY.oj().Zg();n.Mit(h),n.Tit(o);const a=n.jit();a.TV(0),a.BV("noease"),a.git(!0),a.att("");const u=n.jit();u.TV(t.time),u.BV("noease"),u.git(!0),u.att("");for(const s of t.lut){const i=n.Bit();i.Cet(s.gut),i.Det(s.yut),i.Let(s.uit),i.Pet(s.type),i.Bet(NaN),i.Wet(NaN),i.ttt("default"),i.stt(s.mut),i.git(!0);const e=i.hnt();e.ket(s.valueType),e.TV(0),e.BV(s.Mut),e.git(!0),e.dnt(s.wut),e.unt(s.wut);const r=i.hnt();r.ket(s.valueType),r.TV(t.time),r.BV(s.Mut),r.git(!0),r.dnt(s.Sut),r.unt(s.Sut),i.Y9()}return e}}static fit(t,s){if(!isNaN(s))for(const i of t.z8())i.fit(s)}Tut(t,s){return this.Oat||(this.Oat=ug.Qn(self.kV,this,t,s)),this.Oat}}}{const cg=self.Cs;cg.Pat=class extends cg.W9{constructor(t,s){super(t,s),this.but=null,this.xut=null}static EI(t,s){return cg.Qn(cg.Pat,t,s)}vut(){1===this.jst.length?this.but=this.jst[0]:(this.but=this.jst[0],this.xut=this.jst[1])}zst(){for(const t of this.Cst.Qst().Wst())this.jst.push(cg.Iut.EI(this,t));this.vut()}Bit(){const t=this.Cst.Qst().Uit(),s=cg.Iut.EI(this,t);return this.jst.push(s),this.vut(),s}a8(){if(this.Vst(),!this.Hst()&&this.H9())return;const t=this.Yst().ott()?0:this.dit();for(const s of this.jst)s.a8(t),0===this.Bst&&1===s.Iit()&&(this.Bst=1),0===this.w6&&1===s.u8()&&(this.w6=1);this.Ust=0,this.jst.some((t=>t.Ktt()))&&(this.Ust=1),this.Pst=this.Cit(t),this.Lst=!1,this.Ost=!1,this.Mc(t)}sst(){}Mc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Est||this.UV(),this.Est)return!this.Est.NH()&&(!r||!this.GW().e0())&&(this.xut?(this.but.Mc(t,i,e,h),this.xut.Mc(t,i,e,h)):this.but.Mc(t,i,e,h),void(0!==this.but.Iit()&&(this.Nst||(this.Nst=this.Est.oj()),this.Nst&&this.Nst.FQ())))}rst(){}s3(t){super.s3(t),this.vut()}}}{const fg=self.Cs;fg.Iut=class extends fg.Jst{constructor(t,s){super(t,s),this.Cut=!1}static EI(t,s){return fg.Qn(fg.Iut,t,s)}Mc(t,s=!1,i=!1,e=!1){let n,r;if(this.Cut)n=this.oet[0],r=this.oet[1];else if(s)n=this.ret.Vet(t,this.net),r=n.Q8();else{if(this.let){const s=this.Yst(),i=this.let.Q8(),e=this.let.DO(),n=i?i.DO():s.xV();(t<=e||t>=n)&&(this.let=this.ret.Vet(t,this.net))}else this.let=this.ret.Vet(t,this.net);n=this.let,r=n.Q8()}this.het.Mc(t,n,r,s,i,e)}hnt(){const t=this.net.uet().ont();return this.let=null,this.Cut=this.Qet().length<=2,t}Jit(t){this.let=null,this.net.uet().ant(t),this.Cut=this.Qet().length<=2}t3(){return{sourceAdapterJson:this.Y9().t3(),basic:this.Cut}}s3(t){t&&(this.Y9().s3(t.sourceAdapterJson),this.Cut=t.basic)}}}{const dg=self.Cs,pg=self.Bl;dg.wc=class extends dg.Un{constructor(t,s=!0){super(),this.Hn=t[0],this.Gut=t[2],this._ut=[];for(const s of t[1]){const t=dg.Dut.EI(this,s);this._ut.push(t)}for(let t=0;t<this._ut.length;t++){const s=this._ut[t],i=this._ut[t+1],e=this._ut[t-1];s.qot(i),s.lat(e)}this.Eut=new Map,this.Nut=new Map,this.Aut(),s&&pg.Tc(this.Hn,((t,s,i,e)=>this.Mc(t,s,i,e)),null,{transition:this})}static EI(t){return dg.Qn(dg.wc,t)}Jn(){for(const t of this._ut)t.Jn();dg.wh(this._ut),this._ut=null,this.Eut.clear(),this.Eut=null,this.Nut.clear(),this.Nut=null}Sc(t){this.Gut=!!t}Lut(t){const s=this.Nut.get(t);if(s)return s;for(const s of this._ut)if(s.Out()===t)return this.Nut.set(t,s),s}Rut(t){for(let s=this._ut.length-1;s>=0;s--){const i=this._ut[s],e=i.Out();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.J8();if(!t)break;if(t.Out()!==s.Out())break;s=t}return s}}}}Mc(t,s,i,e){let n=t/e;if(this.Gut){const n=this.Lut(0),r=this.Lut(1),h=s+(s+i)*n.Put(),o=(s+i)*r.Put()-h;return 0===e?h+o:pg.xc(t,h,o,e)}0===e&&(n=1);let r=this.Rut(n),h=r.Q8();if(!h){const t=r.J8(),s=r;r=t,h=s}const o=h.Out()-r.Out(),a=dg.qn(n,r.Out(),h.Out(),0,o);if(r.kut()||0===o){const t=s+(s+i)*r.Put(),e=(s+i)*h.Put()-t;return 0===o?1===a?t+e:t:pg.xc(a,t,e,o)}const u=r.Out(),l=r.Put(),c=r.Out()+r.Fut(),f=r.Put()+r.jut(),d=h.Out()+h.zut(),p=h.Put()+h.But(),m=h.Out(),g=h.Put();let y=pg.nc("spline")(a,u,l,c,f,d,p,m,g,this.Eut.get(r));return y+=r.Put(),(1-y)*s+y*(s+i)}Aut(){this.Eut.clear();for(let t=0;t<this._ut.length-1;t++){const s=this._ut[t];if(!s.iot())continue;const i=s,e=this._ut[t+1];if(!e.eot())continue;const n=i.Out(),r=i.Out()+i.Fut(),h=e.Out()+e.zut(),o=e.Out();this.Eut.set(i,pg.vc(n,r,h,o))}}}}{const mg=self.Cs;mg.Dut=class extends mg.Un{constructor(t,s){super(),this.Uut=t,this.Wut=s[0],this.Qut=s[1],this.Jut=s[2],this.Yut=s[3],this.Vut=s[4],this.Hut=s[5],this.Tat=s[6],this.xat=s[7],this.qut=s[8],this.Vot=null,this.aat=null}Jn(){this.Uut=null}static EI(t,s){return mg.Qn(mg.Dut,t,s)}qot(t){this.Vot=t}Q8(){return this.Vot}lat(t){this.aat=t}J8(){return this.aat}Out(){return this.Wut}Put(){return this.Qut}Fut(){return this.Jut}jut(){return this.Yut}zut(){return this.Vut}But(){return this.Hut}iot(){return this.Tat}eot(){return this.xat}kut(){return"linear"===this.qut}Xut(){return"cubic"===this.qut}}}{const gg=self.Cs;gg.Zut=class extends gg.Un{constructor(t){super(),this.kc=t,this.Kut=[]}Jn(){for(const t of this.Kut)t.Jn();gg.wh(this.Kut),this.Kut=null}EI(t){this.Kut.push(gg.wc.EI(t))}}}{const yg=self.Cs;yg.$ut=class extends yg.Un{constructor(t){super(),this.kc=t,this.tlt=null,this.slt=null,this.l6=t=>this.c6(t.GY)}Jn(){if(this.S6(),this.tlt){for(const t of this.tlt.values())t.clear();this.tlt.clear()}this.tlt=null,this.kc=null}EI(t){if(this.tlt||(this.tlt=new Map),!t)return;const s=t[0][16][0],i=t[1];this.tlt.has(i)||this.tlt.set(i,new Map),this.tlt.get(i).set(s,t)}T6(){const t=this.kc.yf();t&&t.addEventListener("instancedestroy",this.l6)}S6(){const t=this.kc.yf();t&&t.removeEventListener("instancedestroy",this.l6)}ilt(){return!!this.tlt&&0!==this.tlt.size}elt(t,s){let i=0;if(i=t instanceof yg.nlt?t.ik():t,!this.tlt.has(i))return;const e=this.tlt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}rlt(t,s){this.slt||(this.slt=new WeakMap),this.slt.has(t)||this.slt.set(t,s)}hlt(t){if(!this.slt)return"";return this.slt.get(t)||""}c6(t){this.slt&&this.slt.has(t)&&this.slt.delete(t)}}}{const Mg=self.Cs;Mg.olt=class{constructor(t){this.kc=t,this.ult=new Mg.llt}Jn(){this.ult.Jn(),this.ult=null,this.kc=null}Rj(){return this.kc}EI(t){this.ult.Fl(t)}clt(t){return this.ult.Js(t)}flt(){return this.ult.flt()}}}{const wg=self.Cs;wg.dlt=class{constructor(t,s,i,e,n,r,h){this.kc=n.Rj(),this.plt=n,this.mlt=t,this.glt=i,this.ylt=e,this._M=s,this.Q5=r,this.Mlt=h??r.UV().zW(),this.wlt(),this.Slt=this.blt?.Tlt()??-1,this.xlt=[],this.vlt=null,this.Ilt=NaN,this.Clt=null,this.Glt=null,this._lt=null,this.Dlt="",this.Elt=null,this.Nlt="",this.Alt="",this.Llt=0,this.Olt=!1,this.x9=!1}Jn(){this.x9||(wg.wh(this.xlt),this.xlt=null,this.kc=null,this.plt=null,this.ylt=null,this.Q5=null,this.vlt=null,this.Ilt=NaN,this.Clt&&this.Clt.clear(),this.Clt=null,this.Glt=null,this._lt=null,this.Dlt="",this.Elt=null,this.Nlt="",this.Alt="",this.x9=!0)}Yn(){return this.x9}Rlt(){return this.plt}Rj(){return this.kc}_c(){return this.mlt}Plt(){return this.ylt}mV(){return this._M}O6(){return this.Q5||(this.Q5=this.kc.ij(this.Mlt).gY()),this.Q5}klt(){return this.Flt(this.Slt)}jlt(){const t=this.klt();return t?t.mV():""}zlt(){const t=this.klt();return t?t.EV():[]}Blt(t){const s=this.zlt();if(!s)return!1;if(!s.length)return!1;const i=wg.dlt.utt(t);return!(!i||!i.length)&&i.every(wg.dlt.ctt,s)}Ult(t,s){const i=this.zlt();if(!i)return!1;if(!i.length)return!1;const e=wg.dlt.utt(t);return!(!e||!e.length)&&e.every((t=>wg.dlt.Wlt.call(i,t,s)))}static ctt(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map((t=>t.trim().toLowerCase())).includes(t.trim().toLowerCase())}static utt(t){return t.trim().split(" ")}static Wlt(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some((i=>wg.compare(i.trim(),s,t.trim())))}Qlt(t){const s=this.klt();if(s){if(wg.$i(t)){const i=s.Jlt(),e=i?i[t]:void 0;if(wg.$i(e))return this.Flt(e)}if("string"==typeof t)for(const i of s.Jlt()){const s=this.Flt(i);if(s.SV(t))return this.Flt(s.Tlt())}}}Ylt(t){const s=this.Qlt(t);return s?s.mV():""}Vlt(t){const s=this.Qlt(t);return s?s.EV():""}Hlt(t){const s=this.klt();if(!s)return-1;const i=s.Jlt();if(!i)return-1;const e=this.Qlt(t);return e?i.indexOf(e.Tlt()):-1}qlt(){const t=this.klt();if(!t)return 0;const s=t.Jlt();return s?s.length:0}Flt(t){return this.ylt.Flt(t)}Ff(){this.Zlt().Xlt(!0)}Xlt(t){if(this.Klt()){for(const[t,s]of this.Klt().entries())s.Xlt(!1);this.Klt().clear()}if(this.Clt=null,this.vlt=null,this.$lt=null,this.Glt=null,this.Dlt="",this.Elt=null,this.Nlt="",this.Alt="",this.xlt=[],t){this.plt.tct(this);const t=this.blt.Tlt();t!==this.Slt&&this.sct(t)}else this.Slt=this.blt.Tlt()}ict(){const t=this.ylt.Flt(this.Slt);return t?t.nct().ect():0}rct(t){return!(t<0)&&t===this.hct()}hct(){const t=this.ylt.Flt(this.Slt);if(!t)return-1;let s=t.nct().oct();return s?t.nct().act().indexOf(s):-1}uct(t){const s=this.lct(t);return s?s._c():""}cct(t){let s;return wg.$i(t)&&(s=this.lct(t)),"string"==typeof t&&(s=this.fct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Net():""}dct(t,s){if(t.mit())return t.Tlt();{const i=t.nct().oct();if(!i)return s.Tlt();const e=i.pct();if(!wg.$i(e))return s.Tlt();const n=this.Flt(e);return n?this.dct(n,s):s.Tlt()}}mct(t,s){if(t.mit()){if("reference"===t.LC()){const s=t.gct(),i=t.yct(),e=this.plt.clt(s);if(!e)return[-1,null];const n=e.Mct(i);return n?this.mct(n,e):this.mct(e.wct(),e)}return[t.Tlt(),s]}{const i=t.nct().oct();if(!i)return[-1,null];const e=i.pct();if(!wg.$i(e))return[-1,null];const n=s.Flt(e);return n?this.mct(n,s):[-1,null]}}Sct(t,s){let i=this.Flt(t);if(i){if(!i.mit()){const s=this.Flt(this.Slt);t=this.dct(i,s)}if(wg.$i(t)&&t!==this.Slt)if(i=this.Flt(t),"reference"===i.LC()){const e=i.gct(),n=i.yct(),r=this.plt.clt(e);let h=r.Mct(n);if(h){const i=this.mct(h,r);if(-1===i[0])return;s(this.Slt,t,i[1],i[0])}else s(this.Slt,t)}else s(this.Slt,t)}}Tct(t){let s;if(wg.$i(t)&&(s=this.lct(t)),"string"==typeof t&&(s=this.fct(t)),!s)return;let i=s.pct();wg.$i(i)&&this.Sct(i,((t,s,i,e)=>{this.xlt.push(t),this.sct(s,i,e)}))}bct(){const t=this.xct();if(!t)return;const s=t.pct();wg.$i(s)&&this.Sct(s,((t,s,i,e)=>{this.xlt.push(t),this.sct(s,i,e)}))}vct(t){const s=this.ylt.Mct(t);if(!s)return;const i=s.Tlt();wg.$i(i)&&this.Sct(i,((t,s,i,e)=>{this.xlt.push(t),this.sct(s,i,e)}))}Ict(){const t=this.xlt.pop();wg.$i(t)?this.sct(t):this.Cct()&&(this.plt.tct(this.Cct(),!0,!1,!1),this.Cct().sct(this.Gct()),this.Zlt()._ct(this.Cct()))}Dct(t){if(!this.klt())return;const s=this.Qlt(t);if(s){if(!s.mit())return;const t=s.Tlt();if(!wg.$i(t))return;this.xlt.push(this.Slt),this.sct(s.Tlt())}}Ect(t){if(wg.$i(t))return!!this.ylt.Flt(this.Slt).nct().act()[t];if("string"==typeof t){const s=this.ylt.Flt(this.Slt).nct().act();for(let i=0;i<s.length;i++)if(s[i]._c()===t)return!0;return!1}return!1}Nct(){this.Olt=!0}Act(){return this.Llt>0}Lct(){this.Llt++}Oct(){this.Llt--,0===this.Llt&&this.Olt&&this.plt.Rct(this)}sct(t,s,i){const e=this.Slt,n=this.O6().UV();this.Lct(),this.plt.Pct(this),this.kc.uQ(wg._j.Fct.Cj.kct,n),this.kc.uQ(wg._j.Fct.Cj.jct,n),this.kc.uQ(wg._j.Fct.Cj.zct,n),this.kc.uQ(wg._j.Fct.Cj.Bct,n),this.Slt=t;let r=this.Flt(this.Slt);if("dictionary"===r.LC()&&(this.kc.uQ(wg._j.Fct.Cj.Uct,n),this.kc.uQ(wg._j.Fct.Cj.Wct,n),this.kc.uQ(wg._j.Fct.Cj.Qct,n),this.kc.uQ(wg._j.Fct.Cj.Jct,n)),this.plt.Yct(),this.Oct(),!this.Yn()&&(r=this.Flt(this.Slt),"reference"===r.LC())){const t=s?s._c():r.gct();if(this.Vct(r)){this.xlt.pop();const t=this.Hct(r);this.plt.tct(t,!0,!0,!1),t.qct(this,e),this.Zlt()._ct(t)}else{const s="number"==typeof i?i:r.yct();if(t){this.xlt.pop();let i=r.Xct();if(i){let t=this.plt.Zct(i);for(;t;)i=wg.Im(i),t=this.plt.Zct(i)}else{i=`${t}-ref`;let s=this.plt.Zct(i);for(;s;)i=wg.Im(i),s=this.plt.Zct(i)}const n=this.plt.Kct(t,s,i,this.Q5,!0);n.qct(this,e),this.$ct(r,n);const h=this.Zlt();n.tft(h),h._ct(n)}}}}xct(){const t=this.ylt.Flt(this.Slt);return t?t.nct().oct():null}lct(t){const s=this.ylt.Flt(this.Slt);if(!s)return null;const i=s.nct().act();if(!i)return null;return i[t]||null}fct(t){const s=this.ylt.Flt(this.Slt);if(!s)return null;return s.nct().sft(t)||null}wlt(t){if("number"==typeof t){let s=this.Flt(t);s||(s=this.ylt.wct()),this.blt=s}else if("number"==typeof this.glt){let t=this.Flt(this.glt);t||(t=this.ylt.wct()),this.blt=t}else{let t=this.ylt.Mct(this.glt);t||(t=this.ylt.wct()),this.blt=t}}t3(){return this.Olt?null:{flowchartName:this.mlt,flowchartTag:this._M,startNodeTag:this.glt,currentNodeId:this.Slt,previousNodeIds:this.xlt,pluginUID:this.Q5.UV().zW(),reference:{previousFlowchartTag:this.Cct()?this.Cct().mV():"",previousStartNodeId:wg.$i(this.Gct())?this.Gct():NaN,referencesJson:this.ift(),currentReferenceFlowchartTag:this.eft()?this.eft().mV():"",rootFlowchartTag:this.Zlt()?this.Zlt().mV():""}}}ift(){if(!this.nft())return null;const t=[];for(const[s,i]of this.Klt().entries())t.push({flowchartElementId:s.Tlt(),flowchartStateTag:i.mV()});return t.length?t:null}s3(t){if(t){if(this.mlt=t.flowchartName,this._M=t.flowchartTag,this.glt=t.startNodeTag,this.Slt=t.currentNodeId,this.xlt=t.previousNodeIds,this.Mlt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Dlt=s.previousFlowchartTag,this.Ilt=s.previousStartNodeId,this.Elt=s.referencesJson,this.Nlt=s.currentReferenceFlowchartTag,this.Alt=s.rootFlowchartTag}this.wlt()}}Cct(){return"string"==typeof this.Dlt&&this.Dlt&&(this.vlt=this.plt.Zct(this.Dlt),this.Dlt=""),this.vlt}Gct(){return this.Ilt}qct(t,s){this.vlt=t,this.Ilt=s}eft(){return"string"==typeof this.Nlt&&this.Nlt&&(this.Glt=this.plt.Zct(this.Nlt),this.Nlt=""),this.Glt}_ct(t){this.Glt=t,this.Glt===this&&(this.Glt=null)}Zlt(){return"string"==typeof this.Alt&&this.Alt&&(this._lt=this.plt.Zct(this.Alt),this.Alt=""),this._lt?this._lt:this}tft(t){this._lt=t}nft(){return this.rft(),!!this.Clt}Vct(t){return this.rft(),this.Clt&&this.Clt.has(t)}rft(){if(this.Elt){this.Clt&&this.Clt.clear(),this.Clt||(this.Clt=new Map);for(const t of this.Elt){const s=this.plt.Zct(t.flowchartStateTag),i=s.Flt(t.flowchartElementId);this.Clt.set(i,s)}this.Elt=null}}Klt(){return this.rft(),this.Clt}Hct(t){return this.rft(),this.Clt.get(t)}$ct(t,s){this.Clt||(this.Clt=new Map),this.Clt.set(t,s)}}}{const Sg=self.Cs;Sg.hft=class{constructor(t){this.kc=t,this.oft=new Map,this.aft=null,this.uft=[],this.lft=()=>this.m6(),this.cft=null}Jn(){Sg.wh(this.uft),this.uft=null,this.oft.clear(),this.oft=null,this.aft=null,this.kc=null,this.cft=null}Rj(){return this.kc}clt(t){return this.kc.Rlt().clt(t)}Kct(t,s,i,e,n,r){const h=this.kc.Rlt().clt(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.oft.has(i)){const t=this.oft.get(i);return void(t&&this.Rct(t))}const o=new Sg.dlt(t,i,s,h,this,e,r);return this.oft.set(i,o),n&&this.tct(o,!0),o}Rct(t){if(t.Nct(),t.Act())return;const s=t.mV();this.oft.delete(s),t.Jn(),this.aft===t&&(this.aft=null)}fft(t){t.Ff()}Zct(t){return this.oft.get(t)}Pct(t){this.uft.push(t)}Yct(){this.uft.pop()}tct(t,s=!1,i=!1,e=!0){if(e){const s=t.eft();t=s||t}t!==this.aft&&(this.dft(),this.pft(t,s,i))}mft(t){return"string"==typeof t?this.Zct(t):this.uft.length?this.uft[this.uft.length-1]:this.aft}dft(){if(!this.aft)return;if(this.aft.Yn())return;const t=this.aft.O6().UV();this.aft.Lct(),this.Pct(this.aft),this.kc.uQ(Sg._j.Fct.Cj.gft,t),this.Yct(),this.aft.Oct()}pft(t,s=!1,i=!1){if(this.aft=t,!this.aft)return;if(this.aft.Yn())return;const e=this.aft.O6().UV();this.aft.Lct(),this.Pct(this.aft),this.kc.uQ(Sg._j.Fct.Cj.yft,e),!0!==i&&"number"!=typeof i||this.aft.wlt(i),s&&(this.kc.uQ(Sg._j.Fct.Cj.Uct,e),this.kc.uQ(Sg._j.Fct.Cj.Wct,e),this.kc.uQ(Sg._j.Fct.Cj.Qct,e),this.kc.uQ(Sg._j.Fct.Cj.Jct,e)),this.Yct(),this.aft.Oct()}t3(){return{flowchartJsonObjects:[...this.oft.values()].map((t=>t.t3())),currentFlowchartTag:this.aft?this.aft.mV():null}}s3(t){if(!t)return;this.cft=t;const s=new Map;for(const t of this.cft.flowchartJsonObjects){const i=t.flowchartTag;if(this.oft.has(i)){const e=this.oft.get(i);e.s3(t),s.set(i,e)}else{const i=this.Kct(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.s3(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.oft.entries())s.has(t)||i.Jn();this.oft.clear(),this.oft=s,this.kc.F4()?this.kc.yf().addEventListener("afterload",this.lft):this.m6()}m6(){this.kc.yf().removeEventListener("afterload",this.lft);const t=this.oft.get(this.cft.currentFlowchartTag);t&&this.tct(t,!0),this.cft=null}}}{const Tg=self.Cs;Tg.llt=class{constructor(){this.Mft=new Map}Jn(){for(const t of this.Mft.values())t.Jn();this.Mft.clear(),this.Mft=null}Fl(t){const s=new Tg.wft(t),i=s._c();this.Mft.set(i,s)}Js(t){return this.Mft.get(t)}flt(){return!!this.Mft.size}static Sft(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const bg=self.Cs;bg.wft=class{constructor(t){this.Hn=t[0],this.Tft=new bg.bft(t[1],this)}Jn(){this.Tft.Jn(),this.Tft=null}xft(){return this.Tft}Flt(t){return this.Tft.Flt(t)}Mct(t){return this.Tft.Mct(t)}wct(){return this.Tft.wct()}_c(){return this.Hn}}}{const xg=self.Cs;class vg{constructor(t,s){this.Tft=s,this.Jc=t[7],this.vft=t[0],this._M=t[1],this._M?this.N9=this._M.trim().split(" ").map((t=>t.trim())):this.N9=[],this.Ift=t[2],this.Cft=null,this.Gft=null,this.Jot=!1,"dictionary"===this.Jc&&(this.Cft=t[3],this.Gft=t[4],this.Jot=t[8]),this._ft=t[6],this.Dft=null,this.Eft=null,this.Nft=null,"reference"===this.Jc&&(this.Dft=t[8],this.Eft=t[9],this.Nft=t[10],this.Jot=t[11]),this.Aft=new xg.Lft(t[5],this)}Jn(){this.Tft=null}xft(){return this.Tft}nct(){return this.Aft}Tlt(){return this.vft}mV(){return this._M}EV(){return this.N9}SV(t){if(!this.N9)return!1;if(!this.N9.length)return!1;const s=xg.dlt.utt(t);return!(!s||!s.length)&&s.every(xg.dlt.ctt,this.N9)}Oft(){return this._ft}Rft(t){this._ft=!!t}Pft(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}Jlt(){return this.Ift}kft(){return this.Cft}Fft(){return this.Gft}LC(){return this.Jc}mit(){return this.Jot}gct(){return this.Dft}yct(){return this.Eft}Xct(){return this.Nft}}xg.bft=class{constructor(t,s){this.ylt=s,this.jft=[],this.zft=new Map,this.Bft=new Map,this.Uft=null,xg.llt.Sft(this.jft,t,vg,this);for(const t of this.jft){const s=t.Tlt(),i=t.mV(),e=t.EV(),n=t.Oft();if(this.zft.set(s,t),i)for(const s of e)this.Bft.has(s)||this.Bft.set(s,new Set),this.Bft.get(s).add(t);n&&(this.Uft=t);const r=t.nct();for(const t of r.Wft()){const s=t.Tlt();this.zft.set(s,t)}}this.Uft||this.Qft()}Jn(){this.ylt=null;for(const t of this.jft)t.Jn();xg.wh(this.jft),this.jft=null}Plt(){return this.ylt}Flt(t){return this.zft.get(t)}Mct(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.Bft.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce(((t,s)=>s.size<t.size?s:t))].filter((t=>s.every((s=>s.has(t)))))[0]}wct(){return this.Uft}*Jft(){for(const t of this.jft)yield t}Qft(){let t=0;for(const s of this.Jft())s.Oft()&&t++;if(0===t){for(const t of this.Jft())if(t.Pft()&&!t.Oft())return void t.Rft(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.Jft())s.Pft()&&(s.Oft()&&t?t=!1:s.Oft()&&!t&&s.Rft(!1))}}for(const t of this.Jft())if(t.Pft()&&t.Oft())return void(this.Uft=t)}}}{const Ig=self.Cs;class Cg{constructor(t,s){this.Aft=s,this.vft=t[0],this.Hn=t[1],this.Wnt=t[2],this.Yft=t[3],this.Jot=t[4],this.Vft=t[5]}Jn(){this.Aft=null}nct(){return this.Aft}Tlt(){return this.vft}_c(){return this.Hn}Net(){return this.Wnt}pct(){return this.Yft}mit(){return this.Jot}Hft(){return this.Vft}}Ig.Lft=class{constructor(t,s){this.qft=s,this.Xft=[],this.Zft=new Map,Ig.llt.Sft(this.Xft,t,Cg,this),this.Kft=this.Xft.filter((t=>t.mit()));for(const t of this.Kft)this.Zft.set(t._c(),t)}Jn(){this.qft=null;for(const t of this.Xft)t.Jn();Ig.wh(this.Xft),this.Xft=null,Ig.wh(this.Kft),this.Kft=null}$ft(){return this.qft}ect(){return this.Kft.length}act(){return this.Kft}sft(t){return this.Zft.get(t)}oct(){for(const t of this.Kft)if(t.Hft())return t}*Wft(){for(const t of this.Kft)yield t}}}{const Gg=self.Cs;Gg.tdt=class extends Gg.Un{constructor(t){super(),this.sdt=t,this.idt=[],this.idt.push(Gg.Qn(Gg.edt,this)),this.GM=0,this.ndt=this.idt[0]}Jn(){for(const t of this.idt)t.Jn();Gg.wh(this.idt),this.ndt=null,this.sdt=null}GW(){return this.sdt}EB(){return this.ndt}rdt(){return this.idt[this.GM-1]}_l(){this.EB()._l()}hdt(){const t=this.idt,s=++this.GM;if(s===t.length){const s=Gg.Qn(Gg.edt,this);t.push(s),this.ndt=s}else{const i=t[s];i.Ff(),this.ndt=i}}odt(){const t=this.idt,s=++this.GM;s===t.length&&t.push(Gg.Qn(Gg.edt,this));const i=t[s];i.nd(t[s-1]),this.ndt=i}Cq(){this.ndt=this.idt[--this.GM]}adt(t){const s=this.idt;for(let i=0,e=s.length;i<e;++i)s[i].adt(t)}}}{const _g=self.Cs;_g.edt=class extends _g.Un{constructor(t){super(),this.idt=t,this.sdt=this.idt.GW(),this.udt=this.sdt.Rj().Zk(),this.ldt=!0,this.dK=[],this.cdt=[]}Jn(){this.fdt(),this.idt=null,this.sdt=null,this.udt=null}fdt(){_g.wh(this.dK),_g.wh(this.cdt)}GW(){return this.sdt}ddt(){return this.ldt}pdt(){return this.ldt?!!this.sdt.AB():!!this.dK.length}DB(){return this.ldt?this.sdt.DB():this.dK}mdt(){return!!this.cdt.length}gdt(){return this.cdt}ydt(){const t=this.DB();return t.length?t:this.cdt}Ff(){this.ldt=!0,_g.wh(this.cdt)}_l(){this.ldt=!0}nd(t){t.ddt()?this.Ff():(this.ldt=!1,_g.xh(this.dK,t.dK),_g.wh(this.cdt))}Mdt(t){this.dK.push(t)}wdt(t){this.cdt.push(t)}Sdt(t){this.ldt=!!t}Tdt(){return this.dK}bdt(){return this.cdt}xdt(t){this.ldt=!1,_g.wh(this.dK),this.dK.push(t)}vdt(t){this.ldt=!1,_g.xh(this.dK,t)}Idt(t){this.ldt=!1,_g.wh(this.dK);for(const s of t)this.dK.push(s)}Cdt(t,s){for(const i of s)t.has(i)||this.cdt.push(i)}Gdt(t){for(const s of t)this.dK.push(s);_g.Dh(this.cdt,t)}_dt(){_g.wh(this.cdt)}Ddt(t){if(t)if(this.udt.pq().Qk().Edt()){this.ddt()&&(_g.wh(this.dK),_g.xh(this.cdt,t.GW().DB()),this.ldt=!1);const s=this.cdt.indexOf(t);-1!==s&&(this.dK.push(this.cdt[s]),this.cdt.splice(s,1))}else this.xdt(t)}adt(t){_g.Dh(this.dK,t),_g.Dh(this.cdt,t)}}}{const Dg=self.Cs;Dg.Ndt=class extends Dg.Un{constructor(t){super(),this.Adt=t,this.kc=this.Adt.Rj(),this.idt=[],this.idt.push(Dg.Qn(Dg.Ldt,this,null)),this.GM=0,this.Odt=[]}Jn(){for(const t of this.idt)t.Jn();Dg.wh(this.idt),Dg.wh(this.Odt),this.Adt=null,this.kc=null}Fk(){return this.Adt}Rj(){return this.kc}pq(){return this.idt[this.GM]}Rdt(){return this.idt}Pdt(){return this.GM}mq(t){const s=this.idt,i=++this.GM;if(i===s.length){const i=Dg.Qn(Dg.Ldt,this,t);return s.push(i),i}{const e=s[i];return e.Ff(t),e}}Cq(){--this.GM}kdt(t){this.Odt.push(t)}Fdt(){this.Odt.pop()}Xk(){const t=this.Odt;return 0===t.length?null:t.at(-1)}}}{const Eg=self.Cs;Eg.Ldt=class extends Eg.Un{constructor(t,s){super(),this.idt=t,this.kc=this.idt.Rj(),this.jdt=s,this.zdt=0,this.Bdt=0,this.Udt=!1,this.Wdt=!1,this.Qdt=null,this.Jdt=0,this.Ydt=0,this.Vdt=null}Jn(){this.Ff(null),this.idt=null,this.kc=null}Ff(t){this.jdt=t,this.zdt=0,this.Bdt=0,this.Udt=!1,this.Wdt=!1,this.Vdt=null}Hdt(t,s){this.jdt=t,this.zdt=0,this.Bdt=s}qdt(){this.zdt=0,this.Bdt=0}Qk(){return this.jdt}Xdt(t){this.jdt=t}Zdt(){return this.zdt}Kdt(t){this.zdt=t}$dt(){return this.Bdt}tpt(t){this.Bdt=t}spt(t){this.Udt=!!t}ipt(){return this.Udt}ept(t){this.Wdt=!!t}npt(){return this.Wdt}rpt(t){this.Qdt=t}hpt(){return this.Qdt}opt(t,s){this.Jdt=t,this.Ydt=s}Kk(){return this.Jdt}$k(t){this.Ydt=t}apt(){return this.Ydt}upt(){const t=this.jdt;return!!t.lpt()||this.zdt<t.cpt()-1&&!!t.fq().length}fpt(t){this.Vdt=t}dpt(){return this.Vdt}}}{const Ng=self.Cs;Ng.ppt=class extends Ng.Un{constructor(t){super(),this.Adt=t,this.kc=this.Adt.Rj(),this.idt=[],this.GM=-1,this.ndt=null,this.mpt=[]}Jn(){Ng.wh(this.idt),this.Adt=null,this.kc=null}gpt(t){this.mpt=t;const s=this.mpt.slice(0);this.idt.push(s),this.GM=0,this.ndt=s}Fk(){return this.Adt}Rj(){return this.kc}ypt(){return this.ndt}mq(){const t=++this.GM,s=this.idt;t===s.length?s.push(this.mpt.slice(0)):Ng.xh(s[t],this.mpt),this.ndt=s[t]}Cq(){this.ndt=this.idt[--this.GM]}}}{const Ag=self.Cs;Ag.Mpt=class extends Ag.Un{constructor(t){super(),this.Adt=t,this.kc=this.Adt.Rj(),this.idt=[],this.GM=-1}Jn(){Ag.wh(this.idt),this.Adt=null,this.kc=null}Fk(){return this.Adt}Rj(){return this.kc}wpt(){return this.GM>=0}ypt(){return this.idt[this.GM]}mq(){if(++this.GM,this.GM===this.idt.length){const t=Ag.Qn(Ag.Spt,this);return this.idt.push(t),t}{const t=this.idt[this.GM];return t.Ff(),t}}Cq(){--this.GM}Tpt(t){const s=this.idt;for(let i=this.GM;i>=0;--i){const e=s[i];if(e._c()===t)return e}return null}bpt(){return this.idt.slice(0,this.GM+1)}}}{const Lg=self.Cs;Lg.Spt=class extends Lg.Un{constructor(t){super(),this.xpt=t,this.Hn="",this.GM=0,this.vpt=!1,this.Ipt=NaN}Ff(){this.Hn="",this.GM=0,this.vpt=!1,this.Ipt=NaN}yq(t){this.Hn=t}_c(){return this.Hn}xq(t){this.GM=t}ik(){return this.GM}MV(){this.vpt=!0}Iq(){return this.vpt}Cpt(t){this.Ipt=t}Gpt(){return this.Ipt}}}{const Og=self.Cs;Og._pt=class extends Og.Un{constructor(){super(),this.idt=[],this.GM=-1}Jn(){Og.wh(this.idt)}ypt(){return this.idt[this.GM]}mq(){if(++this.GM,this.GM===this.idt.length){const t=[];return this.idt.push(t),t}return this.idt[this.GM]}Cq(){--this.GM}}}{let Rg=function(t,s){return t.ik()-s.ik()},Pg=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};0;const kg=self.Cs;self.assert;kg.Dpt=class extends kg.Un{constructor(t){super(),this.kc=t,this.Ept=[],this.Npt=new Map,this.Apt=[],this.Lpt=new Map,this.Opt=new Map,this.Rpt=new Map,this.Ppt=new Map,this.kpt=new Map,this.Fpt=new Map,this.jpt=0,this.zpt=[],this.Bpt=[],this.Upt=[],this.Wpt=new Map,this.Qpt=new Map,this.udt=kg.Qn(kg.Ndt,this),this.Jpt=kg.Qn(kg.ppt,this),this.xpt=kg.Qn(kg.Mpt,this),this.Ypt=[],this.Vpt=[],this.Hpt=[],this.qpt=0,this.Xpt=0,this.Zpt=0,this.Kpt=[],this.$pt=[],this.tmt=[],this.smt=new Map,this.imt=new Map,self.c3_callFunction=(t,s)=>this.emt(t,s)}Jn(){this.n5(),this.udt.Jn(),this.udt=null,this.Jpt.Jn(),this.Jpt=null,kg.wh(this.Vpt),kg.wh(this.Hpt),this.kc=null,kg.wh(this.Ept),this.Npt.clear()}EI(t){const s=kg.Qn(kg.nmt,this,t);this.Ept.push(s),this.Npt.set(s._c().toLowerCase(),s)}rmt(t){this.Ypt.push(t)}hmt(){for(const t of this.Qpt.values())t.omt();for(const t of this.Wpt.values())t.hmt();for(const t of this.Qpt.values())t.hmt();for(const t of this.Ept)t.hmt();for(const t of this.Ept)t.C4();for(const t of this.Ypt)t.hmt(!1);kg.wh(this.Ypt),this.Jpt.gpt(this.Upt)}Rj(){return this.kc}I4(t){return this.Npt.get(t.toLowerCase())||null}amt(t){this.Apt.push(t),this.Lpt.set(t.umt(),t)}lmt(t){this.Opt.set(t.I0(),t)}cmt(t){this.Rpt.set(t.I0(),t)}fmt(t){this.Ppt.set(t.I0(),t)}dmt(t){switch(t.pmt()){case 0:this.Wpt.set(t.mmt().toLowerCase(),t);break;case 1:this.Qpt.set(t.mmt().toLowerCase(),t)}}gmt(t){this.Fpt.set(t.I0(),t),t.e0()?this.zpt.push(t):this.Bpt.push(t)}ymt(t){t.length>=2&&t.sort(Rg);let s=this.kpt.get(t.length);s||(s=[],this.kpt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(Pg(t,e))return e}return s.push(t),t}Mmt(t){return this.Upt.push(t.wmt()),this.jpt++}Zk(){return this.udt}Smt(){return this.Zk().pq()}Qk(){return this.Smt().Qk()}Tmt(){const t=this.Smt();return t.Qk().bmt(t.Zdt())}xmt(){const t=this.Smt();return t.Qk().vmt(t.$dt())}Imt(){return this.Jpt}gq(){return this.xpt}Cmt(t){const s=[];for(t=t.Gmt();t;)kg.An(s,t._mt()),t=t.Gmt();return s}Dmt(t){const s={};for(const i of this.Cmt(t))s[i.Emt()]=i.Nmt();return Object.create(Object.prototype,s)}Amt(t){return this.Fpt.get(t)||null}Lmt(t){return this.Opt.get(t)||null}Omt(t){return this.Rpt.get(t)||null}Rmt(t){return this.Ppt.get(t)||null}jk(t){return this.Wpt.get(t.toLowerCase())||null}Pmt(t,s){let i=this.Qpt.get((t._c()+"."+s).toLowerCase());if(i)return i;if(!t.y0())for(const e of t.kmt())if(i=this.Qpt.get((e._c()+"."+s).toLowerCase()),i)return i;return null}Fmt(){return this.zpt}jmt(){return this.Bpt}zmt(t){for(const t of this.zpt)t.Bmt();if(t)for(const t of this.Bpt)t.Lv()&&t.Bmt()}Umt(t){return this.Lpt.get(t.toLowerCase())||null}Wmt(t){const s=this.Opt.get(t);return s&&s.Qmt()?s:null}Jmt(){return this.Apt}Ymt(){for(const t of this.Apt)t.Vmt()}Hmt(){for(const t of this.Ept)t.qmt()}Xmt(t){this.Hmt(),this.qpt++;for(const s of t.P5()){const t=s.Z3();t&&(this.kc.Zmt(s),t.K_(),this.kc.Kmt())}this.qpt--}async $mt(t){this.Hmt(),this.qpt++;for(const s of this.tgt(t))await this.kc.sgt(s);this.qpt--}*tgt(t){for(const s of t.P5()){const t=s.Z3();t&&(this.kc.Zmt(s),yield*t.igt(),this.kc.Kmt())}}egt(t,s,i,e){let n=!1;if(!t.jF())return this.ngt(s,i,e);this.Xpt++;for(const r of t.P5()){const t=r.Z3();if(!t)continue;this.kc.Zmt(r);for(const r of t.rgt()){const t=r.egt(s,i,e);n=n||t}const h=t.egt(s,i,e);n=n||h,this.kc.Kmt()}return this.Xpt--,n}*hgt(t,s,i,e){let n=!1;if(!t.jF())return this.ngt(s,i,e);this.Xpt++;for(const r of t.P5()){const t=r.Z3();if(!t)continue;this.kc.Zmt(r);for(const r of t.rgt()){const t=yield*r.hgt(s,i,e);n=n||t}const h=yield*t.hgt(s,i,e);n=n||h,this.kc.Kmt()}return this.Xpt--,n}ngt(t,s,i){return this.Vpt.push([t,s,i]),!1}ogt(t,s,i){let e=null;const n=new Promise((t=>e=t));return this.Hpt.push([t,s,i,e]),n}*agt(){if(this.kc.ugt())throw new Error("should not be in breakpoint");const t=this.kc.UF();for(;this.Hpt.length;){const[s,i,e,n]=this.Hpt.shift();n(yield*this.hgt(t,s,i,e))}}async lgt(){for(const t of this.agt())await this.kc.sgt(t)}cgt(t,s,i,e){let n=!1;const r=t.jF(),h=r.Z3();if(!h)return;this.Xpt++,this.kc.Zmt(r);const o=h.rgt();for(let t=0,r=o.length;t<r;++t){const r=o[t].cgt(s,i,e);n=n||r}const a=h.cgt(s,i,e);return n=n||a,this.kc.Kmt(),this.Xpt--,n}*fgt(t,s,i,e){let n=!1;const r=t.jF(),h=r.Z3();if(!h)return;this.Xpt++,this.kc.Zmt(r);const o=h.rgt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].fgt(s,i,e);n=n||r}const a=yield*h.fgt(s,i,e);return n=n||a,this.kc.Kmt(),this.Xpt--,n}dgt(){return this.Xpt}pgt(){return this.dgt()>0}mgt(){return++this.Xpt}ggt(){--this.Xpt}ygt(){return this.qpt>0}jB(){return this.ygt()||this.pgt()}V4(t){for(const[s,i,e]of this.Vpt)this.egt(t,s,i,e);kg.wh(this.Vpt)}PB(t){t?this.Zpt++:this.Zpt--}OW(){return this.Zpt>0}Mgt(t){for(let s=0,i=t.length;s<i;++s)t[s].wgt()._l()}Sgt(t){for(let s=0,i=t.length;s<i;++s)t[s].wgt().hdt()}Sq(t){for(let s=0,i=t.length;s<i;++s)t[s].wgt().odt()}bq(t){for(let s=0,i=t.length;s<i;++s)t[s].wgt().Cq()}Jk(t){const s=new Set,i=this.udt.Rdt(),e=this.udt.Pdt();for(let n=0;n<=e;++n){const e=i[n].dpt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Tgt(t){const s=new Set([...t]),i=this.Jk(s);if(i.size>0){for(const t of i)t.wgt().hdt();return[...i]}return null}bgt(){const t=kg.Qn(kg.xgt,this);return this.Kpt.push(t),t}vgt(){return this.Kpt}Igt(){if(!this.Kpt.length)return;const t=this.Smt();let s=!1;this.qpt++;for(let i=0,e=this.Kpt.length;i<e;++i){const e=this.Kpt[i];e.Cgt()&&e.Ggt(t),e._gt()&&(s=!0)}s&&(this.Dgt(),t.Ff(null)),this.qpt--}async Egt(){if(!this.Kpt.length)return;const t=this.Smt();let s=!1;this.qpt++;for(let i=0,e=this.Kpt.length;i<e;++i){const e=this.Kpt[i];e.Cgt()&&await e.Ngt(t),e._gt()&&(s=!0)}s&&(this.Dgt(),t.Ff(null)),this.qpt--}Dgt(){const t=kg._h(this.Kpt,(t=>t._gt()));for(const s of t)s.Jn()}n5(){for(const t of this.Kpt)t.Jn();kg.wh(this.Kpt)}Agt(t){for(const s of this.Kpt)s.adt(t);for(const s of t){const t=this.imt.get(s);if(this.imt.delete(s),t)for(const{resolve:s}of t.Lgt.values())s(!0)}}Ogt(t){this.$pt.push({promise:t,Rgt:this.dgt()})}Pgt(){kg.wh(this.$pt)}kgt(){const t=this.dgt();this.$pt=this.$pt.filter((s=>s.Rgt<=t))}Fgt(){const t=Promise.all(this.$pt.map((t=>t.promise)));return this.$pt=[],t}tF(t){const s=t.toLowerCase();this.tmt.push(s),this.kc.uQ(kg._j.Gj.Cj.jgt,null),this.tmt.pop();for(const t of this.kc.Fk().vgt())t.zgt()&&t.Bgt()===s&&t.Ugt();const i=this.smt.get(s);i&&(i.resolve(),this.smt.delete(s))}iF(t){const s=t.toLowerCase(),i=this.smt.get(s);if(i)return i.promise;{let t=null;const i=new Promise((s=>t=s));return this.smt.set(s,{promise:i,resolve:t}),i}}Wgt(){if(0===this.tmt.length)throw new Error("not in a signal");return this.tmt.at(-1)}Qgt(t){let s=this.imt.get(t);return s||(s={Jgt:[],Lgt:new Map},this.imt.set(t,s)),s}$W(t,s){const i=this.Qgt(t),e=s.toLowerCase();i.Jgt.push(e),this.kc.uQ(t.MB().Vgt().Cj.Ygt,t),i.Jgt.pop();for(const s of this.kc.Fk().vgt())s.Hgt()&&s.Bgt()===e&&s.qgt(t);const n=i.Lgt.get(e);n&&(n.resolve(!1),i.Lgt.delete(e)),0===i.Jgt.length&&0===i.Lgt.size&&this.imt.delete(t)}tQ(t,s){const i=this.Qgt(t),e=s.toLowerCase(),n=i.Lgt.get(e);if(n)return n.promise;{let t=null;const s=new Promise((s=>t=s));return i.Lgt.set(e,{promise:s,resolve:t}),s}}Xgt(t){const s=this.Qgt(t);if(!s||0===s.Jgt.length)throw new Error("not in a signal");return s.Jgt.at(-1)}t3(){return{groups:this.Zgt(),cnds:this.Kgt(),acts:this.$gt(),vars:this.tyt(),waits:this.syt()}}s3(t){this.iyt(t.groups),this.eyt(t.cnds),this.nyt(t.acts),this.ryt(t.vars),this.hyt(t.waits)}Zgt(){const t={};for(const s of this.Jmt())t[s.I0().toString()]=s.oyt();return t}iyt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Wmt(t);e&&e.ayt(i)}}Kgt(){const t={};for(const[s,i]of this.Rpt){const e=i.t3();e&&(t[s.toString()]=e)}return t}eyt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Rpt)i.s3(s.get(t)||null)}$gt(){const t={};for(const[s,i]of this.Ppt){const e=i.t3();e&&(t[s.toString()]=e)}return t}nyt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Ppt)i.s3(s.get(t)||null)}tyt(){const t={};for(const[s,i]of this.Fpt)i.uyt()||!i.e0()&&!i.Lv()||(t[s.toString()]=i.Net());return t}ryt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Amt(t);e&&e.dnt(i)}}syt(){return this.Kpt.filter((t=>!t.lyt())).map((t=>t.t3()))}hyt(t){this.n5();for(const s of t){const t=kg.xgt.cyt(this,s);t&&this.Kpt.push(t)}}fyt(){return[...this.kc.UF().P5()].map((t=>t.Z3())).filter((t=>t)).map((t=>t.dyt()))}pyt(t){for(;t;){const s=t.Gmt();if(s instanceof kg.myt)return s;t=s}return null}emt(t,s){Array.isArray(s)||(s=[]);const i=this.jk(t.toLowerCase());if(!i)return null;if(!i.Il())return i.zk();const e=i.gyt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].wmt())}while(s.length<e.length)}const n=i.Uk();return n.Yk(n.Wk(),!1,i.Hk(),i.zk(),...s)}}}{const Fg=self.Cs;Fg.nmt=class extends Fg.Un{constructor(t,s){super(),this.Adt=t,this.kc=t.Rj(),this.Hn=s[0],this.yyt=[],this.Myt=new Map,this.wyt=new Map,this.Syt=new Map,this.Tyt=!1,this.byt=[],this.xyt=[],this.vyt=new Set;for(const t of s[1])this.Iyt(t,null,this.yyt);this.Cyt=this.kc.yQ()?{type:"sheet",name:this.Hn,Gyt:0,children:[]}:null}Jn(){this.Adt=null,this.kc=null}Iyt(t,s,i){switch(t[0]){case 0:case 3:this._yt(t,s,i);break;case 1:this.Dyt(t,s,i);break;case 2:this.Eyt(t,s,i);break;case 4:this.Nyt(t,s);break;case 5:this.Ayt(t,s,i);break;case 6:this.Lyt(t,s);break;default:throw new Error("invalid event type")}}_yt(t,s,i){const e=Fg.Oyt.EI(this,s,t);if(e.Edt()){i.push(e);const t=e.Ryt();for(let s=0,i=t.length;s<i;++s)t[s].Pyt()&&this.kyt(e,s)}else e.Pyt()?this.kyt(e,0):i.push(e)}Nyt(t,s){const i=Fg.myt.Fyt(this,s,t);this.Adt.dmt(i)}Lyt(t,s){const i=Fg.myt.jyt(this,s,t);this.Adt.dmt(i)}Dyt(t,s,i){const e=Fg.zyt.EI(this,s,t);i.push(e)}Eyt(t,s,i){const e=Fg.Byt.EI(this,s,t);i.push(e)}Ayt(t,s,i){const e=Fg.Uyt.EI(this,s,t);i.push(e)}kyt(t,s){t.Edt()||this.Adt.rmt(t);const i=t.bmt(s),e=i.Wyt(),n=i.GW();if(i.Qyt()){let r=this.wyt.get(n);r||(r=new Map,this.wyt.set(n,r));const h=i.Jyt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Myt.get(n);r||(r={Yyt:new Map,Vyt:new Map},this.Myt.set(n,r));const h=i.CY();let o;h?(o=r.Vyt.get(h),o||(o=new Map,r.Vyt.set(h,o))):o=r.Yyt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}hmt(){const t=this.yyt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof Fg.Oyt&&t[s+1].Hyt();t[s].hmt(e)}}qyt(t){this.byt.push(t)}C4(){Fg.wh(this.xyt),this.Xyt(this),this.vyt.clear()}Xyt(t){const s=t.xyt,i=t.vyt;for(const e of this.byt){const n=e.Zyt();e.Kyt()&&t!==n&&!i.has(n)&&(i.add(n),n.Xyt(t),s.push(n))}}rgt(){return this.xyt}Fk(){return this.Adt}Rj(){return this.kc}_c(){return this.Hn}$yt(t,s){this.Syt.set(s,t)}tMt(t){return this.Syt.get(t)||null}qmt(){this.Tyt=!1}K_(){if(this.Tyt)return;const t=this.kc,s=t.sMt(),i=s?performance.now():0;this.Tyt=!0;const e=this.Fk(),n=e.Smt();for(const s of this.yyt)s.K_(n),e.Mgt(s.fq()),e.Pgt(),t.BB();n.Ff(null),s&&(this.Cyt.Gyt+=performance.now()-i)}*igt(){if(this.Tyt)return;this.Tyt=!0;const t=this.kc,s=this.Fk(),i=s.Smt();for(const e of this.yyt)yield*e.igt(i),s.Mgt(e.fq()),s.Pgt(),t.BB();i.Ff(null)}egt(t,s,i){if(!s)return this.iMt(t,s,null,null);{const e=s.GW();let n=!1,r=this.iMt(t,s,e,i);n=n||r;for(const h of e.kmt())r=this.iMt(t,s,h,i),n=n||r}}iMt(t,s,i,e){const n=this.Myt.get(i);if(!n)return!1;const r=e?n.Vyt.get(e):n.Yyt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.eMt(s,t,i);o=o||e}return o}*hgt(t,s,i){if(!s)return yield*this.nMt(t,s,null,null);{const e=s.GW();let n=!1,r=yield*this.nMt(t,s,e,i);n=n||r;for(const h of e.kmt())r=yield*this.nMt(t,s,h,i),n=n||r}}*nMt(t,s,i,e){const n=this.Myt.get(i);if(!n)return!1;const r=e?n.Vyt.get(e):n.Yyt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.rMt()?this.eMt(s,t,i):yield*this.hMt(s,t,i),o=o||e}return o}cgt(t,s,i){const e=s.GW(),n=this.wyt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.eMt(null,s[0],s[1]);o=o||i}return o}*fgt(t,s,i){const e=s.GW(),n=this.wyt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.rMt()?this.eMt(null,i,e):yield*this.hMt(null,i,e),o=o||n}return o}eMt(t,s,i){const e=this.kc,n=this.Adt,r=n.Qk(),h=n.Zk(),o=n.dgt();let a=!1;r&&n.Sgt(r.Wk()),n.Sgt(s.Wk());const u=o>1;u&&n.Imt().mq();const l=h.mq(s);t&&(s.Ryt()[i].GW().EB().xdt(t),t.FW()&&t.oMt());let c=!0;if(s.SJ()){const t=s.aMt();for(let s=0,i=t.length;s<i;++s)if(!t[s].uMt(l)){c=!1;break}}return c&&(s.Edt()?s.lMt(l,i):s.K_(l),a=l.ipt()),h.Cq(),u&&n.Imt().Cq(),n.bq(s.Wk()),r&&n.bq(r.Wk()),r||1!==o||(n.Pgt(),n.OW()||e.BB()),a}*hMt(t,s,i){const e=this.kc,n=this.Adt,r=n.Qk(),h=n.Zk(),o=n.dgt();let a=!1;r&&n.Sgt(r.Wk()),n.Sgt(s.Wk());const u=o>1;u&&n.Imt().mq();const l=h.mq(s);t&&(s.Ryt()[i].GW().EB().xdt(t),t.FW()&&t.oMt());let c=!0;if(s.SJ()){const t=s.aMt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].cMt(l))){c=!1;break}}return c&&(s.Edt()?yield*s.fMt(l,i):yield*s.igt(l),a=l.ipt()),h.Cq(),u&&n.Imt().Cq(),n.bq(s.Wk()),r&&n.bq(r.Wk()),r||1!==o||(n.Pgt(),n.OW()||e.BB()),a}dyt(){return this.Cyt}}}{let jg=function(t,s){return!0};0;const zg=self.Cs,Bg=[];function*Ug(t,s){return!0}zg.Oyt=class extends zg.Un{constructor(t,s,i){super(),this.m3=t,this.kc=t.Rj(),this.dMt=s,this.pMt=null,this.udt=this.kc.Fk().Zk(),this.mMt=[],this.gMt=[],this.yMt=!1,this.MMt=!1,this.wMt=!1,this.SMt=!1,this.TMt=!!i[2],this.bMt=!1,this.xMt=null,this.vMt=[],this.Vnt=[],this.IMt=[],this.CMt=jg,this.GMt=Ug,this._Mt=!1,this.DMt=!1,this.EMt="",this.NMt=!1,this.AMt=null,this.Cyt=null,this.VK=i[4],this.LMt=i[5],this.m3.$yt(this,this.LMt),this.OMt=this.kc.yQ()?{RMt:i[3][0],PMt:i[3][1],kMt:!1,FMt:!1,jMt:!1,zMt:!1}:null,this.Fk().lmt(this),3===i[0]&&this.BMt(i[1]);let e=0;for(const t of i[6]){const s=zg.UMt.EI(this,t,e++);this.vMt.push(s),this.WMt(s.GW())}e=0;for(const t of i[7]){const s=zg.QMt.EI(this,t,e++);this.Vnt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.m3.Iyt(s,this,this.IMt)}this.vMt.length&&(this.bMt=null===this.vMt[0].GW()&&this.vMt[0].Wyt()===zg._j.Gj.Cj.JMt),0===this.vMt.length&&(this.vMt=Bg),0===this.Vnt.length&&(this.Vnt=Bg),0===this.IMt.length&&(this.IMt=Bg)}static EI(t,s,i){return zg.Qn(zg.Oyt,t,s,i)}BMt(t){this._Mt=!0,this.DMt=!!t[0],this.NMt=this.DMt,this.EMt=t[1].toLowerCase(),this.AMt=[],this.Fk().amt(this),this.kc.yQ()&&(this.Cyt={type:"group",name:t[1],Gyt:0,children:[]})}YMt(t){this.AMt.push(t)}VMt(t,s){for(const i of t.c4().q4())s.includes(i)||s.push(i)}HMt(t,s){if(t)if(s.includes(t)||s.push(t),t.y0())for(const i of t.qMt())i.FW()&&this.VMt(i,s);else t.FW()&&this.VMt(t,s)}WMt(t){this.HMt(t,this.mMt)}XMt(t){this.HMt(t,this.gMt)}ZMt(){this.mMt=this.kc.g0()}hmt(t){this.SMt=!!t,this.KMt(),this.$Mt();for(const t of this.vMt)t.hmt();if(this.Vnt.length>0){let t=!1;for(const s of this.Vnt)s.hmt(),s.twt()&&(t=!0);t?(this.CMt=this.swt,this.GMt=this.iwt):(this.CMt=this.ewt,this.GMt=this.nwt)}const s=this.IMt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof zg.Oyt&&s[t+1].Hyt();s[t].hmt(e)}this.OMt&&this.rwt(),this.Cyt&&this.hwt().dyt().children.push(this.Cyt)}dyt(){return this.Cyt}hwt(){let t=this.SJ();for(;t;){if(t.Qmt())return t;t=t.SJ()}return this.m3}rwt(){const t=this.OMt;t.kMt=this.vMt.every((t=>t.rMt())),t.FMt=this.Vnt.every((t=>t.rMt())),t.jMt=this.IMt.every((t=>t.rMt())),t.zMt=t.kMt&&t.FMt&&t.jMt}owt(){let t=this;do{t.rwt(),t=t.SJ()}while(t)}KMt(){if(!this.Qmt())return;let t=this.SJ();for(this.wMt=!0;t;){if(!t.Qmt()){this.wMt=!1;break}t=t.SJ()}}awt(){const t=this.kc.g0();if(this.mMt===t)this.gMt=t;else{this.gMt=zg.Ah(this.mMt);let t=this.SJ();for(;t;){for(const s of t.mMt)this.XMt(s);t=t.SJ()}const s=this.Fk();this.mMt=s.ymt(this.mMt),this.gMt=s.ymt(this.gMt)}}$Mt(){if(!this.uwt())return;this.xMt=[];let t=this.SJ();for(;t;)this.xMt.push(t),t=t.SJ();this.xMt.reverse()}lwt(){this.MMt=!0,this.dMt&&this.dMt.lwt()}lpt(){return this.MMt}fq(){return this.mMt}Wk(){return this.yMt||(this.yMt=!0,this.awt()),this.gMt}cwt(t){return this.mMt.includes(t)}aMt(){return this.xMt}Z3(){return this.m3}Fk(){return this.m3.Fk()}Rj(){return this.kc}SJ(){return this.dMt}fwt(t){this.pMt=t}Gmt(){return this.pMt||this.dMt}dwt(){return this.LMt}pwt(){return this.OMt&&this.OMt.PMt}mwt(){return this.pwt()&&this.OMt.RMt}gwt(t){this.OMt.RMt=!!t,this.owt()}Qmt(){return this._Mt}ywt(){return this.wMt}Hyt(){return this.bMt}Mwt(){return this.SMt}umt(){return this.EMt}oyt(){return this.NMt}Vmt(){this.ayt(this.DMt)}ayt(t){if(t=!!t,!this._Mt)throw new Error("not a group");if(this.NMt!==t){this.NMt=t;for(const t of this.AMt)t.wwt();if(this.AMt.length){const t=this.kc.rj().Z3();t&&t.C4()}}}I0(){return this.VK}Edt(){return this.TMt}Pyt(){return this.vMt.length&&this.vMt[0].Pyt()}Swt(){return this.pMt&&this.pMt instanceof zg.myt}uwt(){return this.Swt()||this.vMt.some((t=>t.Pyt()))}Ryt(){return this.vMt}cpt(){return this.vMt.length}bmt(t){if((t=Math.floor(t))<0||t>=this.vMt.length)throw new RangeError("invalid condition index");return this.vMt[t]}Twt(t){return this.bmt(t)}bwt(t){let s=t.ik();if(0===s)return!0;--s;const i=t.xwt()?t.vwt():t.GW();for(;s>=0;--s){const t=this.vMt[s];if(i===t.GW()||t.xwt()&&t.vwt()===i)return!1}return!0}Iwt(){return this.Vnt}Cwt(){return this.Vnt.length}vmt(t){if((t=Math.floor(t))<0||t>=this.Vnt.length)throw new RangeError("invalid action index");return this.Vnt[t]}Gwt(t){t=Math.floor(t);const s=this.Vnt.find((s=>s._wt()===t));if(!s)throw new RangeError("invalid action debug index");return s}Dwt(t){return(t=Math.floor(t))>=0&&t<this.Vnt.length}Ewt(){return this.IMt}_mt(){return this.IMt.filter((t=>t instanceof zg.zyt))}uMt(t){t.Xdt(this);const s=this.vMt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Kdt(e),n.zY())throw new Error("trigger cannot be used as sub-event to a loop");if(n.K_())i=!0;else if(!this.TMt)return!1}return!this.TMt||i}lMt(t,s){t.Xdt(this),t.Kdt(s),this.vMt[s].K_()&&(this.CMt(t,0)&&this.Nwt(t),t.spt(!0))}*cMt(t){t.Xdt(this);const s=this.vMt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Kdt(e),n.zY())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.rMt()?n.K_():yield*n.igt(),r)i=!0;else if(!this.TMt)return!1}return!this.TMt||i}*fMt(t,s){t.Xdt(this),t.Kdt(s);const i=this.vMt[s];let e;if(e=i.rMt()?i.K_():yield*i.igt(),e){let s;s=this.Awt()?this.CMt(t,0):yield*this.GMt(t,0),s&&(this.Lwt()?this.Nwt():yield*this.Owt()),t.spt(!0)}}K_(t){t.Xdt(this),this.bMt||t.ept(!1),this.TMt?this.Rwt(t):this.Pwt(t)}*igt(t){(this.mwt()||this.kc.kwt())&&(yield this),t.Xdt(this),this.bMt||t.ept(!1),this.TMt?yield*this.Fwt(t):yield*this.jwt(t)}Rwt(t){const s=this.vMt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.Pyt())continue;t.Kdt(e);const r=n.K_();i=i||r}t.spt(i),i&&(this.CMt(t,0)&&this.Nwt(t),this.SMt&&t.ept(!0))}*Fwt(t){const s=this.vMt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.Pyt())continue;let r;t.Kdt(e),r=n.rMt()?n.K_():yield*n.igt(),i=i||r}if(t.spt(i),i){let s;s=this.Awt()?this.CMt(t,0):yield*this.GMt(t,0),s&&(this.Lwt()?this.Nwt():yield*this.Owt()),this.SMt&&t.ept(!0)}}Pwt(t){const s=this.vMt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Kdt(i),!e.K_())return void t.spt(!1)}t.spt(!0),this.CMt(t,0)&&this.Nwt(t),t.ipt()&&this.SMt&&t.ept(!0)}*jwt(t){const s=this.vMt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.Kdt(i),n=e.rMt()?e.K_():yield*e.igt(),!n)return void t.spt(!1)}let i;t.spt(!0),i=this.Awt()?this.CMt(t,0):yield*this.GMt(t,0),i&&(this.Lwt()?this.Nwt():yield*this.Owt()),t.ipt()&&this.SMt&&t.ept(!0)}ewt(t,s){const i=this.Vnt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.tpt(e),s.K_()}return!0}*nwt(t,s){const i=this.Vnt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.tpt(e),s.rMt()?s.K_():yield*s.igt()}return!0}swt(t,s){const i=this.Fk(),e=this.Vnt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.tpt(n);const r=s.K_();if(s.zwt()&&!0===r)return!1;s.Bwt()&&r instanceof Promise&&i.Ogt(r)}return!0}*iwt(t,s){const i=this.Fk(),e=this.Vnt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.tpt(n),r=s.rMt()?s.K_():yield*s.igt(),s.zwt()&&!0===r)return!1;s.Bwt()&&r instanceof Promise&&i.Ogt(r)}return!0}Uwt(t){this.CMt(t,t.$dt())&&this.Nwt()}*Wwt(t){(yield*this.GMt(t,t.$dt()))&&(yield*this.Owt())}Nwt(){if(!this.IMt.length)return;const t=this.Qmt()&&this.kc.sMt(),s=t?performance.now():0,i=this.udt,e=i.mq(this);this.MMt?this.Qwt(e):this.Jwt(e),i.Cq(),t&&(this.Cyt.Gyt+=performance.now()-s)}Qwt(t){const s=this._Mt,i=this.wMt,e=this.Fk(),n=this.IMt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.fq(),u=!i||!s&&r<o;u&&e.Sq(a),h.K_(t),u?e.bq(a):e.Mgt(a)}}Jwt(t){const s=this.IMt;for(let i=0,e=s.length;i<e;++i)s[i].K_(t)}*Owt(){if(!this.IMt.length)return;const t=this.udt,s=t.mq(this);this.MMt?yield*this.Ywt(s):yield*this.Vwt(s),t.Cq()}*Ywt(t){const s=this._Mt,i=this.wMt,e=this.Fk(),n=this.IMt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.fq(),u=!i||!s&&r<o;u&&e.Sq(a),yield*h.igt(t),u?e.bq(a):e.Mgt(a)}}*Vwt(t){const s=this.IMt;for(let i=0,e=s.length;i<e;++i)yield*s[i].igt(t)}Tq(t,s){s.qdt();const i=this.vMt;if(!this.Edt())for(let e=t.Zdt()+1,n=i.length;e<n;++e){const t=i[e];if(s.Kdt(e),!t.K_())return!1}return this.CMt(s,0)&&this.Nwt(s),!0}*Hwt(t,s){s.qdt();const i=this.vMt;if(!this.Edt())for(let e=t.Zdt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.Kdt(e),n=t.rMt()?t.K_():yield*t.igt(),!n)return!1}let e;return e=this.Awt()?this.CMt(s,0):yield*this.GMt(s,0),e&&(this.Lwt()?this.Nwt():yield*this.Owt()),!0}rMt(){return!this.mwt()&&!this.kc.kwt()&&this.OMt.zMt}Awt(){return!this.kc.kwt()&&this.OMt.FMt}Lwt(){return!this.kc.kwt()&&this.OMt.jMt}qwt(t){if(this.SJ()){const s=this.aMt();for(let i=0,e=s.length;i<e;++i)if(!s[i].uMt(t))return!1}return!0}*Xwt(t){if(this.SJ()){const s=this.aMt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].cMt(t)))return!1}return!0}Zwt(t,s,i){if(s.length>0)if(i){const i=s.map((t=>t.Js(0)));t.Imt().mq(),this.pMt.Kwt(i)}else this.pMt.$wt(s);else i&&t.Imt().mq()}tSt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.kc,u=this.udt,l=a.Fk(),c=this.pMt,f=c.Bwt(),d=l.mgt()>1;if(this.Zwt(l,s,d),h&&(i?l.Sq(t):l.Sgt(t)),null!==e){if(e.sSt){const t=i?e.sSt.EB():e.sSt.wgt().rdt(),s=e.iSt.EB();s.vdt(t.DB()),s._dt(),i||e.iSt.eSt()}else if(e.nSt){const t=e.nSt.EB();t.vdt(e.rSt),t._dt()}e.hSt&&(o=l.Tgt(t))}const p=u.mq(this);return i&&p.fpt(t),this.qwt(p)&&(p.Xdt(this),f&&([r,n]=c.oSt()),this.Pwt(p),f&&c.aSt(r)),u.Cq(),d&&l.Imt().Cq(),null!==o&&l.bq(o),h&&l.bq(t),l.ggt(),f||l.kgt(),n}*uSt(t,s,i,e){let n,r;(this.mwt()||this.kc.kwt())&&(yield this);const h=t.length>0;let o=null;const a=this.kc,u=this.udt,l=a.Fk(),c=this.pMt,f=c.Bwt(),d=l.mgt()>1;if(this.Zwt(l,s,d),h&&(i?l.Sq(t):l.Sgt(t)),null!==e){if(e.sSt){const t=i?e.sSt.EB():e.sSt.wgt().rdt(),s=e.iSt.EB();s.vdt(t.DB()),s._dt(),i||e.iSt.eSt()}else if(e.nSt){const t=e.nSt.EB();t.vdt(e.rSt),t._dt()}e.hSt&&(o=l.Tgt(t))}const p=u.mq(this);return i&&p.fpt(t),(yield*this.Xwt(p))&&(p.Xdt(this),f&&([r,n]=c.oSt()),yield*this.jwt(p),f&&c.aSt(r)),u.Cq(),d&&l.Imt().Cq(),null!==o&&l.bq(o),h&&l.bq(t),l.ggt(),f||l.kgt(),n}lSt(t,s){const i=this.Wk(),e=i.length>0,n=this.kc,r=this.udt,h=n.Fk(),o=h.mgt()>1;o&&h.Imt().mq(),this.pMt.Kwt(t),e&&(s?h.Sq(i):h.Sgt(i));const a=r.mq(this);this.qwt(a)&&(a.Xdt(this),this.Pwt(a)),r.Cq(),o&&h.Imt().Cq(),e&&h.bq(i),h.ggt(),h.kgt()}*cSt(t,s){(this.mwt()||this.kc.kwt())&&(yield this);const i=this.Wk(),e=i.length>0,n=this.kc,r=this.udt,h=n.Fk(),o=h.mgt()>1;o&&h.Imt().mq(),this.pMt.Kwt(t),e&&(s?h.Sq(i):h.Sgt(i));const a=r.mq(this);(yield*this.Xwt(a))&&(a.Xdt(this),yield*this.jwt(a)),r.Cq(),o&&h.Imt().Cq(),e&&h.bq(i),h.ggt(),h.kgt()}Yk(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.kc,u=this.udt,l=a.Fk(),c=this.pMt,f=c.Bwt(),d=l.mgt()>1;d&&l.Imt().mq(),n.length>0&&this.pMt.Kwt(n),o&&(s?l.Sq(t):l.Sgt(t));const p=u.mq(this);return p.opt(i,e),u.kdt(p),a.Mq(!1),this.qwt(p)&&(p.Xdt(this),f&&([h,r]=c.oSt()),this.Pwt(p),f&&c.aSt(h)),a.Mq(!0),u.Cq(),u.Fdt(),d&&l.Imt().Cq(),o&&l.bq(t),l.ggt(),f||l.kgt(),r||p.apt()}}}{const Wg=self.Cs,Qg=[];let Jg=!1;Wg.Uyt=class extends Wg.Un{constructor(t,s,i){super();const e=t.Rj(),n=t.Fk();this.m3=t,this.Adt=n,this.kc=t.Rj(),this.dMt=s;const r=e.fSt(i[1]);this.dSt=r,this.LMt=i[2],this.m3.$yt(this,this.LMt),this.OMt=e.yQ()?{RMt:i[3][0],PMt:i[3][1]}:null}static EI(t,s,i){return Wg.Qn(Wg.Uyt,t,s,i)}hmt(){const t=this.dSt,s=this.kc.Fk().Dmt(this);this.dSt=t.bind(null,this.kc.Uz(),s)}SJ(){return this.dMt}Gmt(){return this.dMt}Z3(){return this.m3}dwt(){return this.LMt}pwt(){return this.OMt&&this.OMt.PMt}mwt(){return this.pwt()&&this.OMt.RMt}gwt(t){this.OMt.RMt=!!t}Hyt(){return!1}fq(){return Qg}Wk(){return this.dMt?this.dMt.Wk():Qg}K_(t){t.Xdt(this),this.Adt.Ogt(this.pSt())}async pSt(){try{await this.dSt()}catch(t){console.error(`Unhandled exception running script %c${this.Z3()._c()}, event ${this.dwt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.MQ&&self.MQ.mSt(this),Jg||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Jg=!0)}}*igt(t){t.Xdt(this),(this.mwt()||this.kc.kwt())&&(yield this),this.K_(t)}rMt(){return!this.mwt()&&!this.kc.kwt()}static gSt(){return Jg}static ySt(){Jg=!0}}}{const Yg=self.Cs;self.assert;Yg.myt=class extends Yg.Un{constructor(t,s,i){super(),this.m3=t,this.kc=t.Rj(),this.dMt=s,this.MSt=0,this.wSt="",this.SSt=0,this.TSt=[],this.bSt=!0,this.xSt="",this.sdt=null,this.vSt=!1,this.ISt=[],this.CSt=!1,this.GSt=!1,this._St=0,this.DSt=-1,this.ESt=new Map,this.NSt=Yg.Oyt.EI(t,s,i),this.NSt.fwt(this)}ASt(t){this.MSt=0,this.wSt=t[0],this.SSt=t[1],this.TSt=t[2].map((t=>Yg.zyt.EI(this.m3,this,t))),this.bSt=t[3],this.GSt=t[4],this.CSt=t[5]}LSt(t){this.MSt=1,this.xSt=t[1],this.sdt=this.kc.V$(t[2]),this.NSt.WMt(this.sdt),this.wSt=this.sdt._c()+"."+this.xSt,this.SSt=t[3],this.TSt=t[4].map((t=>Yg.zyt.EI(this.m3,this,t))),this.bSt=t[5],this.GSt=t[6],this.CSt=t[7],this.sdt.OSt(this)}static Fyt(t,s,i){const e=Yg.Qn(Yg.myt,t,s,i),n=i[1];return e.ASt(n),e}static jyt(t,s,i){const e=Yg.Qn(Yg.myt,t,s,i),n=i[1];return e.LSt(n),e}omt(){if(this.sdt&&this.sdt.y0())for(const t of this.sdt.qMt())if(t.RSt(this.xSt)){this.vSt=!0;break}}hmt(){for(const t of this.TSt)t.hmt();this.NSt.hmt(!1)}pmt(){return this.MSt}_mt(){return this.TSt}gyt(){return this.TSt}Bk(){return this.TSt.length}PSt(t){this.ISt.push(t)}kSt(){return this.ISt}$wt(t){const s=this.TSt;for(let i=0,e=s.length;i<e;++i)s[i].dnt(t[i].Js(0))}Kwt(t){const s=this.TSt;for(let i=0,e=s.length;i<e;++i)s[i].dnt(t[i])}FSt(){return this.TSt.map((t=>t.Net()))}SJ(){return this.dMt}Gmt(){return this.dMt}mmt(){return this.wSt}jSt(){return this.xSt}zSt(){return this.vSt}Hk(){return this.SSt}GW(){return this.sdt}Il(){return this.bSt}zk(){switch(this.SSt){case 0:return null;case 2:return"";default:return 0}}Uk(){return this.NSt}Vk(){return this.CSt}Bwt(){return this.GSt}oSt(){const t=this._St++;let s;this.DSt=t;const i=new Promise((t=>s=t));return this.ESt.set(t,{resolve:s,BSt:0}),[t,i]}aSt(t){const s=this.ESt.get(t);0===s.BSt&&(s.resolve(),this.ESt.delete(t)),this.DSt=-1}USt(){return this.ESt.get(this.DSt).BSt++,this.DSt}WSt(t){this.DSt=t,this.ESt.get(t).BSt--}QSt(t,s){const i=new Map,e=[];for(const t of this.sdt.EB().DB()){const s=t.GW();if(s.RSt(this.xSt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.NSt.tSt(t,s,this.CSt,{nSt:this.sdt,rSt:e}),i.size>0)for(const[e,n]of i){const i=e.JSt(this.xSt).Uk(),r=[...new Set([...t,...i.fq()])];i.tSt(r,s,this.CSt,{nSt:e,rSt:n})}}*YSt(t,s){const i=new Map,e=[];for(const t of this.sdt.EB().DB()){const s=t.GW();if(s.RSt(this.xSt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.NSt.uSt(t,s,this.CSt,{nSt:this.sdt,rSt:e})),i.size>0)for(const[e,n]of i){const i=e.JSt(this.xSt).Uk(),r=[...new Set([...t,...i.fq()])];yield*i.uSt(r,s,this.CSt,{nSt:e,rSt:n})}}}}{const Vg=self.Cs,Hg=[];Vg.zyt=class extends Vg.Un{constructor(t,s,i){super();const e=t.Fk();this.m3=t,this.Adt=e,this.kc=t.Rj(),this.dMt=s,this.Jpt=e.Imt(),this.Hn=i[1],this.Jc=i[2],this.VSt=i[3],this.rv=!!i[4],this.HSt=!!i[5],this.qSt=s instanceof Vg.myt,this.VK=i[6],this.XSt=this.kc.Emt(i[8]),this.ZSt=t=>this.dnt(t),this.KSt=()=>this.Net(),this.$St=!this.dMt||this.rv||this.HSt,this.Wnt=this.VSt,this.tTt=-1,this.sTt()&&(this.Wnt=this.Wnt?1:0),!this.iTt()||this.Lv()||this.uyt()||(this.tTt=e.Mmt(this)),e.gmt(this)}static EI(t,s,i){return Vg.Qn(Vg.zyt,t,s,i)}hmt(){if(this.iTt()&&!this.Lv()&&!this.uyt()&&!this.eTt()){const t=this.Adt.pyt(this);t&&t.PSt(this)}}_c(){return this.Hn}Emt(){return this.XSt}SJ(){return this.dMt}Gmt(){return this.SJ()}e0(){return!this.SJ()}iTt(){return!this.e0()}eTt(){return this.qSt}Lv(){return this.rv}uyt(){return this.HSt}Ki(){return 0===this.Jc}ae(){return 1===this.Jc}sTt(){return 2===this.Jc}Hyt(){return!1}I0(){return this.VK}wmt(){return this.VSt}fq(){return Hg}K_(t){!this.iTt()||this.Lv()||this.uyt()||this.dnt(this.wmt())}rMt(){return!0}*igt(t){this.K_(t)}dnt(t){this.Ki()?"number"!=typeof t&&(t=parseFloat(t)):this.ae()?"string"!=typeof t&&(t=t.toString()):this.sTt()&&(t=t?1:0),this.$St?this.Wnt=t:this.Jpt.ypt()[this.tTt]=t}Net(){return this.$St?this.Wnt:this.Jpt.ypt()[this.tTt]}nTt(){let t=this.Net();return this.sTt()&&(t=!!t),t}Bmt(){this.Wnt=this.VSt}Nmt(){return{configurable:!1,enumerable:!0,get:this.KSt,set:this.ZSt}}}}{const qg=self.Cs,Xg=(self.assert,[]);qg.Byt=class extends qg.Un{constructor(t,s,i){super();const e=t.Fk();this.m3=t,this.Adt=e,this.kc=t.Rj(),this.dMt=s,this.rTt=null,this.hTt=i[1],this.kf=!0}static EI(t,s,i){return qg.Qn(qg.Byt,t,s,i)}hmt(){this.rTt=this.Adt.I4(this.hTt),this.m3.qyt(this);let t=this.SJ();for(;t;)t instanceof qg.Oyt&&t.Qmt()&&t.YMt(this),t=t.SJ();this.wwt(),this.kc.yQ()&&this.m3.dyt().children.push(this.rTt.dyt())}SJ(){return this.dMt}fq(){return Xg}Zyt(){return this.rTt}K_(t){const s=!!this.SJ(),i=this.kc.g0();s&&this.Adt.Sgt(i),this.rTt.K_(),s&&this.Adt.bq(i)}*igt(t){const s=!!this.SJ(),i=this.kc.g0();s&&this.Adt.Sgt(i),yield*this.rTt.igt(),s&&this.Adt.bq(i)}rMt(){return!1}Kyt(){return this.kf}wwt(){let t=this.SJ();for(;t;){if(t instanceof qg.Oyt&&t.Qmt()&&!t.oyt())return void(this.kf=!1);t=t.SJ()}this.kf=!0}}}{let Zg=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const Kg=self.Cs;self.assert;Kg.oTt=class extends Kg.Un{constructor(t){super(),this.yx=t,this.kc=t.Rj()}hmt(){}static aTt(t,s){const i=s[0],e=[ey,sy,iy,ny,$g,ty];return Kg.Qn(e[i],t,s)}};class $g extends Kg.oTt{constructor(t,s){super(t),this.uTt=this.kc.AZ(),this.dSt=this.kc.fSt(s[1]),this.dSt!==Kg._j.Gj.hrt.random&&this.dSt!==Kg._j.Gj.hrt.lTt||this.yx.cTt()}fTt(){return this.uTt.dTt(this.dSt,this.uTt)}}class ty extends Kg.oTt{constructor(t,s){super(t),this.pTt=null,this.wSt=s[1],this.yx.cTt()}hmt(){const t=this.kc.Fk();this.pTt=t.jk(this.wSt),this.wSt=null;const s=this.yx.Uk(),i=this.pTt.Uk();this.mTt=[...new Set([...s.Wk(),...i.Wk()])],this.mTt=t.ymt(this.mTt)}fTt(){const t=this.pTt;if(t.Il()){const s=t.Uk();return Kg.Oyt.prototype.Yk.bind(s,this.mTt,t.Vk(),t.Hk(),t.zk())}{const s=t.zk();return()=>s}}}class sy extends Kg.oTt{constructor(t,s){super(t),this.sdt=this.kc.V$(s[1]),this.dSt=this.kc.fSt(s[2]),this.gTt=!!s[3],this.udt=this.kc.Fk().Zk(),this.yx.yTt(this.sdt)}fTt(){return this.sdt.MB().dTt(this.dSt,this.sdt.mB().gY())}MTt(...t){const s=this.sdt,i=s.EB().ydt(),e=i.length;if(0===e)return this.gTt?"":0;const n=Zg(this.yx.wTt(),e);return this.udt.pq().rpt(s),this.dSt.apply(i[n].gY(),t)}STt(t,...s){const i=this.sdt,e=i.DB(),n=e.length;if(0===n||"number"!=typeof t)return this.gTt?"":0;const r=Zg(t,n);return this.udt.pq().rpt(i),this.dSt.apply(e[r].gY(),s)}}class iy extends Kg.oTt{constructor(t,s){super(t),this.sdt=this.kc.V$(s[1]),this.TTt=s[3],this.gTt=!!s[2],this.yx.yTt(this.sdt)}bTt(){const t=this.sdt.EB().ydt(),s=t.length;return 0===s?this.gTt?"":0:t[Zg(this.yx.wTt(),s)].xTt(this.TTt)}vTt(){const t=this.sdt,s=t.EB().ydt(),i=s.length;if(0===i)return this.gTt?"":0;const e=s[Zg(this.yx.wTt(),i)],n=e.GW().ITt(t.CTt());return e.xTt(this.TTt+n)}GTt(t){const s=this.sdt,i=s.DB(),e=i.length;if(0===e||"number"!=typeof t)return this.gTt?"":0;const n=i[Zg(t,e)];let r=0;return s.y0()&&(r=n.GW().ITt(s.CTt())),n.xTt(this.TTt+r)}}class ey extends Kg.oTt{constructor(t,s){super(t),this.sdt=this.kc.V$(s[1]),this._Tt=this.sdt.knt(s[2]),this.DTt=this.sdt.oit(s[2]),this.dSt=this.kc.fSt(s[3]),this.gTt=!!s[4],this.udt=this.kc.Fk().Zk(),this.yx.yTt(this.sdt)}ETt(...t){const s=this.sdt,i=s.EB().ydt(),e=i.length;if(0===e)return this.gTt?"":0;const n=Zg(this.yx.wTt(),e);this.udt.pq().rpt(s);const r=i[n];let h=0;return s.y0()&&(h=r.GW().NTt(s.CTt())),this.dSt.apply(r.Pnt()[this.DTt+h].gY(),t)}ATt(t,...s){const i=this.sdt,e=i.DB(),n=e.length;if(0===n||"number"!=typeof t)return this.gTt?"":0;const r=Zg(t,n);this.udt.pq().rpt(i);const h=e[r];let o=0;return i.y0()&&(o=h.GW().NTt(i.CTt())),this.dSt.apply(h.Pnt()[this.DTt+o].gY(),s)}}class ny extends Kg.oTt{constructor(t,s){super(t),this.LTt=null,this.OTt=s[1]}hmt(){this.LTt=this.kc.Fk().Amt(this.OTt)}RTt(){return this.LTt}}}{let ry=function(t){const s=self.PTt[t];if(!s)throw new Error("invalid expression number");return s};0;const hy=self.Cs;self.assert;hy.kTt=class extends hy.Un{constructor(t,s,i){super(),this.yx=t,this.GM=i,this.Jc=s,this.Js=null,this.FTt=!1,this.HSt=!1}static EI(t,s,i){const e=s[0],n=[oy,ay,my,ly,fy,uy,dy,oy,ly,ly,gy,yy,my,wy,ay,py,cy,My,Sy,Ty,by,xy];return hy.Qn(n[e],t,e,i,s)}hmt(){}cTt(){this.FTt=!0}yTt(t){this.FTt||t&&(t.MB().Jz()||(this.FTt=!0))}jTt(){return this.FTt}ik(){return this.GM}Rj(){return this.yx.Rj()}Uk(){return this.yx.Uk()}uyt(){return this.HSt}zTt(){return 4===this.Jc}};class oy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.BTt=0;const n=e[1];this.UTt=n[0],this.WTt=[],this.QTt=null;for(let t=1,s=n.length;t<s;++t)this.WTt.push(hy.oTt.aTt(this,n[t]));this.WTt.length?this.Js=this.JTt:(this.Js=ry(this.UTt),this.HSt=!0)}YTt(t){if(t<0||t>=this.WTt.length)throw new RangeError("invalid numbered node");return this.WTt[t]}hmt(){for(const t of this.WTt)t.hmt();const t=ry(this.UTt);this.WTt.length?this.QTt=t(this):this.QTt=t}wTt(){return this.BTt}JTt(t){return this.BTt=t,this.QTt()}}class ay extends oy{constructor(t,s,i,e){super(t,s,i,e),this.Js=this.VTt,14===s&&(this.Uk().ZMt(),this.yx instanceof hy.QMt&&this.Uk().lwt())}VTt(t){this.BTt=t;const s=this.QTt();return"string"==typeof s?s:""}HTt(){return ry(this.UTt)()}}class uy extends oy{constructor(t,s,i,e){super(t,s,i,e),t.qTt()>=2?this.Js=this.eU:this.Js=this.aj,this.HSt=!1}aj(t){this.BTt=t;const s=this.QTt();return this.Rj().rj().aj(s)}eU(t){const s=this.aj(t);return s?s.eU():null}}class ly extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.XTt=e[1],this.Js=this.ZTt,this.HSt=!0}ZTt(){return this.XTt}}class cy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.KTt=e[1],this.Js=this.$Tt,this.HSt=!0}$Tt(){return this.KTt}}class fy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.sdt=this.Rj().V$(e[1]),t.qTt()>=2?this.Js=this.fB:this.Js=this.GW;const n=this.Uk();n.WMt(this.sdt),this.yx instanceof hy.QMt?n.lwt():n.SJ()&&n.SJ().lwt(),this.HSt=!0}GW(){return this.sdt}fB(){return this.sdt?this.sdt.fB():null}}class dy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.WK=this.Rj().UF().N5(e[1]),t.qTt()>=2?this.Js=this.zF:this.Js=this.WF,this.HSt=!0}WF(){return this.WK}zF(){return this.WK?this.WK.zF():null}}class py extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.k8=this.Rj().Q9().U6(e[1]),t.qTt()>=2?this.Js=this.Ist:this.Js=this.Yst,this.HSt=!0}Yst(){return this.k8}Ist(){return this.k8?this.k8.Ist():null}}class my extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.tbt=e[1],this.Js=this.sbt,this.HSt=!0}sbt(){return this.tbt}}class gy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.ibt=e[1];const n=this.yx.GW();this.yx instanceof hy.UMt&&this.yx.Lv()?(this.Js=this.ebt,this.HSt=!0):n&&n.y0()?(this.Js=this.nbt,this.cTt()):(this.Js=this.ebt,this.HSt=!0)}ebt(){return this.ibt}nbt(t){t=t||0;const s=this.yx.GW(),i=s.EB(),e=i.DB();let n=null;if(e.length)n=e[t%e.length].GW();else if(i.mdt()){const s=i.gdt();n=s[t%s.length].GW()}else{if(!(s.AB()>0))return 0;{const i=s.DB();n=i[t%i.length].GW()}}return this.ibt+n.ITt(s.CTt())}}class yy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.OTt=e[1],this.LTt=null,t.qTt()>=2?this.Js=this.rbt:this.Js=this.hbt,this.HSt=!0}hmt(){this.LTt=this.Rj().Fk().Amt(this.OTt)}hbt(){return this.LTt}rbt(){return null}}class My extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.obt=e[1],this.pTt=null,t.qTt()>=2?this.Js=this.abt:this.Js=this.ubt,this.HSt=!0}hmt(){this.pTt=this.Rj().Fk().jk(this.obt),this.obt=null}ubt(){return this.pTt}abt(){return null}}class wy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.lbt=[],this.cbt=[],this.HSt=!0;for(let t=1,s=e.length;t<s;++t){const s=hy.kTt.EI(this.yx,e[t],0);this.lbt.push(s),this.cbt.push(0),s.uyt()||(this.HSt=!1)}this.Js=this.fbt}hmt(){for(const t of this.lbt)t.hmt()}fbt(){const t=this.lbt,s=this.cbt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0);return s}}class Sy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.dbt=e[1],this.Js=this.fnt,this.HSt=!0}fnt(){return this.dbt}}class Ty extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.pbt=e[1],this.Js=this.mbt,this.HSt=!0}mbt(){return this.pbt}}class by extends oy{constructor(t,s,i,e){super(t,s,i,e),this.Js=this.QW,this.HSt=!1}QW(){return this.QTt()}}class xy extends hy.kTt{constructor(t,s,i,e){super(t,s,i),this.ylt=this.Rj().Rlt().clt(e[1]),this.Js=this.gbt,this.HSt=!0}gbt(){return this.ylt._c()}}}{let vy=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};0;const Iy=self.Cs,Cy=(self.assert,[]),Gy=function(){};Iy.UMt=class extends Iy.Un{constructor(t,s,i){if(super(),this.NSt=t,this.kc=t.Rj(),this.GM=i,this.dSt=this.kc.fSt(s[1]),this.ybt=s[3]>0,this.Mbt=2===s[3],this.wbt=!!s[4],this.Sbt=!!s[5],this.rv=!!s[6],this.VK=s[7],this.Tbt=this.NSt.Edt(),this.sdt=null,this._Tt=null,this.DTt=-1,this.uTt=null,this.K_=Gy,this.igt=Gy,this.zs=[],this.bbt=[],this.xbt=!1,this.vbt=null,this.Ibt=null,this.OMt=this.kc.yQ()?{RMt:s[8][0],Cbt:s[8][1]}:null,-1===s[0]?this.uTt=this.kc.AZ():(this.sdt=this.kc.V$(s[0]),s[2]&&(this._Tt=this.sdt.knt(s[2]),this.DTt=this.sdt.oit(s[2])),this.NSt.SJ()&&this.NSt.SJ().lwt()),10===s.length){let t=s[9];for(let s of t)this.zs.push(Iy.kTt.EI(this,s,this.zs.length)),this.bbt.push(0)}0===this.zs.length&&(this.zs=Cy,this.bbt=Cy),this.NSt.Fk().cmt(this)}static EI(t,s,i){return Iy.Qn(Iy.UMt,t,s,i)}hmt(){for(const t of this.zs)t.hmt(),t.jTt()&&(this.xbt=!0);this.Mbt?(this.K_=this.Gbt,this.igt=this._bt):this.uTt?(this.Dbt(),this.igt=this.Ebt):this.sdt.MB().Jz()?(this.Nbt(),this.igt=this.Abt):this.rv?(this.K_=this.Lbt,this.igt=this.Obt):(this.K_=this.Rbt,this.igt=this.Pbt)}Dbt(){const t=this.uTt,s=this.uTt;this.kbt(t,s,this.Fbt)}Nbt(){const t=this.sdt.MB(),s=this.sdt.mB().gY();this.kbt(t,s,this.jbt)}kbt(t,s,i){const e=this.dSt,n=this.Sbt,r=this.zs;if(0===r.length){const i=t.dTt(e,s);this.K_=n?function(){return Iy.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.uyt())this.K_=t.zbt(e,s,i.Js(0));else{const r=t.dTt(e,s);this.K_=function(){return Iy.xor(r(i.Js(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.uyt()&&h.uyt())this.K_=t.Bbt(e,s,i.Js(0),h.Js(0));else{const r=t.dTt(e,s);this.K_=function(){return Iy.xor(r(i.Js(0),h.Js(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.uyt()&&h.uyt()&&o.uyt())this.K_=t.Ubt(e,s,i.Js(0),h.Js(0),o.Js(0));else{const r=t.dTt(e,s);this.K_=function(){return Iy.xor(r(i.Js(0),h.Js(0),o.Js(0)),n)}}}else this.K_=i}I0(){return this.VK}Wyt(){return this.dSt}GW(){return this.sdt}CY(){return this._Tt}Wbt(){return this._Tt?this._Tt.xY():this.sdt?this.sdt.MB():null}qTt(){const t=this.Wbt();return t?t.Qbt():1}Uk(){return this.NSt}Rj(){return this.kc}ik(){return this.GM}_wt(){return this.ik()}Pyt(){return this.ybt}Qyt(){return this.Mbt}Jbt(){return this.Sbt}zY(){return this.wbt}Lv(){return this.rv}Ybt(){return this.OMt.RMt}Vbt(){return!!this.uTt}xwt(){return this.Vbt()||this.sdt.MB().Jz()}vwt(){for(const t of this.zs)if(t.zTt())return t.GW();return null}Hbt(t){this.OMt.RMt=!!t,this.NSt.owt()}qbt(){return this.OMt.Cbt}rMt(){return!this.Ybt()&&!this.kc.kwt()&&!this.qbt()}Xbt(){return this.vbt||(this.vbt=new Map),this.vbt}Zbt(){return this.Ibt||(this.Ibt=new Map),this.Ibt}Fbt(){const t=this.bbt;return vy(this.zs,t),Iy.xor(this.dSt.apply(this.uTt,t),this.Sbt)}*Ebt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt;vy(this.zs,t);let s=this.dSt.apply(this.uTt,t);return Iy.To(s)&&(s=yield*s),Iy.xor(s,this.Sbt)}return this.K_()}jbt(){const t=this.bbt;vy(this.zs,t);const s=this.sdt.mB().gY();return Iy.xor(this.dSt.apply(s,t),this.Sbt)}*Abt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt;vy(this.zs,t);const s=this.sdt.mB().gY();let i=this.dSt.apply(s,t);return Iy.To(i)&&(i=yield*i),Iy.xor(i,this.Sbt)}return this.K_()}Gbt(){return!0}*_bt(){return(this.Ybt()||this.kc.kwt())&&(yield this),!0}Kbt(){return this._Tt?this._Tt.xY().Qbt()>=2?this._Tt.IY():this._Tt:this.sdt.MB().Qbt()>=2?this.sdt.fB():this.sdt}Lbt(){const t=this.bbt;vy(this.zs,t);const s=this.dSt.apply(this.Kbt(),t);return this.sdt.eSt(),s}*Obt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt;vy(this.zs,t);let s=this.dSt.apply(this.Kbt(),t);return Iy.To(s)&&(s=yield*s),this.sdt.eSt(),s}return this.K_()}Rbt(){const t=this.zs,s=this.bbt,i=this.sdt.EB();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.jTt()||(s[i]=e.Js(0))}return i.ddt()?this.$bt(i):this.txt(i)}*Pbt(){return(this.Ybt()||this.kc.kwt())&&(yield this),this.Rbt()}sxt(t){const s=this.zs,i=this.bbt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.jTt()&&(i[e]=n.Js(t))}}$bt(t){const s=this.sdt,i=s.y0(),e=s.CTt(),n=this.DTt,r=n>=0,h=s.DB(),o=this.xbt,a=this.bbt,u=this.dSt,l=this.Sbt,c=this.Tbt&&!this.ybt;t.fdt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.sxt(s),r){const t=i?f.GW().NTt(e):0;d=u.apply(f.Pnt()[n+t].gY(),a)}else d=u.apply(f.gY(),a);Iy.xor(d,l)?t.Mdt(f):c&&t.wdt(f)}return s.ixt(!0),t.Sdt(!1),s.eSt(),t.pdt()}txt(t){const s=this.sdt,i=s.y0(),e=s.CTt(),n=s.FW(),r=this.DTt,h=r>=0,o=this.xbt,a=this.bbt,u=this.dSt,l=this.Sbt,c=this.Tbt&&!this.ybt,f=t.Tdt(),d=t.bdt(),p=c&&!this.NSt.bwt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let M;if(o&&this.sxt(t),h){const t=i?s.GW().NTt(e):0;M=u.apply(s.Pnt()[r+t].gY(),a)}else M=u.apply(s.gY(),a);Iy.xor(M,l)?(y=!0,p?(f.push(s),n&&s.nxt()):(m[g]=s,n&&s.rxt(g),++g)):p?(m[g]=s,n&&s.hxt(g),++g):c&&(d.push(s),n&&s.oxt())}Iy.Mh(m,g),n&&s.axt(p,g);const M=y;return p&&!y&&(y=this.uxt(f)),s.ixt(M||c),c?y:t.pdt()}uxt(t){const s=this.sdt,i=s.y0(),e=s.CTt(),n=this.xbt,r=this.DTt,h=r>=0,o=this.bbt,a=this.dSt,u=this.Sbt;for(let s=0,l=t.length;s<l;++s){const l=t[s];let c;if(n&&this.sxt(s),h){const t=i?l.GW().NTt(e):0;c=a.apply(l.Pnt()[r+t].gY(),o)}else c=a.apply(l.gY(),o);if(Iy.xor(c,u))return!0}return!1}lxt(t,s){return this.zs[t].Js(s)}Jyt(){const t=this.zs;if(!t.length)throw new Error("no parameters");return t[0].HTt()}t3(){if(!this.vbt||!this.vbt.size)return null;const t={};for(const[s,i]of this.vbt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map((t=>[t[0].zW(),t[1].zW(),t[2]]))),t[s]=e}return{ex:t}}s3(t){if(this.vbt&&(this.vbt.clear(),this.vbt=null),!t)return;const s=this.kc,i=t.ex;if(i){const t=this.Xbt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=Iy.Qn(Iy.Cl,n.map((t=>[s.ij(t[0]),s.ij(t[1]),t[2]])).filter((t=>t[0]&&t[1])))),t.set(e,i)}}}}}{let _y=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(0)};0;const Dy=self.Cs,Ey=(self.assert,[]),Ny=function(){},Ay=function*(){};Dy.QMt=class extends Dy.Un{constructor(t,s,i){super(),this.NSt=t;const e=t.Rj();this.kc=e,this.GM=i,this.VK=s.length>=4?s[3]:-1,this.cxt=s.length>=5?255&s[4]:0,this.fxt=s.length>=5?s[4]>>8:0,this.dSt=null,this.sdt=null,this._Tt=null,this.DTt=-1,this.uTt=null,this.dxt="",this.pxt=null,this.mxt=null,this.K_=Ny,this.igt=Ny,this.zs=[],this.bbt=[],this.xbt=!1,this.vbt=null,this.Ibt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.OMt=e.yQ()||n?{RMt:r[0],Cbt:r[1],index:r[2]}:null,-1===s[0])this.uTt=e.AZ(),this.dSt=e.fSt(s[1]);else if(-2===s[0])this.dxt=s[1];else if(n){const t=e.fSt(s[1]);this.dSt=t,this.K_=this.gxt,this.igt=this.yxt,this.fxt|=8}else this.sdt=e.V$(s[0]),4&this.fxt?(this.dxt=s[1],this.pxt=e.V$(s[2])):(s[2]&&(this._Tt=this.sdt.knt(s[2]),this.DTt=this.sdt.oit(s[2])),this.dSt=e.fSt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.zs.push(Dy.kTt.EI(this,s,this.zs.length)),this.bbt.push(0)}0===this.zs.length&&(this.zs=Ey,this.bbt=Ey),this.Mxt()&&(this.NSt.ZMt(),this.NSt.lwt()),this.NSt.Fk().fmt(this)}static EI(t,s,i){return Dy.Qn(Dy.QMt,t,s,i)}hmt(){for(const t of this.zs)t.hmt(),t.jTt()&&(this.xbt=!0);if(this.uTt)this.Dbt(),this.igt=this.Ebt;else if(this.dxt)4&this.fxt?this.wxt():this.Sxt(),this.dxt="",this.pxt=null;else if(this.K_===this.gxt){const t=this.dSt,s=this.kc.Fk().Dmt(this.NSt);this.dSt=t.bind(null,this.kc.Uz(),s)}else this._Tt?this.Bwt()?(this.K_=this.Txt,this.igt=this.bxt):(this.K_=this.xxt,this.igt=this.vxt):this.sdt.MB().Jz()?(this.Nbt(),this.igt=this.Abt):this.Lv()?(this.K_=this.Ixt,this.igt=this.Cxt):this.Bwt()?(this.K_=this.Gxt,this.igt=this._xt):this.Dxt()?(this.K_=this.Ext,this.igt=this.Nxt):this.zs.length?this.zs.every((t=>t.jTt()))?(this.K_=this.Axt,this.igt=this.Lxt):this.xbt?(this.K_=this.Oxt,this.igt=this.Rxt):this.zs.every((t=>t.uyt()))?(_y(this.zs,this.bbt),this.K_=this.Pxt,this.igt=this.kxt):(this.K_=this.Fxt,this.igt=this.jxt):(this.K_=this.Pxt,this.igt=this.kxt)}Dbt(){const t=this.uTt,s=this.uTt;this.kbt(t,s,this.Fbt)}Nbt(){const t=this.sdt.MB(),s=this.sdt.mB().gY();this.kbt(t,s,this.jbt)}Sxt(){const t=this.NSt.Fk(),s=t.jk(this.dxt);if(s.Il()){const i=!!(2&this.fxt);this.mxt=s.Uk();let e=[...new Set([...this.NSt.Wk(),...this.mxt.Wk()])];e=t.ymt(e);const n=!s.Vk()&&this.zxt()?{hSt:!0}:null;if(this.K_=Dy.Oyt.prototype.tSt.bind(this.mxt,e,this.zs,i,n),this.kc.yQ()){const t=this;this.igt=function*(){return(t.Ybt()||t.kc.kwt())&&(yield t),yield*t.mxt.uSt(e,t.zs,i,n)}}else this.igt=Ay}else this.K_=Ny,this.igt=Ay}wxt(){const t=this.NSt.Fk(),s=t.Pmt(this.pxt,this.dxt);if(s.Il()){const i=!!(2&this.fxt);this.mxt=s.Uk();let e=[...new Set([...this.NSt.Wk(),...this.mxt.Wk(),this.sdt,s.GW()])];e=t.ymt(e);const n=!this.sdt.y0()&&!s.GW().y0(),r=!this.sdt.y0()&&s.GW().y0(),h=this.sdt.y0();let o=null;if(!s.Vk()&&this.zxt()&&(o=o||{},o.hSt=!0),!r&&i||(o=o||{},o.sSt=this.sdt,o.iSt=s.GW()),n||r||h&&!s.zSt()?this.K_=Dy.Oyt.prototype.tSt.bind(this.mxt,e,this.zs,i,o):h&&(this.K_=Dy.myt.prototype.QSt.bind(s,e,this.zs)),this.kc.yQ()){const t=this;n||r||h&&!s.zSt()?this.igt=function*(){return(t.Ybt()||t.kc.kwt())&&(yield t),yield*t.mxt.uSt(e,t.zs,i,o)}:h&&(this.igt=function*(){return(t.Ybt()||t.kc.kwt())&&(yield t),yield*s.YSt(e,t.zs)})}else this.igt=Ay}else this.K_=Ny,this.igt=Ay}kbt(t,s,i){const e=this.dSt,n=this.zs;if(0===n.length)this.K_=t.dTt(e,s);else if(1===n.length){const i=n[0];if(i.uyt())this.K_=t.zbt(e,s,i.Js(0));else{const n=t.dTt(e,s);this.K_=function(){return n(i.Js(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.uyt()&&r.uyt())this.K_=t.Bbt(e,s,i.Js(0),r.Js(0));else{const n=t.dTt(e,s);this.K_=function(){return n(i.Js(0),r.Js(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.uyt()&&r.uyt()&&h.uyt())this.K_=t.Ubt(e,s,i.Js(0),r.Js(0),h.Js(0));else{const n=t.dTt(e,s);this.K_=function(){return n(i.Js(0),r.Js(0),h.Js(0))}}}else this.K_=i}I0(){return this.VK}Bwt(){return!!(8&this.fxt)}zwt(){return!!(16&this.fxt)}Dxt(){return 1===this.cxt}Lv(){return 2===this.cxt}Mxt(){return!!(1&this.fxt)}twt(){return this.Bwt()||this.zwt()}GW(){return this.sdt}Wbt(){return this._Tt?this._Tt.xY():this.sdt?this.sdt.MB():null}qTt(){const t=this.Wbt();return t?t.Qbt():1}Uk(){return this.NSt}zxt(){let t=this.NSt;do{if(t instanceof Dy.myt&&t.Vk())return!0;t=t.Gmt()}while(t);return!1}Rj(){return this.kc}ik(){return this.GM}_wt(){return this.OMt.index}Ybt(){return this.OMt.RMt}Hbt(t){this.OMt.RMt=!!t,this.NSt.owt()}qbt(){return this.OMt.Cbt}rMt(){return!this.Ybt()&&!this.kc.kwt()&&!this.qbt()}Xbt(){return this.vbt||(this.vbt=new Map),this.vbt}Zbt(){return this.Ibt||(this.Ibt=new Map),this.Ibt}Fbt(){const t=this.bbt;return _y(this.zs,t),this.dSt.apply(this.uTt,t)}*Ebt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt;return _y(this.zs,t),yield*this.dSt.apply(this.uTt,t)}return this.K_()}jbt(){const t=this.bbt;return _y(this.zs,t),this.dSt.apply(this.sdt.mB().gY(),t)}*Abt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt;return _y(this.zs,t),yield*this.dSt.apply(this.sdt.mB().gY(),t)}return this.K_()}Pxt(){const t=this.bbt,s=this.sdt.EB().DB();for(let i=0,e=s.length;i<e;++i)this.dSt.apply(s[i].gY(),t)}*kxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt,s=this.sdt.EB().DB();for(let i=0,e=s.length;i<e;++i)yield*this.dSt.apply(s[i].gY(),t)}else this.Pxt()}Fxt(){const t=this.bbt;_y(this.zs,t);const s=this.sdt.EB().DB();for(let i=0,e=s.length;i<e;++i)this.dSt.apply(s[i].gY(),t)}*jxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt;_y(this.zs,t);const s=this.sdt.EB().DB();for(let i=0,e=s.length;i<e;++i)yield*this.dSt.apply(s[i].gY(),t)}else this.Fxt()}Axt(){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt.EB().DB();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);i.apply(r.gY(),s)}}*Lxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt.EB().DB();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(n);yield*i.apply(r.gY(),s)}}else this.Axt()}Oxt(){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt.EB().DB();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.jTt()||(s[i]=e.Js(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.jTt()&&(s[i]=e.Js(n))}i.apply(r.gY(),s)}}*Rxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt.EB().DB();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.jTt()||(s[i]=e.Js(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.jTt()&&(s[i]=e.Js(n))}yield*i.apply(r.gY(),s)}}else this.Oxt()}Ext(){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt,n=e.Bxt(),r=e.EB().DB();n.Uxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Js(e);i.apply(n.gY(),s)}n.Wxt(i)}*Nxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt,n=e.Bxt(),r=e.EB().DB();n.Uxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Js(e);yield*i.apply(n.gY(),s)}n.Wxt(i)}else this.Ext()}Qxt(){return this._Tt?this._Tt.xY().Qbt()>=2?this._Tt.IY():this._Tt:this.sdt.MB().Qbt()>=2?this.sdt.fB():this.sdt}Ixt(){const t=this.bbt;return _y(this.zs,t),this.dSt.apply(this.Qxt(),t)}*Cxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.bbt;_y(this.zs,t);let s=this.dSt.apply(this.Qxt(),t);return Dy.To(s)&&(s=yield*s),s}return this.Ixt()}xxt(){const t=this.sdt,s=t.y0(),i=t.CTt(),e=this.zs,n=this.xbt,r=this.bbt,h=this.dSt,o=this.DTt,a=t.EB().DB();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.jTt()||(r[t]=s.Js(0))}for(let t=0,u=a.length;t<u;++t){const u=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.jTt()&&(r[s]=i.Js(t))}const l=s?u.GW().NTt(i):0;h.apply(u.Pnt()[o+l].gY(),r)}}*vxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.sdt,s=t.y0(),i=t.CTt(),e=this.zs,n=this.xbt,r=this.bbt,h=this.dSt,o=this.DTt,a=t.EB().DB();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.jTt()||(r[t]=s.Js(0))}for(let t=0,u=a.length;t<u;++t){const u=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.jTt()&&(r[s]=i.Js(t))}const l=s?u.GW().NTt(i):0;yield*h.apply(u.Pnt()[o+l].gY(),r)}}else this.xxt()}Gxt(){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt.EB().DB(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);n.push(i.apply(h.gY(),s))}return Promise.all(n)}*_xt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.zs,s=this.bbt,i=this.dSt,e=this.sdt.EB().DB(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Js(r);n.push(yield*i.apply(h.gY(),s))}return Promise.all(n)}return this.Gxt()}Txt(){const t=this.sdt,s=t.y0(),i=t.CTt(),e=this.zs,n=this.bbt,r=this.dSt,h=this.DTt,o=t.EB().DB(),a=[];for(let t=0,u=o.length;t<u;++t){const u=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Js(t);const l=s?u.GW().NTt(i):0;a.push(r.apply(u.Pnt()[h+l].gY(),n))}return Promise.all(a)}*bxt(){if((this.Ybt()||this.kc.kwt())&&(yield this),this.qbt()){const t=this.sdt,s=t.y0(),i=t.CTt(),e=this.zs,n=this.bbt,r=this.dSt,h=this.DTt,o=t.EB().DB(),a=[];for(let t=0,u=o.length;t<u;++t){const u=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Js(t);const l=s?u.GW().NTt(i):0;a.push(yield*r.apply(u.Pnt()[h+l].gY(),n))}return Promise.all(a)}return this.Txt()}async gxt(){try{await this.dSt()}catch(t){console.error(`Unhandled exception running script %c${this.NSt.Z3()._c()}, event ${this.NSt.dwt()}, action ${this._wt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.MQ&&self.MQ.mSt(this),Dy.Uyt.gSt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Dy.Uyt.ySt())}}*yxt(){return(this.Ybt()||this.kc.kwt())&&(yield this),this.gxt()}t3(){return this.vbt&&this.vbt.size?{ex:Dy.Mo(this.vbt)}:null}s3(t){if(this.vbt&&(this.vbt.clear(),this.vbt=null),!t)return;const s=t.ex;s&&(this.vbt=Dy.wo(s))}}}{let Ly=function(t){return t instanceof tM?$y.uU(t):t.UV()},Oy=function(t){return Ly(t).oj()},Ry=function(t){return $y.uU(t)},Py=function(t){return Ry(t).oj()},ky=function(t){return t instanceof sM?$y.uU(t):t},Fy=function(t){return t instanceof iM?$y.uU(t):t},jy=function(t,s,i,e){s.zW()<i.zW()?t.Set(s,i,e):t.Set(i,s,e)},zy=function(t,s,i){s.zW()<i.zW()?t.El(s,i):t.El(i,s)},By=function(t,s){t.Nl(s)},Uy=function(t,s,i){return s.zW()<i.zW()?t.Js(s,i):t.Js(i,s)},Wy=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.oj(),h=$y.ck(),o=$y.Tmt(),a=o.Uk().Edt(),u=o.GW(),l=o.Jbt(),c=s.EB(),f=u!==s;let d;oM=s,hM=f&&!l,aM=!1;let p=0,m=0,g=!1;c.ddt()?(eM.m(r.tJ()),eM.offset(i,e),h.Jxt(r.aj(),s,eM,rM),d=rM):a?$y.Yxt()&&!c.bdt().length&&c.Tdt().length?d=c.Tdt():(d=c.bdt(),aM=!0):d=c.Tdt(),n&&(p=r.Wb(),m=r.Yb(),r.BQ(i,e),r.FQ());for(const s of d)if(h.iz(t,s)){if(g=!0,l)break;f&&uM.add(s)}return n&&(r.jQ(p,m),r.FQ()),Hy.wh(rM),g},Qy=function(t){const s=$y.Qk().Edt(),i=oM.EB(),e=i.Tdt(),n=i.bdt();i.ddt()?(i.Idt(uM),s&&(Hy.wh(n),i.Cdt(uM,oM.DB()))):s?aM?i.Gdt(uM):(i.Cdt(uM,e),i.Idt(uM)):i.Idt(uM),oM.eSt()},Jy=function(t,s){hM&&(s&&Qy(t),uM.clear(),oM=null,hM=!1)},Yy=function(t,s){const i=$y.ij(s);if(!i)return!1;const e=t.EB();if(!e.ddt()&&!e.Tdt().includes(i))return!1;if(t.y0()){if(i.GW().Vxt(t))return e.Ddt(i),t.eSt(),!0}else if(i.GW()===t)return e.Ddt(i),t.eSt(),!0;return!1},Vy=function(t,s){const i=t.EB();if(i.ddt()){i.Sdt(!1),i.fdt();const e=t.DB();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.zW()===s?i.wdt(n):i.Mdt(n)}return t.eSt(),!!i.Tdt().length}{const e=i.Tdt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.zW()===s?i.wdt(r):++n}return Hy.Mh(e,n),t.eSt(),!!e.length}};0;const Hy=self.Cs,qy=new Hy.xo,Xy={},Zy={},Ky={};let $y=null;Hy.Hxt=function(t){$y=t};const tM=self.IW,sM=self.gB,iM=self.aU;Zy.qxt=function(t,s){return Hy.compare(this.oj().Wb(),t,s)},Ky.qxt=function(t,s){return Hy.compare(this.x,t,s)},Zy.Xxt=function(t,s){return Hy.compare(this.oj().Yb(),t,s)},Ky.Xxt=function(t,s){return Hy.compare(this.y,t,s)},Zy.Zxt=function(){return this.oj().nJ()},Ky.Zxt=function(){return this.eJ()},Xy.Kxt=function(){const t=Oy(this),s=t.WF(),i=t.tJ();return i.$a()<0||i.tu()<0||i.Za()>s.Bg()||i.Ka()>s.Zg()},Xy.$xt=function(t,s,i){const e=ky(this).EB(),n=e.DB();if(!n.length)return!1;let r=n[0],h=r.oj(),o=r,a=Hy.er(h.Wb(),h.Yb(),s,i);for(let e=1,u=n.length;e<u;++e){r=n[e],h=r.oj();const u=Hy.er(h.Wb(),h.Yb(),s,i);(0===t&&u<a||1===t&&u>a)&&(a=u,o=r)}return e.Ddt(o),!0},Zy.Qb=function(t){const s=this.oj();s.Wb()!==t&&(s.Qb(t),s.FQ())},Ky.Qb=function(t){this.x=+t},Zy.Vb=function(t){const s=this.oj();s.Yb()!==t&&(s.Vb(t),s.FQ())},Ky.Vb=function(t){this.y=+t},Zy.tvt=function(t,s){const i=this.oj();i.svt(t,s)||(i.jQ(t,s),i.FQ())},Ky.tvt=function(t,s){this.setPosition(t,s)},Xy.ivt=function(t,s){if(!(t=ky(t)))return;const i=Ly(this),e=t.GB(i);if(!e)return;const[n,r]=e.evt(s),h=i.oj();h.Wb()===n&&h.Yb()===r||(h.jQ(n,r),h.FQ())},Xy.nvt=function(t){if(0===t)return;const s=Oy(this);s.BQ(s.rvt()*t,s.hvt()*t),s.FQ()},Zy.ovt=function(t,s){if(0===s)return;const i=this.oj();t=Hy.Kn(t),i.BQ(Math.cos(t)*s,Math.sin(t)*s),i.FQ()},Ky.ovt=function(t,s){0!==s&&(t=Hy.Kn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},Zy.Wb=function(){return this.oj().Wb()},Ky.Wb=function(){return this.x},Zy.Yb=function(){return this.oj().Yb()},Ky.Yb=function(){return this.y},Xy.oF=function(){return $y.oF(Ly(this))},Zy.avt=function(t,s){return Hy.compare(this.oj().Bg(),t,s)},Ky.avt=function(t,s){return Hy.compare(this.width,t,s)},Zy.uvt=function(t,s){return Hy.compare(this.oj().Zg(),t,s)},Ky.uvt=function(t,s){return Hy.compare(this.height,t,s)},Zy.Hg=function(t){const s=this.oj();s.Bg()!==t&&(s.Hg(t),s.FQ())},Ky.Hg=function(t){this.width=t},Zy.Ug=function(t){const s=this.oj();s.Zg()!==t&&(s.Ug(t),s.FQ())},Ky.Ug=function(t){this.height=t},Zy.xE=function(t,s){const i=Oy(this);i.Bg()===t&&i.Zg()===s||(i.xE(t,s),i.FQ())},Ky.xE=function(t,s){this.YB(t,s)},Zy.Bg=function(){return this.oj().Bg()},Ky.Bg=function(){return this.width},Zy.Zg=function(){return this.oj().Zg()},Ky.Zg=function(){return this.height},Xy.lvt=function(){return Oy(this).tJ().Za()},Xy.cvt=function(){return Oy(this).tJ().Ka()},Xy.fvt=function(){return Oy(this).tJ().$a()},Xy.dvt=function(){return Oy(this).tJ().tu()},Xy.pvt=function(){const t=Oy(this).tJ();return(t.Za()+t.$a())/2},Xy.mvt=function(){const t=Oy(this).tJ();return(t.Ka()+t.tu())/2},Xy.gvt=function(t,s){return Hy.rr(Oy(this).XB(),Hy.Kn(s))<=Hy.Kn(t)},Xy.yvt=function(t){return Hy.ar(Oy(this).XB(),Hy.Kn(t))},Xy.Mvt=function(t,s){const i=Hy.Kn(t),e=Hy.Kn(s),n=Oy(this).XB();return Hy.ar(e,i)?Hy.ar(n,i)&&!Hy.ar(n,e):!(!Hy.ar(n,i)&&Hy.ar(n,e))},Zy.qB=function(t){const s=this.oj(),i=Hy.Zn(Hy.Kn(t));isNaN(i)||s.XB()===i||(s.qB(i),s.FQ())},Ky.qB=function(t){this.KQ=t},Xy.wvt=function(t){if(isNaN(t)||0===t)return;const s=Oy(this);s.qB(s.XB()+Hy.Kn(t)),s.FQ()},Xy.Svt=function(t){if(isNaN(t)||0===t)return;const s=Oy(this);s.qB(s.XB()-Hy.Kn(t)),s.FQ()},Xy.Tvt=function(t,s){const i=Oy(this),e=i.XB(),n=Hy.hr(e,Hy.Kn(s),Hy.Kn(t));isNaN(n)||e===n||(i.qB(n),i.FQ())},Xy.bvt=function(t,s,i){const e=Oy(this),n=e.XB(),r=s-e.Wb(),h=i-e.Yb(),o=Math.atan2(h,r),a=Hy.hr(n,o,Hy.Kn(t));isNaN(a)||n===a||(e.qB(a),e.FQ())},Xy.xvt=function(t,s){const i=Oy(this),e=i.XB(),n=t-i.Wb(),r=s-i.Yb(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.qB(h),i.FQ())},Zy.XB=function(){return Hy.$n(this.oj().XB())},Ky.XB=function(){return this.KQ},Xy.vvt=function(t,s){return Hy.compare(Hy.vr(100*Oy(this).tL(),6),t,s)},Zy.OU=function(){return this.oj().OU()},Ky.OU=function(){return this.isVisible},Xy.AU=function(t){const s=Oy(this);t=2===t?!s.OU():0!==t,s.OU()!==t&&(s.AU(t),$y.pj())},Xy.iL=function(t){const s=Hy.Xn(t/100,0,1),i=Oy(this);if(i.HJ()){if(i.uht().Ivt()===s)return}else if(i.tL()===s)return;i.iL(s),$y.pj()},Xy.Cvt=function(t){qy.Ko(t);const s=Oy(this);s.hJ().Qo(qy)||(s.oJ(qy),$y.pj())},Xy.nL=function(){const t=Oy(this).hJ();return Hy.Gr(t.ko(),t.Fo(),t.jo(),t.zo())},Xy.tL=function(){return Hy.vr(100*Oy(this).tL(),6)},Xy.Gvt=function(t){return!!(t=Fy(t))&&Oy(this).aj()===t},Xy._vt=function(t){const s=ky(this).EB(),i=s.DB();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.oj(),h=e.oj(),o=r.aj().ik(),a=h.aj().ik();0===t?(o>a||o===a&&r.uj()>h.uj())&&(e=n):(o<a||o===a&&r.uj()<h.uj())&&(e=n)}return s.Ddt(e),!0},Zy.Dvt=function(t,s,i){const e=this.oj(),n=0===t?e.Hb():e.ZQ();return Hy.compare(n,s,i)},Ky.Dvt=function(t,s,i){const e=0===t?this.sW:this.XQ;return Hy.compare(e,s,i)},Zy.Evt=function(){this.oj().uJ()},Ky.Evt=function(){this.aJ()},Zy.Nvt=function(){this.oj().cJ()},Ky.Nvt=function(){this.lJ()},Xy.Avt=function(t){(t=Fy(t))&&Oy(this).dJ(t)},Xy.Lvt=function(t,s){const i=0===t;if(!(s=ky(s)))return;const e=Ly(this),n=s.Ovt(e);n&&e.oj().mJ(n,i)},Zy.qb=function(t){const s=this.oj();s.Hb()!==t&&(s.qb(t),$y.pj())},Ky.qb=function(t){this.sW=t},Xy.Rvt=function(){return Oy(this).aj().ik()},Xy.Pvt=function(){return Oy(this).aj()._c()},Zy.kvt=function(){return this.oj().uj()},Ky.kvt=function(){return this.zIndex},Zy.Fvt=function(){return this.oj().Hb()},Ky.Fvt=function(){return this.sW},Zy.jvt=function(){return this.oj().ZQ()},Ky.jvt=function(){return this.XQ},Xy.zvt=function(t){const s=Ly(this),i=s.GW().WB().jnt(t);if(!i)return;const e=i.ik();return s.oj().PQ().AY(e)},Xy.Bvt=function(t,s){const i=Ly(this),e=i.GW().WB().jnt(s);if(!e)return;const n=e.ik(),r=1===t,h=i.oj().PQ();h.AY(n)!==r&&(h.LY(n,r),h.OY(),$y.pj())},Xy.Uvt=function(t,s,i){const e=Ly(this),n=e.GW().WB().jnt(t);if(!n)return;s=Math.floor(s);const r=n.EC().AC(s);if(!r)return;"color"===r?(qy.Ko(i),i=qy):"percent"===r&&(i/=100);const h=n.ik(),o=e.oj().PQ();o.PY(h,s,i)&&o.AY(h)&&$y.pj()};const eM=Hy.Qn(Hy.Rect),nM=[],rM=[];let hM=!1,oM=null,aM=!1;const uM=new Set;function*lM(t){if(!t)return!1;const s=this.Rj(),i=s.ck(),e=s.Fk(),n=e.Zk(),r=e.Tmt(),h=r.GW(),o=r.Xbt(),a=r.Zbt(),u=n.pq(),l=s.Ttt(),c=l-1,f=u.Qk(),d=n.mq(f);let p=o.get("collmemory");p||(p=Hy.Qn(Hy.Cl),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.yf().addEventListener("instancedestroy",(t=>By(p,t.GY))));const m=h.EB(),g=t.EB(),y=m.DB();let M=null;for(let s=0;s<y.length;++s){const n=y[s];g.ddt()?(i.Jxt(n.oj().aj(),t,n.oj().tJ(),nM),M=nM,i.Wvt(n,t,M)):M=g.DB();for(let s=0;s<M.length;++s){const r=M[s];if(i.iz(n,r)||i.Qvt(n,r)){const s=Uy(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(jy(p,n,r,l),a){const s=f.fq();e.Sq(s);const i=h.EB(),o=t.EB();if(i.Sdt(!1),o.Sdt(!1),h===t){const t=i.Tdt();Hy.wh(t),t.push(n),t.push(r),h.eSt()}else{const s=i.Tdt(),e=o.Tdt();Hy.wh(s),Hy.wh(e),s.push(n),e.push(r),h.eSt(),t.eSt()}yield*f.Hwt(u,d),e.bq(s)}}else zy(p,n,r)}Hy.wh(nM)}return n.Cq(),!1}Xy.Jvt=function(t){const s=ky(this);t=ky(t);const i=s.Rj();if(i.Yvt())return lM.call(s,t);if(!t)return!1;const e=i.ck(),n=i.Fk(),r=n.Zk(),h=n.Tmt(),o=h.GW(),a=h.Xbt(),u=h.Zbt(),l=r.pq(),c=i.Ttt(),f=c-1,d=l.Qk(),p=r.mq(d);let m=a.get("collmemory");m||(m=Hy.Qn(Hy.Cl),a.set("collmemory",m)),u.get("collisionCreatedDestroyCallback")||(u.set("collisionCreatedDestroyCallback",!0),i.yf().addEventListener("instancedestroy",(t=>By(m,t.GY))));const g=o.EB(),y=t.EB(),M=g.DB();let w=null;for(let s=0;s<M.length;++s){const i=M[s];y.ddt()?(e.Jxt(i.oj().aj(),t,i.oj().tJ(),nM),w=nM,e.Wvt(i,t,w)):w=y.DB();for(let s=0;s<w.length;++s){const r=w[s];if(e.iz(i,r)||e.Qvt(i,r)){const s=Uy(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(jy(m,i,r,c),a){const s=d.fq();n.Sq(s);const e=o.EB(),h=t.EB();if(e.Sdt(!1),h.Sdt(!1),o===t){const t=e.Tdt();Hy.wh(t),t.push(i),t.push(r),o.eSt()}else{const s=e.Tdt(),n=h.Tdt();Hy.wh(s),Hy.wh(n),s.push(i),n.push(r),o.eSt(),t.eSt()}d.Tq(l,p),n.bq(s)}}else zy(m,i,r)}Hy.wh(nM)}return r.Cq(),!1},Xy.Vvt=function(t){return t=ky(t),Wy(Ly(this),t,0,0)},Xy.Hvt=function(t,s,i){return t=ky(t),Wy(Ly(this),t,s,i)},Xy.qvt=function(){return!0},Xy.LJ=function(){return Oy(this).LJ()},Xy.n3=function(){return Oy(this).n3()},Xy.Xvt=function(t,s){const i=ky(this);t=ky(t);const e=i.Rj(),n=this.EB().DB();if(0===n.length)return!1;const r=t.EB();let h=r.DB();if(r.ddt()){const s=[...e.Zvt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.ddt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.xJ())s.Kvt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.SJ(),null===i)continue}else i=e.bJ();i.Kvt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Idt(a),t.eSt(),!0)},Xy.$vt=function(t,s){const i=ky(this);t=ky(t);const e=i.Rj(),n=i.EB().DB();if(0===n.length)return!1;const r=t.EB();let h=r.DB();if(r.ddt()){const s=[...e.Zvt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.ddt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.n3()||!e.Kvt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e._J())2===s&&i.n3()||i.Kvt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Idt(a),t.eSt(),!0)},Xy.tIt=function(t,s,i){const e=ky(this);t=ky(t);const n=e.Rj(),r=e.EB().DB();if(0===r.length)return!1;const h=t.EB();let o=h.DB();if(h.ddt()){const s=[...n.Zvt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.ddt()?null:new Set(o),u=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.GJ(i);null!==s&&s.Kvt(t)&&(null===a||a.has(s))&&u.push(s)}else if(1===s)for(const s of n.children())if(s.Kvt(t)){if(0===i){(null===a||a.has(s))&&u.push(s);break}--i}}return 0!==u.length&&(h.vdt(u),t.eSt(),!0)},Xy.sIt=function(t,s,i){const e=Ly(this);switch(t){case 0:default:return Hy.compare(e.IJ(),s,i);case 1:return Hy.compare(e.iIt(),s,i)}},Xy.EJ=function(t,s,i,e,n,r,h,o,a,u){t=ky(t);const l=Ly(this),c=$y.xmt().GW();for(const f of t.eIt(l,c)){if(!f.MB().nB())return;l.EJ(f,{RJ:s,kJ:i,jJ:e,BJ:n,WJ:r,VJ:h,JJ:o,qJ:a,ZJ:u})}},Xy.NJ=function(t){t=ky(t);const s=Ly(this),i=$y.xmt().GW();for(const e of t.eIt(s,i))s.NJ(e)},Xy.nIt=function(){const t=Ly(this);t.LJ()&&t.SJ().NJ(t)},Xy.rIt=function(){const t=Ly(this).SJ();return t?t.zW():-1},Xy.hIt=function(){return Ly(this).IJ()},Xy.oIt=function(){return Ly(this).iIt()},Xy.aIt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Oy(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.iY(),i.FQ()):i.tY(t,s)},Xy.nY=function(t,s,i,e,n,r,h,o){const a=Oy(this);a.nY(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,sW:r,aY:h,uY:o})&&a.FQ()},Xy.uIt=function(){const t=Oy(this);return t.hY()?t.oY().Ix():0},Xy.lIt=function(){const t=Oy(this);return t.hY()?t.oY().Cx():0},Xy.cIt=function(t){const s=Oy(this);t=2===t?!s.OU():0!==t,s.OU()!==t&&s.AU(t)},Xy.SY=function(t,s){this instanceof self.IW?this.PH(t,s):this.SY(t,s)},Xy.fIt=function(t,s){this instanceof self.IW?this.FH(t,""+s):this.fIt(t,""+s)},Xy.dIt=function(t){this instanceof self.IW?this.jH(t):this.dIt(t)},Xy.pIt=function(){this instanceof self.IW?this.LH():this.yY()},Xy.mIt=function(){this instanceof self.IW?this.OH():this.MY()},Xy.gIt=function(){return this instanceof self.IW?this.RH():this.gIt()},Xy.yIt=function(t){this instanceof self.IW?this.MIt(0!==t):this.wIt(0!==t)},Xy.SIt=function(){return this instanceof self.IW?this.bSt():this.TIt()},Zy.bIt=function(t,s,i){return Hy.compare(this.UV().Krt(t),s,i)},Ky.bIt=function(t,s,i){return Hy.compare(Ry(this).Krt(t),s,i)},Zy.xIt=function(t){return!!this.UV().Krt(t)},Ky.xIt=function(t){return!!Ry(this).Krt(t)},Xy.vIt=function(t,s){const i=ky(this),e=i.EB(),n=e.DB();if(!n.length)return!1;const r=i.y0();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],u=r?a.GW().ITt(i.CTt()):0,l=a.Krt(u+s);(null===h||0===t&&l<o||1===t&&l>o)&&(o=l,h=a)}return e.Ddt(h),!0},Xy.IIt=function(t){const s=ky(this);return s.Rj().Tmt().Jbt()?Vy(s,t):Yy(s,t)},Xy.SV=function(t){const s=new Set(Hy.Rh(t)),i=Ly(this).qW();return s.isSubsetOf(i)},Xy.CIt=function(){return Ly(this).GIt()},Xy._It=function(){return Ly(this).qW().size},Xy.DIt=function(t){return Ly(this).EIt(t)},Xy.NIt=function(t,s){const i=Hy.Rh(s);if(0===i.length)return;const e=Ly(this),n=new Set(e.qW());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.ZW(n)},Xy.AIt=function(){$y.LW(Ly(this))},Xy.LIt=function(){return!0},Xy.OIt=function(){return!0},Zy.RIt=function(t,s){this.UV().$rt(t,s)},Ky.RIt=function(t,s){Ry(this).$rt(t,s)},Zy.PIt=function(t,s){const i=this.UV(),e=i.Krt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.$rt(t,e+s)},Ky.PIt=function(t,s){const i=Ry(this),e=i.Krt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.$rt(t,e+s)},Zy.kIt=function(t,s){const i=this.UV(),e=i.Krt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.$rt(t,e-s))},Ky.kIt=function(t,s){const i=Ry(this),e=i.Krt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.$rt(t,e-s))},Zy.FIt=function(t,s){this.UV().$rt(t,s?1:0)},Ky.FIt=function(t,s){Ry(this).$rt(t,s?1:0)},Zy.jIt=function(t){const s=this.UV();s.$rt(t,0===s.Krt(t)?1:0)},Ky.jIt=function(t){const s=Ry(this);s.$rt(t,0===s.Krt(t)?1:0)},Xy.zIt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=Ly(this),e="state";$y.BIt(),i.d6(e),i.nx(s,e),$y.UIt(e,{WIt:!0})},Xy.QIt=function(){return JSON.stringify(Ly(this).ix("state"))},Xy.JIt=function(){return Ly(this).GW()._c()},Xy.YIt=function(){const t=$y.Smt().hpt();let s=t.AB();for(const i of $y.Zvt(t))++s;return s},Xy.VIt=function(){return $y.Smt().hpt().EB().DB().length},Zy.UW=function(){return this.UV().UW()},Ky.UW=function(){return Ry(this).UW()},Zy.zW=function(){return this.UV().zW()},Ky.zW=function(){return Ry(this).zW()},Xy.Ygt=function(t){const s=Ly(this);return t.toLowerCase()===$y.Fk().Xgt(s)},Xy.$W=function(t){const s=Ly(this);$y.Fk().$W(s,t)},Xy.HIt=function(t){const s=ky(this);return $y.Fk().bgt().qIt(s.EB().DB(),t),!0},Xy.XIt=function(){return Ly(this).QW()},Hy.ZIt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.Cj,M=s.rrt,w=s.hrt,S=Object.assign({},Xy,i>=2?Ky:Zy);n&&(y.qxt=S.qxt,y.Xxt=S.Xxt,y.Zxt=S.Zxt,y.Kxt=S.Kxt,y.$xt=S.$xt,M.Qb=S.Qb,M.Vb=S.Vb,M.tvt=S.tvt,M.ivt=S.ivt,M.nvt=S.nvt,M.ovt=S.ovt,w.KIt=S.Wb,w.$It=S.Yb,w.hF=S.oF),r&&(y.avt=S.avt,y.uvt=S.uvt,M.Hg=S.Hg,M.Ug=S.Ug,M.xE=S.xE,w.tCt=S.Bg,w.sCt=S.Zg,w.iCt=S.lvt,w.eCt=S.cvt,w.nCt=S.fvt,w.rCt=S.dvt,w.hCt=S.pvt,w.oCt=S.mvt),h&&(y.aCt=S.gvt,y.uCt=S.yvt,y.Mvt=S.Mvt,M.qB=S.qB,M.wvt=S.wvt,M.Svt=S.Svt,M.Tvt=S.Tvt,M.bvt=S.bvt,M.xvt=S.xvt,w.lCt=S.XB),o&&(y.OU=S.OU,y.vvt=S.vvt,M.AU=S.AU,M.iL=S.iL,M.Cvt=S.Cvt,w.Opacity=S.tL,w.ColorValue=S.nL),a&&(y.Gvt=S.Gvt,y._vt=S._vt,y.Dvt=S.Dvt,M.Evt=S.Evt,M.Nvt=S.Nvt,M.Avt=S.Avt,M.Lvt=S.Lvt,M.qb=S.qb,w.Rvt=S.Rvt,w.Pvt=S.Pvt,w.kvt=S.kvt,w.Fvt=S.Fvt,w.jvt=S.jvt),u&&(y.zvt=S.zvt,M.Bvt=S.Bvt,M.Uvt=S.Uvt),d&&(y.qvt=S.qvt,y.LJ=S.LJ,y.n3=S.n3,y.Xvt=S.Xvt,y.$vt=S.$vt,y.tIt=S.tIt,y.sIt=S.sIt,M.EJ=S.EJ,M.NJ=S.NJ,M.nIt=S.nIt,w.rIt=S.rIt,w.hIt=S.hIt,w.oIt=S.oIt),p&&(M.aIt=S.aIt,M.nY=S.nY,w.uIt=S.uIt,w.lIt=S.lIt),l&&(y.OU=S.OU,M.AU=S.cIt,M.cCt=S.SY,M.fCt=S.fIt,M.dCt=S.dIt),c&&(y.pCt=S.gIt,M.mCt=S.pIt,M.gCt=S.mIt),f&&(y.Il=S.SIt,M.yCt=S.yIt),m&&(y.Jvt=S.Jvt,y.Vvt=S.Vvt,y.Hvt=S.Hvt,s.MCt=Jy),e||(y.bIt=S.bIt,y.xIt=S.xIt,y.vIt=S.vIt,y.IIt=S.IIt,y.SV=S.SV,M.RIt=S.RIt,M.PIt=S.PIt,M.kIt=S.kIt,M.FIt=S.FIt,M.jIt=S.jIt,M.NIt=S.NIt,y.LIt=S.LIt,y.OIt=S.OIt,M.AIt=S.AIt,M.zIt||(M.zIt=S.zIt),w.QIt||(w.QIt=S.QIt),w.YIt=S.YIt,w.VIt=S.VIt,w.wCt=S.UW,w.SCt=S.zW,w.JIt=S.JIt,w.CIt=S.CIt,w._It=S._It,w.DIt=S.DIt,y.Ygt=S.Ygt,M.$W=S.$W,M.HIt=S.HIt),g&&(w.XIt=S.XIt)}}{const cM=self.Cs;cM.xgt=class extends cM.Un{constructor(t){super(),this.Adt=t,this.Jc="",this.IR=-1,this.TCt="",this.bCt=!1,this.xCt=null,this.Bdt=0,this.mMt=[],this.Vdt=null,this.vCt=new Map,this.ICt=null,this.CCt=null,this.GCt=-1,this.TSt=null,this._Ct=null,this.DCt=!1}Jn(){this.Jc="",this.IR=-1,this.TCt="",this.xCt=null,this.CCt=null,this.TSt=null,this._Ct=null,this.GCt=-1,cM.wh(this.mMt),this.Vdt&&(this.Vdt.clear(),this.Vdt=null);for(const t of this.vCt.values())t.Jn();this.vCt.clear(),this.ICt=null}Ub(){const t=this.Adt,s=t.Rj().g0(),i=t.Smt();this.xCt=i.Qk(),this.Bdt=i.$dt()+1;const e=t.pyt(this.xCt);e&&(this.CCt=e,this.TSt=e.FSt(),this._Ct=e.kSt().map((t=>t.Net())),e.Bwt()&&(this.GCt=e.USt()));for(const t of s){const s=t.EB();s.ddt()&&!this.xCt.cwt(t)||(this.mMt.push(t),this.vCt.set(t,cM.Qn(cM.ECt,s)))}const n=t.Jk();this.Vdt=n.size>0?n:null}NCt(t){this.Jc="timer",this.Ub(),this.IR=this.Adt.Rj().cF()+t}ACt(t){this.Jc="walltimer",this.Ub(),this.IR=this.Adt.Rj().dF()+t}LCt(t){this.Jc="signal",this.Ub(),this.TCt=t.toLowerCase()}qIt(t,s){this.Jc="instance-signals",this.Ub(),this.TCt=s.toLowerCase(),this.ICt=new Set(t)}OCt(t){this.Jc="promise",this.Ub(),t.then((()=>this.Ugt())).catch((t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Ugt()}))}RCt(){return"timer"===this.Jc}PCt(){return"walltimer"===this.Jc}zgt(){return"signal"===this.Jc}Hgt(){return"instance-signals"===this.Jc}lyt(){return"promise"===this.Jc}Bgt(){return this.TCt}kCt(){return this.bCt}Ugt(){this.bCt=!0}qgt(t){this.ICt.delete(t),0===this.ICt.size&&this.Ugt()}Cgt(){return this.RCt()?this.IR<=this.Adt.Rj().cF():this.PCt()?this.IR<=this.Adt.Rj().dF():this.kCt()}FCt(t){t.Hdt(this.xCt,this.Bdt);for(const[t,s]of this.vCt.entries()){const i=t.EB();s.Hdt(i)}this.Vdt&&t.fpt([...this.Vdt]);const s=this.CCt;s&&(s.Kwt(this.TSt),s.kSt().map(((t,s)=>t.dnt(this._Ct[s]))),s.Bwt()&&s.WSt(this.GCt))}Ggt(t){this.FCt(t),this.xCt.Uwt(t),this.CCt&&this.CCt.Bwt()&&this.CCt.aSt(this.GCt),this.Adt.Mgt(this.mMt),this.DCt=!0}async Ngt(t){this.FCt(t);for(const s of this.xCt.Wwt(t))await this.Adt.Rj().sgt(s);this.CCt&&this.CCt.Bwt()&&this.CCt.aSt(this.GCt),this.Adt.Mgt(this.mMt),this.DCt=!0}_gt(){return this.DCt}adt(t){for(const s of this.vCt.values())s.adt(t);if("instance-signals"===this.Jc){for(const s of t)this.ICt.delete(s);0===this.ICt.size&&this.Ugt()}}t3(){const t={},s={wt:this.Jc,t:this.IR,st:this.TCt,s:this.bCt,ev:this.xCt.I0(),sm:this.mMt.map((t=>t.I0())),dsm:this.Vdt?[...this.Vdt].map((t=>t.I0())):null,sols:t};this.xCt.Dwt(this.Bdt)&&(s.act=this.xCt.vmt(this.Bdt).I0());for(const[s,i]of this.vCt)t[s.I0().toString()]=i.t3();return"instance-signals"===this.Jc&&(s.pi=[...this.ICt].map((t=>t.zW()))),s}static cyt(t,s){const i=t.Rj(),e=t.Lmt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.Rmt(s.act);if(!i)return null;n=i.ik()}const r=cM.Qn(cM.xgt,t);r.IR=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.IR?"signal":"timer",r.TCt=s.st,r.bCt=s.s,r.xCt=e,r.Bdt=n;for(const t of s.sm){const s=i.cq(t);s&&r.mMt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.cq(t);s&&(r.Vdt||(r.Vdt=new Set),r.Vdt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.cq(s);if(!h)continue;const o=cM.Qn(cM.ECt,null);o.s3(t,n),r.vCt.set(h,o)}if("instance-signals"===r.Jc){r.ICt=new Set;for(const t of s.pi){const s=i.ij(t);s&&r.ICt.add(s)}}return r}}}{const fM=self.Cs;fM.ECt=class extends fM.Un{constructor(t){super(),this.sdt=null,this.jCt=!0,this.dK=[],t&&(this.sdt=t.GW(),this.jCt=t.ddt(),fM.xh(this.dK,t.Tdt()))}Jn(){this.sdt=null,fM.wh(this.dK)}Hdt(t){t.Sdt(this.jCt),fM.xh(t.Tdt(),this.dK)}adt(t){fM.Dh(this.dK,t)}t3(){return{sa:this.jCt,insts:this.dK.map((t=>t.zW()))}}s3(t,s){const i=t.Rj();this.jCt=!!s.sa,fM.wh(this.dK);for(const t of s.insts){const s=i.ij(t);s&&this.dK.push(s)}}}}{let dM=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};0;const pM=self.Cs;pM.zCt=class extends pM.Un{constructor(t){super(),this.kc=t.runtime,this.jc=t.id,this.Hn=t.name??"",this.BCt=!!t.Qz,this.UCt=!!t.WCt,this.QCt=!!t.Zz,this.JCt=!!t.YCt,this.VCt=!!t.$z,this.HCt=!!t.qCt,this.XCt=!!t.rB,this.ZCt=!!t.qz,this.KCt=!!t.sB,this.$Ct=t.tGt,this.sGt=null,this.iGt=new Map,this.eGt=new Map,this.nGt=new Map,this.rGt=new Map,this.hGt=t.oGt,this.aGt=null}Jn(){this.kc=null}Rj(){return this.kc}Wz(){return this.jc}_c(){return this.Hn}uGt(){}Vgt(){return this.Qbt()>=2?this.aGt.constructor:this.constructor}Qbt(){return this.$Ct}lGt(t=!1){let s=this.hGt;return t&&"function"!=typeof s&&this.Qbt()>=2&&(s=globalThis.qV),s}Jz(){return this.BCt}Vz(){return this.UCt}Xz(){return this.ZCt}iB(){return this.KCt}Kz(){return this.QCt}gb(){return this.JCt}tB(){return this.VCt}nB(){return this.HCt}hB(){return this.XCt}dTt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.iGt.get(t);return i||(i=t.bind(s),this.iGt.set(t,i),i)}zbt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=dM(this.eGt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}Bbt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=dM(this.nGt,t),r=dM(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}Ubt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=dM(this.rGt,t),h=dM(r,i),o=dM(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}cGt(t){if(!this.Jz())throw new Error("must be single-global plugin");this.sGt=t}dB(){if(!this.Jz())throw new Error("must be single-global plugin");return this.sGt}mB(){if(!this.Jz())throw new Error("must be single-global plugin");return this.sGt.mB()}fGt(){const t=this.Qbt();pM.Bz.dGt(this,t);const s=this.lGt(!0);if(s){if(this.aGt=new s,!(this.aGt instanceof self.jz))throw new TypeError("plugin class must derive from IPlugin")}else this.aGt=new self.jz;pM.Bz.pGt(t)}lB(){return this.aGt}}}{const mM=self.Cs;mM.mGt=class extends mM.zCt{constructor(t,s){super(t),this.gGt=s,this.yGt=0,this.MGt=new Map,this.wGt("elem-focused",(t=>t.SGt())),this.wGt("elem-blurred",(t=>{t&&t.TGt()}))}Jn(){super.Jn()}bGt(t){const s=this.yGt++;return this.MGt.set(s,t),s}xGt(t){this.MGt.delete(t)}wGt(t,s){this.kc.fQ(this.gGt,t,(t=>{const i=this.MGt.get(t.elementId);s(i,t)}))}}}{const gM=self.Cs;gM.vGt=class extends gM.Un{constructor(t){super(),this.sdt=t,this.kc=t.Rj(),this.IGt=t.MB()}Jn(){this.sdt=null,this.kc=null,this.IGt=null}GW(){return this.sdt}Rj(){return this.kc}MB(){return this.IGt}sV(){return this.sdt.sV()}uGt(){}ixt(t){}Uxt(t){}Wxt(t){}m4(t){}T4(){}M4(){}W4(t){}CGt(){}lGt(){return null}GGt(t,s,i){const e=gM.Qn(gM.Event,t,s);e._Gt=this,i&&Object.assign(e,i),this.GW().x5(e)}}}{const yM=self.Cs;yM.DGt=class extends yM.Un{constructor(t,s){super(),this.fi=t,this.gGt=s,this.EGt=null,this.kc=t.Rj(),this.sdt=this.fi.GW(),this.NGt=this.sdt.Bxt(),this.i6=null,this.n6=null,this.TQ=!1,this.xQ=!1,this.qf=null,this.HD=!1}Jn(){this.HD=!0,this.AGt(),this.LGt(),this.i6=null,this.n6=null,this.qf&&(this.qf.Jn(),this.qf=null),this.fi=null,this.kc=null,this.sdt=null,this.NGt=null}Yn(){return this.HD}UV(){return this.fi}Rj(){return this.kc}GW(){return this.sdt}MB(){return this.NGt.MB()}Bxt(){return this.NGt}OGt(){return this.fi.ej()}uQ(t){return this.kc.uQ(t,this.fi,null)}RGt(t){return this.kc.RGt(t,this.fi,null)}vj(t){return this.kc.vj(t,this.fi,null)}PGt(t,s){return this.kc.PGt(t,this.fi,s)}kGt(t,s){return this.kc.kGt(t,this.fi,s)}FGt(t){return this.kc.FGt(t)}jGt(t,s){this.kc.fQ(this.gGt,t,s)}zGt(t){for(const[s,i]of t)this.jGt(s,i)}BGt(t,s){this.kc.zc(this.gGt,t,s)}UGt(t,s){return this.kc.gj(this.gGt,t,s)}WGt(t,s){if(!this.kc.bk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.gGt,handler:t,data:s,responseId:null});this.BGt(t,s)}QGt(t){if(!t)throw new Error("cannot set empty component id");this.EGt=t}JGt(){if(!this.EGt)throw new Error("wrapper extension component id not set");return this.kc._Q(this.EGt)}EQ(t,s){if(!this.EGt)throw new Error("wrapper extension component id not set");this.kc.EQ(this.EGt,t,s)}YGt(t){for(const[s,i]of t)this.EQ(s,i)}sq(t,s){if(!this.EGt)throw new Error("wrapper extension component id not set");this.kc.sq(this.EGt,t,s)}iq(t,s){if(!this.EGt)throw new Error("wrapper extension component id not set");return this.kc.iq(this.EGt,t,s)}f8(){}VGt(){}HGt(){if(!this.TQ){if(!this.i6)if(this.kc.yQ()){const t=globalThis.MQ,s=this.MB();this.i6=()=>{const i=performance.now();this.f8(),t.SQ(s,performance.now()-i)}}else this.i6=()=>this.f8();this.kc.yf().addEventListener("tick",this.i6),this.TQ=!0}}AGt(){this.TQ&&(this.kc.yf().removeEventListener("tick",this.i6),this.TQ=!1)}qGt(){return this.TQ}XGt(){if(!this.xQ){if(!this.n6)if(this.kc.yQ()){const t=globalThis.MQ,s=this.MB();this.n6=()=>{const i=performance.now();this.VGt(),t.SQ(s,performance.now()-i)}}else this.n6=()=>this.VGt();this.kc.yf().addEventListener("tick2",this.n6),this.xQ=!0}}LGt(){this.xQ&&(this.kc.yf().removeEventListener("tick2",this.n6),this.xQ=!1)}ZGt(){return this.xQ}KGt(){return[]}ix(){return null}nx(t){}Wrt(t){}qrt(t,s){}Bht(t,s,i){if(0===s)return;const e=this.Wrt(t);if("number"!=typeof e)throw new Error("expected number");this.qrt(t,e+s,i)}$Gt(t,s,i,e){}t_t(t,...s){t.call(this,...s)}s_t(t,...s){return t.call(this,...s)}lGt(){return null}GGt(t,s,i){if(!this.fi.i_t())return;const e=this.OGt(),n=yM.Qn(yM.Event,t,s);n.GY=e,i&&Object.assign(n,i),e.dispatchEvent(n)}gb(){return!1}}}{const MM=self.Cs;MM.e_t=class extends MM.DGt{constructor(t,s){super(t,s),this.Nst=t.oj(),this.n_t=null,this.r_t=null}Jn(){if(this.n_t){const t=this.kc.yf();t.removeEventListener("renderercontextlost",this.n_t),t.removeEventListener("renderercontextrestored",this.r_t),this.n_t=null,this.r_t=null}this.Nst=null,super.Jn()}h_t(){this.o_t()}a_t(){}u_t(){}o_t(){if(this.n_t)return;this.n_t=()=>this.rK(),this.r_t=()=>this.l_t();const t=this.kc.yf();t.addEventListener("renderercontextlost",this.n_t),t.addEventListener("renderercontextrestored",this.r_t)}rK(){this.a_t()}l_t(){this.u_t()}oj(){return this.Nst}Sit(){return!1}wit(){if(!this.Sit())throw new Error("original size not known");const t=this.c_t();if(t)return t.Bg()}bit(){if(!this.Sit())throw new Error("original size not known");const t=this.c_t();if(t)return t.Zg()}c_t(){return null}f_t(){const t=this.c_t();if(t){const s=t.lI();if(s)return[s.Bg(),s.Zg()]}return[100,100]}d_t(){const t=this.c_t();return t?t.tN():null}p_t(){const t=this.c_t();return t?t.m_t():null}g_t(){const t=this.c_t();return!!t&&t.y_t()}evt(t){const s=this.fi.oj();return[s.Wb(),s.Yb(),s.ZQ()]}CGt(t,s,i){}M_t(t,s){}E2(){return!0}}}{const wM=self.Cs,SM=wM.Qn(wM.Rect);wM.w_t=class extends wM.e_t{constructor(t,s){super(t,s),this.S_t=this.MB().bGt(this),this.T_t=!0,this.b_t=!1,this.x_t=!1,this.v_t=-.2,this.I_t=wM.Qn(wM.Rect,0,0,-1,-1);const i=this.kc.bj();this.C_t=i.yH(),this.G_t=i.MH(),this.__t=-1,this.D_t=-1,this.E_t=!1,this.HGt()}Jn(){this.MB().xGt(this.S_t),this.N_t("destroy"),this.S_t=-1,super.Jn()}mY(){if(this.kc.bk())throw new Error("not valid in worker mode");return this.A_t("get-element")}N_t(t,s){s||(s={}),s.elementId=this.S_t,this.BGt(t,s)}A_t(t,s){return s||(s={}),s.elementId=this.S_t,this.WGt(t,s)}L_t(t,s){return s||(s={}),s.elementId=this.S_t,this.UGt(t,s)}O_t(t){t||(t={});const s=this.oj();t.elementId=this.S_t,t.isVisible=s.OU(),t.htmlIndex=s.aj().vH(),t.htmlZIndex=s.IH(),Object.assign(t,this.R_t()),this.T_t=!!t.isVisible,this.WGt("create",t),this.P_t(!0)}cIt(t){t=!!t,this.T_t!==t&&(this.T_t=t,this.N_t("set-visible",{isVisible:t}))}f8(){this.P_t(!1)}k_t(){const t=this.kc.bj().EH();return"Android"===wM.Zs.Ks&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}P_t(t){if(this.UV().NH())return;const s=this.oj(),i=s.aj(),e=s.tJ();let[n,r]=i.MW(e.Za(),e.Ka()),[h,o]=i.MW(e.$a(),e.tu());const a=this.kc.bj(),u=a.Dz(),l=a.Nz();if(!s.OU()||!i.OU())return void this.cIt(!1);if(!this.k_t()&&(h<=0||o<=0||n>=u||r>=l))return void this.cIt(!1);SM.set(n,r,h,o);const c=a.yH(),f=a.MH(),d=i.vH(),p=s.IH();if(!t&&SM.equals(this.I_t)&&this.C_t===c&&this.G_t===f&&this.__t===d&&this.D_t===p)return void this.cIt(!0);this.I_t.m(SM),this.C_t=c,this.G_t=f,this.__t=d,this.D_t=p,this.cIt(!0);let m=null;this.x_t&&(m=i.AH()+this.v_t),this.N_t("update-position",{left:Math.round(this.I_t.Za()),top:Math.round(this.I_t.Ka()),width:Math.round(this.I_t.width()),height:Math.round(this.I_t.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}yY(){this.A_t("focus",{focus:!0})}MY(){this.A_t("focus",{focus:!1})}SGt(){this.b_t=!0}TGt(){this.b_t=!1}gIt(){return this.b_t}SY(t,s){this.N_t("set-css-style",{prop:wM.So(t),val:s})}fIt(t,s){this.N_t("set-attribute",{name:t,val:s})}dIt(t){this.N_t("remove-attribute",{name:t})}F_t(){this.E_t||(this.E_t=!0,Promise.resolve().then((()=>{this.E_t=!1,this.N_t("update-state",this.R_t())})))}R_t(){}j_t(){return this.S_t}}}{const TM=self.Cs,bM=self.EY;TM.z_t=class extends TM.Un{constructor(t){super(),this.kc=t.runtime,this.jc=t.id,this.Hn=t.name??"",this.B_t=TM.Qn(TM.Ol),this.U_t=TM.Qn(TM.Ol),this.$Ct=t.tGt,this.hGt=t.oGt,this.W_t=null}Jn(){this.U_t.Jn(),this.B_t.Jn(),this.kc=null}Rj(){return this.kc}Wz(){return this.jc}_c(){return this.Hn}uGt(){}Qbt(){return this.$Ct}lGt(t=!1){let s=this.hGt;return t&&"function"!=typeof s&&this.Qbt()>=2&&(s=globalThis.UH),s}Q_t(t){this.B_t.Fl(t)}F6(){return this.B_t.jl()}n0(t){this.U_t.Fl(t)}o0(t){this.U_t.El(t)}DB(){return this.U_t.jl()}fGt(){const t=this.Qbt();TM.Bz.dGt(this,t);const s=this.lGt(!0);if(s){if(this.W_t=new s,!(this.W_t instanceof bM))throw new TypeError("behavior class must derive from IBehavior")}else this.W_t=new bM;TM.Bz.pGt(t)}bY(){return this.W_t}}}{const xM=self.Cs;xM.J_t=class extends xM.Un{constructor(t){super(),this.kc=t.Rj(),this._Tt=t,this.sdt=t.GW(),this.Y_t=t.xY(),this.Y_t.Q_t(this.sdt)}Jn(){this.kc=null,this._Tt=null,this.sdt=null,this.Y_t=null}uGt(){}CY(){return this._Tt}GW(){return this.sdt}Rj(){return this.kc}xY(){return this.Y_t}}}{const vM=self.Cs;vM.V_t=class extends vM.Un{constructor(t,s){super(),this.H_t=t,this.gGt=s,this.fi=t._Y(),this.kc=t.Rj(),this._Tt=t.CY(),this.NGt=this._Tt.Bxt(),this.TQ=!1,this.xQ=!1,this.$H=!1,this.qf=null}Jn(){this.AGt(),this.LGt(),this.q_t(),this.qf&&(this.qf.Jn(),this.qf=null),this.H_t=null,this.fi=null,this.kc=null,this._Tt=null,this.NGt=null}xY(){return this._Tt.xY()}X_t(){return this.H_t}_Y(){return this.fi}GW(){return this.fi.GW()}oj(){return this.fi.oj()}Rj(){return this.kc}CY(){return this._Tt}Bxt(){return this.NGt}OGt(){return this.H_t.OGt()}uQ(t){return this.kc.uQ(t,this.fi,this._Tt)}RGt(t){return this.kc.RGt(t,this.fi,this._Tt)}vj(t){return this.kc.vj(t,this.fi,this._Tt)}Z_t(){}f8(){}VGt(){}K_t(){}HGt(){this.TQ||(this.kc.VH(this),this.TQ=!0)}AGt(){this.TQ&&(this.kc.HH(this),this.TQ=!1)}qGt(){return this.TQ}XGt(){this.xQ||(this.kc.qH(this),this.xQ=!0)}LGt(){this.xQ&&(this.kc.XH(this),this.xQ=!1)}ZGt(){return this.xQ}$_t(){this.$H||(this.kc.ZH(this),this.$H=!0)}q_t(){this.$H&&(this.kc.KH(this),this.$H=!1)}tDt(){return this.$H}KGt(){return[]}jGt(t,s){this.kc.fQ(this.gGt,t,s)}sDt(t,s){}ix(){return null}nx(t){}Wrt(t){}qrt(t,s){}Bht(t,s){if(0===s)return;const i=this.Wrt(t);if("number"!=typeof i)throw new Error("expected number");this.qrt(t,i+s)}$Gt(t,s,i,e){}t_t(t,...s){t.call(this,...s)}s_t(t,...s){return t.call(this,...s)}lGt(){return null}GGt(t,s,i){if(!this.H_t.i_t())return;const e=this.OGt(),n=vM.Qn(vM.Event,t,s);n.iDt=e,n.GY=e.GY,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let IM=function(t){if(t!==GM)throw new Error("invalid internal API token")};0;const CM=self.Cs;CM._j={},CM.tut={};const GM=CM.Gs();let _M=[],DM=[],EM=[],NM=null,AM=null,LM=null,OM=null;const RM=new Map,PM=new Map;CM.Bz=class extends CM.Un{constructor(t,s){super(),this.kc=t,this.eDt=[],this.uTt=null,this.nDt=[],this.rDt=new Map,this.hDt=null,this.oDt=null,this.aDt=new Set(s)}uDt(t){const s=t[19],i=this.kc.fSt(t[0]);if(!i)throw new Error("missing plugin");CM.ZIt(t,i,s);const e=s>=2?CM.zCt:i,n=CM.Qn(e,{runtime:this.kc,Qz:t[1],WCt:t[2],Zz:t[5],$z:t[8],YCt:t[9],qCt:t[13],rB:t[14],qz:t[17],sB:t[18],tGt:s,id:t[20],name:t[21],oGt:s>=2?i:null});n.uGt(),this.eDt.push(n),RM.set(i,n)}lDt(){this.uTt=CM.Qn(CM._j.Gj,{runtime:this.kc,Qz:!0}),this.uTt.uGt()}cDt(t){const s=t[1],i=t[2],e=t[3],n=this.kc.fSt(t[0]);if(!n)throw new Error("missing behavior");this.rDt.set(n,(()=>{const t=s>=2?CM.z_t:n,r=CM.Qn(t,{runtime:this.kc,id:i,name:e,tGt:s,oGt:s>=2?n:null});r.uGt(),this.nDt.push(r),PM.set(n,r),!this.hDt&&CM.tut.fDt&&r instanceof CM.tut.fDt?this.hDt=r:!this.oDt&&CM.tut.dDt&&r instanceof CM.tut.dDt&&(this.oDt=r),r.fGt()}))}pDt(t){const s=this.rDt.get(t);s&&(s(),this.rDt.delete(t))}static dGt(t,s=1){if(CM.Bz.dGt!==NM)throw new Error("invalid method");1===s&&_M.push(t),DM.push(t)}static pGt(t=1){if(CM.Bz.pGt!==AM)throw new Error("invalid method");1===t&&_M.pop(),DM.pop()}static NW(){if(CM.Bz.NW!==LM)throw new Error("invalid method");if(0===_M.length)throw new Error("no init object set");return _M.at(-1)}static zz(t){if(CM.Bz.zz!==OM)throw new Error("invalid method");if(IM(t),0===DM.length)throw new Error("no init object set");return DM.at(-1)}static mDt(t){EM.push(t)}static gDt(){EM.pop()}static oQ(){if(0===EM.length)throw new Error("no init properties set");return EM.at(-1)}yDt(){for(const t of this.eDt)t.fGt()}static uB(t){return RM.get(t)||null}static NY(t){return PM.get(t)||null}AZ(){return this.uTt}MDt(){return this.hDt}wDt(){return this.oDt}_Q(t){return this.aDt.has(t)}},NM=CM.Bz.dGt,AM=CM.Bz.pGt,LM=CM.Bz.NW,OM=CM.Bz.zz}{const kM=self.Cs,FM=new Set;kM.SDt=class extends kM.Un{constructor(){super(),this.TDt=0,this.HZ="",this.qZ=0,this.bDt=0,this.xDt=0,this._y=0,this.Dy=0,this.vDt=!1,this.IDt=!1,this.CDt=null,this.GDt="",this.UD=kM.Qn(kM.Rect),this._Dt=kM.Qn(kM.Gu),this.DDt="",this.EDt=new self.Lj(this),FM.add(this)}Jn(){this.JD(),this.CDt&&0===this.CDt.aK()&&this.CDt.Jn(),this.CDt=null,FM.delete(this),this.NDt()}static rK(){for(const t of FM)t.GDt="",t.UD.set(0,0,0,0),t._Dt.Hu(t.UD)}ADt(t){this.HZ=t[0],this.qZ=t[1],this.bDt=t[2],this.xDt=t[3],this._y=t[4],this.Dy=t[5],this.vDt=t[6],this.IDt=!0}LDt(t,s){if(this.CDt)throw new Error("already loaded asset");this.HZ=s;const i={};return kM.Xh(s)&&(i.bZ="remote"),this.Oj(t,i),this.CDt.IZ()}ODt(t,s){if(this.CDt)throw new Error("already loaded asset");this.HZ="",this.qZ=s.size,this.CDt=kM.Qn(kM.xZ,t.ak(),{blob:s,size:this.qZ,bZ:"local"})}RDt(t){if(t===this)throw new Error("cannot replace with self");this.TDt++,this.JD(),this.HZ=t.HZ,this.qZ=t.qZ,this.bDt=t.bDt,this.xDt=t.xDt,this._y=t._y,this.Dy=t.Dy,this.vDt=t.vDt,this.IDt=t.IDt,this.CDt=t.CDt,this.GDt=t.GDt,this.UD=t.UD,this._Dt=t._Dt,this.NDt()}vZ(){return this.HZ}Al(){return this.qZ}PDt(){return this.bDt}kDt(){return this.xDt}y_t(){return this.vDt}Bg(){return this._y}Zg(){return this.Dy}FDt(){return this.CDt.Bg()}jDt(){return this.CDt.Zg()}Oj(t,s){if(this.CDt)throw new Error("already got asset");s=Object.assign({},s,{url:this.vZ(),size:this.Al()}),this.CDt=t.TZ(s)}$Z(){return this.CDt&&this.CDt.$Z()}async nX(t,s){if(!this.CDt)throw new Error("no asset");if(this.GDt)throw new Error("already loaded texture");const i=this.TDt;this.GDt="loading";const e=await this.CDt.nX(t,s);if(this.TDt!==i)return null;if(!e)return this.GDt="",null;this.GDt="loaded",this.IDt||(this._y=e.Bg(),this.Dy=e.Zg(),this.IDt=!0);const n=this.vDt?this.Dy:this._y,r=this.vDt?this._y:this.Dy;return this.UD.set(this.bDt,this.xDt,this.bDt+n,this.xDt+r),this.UD.Mt(e.Bg(),e.Zg()),this._Dt.Hu(this.UD),this.vDt&&this._Dt.tl(),e}JD(){this.GDt&&(this.CDt&&this.CDt.JD(),this.GDt="",this.UD.set(0,0,0,0),this._Dt.Hu(this.UD))}lI(){return this.CDt&&"loaded"===this.GDt?this.CDt.lI():null}tN(){return this.UD}m_t(){return this._Dt}hH(){return this.EDt}zDt(){return this.CDt}async BDt(t){t||(t=await this.CDt.uK());const s=kM.lo(this._y,this.Dy),i=s.getContext("2d");return this.vDt?(i.rotate(Math.PI/-2),i.translate(-this.Dy,0),i.drawImage(t,this.bDt,this.xDt,this.Dy,this._y,0,0,this.Dy,this._y)):i.drawImage(t,this.bDt,this.xDt,this._y,this.Dy,0,0,this._y,this.Dy),s}async UDt(t){if(this.DDt)return this.DDt;const s=await this.BDt(t),i=await kM.co(s);return this.DDt=URL.createObjectURL(i),this.DDt}NDt(){this.DDt&&(URL.revokeObjectURL(this.DDt),this.DDt="")}}}{const jM=self.Cs;jM.WDt=class extends jM.Un{constructor(t){super(),this.Hn=t[0],this.QDt=t[1],this.wbt=!!t[2],this.Mot=t[3],this.JDt=t[4],this.YDt=!!t[5],this.VK=t[6],this.VDt=t[7].map((t=>jM.Qn(jM.HDt,t))),this.qDt=new self.kY(this)}static XDt(t,s){const i=jM.Qn(jM.WDt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.VDt.push(jM.HDt.XDt(t)),i}Jn(){for(const t of this.VDt)t.Jn();jM.wh(this.VDt)}ZDt(t){for(const s of this.VDt)s.sV().Oj(t)}KDt(t,s){return Promise.all(this.VDt.map((i=>i.sV().nX(t,s))))}$Dt(){for(const t of this.VDt)t.sV().JD()}_c(){return this.Hn}I0(){return this.VK}VY(){return this.VDt.length}qY(){return this.VDt}tEt(t){if((t=Math.floor(t))<0||t>=this.VDt.length)throw new RangeError("invalid frame");return this.VDt[t]}sEt(t,s){(s=Math.floor(s))<0?this.VDt.unshift(t):s>=this.VDt.length?this.VDt.push(t):this.VDt.splice(s,0,t)}iEt(t){if((t=Math.floor(t))<0||t>=this.VDt.length)throw new RangeError("invalid frame");this.VDt[t].Jn(),this.VDt.splice(t,1)}eEt(t){for(let s=0,i=this.VDt.length;s<i;++s)if(jM.Ze(this.VDt[s].mV(),t))return s;return-1}nEt(t){if("string"==typeof t){const s=this.eEt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}FY(){return this.QDt}zY(){return this.wbt}UY(){return this.Mot}QY(){return this.JDt}YY(){return this.YDt}rEt(){return this.qDt}}}{const zM=self.Cs,BM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();zM.HDt=class extends zM.Un{constructor(t){super(),this.hEt=zM.Qn(zM.SDt),this.hEt.ADt(t),this.oEt=t[7],this.aEt=zM.Qn(zM.Ga,t[8],t[9]),this.uEt=t[10].map((t=>zM.Qn(zM.lEt,this,t))),this.cEt=new Map;for(const t of this.uEt)this.cEt.set(t._c().toLowerCase(),t);this.fEt=null;const s=t[11];s.length>=6&&(this.fEt=zM.Qn(zM.ol,s)),this._M=t[12]?t[12]:"",this.dEt=new self.tV(this)}static XDt(t){const s=zM.Qn(zM.HDt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.hEt.ODt(t,BM),s}Jn(){this.fEt&&(this.fEt.Jn(),this.fEt=null),this.hEt.Jn(),this.hEt=null}sV(){return this.hEt}iV(){return this.oEt}WQ(){return this.aEt.Aa()}YQ(){return this.aEt.Oa()}cV(){return this.fEt}uV(t){return this.cEt.get(t.toLowerCase())||null}aV(t){return(t=Math.floor(t))<0||t>=this.uEt.length?null:this.uEt[t]}nV(){return this.uEt.length}mV(){return this._M}XY(){return this.dEt}}}{const UM=self.Cs;UM.lEt=class extends UM.Un{constructor(t,s){super(),this.pEt=t,this.Hn=s[0],this.mEt=UM.Qn(UM.Ga,s[1],s[2])}Jn(){}_c(){return this.Hn}Wb(){return this.mEt.Aa()}Yb(){return this.mEt.Oa()}gEt(){return this.mEt}}}{const WM=self.Cs,QM=self.MQ,JM=self.gB;self.assert;WM.nlt=class extends WM.Un{constructor(t,s,i){super();const e=t.fSt(i[1]);this.kc=t,this.IGt=WM.Bz.uB(e),this.NGt=null,this.yEt=e.Instance,this.GM=s,this.VK=i[11],this.Hn=i[0],this.XSt=this.kc.Emt(i[14]),this.MEt=!!i[9],this.wEt=!!i[2],this.SEt=!!i[10],this.TEt=i[3].map((s=>({AK:s[0],type:s[1],name:s[2],bEt:t.Emt(s[3])}))),this.xEt=i[4],this.vEt=i[5],this.UCt=this.IGt.Vz(),this.IEt=WM.Qn(WM.Event.yf),this._$=null;const[n,r]=t.ck().uz();if(this.CEt=WM.Qn(WM.GEt,n,r),this._Et=!0,this.DEt=null,this.EEt=null,this.NEt=-1,this.AEt=null,this.LEt=null,this.OEt=null,this.REt=null,this.PEt=null,this.kEt=!1,this.FEt=null,this.jEt=i[8].map((t=>WM.zEt.EI(this,t))),this.BEt=[],this.UEt=new Map,this.WEt=new Map,this.QEt=new Set,this.JEt=new Map,this.YEt=WM.Qn(WM.tdt,this),this.VEt=null,this.HEt=0,this.qEt=!1,this.FEt=null,this.hEt=null,this.XEt=null,this.ZEt=null,this.KEt=null,this.$Et=0,this.vbt=new Map,this.Ibt=new Map,this.dK=[],this.tNt=new Map,this.sNt=!0,this.IGt.tB()&&(this._$=WM.Qn(WM.D$,this,i[12])),i[6]&&(this.hEt=WM.Qn(WM.SDt),this.hEt.ADt(i[6])),i[7]){this.XEt=i[7].map((t=>WM.Qn(WM.WDt,t))),this.ZEt=new Map,this.KEt=new Map;for(const t of this.XEt)this.ZEt.set(t._c().toLowerCase(),t),this.KEt.set(t.I0(),t)}this.wEt?(this.DEt=[],this.EEt=new Set,this.NEt=this.kc.iNt()):(this.AEt=[],this.LEt=new Set,this.OEt=[],this.REt=[],this.PEt=[]);const h=this.IGt.Qbt();if(h<2&&(this.NGt=WM.Qn(e.eNt,this,i[15]),!(this.NGt instanceof WM.vGt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.nNt=null,this.rNt=null,this.j3=WM.Qn(WM.Event.yf),WM.Bz.dGt(this,h),h>=2?(o=e.eNt,o||(o=globalThis.eH)):o=this.NGt.lGt(),o){if(this.nNt=new o(h<2?this:null),h<2&&!(this.nNt instanceof JM))throw new TypeError("script interface class must derive from IObjectClass");if(h>=2&&!(this.nNt instanceof globalThis.eH))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.nNt=new JM;if(WM.Bz.pGt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.NGt.CGt(s,i,e)}}this.kc.hNt()&&!this.wEt&&!this.SEt&&this.UCt||this.uGt(),this.IGt.Jz()&&(this.IGt.cGt(this),this.oNt(i)),this.aNt=null}static EI(t,s,i){return WM.Qn(WM.nlt,t,s,i)}Jn(){if(this.IEt.Jn(),this.IEt=null,this.hEt&&(this.hEt.Jn(),this.hEt=null),this.XEt){for(const t of this.XEt)t.Jn();WM.wh(this.XEt),this.ZEt.clear(),this.KEt.clear()}this.aNt=null,this.YEt.Jn(),this.YEt=null,this.vbt.clear(),this.Ibt.clear(),this.FEt=null,this.kc=null}uNt(t){for(let s=1,i=t.length;s<i;++s){const i=this.kc.V$(t[s]);this.DEt.push(i),this.EEt.add(i),i.AEt.push(this),i.LEt.add(this)}}lNt(t){this.kEt=!0,this.FEt=t}FW(){return this.kEt}c4(){return this.FEt}cNt(){let t=0;if(!this.wEt)for(const s of this.AEt)for(const i of s.fNt()){const s=i._c().toLowerCase();this.UEt.set(s,i),this.WEt.set(s,t),this.BEt.push(i),++t}for(const s of this.fNt()){const i=s._c().toLowerCase();this.UEt.set(i,s),this.WEt.set(i,t),this.BEt.push(s),++t}for(const t of this.BEt)this.QEt.add(t.xY().constructor);if(!this.wEt&&this.AEt.length){const t=this.kc.dNt();WM.Th(this.OEt,t,0),WM.Th(this.REt,t,0),WM.Th(this.PEt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.AEt){const r=t.CTt();this.OEt[r]=i,i+=t.pNt(),this.REt[r]=e,e+=t.mNt(),this.PEt[r]=n,n+=t.gNt();const h=t.WB();if(h&&this._$)for(const t of h.QB())s.push(t.yNt(this._$))}this._$&&this._$.MNt(s)}}oNt(t){const s=this.kc.wNt(),i=WM.Qn(WM.Instance,{runtime:this.kc,objectType:this,uid:s});i.SNt(t[16],[]),this.kc.TNt(s,i),this.dK.push(i)}Bxt(){return this.NGt}bNt(){return this.SEt}yf(){return this.IEt}uGt(){this.wEt||(this.NGt?this.NGt.uGt():this.nNt.nH())}xNt(){return this.$Et>0}async m4(t){this.wEt||(this.$Et++,1===this.$Et&&(this.NGt?await this.NGt.m4(t):await this.nNt.oH(this.kc.bj().vNt())))}T4(){if(!this.wEt){if(this.$Et--,this.$Et<0)throw new Error("released textures too many times");0===this.$Et&&(this.NGt?this.NGt.T4():this.nNt.aH(this.kc.bj().vNt()))}}M4(){if(this.wEt)throw new Error("not applicable to family");this.NGt?this.NGt.M4():this.nNt.uH()}async W4(t){this.wEt||(this.NGt?await this.NGt.W4(t):await this.nNt.lH(this.kc.bj().vNt()))}Rj(){return this.kc}MB(){return this.IGt}INt(){return this.yEt}_c(){return this.Hn}Emt(){return this.XSt}ik(){return this.GM}I0(){return this.VK}y0(){return this.wEt}e0(){return this.MEt}Vz(){return this.UCt}CTt(){return this.NEt}fNt(){return this.jEt}mNt(){return this.xEt}CNt(t){return t&&this.QEt.has(t)}pNt(){return this.TEt.length}GNt(){return this.TEt.map((t=>t.AK))}_Nt(t){return this.TEt.findIndex((s=>s.AK===t))}eit(t){return this.TEt.findIndex((s=>s.name===t))}DNt(){return this.TEt.map((t=>t.name))}ENt(){return this.TEt.map((t=>t.bEt))}rit(t){if((t=Math.floor(t))<0||t>=this.TEt.length)throw new RangeError("invalid instance variable index");return this.TEt[t].type}nit(t){if((t=Math.floor(t))<0||t>=this.TEt.length)throw new RangeError("invalid instance variable index");return this.TEt[t].name}gNt(){return this.vEt}NNt(){return this.BEt}knt(t){return this.UEt.get(t.toLowerCase())||null}oit(t){const s=this.WEt.get(t.toLowerCase());return void 0===s?-1:s}WB(){return this._$}tB(){return this.IGt.tB()}ANt(){return this._$&&this._$.LNt()}wgt(){return this.YEt}EB(){return this.YEt.EB()}sV(){return this.hEt}X$(t){this.VEt=t}q$(){return this.VEt}Z$(t){this.HEt=t}ONt(){return this.HEt}RNt(){return this.XEt}PNt(){return this.XEt.length}kmt(){return this.AEt}Vxt(t){return this.LEt.has(t)}qMt(){return this.DEt}M0(t){return this.EEt.has(t)}NTt(t){return this.REt[t]}ITt(t){return this.OEt[t]}OSt(t){this.JEt.set(t.jSt().toLowerCase(),t)}RSt(t){return!!this.JSt(t)}JSt(t){const s=this.JEt.get(t.toLowerCase());return s&&s.Il()?s:null}kNt(){return this.XEt}FNt(t){if(!this.XEt)throw new Error("no animations");return this.ZEt.get(t.toLowerCase())||null}jNt(t){if(!this.XEt)throw new Error("no animations");return this.KEt.get(t)||null}zNt(t){if(this.FNt(t))throw new Error(`animation name '${t}' already exists`);const s=WM.WDt.XDt(this.Rj(),t);return this.XEt.push(s),this.ZEt.set(s._c().toLowerCase(),s),this.KEt.set(s.I0(),s),s}BNt(t){const s=this.FNt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.XEt.length)throw new Error("cannot remove last animation");const i=this.XEt.indexOf(s);this.XEt.splice(i,1),this.ZEt.delete(s._c().toLowerCase()),this.KEt.delete(s.I0()),s.Jn()}UNt(){if(!this.XEt)throw new Error("no animations");return this.XEt[0]}WNt(){return this.UNt().tEt(0)}QNt(){if(this.XEt){const t=this.WNt().sV();return[t.Bg(),t.Zg()]}return this.hEt?[this.hEt.Bg(),this.hEt.Zg()]:[100,100]}mB(){if(!this.IGt.Jz())throw new Error("not a single-global plugin");return this.dK[0]}DB(){return this.dK}*SB(){yield*this.dK}*_B(){yield*this.dK,yield*this.kc.Zvt(this)}AB(){return this.dK.length}n0(t){this.dK.push(t)}JNt(){this.sNt=!0}Z4(){if(!this.sNt||this.wEt)return;const t=this.dK;let s=0;for(let i=t.length;s<i;++s)t[s].YNt(s);const i=this.kc.VNt();for(const t of i)t.GW()===this&&t.YNt(s++);this.sNt=!1}HNt(t){const s=this.dK;if(t<s.length)return s[t];t-=s.length;const i=this.kc.VNt();for(const s of i)if(s.GW()===this){if(0===t)return s;--t}return null}Ovt(t){if(t&&t.FW()&&t.GW()!==this)for(const s of t.jW())if(s.GW()===this)return s;const s=this.EB().DB();return s.length?s[0]:null}GB(t){const s=this.EB().DB();return s.length>0?s[t.UW()%s.length]:null}*eIt(t,s){const i=this.EB().DB(),e=i.length,n=s.EB(),r=s.EB().DB(),h=r.length;let o=t.UW();!s.y0()&&n.ddt()||(o=r.indexOf(t));const a=Math.ceil(e/h),u=e%h;let l=0,c=0;0===u||o<u?(l=o*a,c=a):(l=u*a+(o-u)*(a-1),c=a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}ixt(t){this.NGt?.ixt(t)}eSt(){if(!this.kEt||this.wEt)return;this.Z4();const t=this.EB(),s=t.Tdt(),i=t.ddt(),e=this.kc.Smt(),n=e&&e.Qk()&&e.Qk().Edt();for(const e of this.FEt.q4()){if(e===this)continue;e.Z4();const r=e.EB();if(r.Sdt(i),!i){const i=r.Tdt();WM.wh(i);for(const t of s)i.push(e.HNt(t.UW()));if(n){const s=t.bdt(),i=r.bdt();WM.wh(i);for(const t of s)i.push(e.HNt(t.UW()))}}}}axt(t,s){for(const i of this.c4().q4()){const e=i.EB();t?WM.Mh(e.bdt(),s):WM.Mh(e.Tdt(),s)}}qNt(){return this.CEt}XNt(t){this._Et=!!t}ZNt(){if(this._Et&&this.UCt){for(const t of this.dK)t.oj().KNt();for(const t of this.kc.VNt())t.GW()===this&&t.oj().KNt();this._Et=!1}}$Nt(t,s,i){if(s){const i=this.tNt.get(s);i&&(i.delete(t),0===i.size&&this.tNt.delete(s))}if(i){let s=this.tNt.get(i);s||(s=new Set,this.tNt.set(i,s)),s.add(t)}}tAt(){if(this.y0()){const t=new Set;for(const s of this.DEt)for(const i of s.tAt())t.add(i);return t.values()}return this.tNt.keys()}Xbt(){return this.vbt||(this.vbt=new Map),this.vbt}Zbt(){return this.Ibt||(this.Ibt=new Map),this.Ibt}sAt(){return this.CNt(WM.tut.fDt)}iAt(){return this.CNt(WM.tut.dDt)}eAt(){return this.CNt(WM.tut.nAt)}s0(){return this.CNt(WM.tut.rAt)}t3(){const t={instances:this.dK.map((t=>t.ix()))};return this.vbt&&this.vbt.size&&(t.ex=WM.Mo(this.vbt)),t}s3(t,s){this.vbt&&(this.vbt.clear(),this.vbt=null);const i=t.ex;i&&(this.vbt=WM.wo(i));const e=this.dK,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].nx(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.kc.LW(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.Vz()&&(e=this.kc.jF().s4(i.w.l),!e))continue;const r=this.kc.i0(this.VEt||this,e,!1,0,0,!0);r.nx(i),s&&s.add(r)}this.aNt=n,this.JNt()}hAt(){return this.aNt}oAt(){this.aNt=null}aAt(){for(let t=0,s=this.dK;t<s;++t)this.dK[t].aAt()}fB(){return this.nNt}Ok(){return this.j3}uAt(){return this.rNt}LB(t){this.rNt=t}x5(t){const s=this.kc,i=s.yQ()&&!s.Fk().jB();i&&QM.v5(),this.j3.dispatchEvent(t),i&&QM.I5()}}}{const YM=self.Cs;YM.lAt=class extends YM.Un{constructor(t,s){super(),this.kc=t,this.cAt=s;for(const t of this.cAt)t.lNt(this)}Jn(){this.kc=null}Rj(){return this.kc}l4(){return this.cAt}q4(){return this.cAt}t5(){return this.cAt.some((t=>t.Vz()))}}}{const VM=self.Cs,HM=self.MQ,qM=(self.IW,VM.Bz),XM=[];let ZM=0;const KM=new WeakMap,$M=new WeakMap;VM.Instance=class extends VM.Un{constructor(t){if(VM.Bz!==qM)throw new Error("invalid addon manager");super(),this.kc=t.runtime,this.fAt=t.objectType,this.Nst=null,this.dAt=null,this.pAt=null,this.mAt=0,this.gAt=t.uid,this.yAt=ZM++,this.fxt=0,this.MAt=null;const s=VM.Rh(t.tags);s.length>0&&(this.MAt=new Set(s)),this.wAt=XM,this.SAt=XM;const i=this.fAt.NNt();i.length>0&&(this.SAt=i.map(((t,s)=>VM.Qn(VM.TAt,{runtime:this.kc,vY:t,GY:this,index:s})))),this.bAt=this.fAt.FW()?[]:null,this.xAt=-1,this.IEt=null;const e=this.MB();if(e.gb()&&(this.fxt|=4),e.Vz())if(this.Nst=VM.Qn(VM.vAt,this,t.kQ),t.IAt)this.Nst.CAt(t.IAt);else{this.Nst.GAt();const[t,s]=this.fAt.QNt();this.Nst.xE(t,s),this.GW().ANt()&&this.Nst.PQ()._At()}t.DAt?this.EAt(t.DAt):this.NAt()}Jn(){if(this.pAt&&(this.pAt.AW(),this.pAt=null),this.SAt.length>0){for(const t of this.SAt)t.Jn();VM.wh(this.SAt)}this.dAt&&(this.dAt.Jn(),this.dAt=null);const t=KM.get(this);t&&(t.clear(),KM.delete(this));const s=$M.get(this);s&&(s.clear(),$M.delete(this)),this.bAt&&VM.wh(this.bAt),this.IEt&&(this.IEt.Jn(),this.IEt=null),this.MAt&&this.MAt.clear(),this.MAt=null,this.kc=null,this.fAt=null,this.wAt.length>0&&VM.wh(this.wAt),this.Nst&&(this.Nst.Jn(),this.Nst=null)}EAt(t){t.length>0&&(this.wAt=[],VM.xh(this.wAt,t))}NAt(){const t=this.fAt.pNt();if(0===t)return;this.wAt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.wAt.push(s[this.fAt.rit(i)])}SNt(t,s){if(this.dAt)throw new Error("already got sdk instance");for(let t=0,i=this.SAt.length;t<i;++t)this.SAt[t].SNt(s?s[t]:null);if(this.MB().Qbt()<2){if(this.dAt=VM.Qn(this.fAt.INt(),this,t),!(this.dAt instanceof VM.DGt))throw new Error("sdk type must derive from SDKInstanceBase");!this.MB().Vz()&&this.fAt.uAt()&&this.ej()}else{const s=this.MB().lGt();this.AAt(s.Instance,t)}}gY(){return this.dAt??this.pAt}oj(){return this.Nst}Rj(){return this.kc}mF(){return this.xAt}JW(){const t=this.xAt;return-1===t?this.Rj().mF():t}gF(t){((t=+t)<0||!isFinite(t))&&(t=0),this.xAt=t,this.GW().ANt()&&this.kc.LAt(this,!0)}VW(){this.xAt=-1,this.GW().ANt()&&this.kc.LAt(this,!1)}U2(){return this.kc.OAt(this)}yf(){return this.IEt||(this.IEt=VM.Qn(VM.Event.yf)),this.IEt}Fx(t){this.dAt?this.dAt.Fx(t):this.pAt.mH(this.kc.bj().vNt())}uGt(t){this.dAt.uGt(t)}RAt(){this.fxt|=2}PAt(){return!!(2&this.fxt)}kAt(){this.fxt|=1}NH(){return!!(1&this.fxt)}gb(){return!!(4&this.fxt)||this.dAt.gb()}FAt(){this.fxt|=32}A2(){return!!(32&this.fxt)}jAt(){return!!(8&this.fxt)}zAt(t){t?this.fxt|=8:this.fxt&=-9}BAt(){return!!(16&this.fxt)}UAt(t){t?this.fxt|=16:this.fxt&=-17}WAt(){return!!(64&this.fxt)}QAt(t){t?this.fxt|=64:this.fxt&=-65}JAt(t,s){t<<=16,s?this.fxt|=t:this.fxt&=~t}YAt(t){return!!(this.fxt&t<<16)}c_t(){return this.dAt.c_t()}f_t(){return this.dAt.f_t()}d_t(){return this.dAt.d_t()}p_t(){return this.dAt.p_t()}g_t(){return this.dAt.g_t()}evt(t){return this.dAt.evt(t)}GW(){return this.fAt}E2(){return this.dAt.E2()}Kvt(t){return t.y0()?t.M0(this.GW()):this.GW()===t}VAt(t,s,i){const e=(s,i)=>{const e=i||s.GW(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.FW())for(const t of this.jW())e(t);if(i)for(const t of this._J())e(t)}HAt(){if(!this.MB().nB())throw new Error("object does not support scene graph")}LJ(){return null!==this.SJ()}SJ(){const t=this.oj();if(!t)return null;const s=t.SJ();return s?s.UV():null}bJ(){const t=this.oj();if(!t)return null;const s=t.bJ();return s?s.UV():null}*xJ(){const t=this.oj();if(t)for(const s of t.xJ())yield s.UV()}qAt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}n3(){const t=this.oj();return!!t&&t.n3()}XAt(t){const s=this.oj();if(!s)return[];const i=t._c();return s.a5().map((t=>t.UV())).filter((t=>t.GW()._c()===i))}a5(){const t=this.oj();return t?t.a5().map((t=>t.UV())):[]}*children(){const t=this.oj();if(t)for(const s of t.children())yield s.UV()}*_J(){const t=this.oj();if(t)for(const s of t._J())yield s.UV()}IJ(){const t=this.oj();return t?t.IJ():0}ZAt(){return[...this.xJ()].length}iIt(){const t=this.oj();return t?t.iIt():0}GJ(t){const s=this.oj();if(!s)return null;const i=s.GJ(t);return i?i.UV():null}KAt(){const t=this.oj();if(!t)return NaN;const s=t.SJ();return s?s.$At(t):NaN}tLt(t){for(const s of this.oj().a5())if(s.UV().zW()===t)return!0;return!1}EJ(t,s){this.HAt(),t.HAt(),this.oj().EJ(t.oj(),s||{})}NJ(t){const s=this.oj();s&&s.NJ(t.oj())}KJ(){const t=this.oj();return!!t&&t.KJ()}j4(){const t=this.oj();if(!t)return;const s=t.sLt();if(s)for(const t of s){const s=this.kc.ij(t[2]);if(s){const i=t[3];this.EJ(s,{RJ:!!(1&i),kJ:!!(i>>1&1),jJ:!!(i>>2&1),BJ:!!(i>>3&1),WJ:!!(i>>4&1),ZJ:!!(i>>5&1),JJ:!!(i>>6&1),VJ:!!(i>>7&1),qJ:!!(i>>8&1)})}}}z4(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.EJ(i,{RJ:!!(1&e),kJ:!!(e>>1&1),jJ:!!(e>>2&1),BJ:!!(e>>3&1),WJ:!!(e>>4&1),ZJ:!!(e>>5&1),JJ:!!(e>>6&1),VJ:!!(e>>7&1),qJ:!!(e>>8&1)})}}QW(){const t=this.kc.iLt();return t?t.hlt(this):""}FW(){return null!==this.bAt}eLt(){VM.wh(this.bAt)}X4(t){this.bAt.push(t)}PW(){return this.bAt}nLt(t){return!!this.rLt(t)}rLt(t){const s=this.jW();if(null===s||0===s.length)return!1;for(const i of s)if(i.GW()===t)return i;return null}jW(){return this.bAt}oMt(){for(const t of this.jW())t.GW().EB().xdt(t)}nxt(){for(const t of this.jW())t.GW().EB().Mdt(t)}rxt(t){for(const s of this.jW())s.GW().EB().Tdt()[t]=s}oxt(){for(const t of this.jW())t.GW().EB().wdt(t)}hxt(t){for(const s of this.jW())s.GW().EB().bdt()[t]=s}MB(){return this.fAt.MB()}YNt(t){this.mAt=t}UW(){return this.fAt.Z4(),this.mAt}zW(){return this.gAt}hLt(){return this.yAt}oLt(t){t?this.ZW(new Set(t)):this.MAt=null}ZW(t){if(0===t.size)this.MAt=null;else{this.MAt?this.MAt.clear():this.MAt=new Set;for(const s of t)this.MAt.add(s)}}qW(){return this.MAt??new Set}GIt(){return Array.from(this.qW()).join(" ")}EIt(t){t=Math.floor(t);for(const s of this.qW()){if(0===t)return s;--t}return""}Pnt(){return this.SAt}aLt(t){if(!t)return null;for(const s of this.SAt)if(s.xY()instanceof t)return s;return null}nut(t){if(!t)return null;const s=this.aLt(t);return s?s.gY():null}Rnt(t){const s=this.SAt;for(let i=0,e=s.length;i<e;++i)if(s[i].CY().I0()===t)return i;return-1}uLt(){return this.wAt}DNt(){return this.fAt.DNt()}lLt(){return this.wAt.length}Krt(t){t|=0;const s=this.wAt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}xTt(t){return this.wAt[t]}cLt(t){const s=this.wAt[t];return 0===this.fAt.rit(t)?!!s:s}$rt(t,s){t|=0;const i=this.wAt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.fAt.rit(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Uht(t,s){if(0===s)return;t|=0;const i=this.wAt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}Xbt(){let t=KM.get(this);return t||(t=new Map,KM.set(this,t),t)}Zbt(){let t=$M.get(this);return t||(t=new Map,$M.set(this,t),t)}fLt(t){const s=this.GW();if(s.Ok().bf(t))return!0;for(const i of s.kmt())if(i.Ok().bf(t))return!0;return!!this.kc.Ok().bf(t)}kB(){const t=new Set;t.add(this);const s=this.oj();if(s&&s.n3())for(const s of this._J())if(t.add(s),s.FW())for(const i of s.jW())t.add(i);if(this.FW())for(const s of this.jW())t.add(s);for(const s of t.values())s.B4();this.U4()}dLt(){this.fAt.uAt()&&this.ej();for(const t of this.SAt)t.Z_t()}pLt(){this.dLt()}B4(){if(this.dLt(),this.fLt("instancecreate")){const t=this.GW(),s=new VM.Event("instancecreate");s.GY=this.ej(),t.x5(s);for(const i of t.kmt())i.x5(s);this.kc.x5(s)}this.kc.uQ(this.MB().Vgt().Cj.LIt,this,null)}U4(){if(this.MB().nB()){if(this.x5(new VM.Event("hierarchyready")),this.fLt("hierarchyready")){const t=this.GW(),s=new VM.Event("hierarchyready");s.GY=this.ej(),t.x5(s);for(const i of t.kmt())i.x5(s);this.kc.x5(s)}this.kc.uQ(this.MB().Vgt().Cj.qvt,this,null)}}mLt(){this.kc.uQ(this.MB().Vgt().Cj.OIt,this,null)}gLt(t){if(this.pAt){const s=new VM.Event("destroy");s.yLt=t,this.x5(s)}if(!this.fLt("instancedestroy"))return;const s=this.GW(),i=new VM.Event("instancedestroy");i.GY=this.ej(),i.yLt=t,s.x5(i);for(const t of s.kmt())t.x5(i);this.kc.x5(i)}MLt(){return this.dAt?this.dAt.KGt():this.pAt.vQ()}ix(t="full",s=null){const i={};"full"===t?i.uid=this.zW():i.c3=!0;const e=this.qW();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=KM.get(this);if(s&&s.size&&(i.ex=VM.Mo(s)),-1!==this.mF()&&(i.mts=this.mF()),this.fAt.pNt()>0){const t={},s=this.fAt.GNt();for(let i=0,e=this.wAt.length;i<e;++i)t[s[i].toString()]=this.wAt[i];i.ivs=t}if(this.SAt.length){const s={};for(const i of this.SAt){const e=i.ix(t);e&&(s[i.CY().I0().toString()]=e)}i.behs=s}}this.Nst&&(i.w=this.Nst.t3(t,s));const n=this.dAt?this.dAt.ix():this.pAt.IQ();return n&&(i.data=n),i}d6(t="full",s=null){this.Nst&&this.Nst.d6(t)}m6(t,s="full",i=null){this.Nst&&this.Nst.m6(t,s,i)}wLt(t,s="full",i=null){this.Nst&&this.Nst.wLt(t,s,i)}aAt(){this.MB().Vz()&&this.Nst.aAt()}nx(t,s="full",i=null){if("full"===s)this.gAt=t.uid;else if(!t.c3)return;if(this.oLt(t.tags),"visual-state"!==s){let s=KM.get(this);s&&(s.clear(),KM.delete(this));const i=t.ex;i&&(s=VM.wo(i),KM.set(this,s)),this.xAt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.fAt._Nt(i);if(e<0||e>=this.wAt.length)continue;let n=s;null===n&&(n=NaN),this.wAt[e]=n}}if(this.MB().Vz()){const e=t.w;if(e){const t=e.l;if(this.Nst.aj().I0()!==t){const i=this.Nst.aj(),e=i.WF().s4(t);e?(this.Nst.fj(e),i.o0(this,!0),e.n0(this,!0),e.dj(this),this.Nst.FQ()):"full"===s&&this.kc.LW(this)}this.Nst.s3(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Rnt(i);n<0||n>=this.SAt.length||this.SAt[n].nx(e,s)}}const e=t.data;e&&(this.dAt?this.dAt.nx(e,s):this.pAt.CQ(e))}ej(){return this.pAt||this.AAt()}i_t(){return!!this.pAt}AAt(t,s){const i=this.Nst?t?self.cH:self.cY:t?self.sQ:self.IW,e=t||this.dAt.lGt(),n=this.fAt.uAt(),r=n||e||i,h=this.MB().Qbt();if(VM.Bz.dGt(this,h),VM.Bz.mDt(s),this.pAt=new r,VM.Bz.gDt(),VM.Bz.pGt(h),e&&!(this.pAt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.pAt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.pAt}_W(t){if(0===this.wAt.length)return;const s={},i=this.fAt.ENt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:VM.Instance.prototype.cLt.bind(this,t),set:VM.Instance.prototype.$rt.bind(this,t)};const e=Object.create(Object.prototype,s);t.SLt={value:e,writable:!1}}DW(t){const s=this.SAt;if(0===s.length)return;const i={};for(const t of s)i[t.CY().Emt()]={value:t.OGt(),writable:!1};const e=Object.create(Object.prototype,i);t.Vyt={value:e,writable:!1}}x5(t){if(!this.i_t())return;const s=this.ej();t.GY=s;const i=this.kc,e=i.yQ()&&!i.Fk().jB();e&&HM.v5(),s.dispatchEvent(t),e&&HM.I5()}}}{const tw=self.Cs;tw.l5=class extends tw.Un{constructor(t){super(),this.yx=t,this.dMt=null,this.TLt=[],this.bLt=t.Bg(),this.xLt=t.Zg(),this.vLt=1,this.ILt=1,this.CLt=0,this.GLt=1,this._Lt=t.tL(),this.DLt=null,this.ELt=null,this.NLt=NaN,this.ALt=!1,this.o3=NaN,this.a3=NaN,this.LLt=s=>{if(s.GY!==this.dMt.UV())return;t.Rj().yf().removeEventListener("instancecreate",this.LLt);const i=this.dMt.UV().gY();this.ALt=!!i.Sit(),this.o3=this.ALt?i.wit():NaN,this.a3=this.ALt?i.bit():NaN}}Jn(){this.dMt=null,this.DLt=null,this.ELt=null,this.NLt=NaN,this.ALt=!1,this.o3=NaN,this.a3=NaN,tw.wh(this.TLt)}OLt(t){if(this.GLt=this.yx.tL(),this._Lt=this.GLt,this.dMt=t,this.CLt=t?t.XB():0,this.dMt){const t=this.yx.Rj();if(this.dMt.UV().MB().Qbt()<2){const s=this.dMt.UV().gY();s?(this.ALt=!!s.Sit(),this.o3=this.ALt?s.wit():NaN,this.a3=this.ALt?s.bit():NaN):this.dMt.UV().NH()||t.yf().addEventListener("instancecreate",this.LLt)}else this.ALt=!1,this.o3=NaN,this.a3=NaN}else this.ALt=!1,this.o3=NaN,this.a3=NaN}SJ(){return this.dMt}n3(){return this.TLt.length>0}a5(){return this.TLt}RLt(){this.n3()&&1!==this.TLt.length&&(this.ELt?this.TLt.sort(((t,s)=>{const i=this.ELt.get(t.UV()),e=this.ELt.get(s.UV());return tw.$i(i)&&tw.$i(e)?i-e:0})):this.TLt.sort(((t,s)=>{const i=t.uht().PLt(),e=s.uht().PLt();return tw.$i(i)&&tw.$i(e)?i-e:0})))}PLt(){return this.NLt}lht(){return this.vLt}kLt(t){this.vLt=t}fht(){return this.ILt}FLt(t){this.ILt=t}Sht(){return this._Lt}Ivt(){return this.GLt}jLt(t){this.GLt=t}aht(){return 0===this.bLt?Number.EPSILON:this.bLt}cht(){return 0===this.xLt?Number.EPSILON:this.xLt}zLt(){if(this.yx.zJ()){const t=this.dMt;let s=t.Bg(),i=t.uht().aht();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.ALt?1+s/this.o3:s/i}return 1}BLt(){if(this.yx.UJ()){const t=this.dMt;let s=t.Zg(),i=t.uht().cht();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.ALt?1+s/this.a3:s/i}return 1}ULt(){return 0}WLt(){return{sw:this.bLt,sh:this.xLt,sx:this.vLt,sy:this.ILt,psa:this.CLt,oo:this.GLt,so:this._Lt,pi:this.yx.UV().KAt()}}t3(t,s=null){const i=this.WLt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.QLt(t),c:this.JLt(t)})}YLt(t){let s="";return t.PJ()&&(s+="x"),t.FJ()&&(s+="y"),t.zJ()&&(s+="w"),t.UJ()&&(s+="h"),t.QJ()&&(s+="a"),t.YJ()&&(s+="z"),t.KJ()&&(s+="d"),t.HJ()&&(s+="o"),t.XJ()&&(s+="v"),s}QLt(t){return this.dMt?!this.dMt.UV()||this.dMt.UV().NH()?null:this.VLt(this.dMt,this.yx,t):null}JLt(t){return this.TLt.map((s=>this.VLt(s,s,t))).filter((t=>t))}VLt(t,s,i){const e=t.UV();if(e&&e.NH())return null;const n={};return n.uid=e.zW(),n.f=this.YLt(s),n.offsets=s.HLt(),n.data=tw.l5.qLt(e),n.oci=e.GW().ik(),"state"===i?(n.inst=e.ix("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.GW().DB().indexOf(e),n.inst=null),n}s3(t){this.bLt=t.sw,this.xLt=t.sh,this.vLt=t.sx,this.ILt=t.sy,this.CLt=t.psa,this.GLt=t.oo,this._Lt=t.so,this.NLt=tw.$i(t.pi)?t.pi:NaN}XLt(t,s,i,e){if(!t&&!s)if(e?.WIt){if(this.DLt)for(const t of this.DLt)t.NH()||t.LJ()||t.Rj().LW(t)}else if(this.DLt)for(const t of this.DLt)if(i.c&&i.c.length){if(!i.c.some((s=>s.uid===t.zW())))continue;t.NH()||t.LJ()||t.Rj().LW(t)}this.DLt=t,this.ELt=s}m6(t,s){const i=this.yx,e=i.Rj(),n=new Set;if(t.p&&!this.dMt){const r=t.p.uid,h=e.ij(r);if(h){const r=h.oj();h.qAt(i.UV())?this.dMt=r:(h.tLt(i.UV().zW())?(e.LW(i.UV()),e.ZLt(i.UV().zW())):h.EJ(i.UV(),this.KLt(t.p.f)),n.has(i)||(i.$Lt(t.p.offsets),this.tOt(h,t.p,s),this.sOt(i.UV(),i.UV().zW(),i.Rj(),s)),n.add(i),h.oj().uht().RLt())}else if(tw.$i(t.p.oci)){const n=e.V$(t.p.oci),r=(e.AZ(),e.OB(n,i.aj(),0,0,!0));if(r){const n=this.iOt(t.p,e);n&&r.nx(n),r.oj().aj().RB(r),r.EJ(i.UV(),this.KLt(t.p.f)),this.sOt(r,r.zW(),e,s),r.oj().uht().RLt()}}}const r=[];for(const s of t.c){const t=s.uid,i=e.ij(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,u=e.ij(a);if(u){if(this.DLt){if(this.DLt.includes(u)){const e=u;if(e.GW()!==u.GW()){h++;continue}if(e.NH()){h++;continue}const o=t.c[h];if(!s?.WIt&&this.eOt(e,r,i)){if(i.UV().GJ(h)){const r=e.GW().ik(),a=o.oci,u=i.UV().GJ(h).GW().ik();if(r!==a||a!==u){this.nOt(t.c,i,n,s);break}this.rOt(h,o,i,n,s)}else this.rOt(h,o,i,n,s);h++;continue}if(e.LJ()&&e.SJ()!==i.UV()){const t=this.hOt(o,s);this.oOt(t,o,n,s),h++;continue}this.oOt(e.oj(),o,n,s,!0),h++;continue}if(this.DLt[h]){const e=this.DLt[h];if(e.GW()!==u.GW()){h++;continue}if(e.NH()){h++;continue}const o=t.c[h];if(!s?.WIt&&this.eOt(e,r,i)){if(i.UV().GJ(h)){const r=e.GW().ik(),a=o.oci,u=i.UV().GJ(h).GW().ik();if(r!==a||a!==u){this.nOt(t.c,i,n,s);break}this.rOt(h,o,i,n,s)}else this.rOt(h,o,i,n,s);h++;continue}if(e.LJ()&&e.SJ()!==i.UV()){const t=this.hOt(o,s);this.oOt(t,o,n,s),h++;continue}this.oOt(e.oj(),o,n,s,!0),h++;continue}}const e=u.GW();if(this.aOt(r,e)===i.UV().XAt(e).length){const t=i.UV().GJ(h);if(t){const i=t.oj();i&&(n.has(i)||(i.$Lt(o.offsets),this.tOt(t,o,s)),n.add(i))}h++;continue}if(u.LJ()&&u.SJ()!==i.UV()){const t=this.hOt(o,s);this.oOt(t,o,n,s),h++;continue}this.oOt(u.oj(),o,n,s)}else if(this.DLt&&this.DLt[h]){const a=this.DLt[h],u=e.V$(this.uOt(o));if(a.GW()!==u){h++;continue}if(a.NH()){h++;continue}const l=t.c[h];if(!s?.WIt&&this.eOt(a,r,i)){if(i.UV().GJ(h)){const e=a.GW().ik(),r=l.oci,o=i.UV().GJ(h).GW().ik();if(e!==r||r!==o){this.nOt(t.c,i,n,s);break}this.rOt(h,l,i,n,s)}else this.rOt(h,l,i,n,s);h++;continue}if(a.LJ()&&a.SJ()!==i.UV()){const t=this.hOt(l,s);this.oOt(t,l,n,s),h++;continue}this.oOt(a.oj(),l,n,s)}else{const t=this.hOt(o,s);this.oOt(t,o,n,s)}h++}}nOt(t,s,i,e){const n=s.Rj();for(const t of s.UV().children())t&&!t.NH()&&(n.LW(t),n.ZLt(t.zW()));this.DLt&&(this.DLt=[]),this.ELt&&(this.ELt=new WeakMap);for(const s of t){const t=this.hOt(s,e);this.oOt(t,s,i,e),this.DLt.push(t.UV()),this.ELt.set(t.UV(),this.DLt.length-1)}s.uht().RLt()}eOt(t,s,i){const e=t.GW();return this.aOt(s,e)===i.UV().XAt(e).length}rOt(t,s,i,e,n){const r=i.UV().GJ(t);if(!r)return;const h=r.oj();h&&(e.has(h)||(h.$Lt(s.offsets),this.tOt(r,s,n)),e.add(h))}KLt(t){const s={};return s.RJ=t.includes("x"),s.kJ=t.includes("y"),s.jJ=t.includes("w"),s.BJ=t.includes("h"),s.WJ=t.includes("a"),s.JJ=t.includes("z"),s.ZJ=t.includes("d"),s.VJ=t.includes("o"),s.qJ=t.includes("v"),s}uOt(t){return tw.$i(t.oci)?t.oci:t[1]}hOt(t,s){if(!tw.$i(t.oci))return;const i=this.yx,e=i.Rj();let n;if(t.data)n=e.i0(t.data,i.aj(),!1,0,0,!1,!0);else{const s=e.V$(t.oci);n=e.OB(s,i.aj(),0,0,!0)}if(!n)return;const r=this.iOt(t,e);r&&n.nx(r);const h=n.oj();return h.aj().RB(n,!0),h}sOt(t,s,i,e){if(i.ij(s)){if(!e?.WIt){const e=i.ij(s);e!==t&&i.LW(e)}i.ZLt(s)}i.TNt(s,t)}oOt(t,s,i,e,n=!0){const r=this.yx,h=r.EJ(t,this.KLt(s.f));h&&n?(i.has(t)||(t.$Lt(s.offsets),this.tOt(t.UV(),s,e)),i.add(t)):h&&this.sOt(t.UV(),s.uid,r.Rj(),e),this.RLt()}tOt(t,s,i){let e=this.iOt(s,this.yx.Rj());if(!e)return;const n=t.Rj();e=JSON.parse(JSON.stringify(e));const r=e.w?.zi;e.w=null,t.nx(e),tw.$i(r)&&t.oj().f0(r),this.sOt(t,e.uid,n,i)}aOt(t,s){return t.filter((t=>t.GW()._c()===s._c())).length}iOt(t,s){if(tw.$i(t.instIndex)){const i=s.V$(t.oci).hAt();return i?i[t.instIndex]:null}return tw.ae(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static qLt(t){let s=t.oj().aj().K$(t.zW());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.a5()]){const t=s.oj();i.push([t.WF().I0(),t.aj().ik(),s.zW(),tw.l5.u5(t),s.GW().FW()?1:0,t.uj(),tw.l5.qLt(s)])}return tw.xe(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=tw.l5.lOt(),s[0][14][1]=i,s[0][14][2]=t.oj().uj()),s}static u5(t){let s=0;return s|=Number(t.XJ())<<8,s|=Number(t.HJ())<<7,s|=Number(t.YJ())<<6,s|=Number(t.KJ())<<5,s|=Number(t.QJ())<<4,s|=Number(t.UJ())<<3,s|=Number(t.zJ())<<2,s|=Number(t.FJ())<<1,s|=0|Number(t.PJ()),s}static lOt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}}}{const sw=self.Cs,iw=self.hs,ew=(iw.ys,iw.Ms,sw.Qn(sw.Rect)),rw=sw.Qn(sw.Gu),hw=sw.Qn(sw.Event,"bboxchange",!1),ow=sw.Qn(sw.xo,0,0,0,0),aw=sw.Qn(sw.ol),uw=sw.Qn(sw.xo,1,1,1,1),lw=sw.Qn(sw.Rect,0,0,-1,-1),cw=sw.Qn(sw.Rect,0,0,-1,-1),fw=new Set(["absolute","relative"]),dw=[];let pw=!0;const mw=new WeakMap,gw=new WeakMap;sw.vAt=class extends sw.Un{constructor(t,s){super(),this.fi=t,this.sdt=t.GW(),this.kc=t.Rj(),this.cOt=s,this.sdt.$Nt(this,null,s),this.fOt=-1,this.dOt=-1,this.fxt=196635,this.sdt.MB().Kz()&&(this.fxt|=128),this._a=NaN,this.Da=NaN,this.Eb=NaN,this.pOt=NaN,this.mOt=NaN,this.Jv=NaN,this.Go=NaN,this.gOt=NaN,this.yOt=NaN,this.MOt=NaN,this.wOt=NaN,this.SOt=sw.Qn(sw.Rect),this.TOt=sw.Qn(sw.Gu),this.bOt=cw,this.xOt=lw,this.vOt=null,this.IOt=null,this.COt=null,this.Db=uw,this.GOt=uw,this._Ot=null,this.DOt=null,this.fi.GW().ANt()&&(this.DOt=sw.Qn(sw.EOt,this.fi,this)),this.NOt=null,this.DLt=null,this.ELt=null,this.AOt=-1,this.LOt=null}kAt(){this.fxt|=256}Jn(){if(this.sdt.$Nt(this,this.cOt,null),this._Ot&&(this.kc.lb()._S(this._Ot),this._Ot=null),this.vOt=null,this.IOt&&(this.IOt.OOt.Jn(),this.IOt=null),this.COt&&(this.COt.clear(),this.COt=null),this.iY(),this.DOt&&this.DOt.Jn(),this.LJ()&&this.SJ().NJ(this),this.n3()){const t=[...this.a5()];for(const s of t)this.NJ(s)}this.ROt(),this.POt(),mw.delete(this),gw.delete(this),this.fi=null,this.sdt=null,this.kc=null,this.cOt=null}CAt(t){if(pw=!1,this.jQ(t[0],t[1]),this.qb(t[2]),this.xE(t[3],t[4]),this.Jv=0,this.Kz()?this.qB(t[6]):this.Go=0,ow.ya(t[7]),this.kOt(ow),this.QQ(t[8]),this.VQ(t[9]),this.Ab(t[10]),this.DOt&&this.DOt.FOt(t[12]),t[14]&&mw.set(this,{jOt:t[14][1],zOt:t[14][2]}),t[15]){const s=t[15];this.tY(s[0],s[1]);const i=this.oY(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.Px(e,t);r.Qb(n[0]),r.Vb(n[1]),r.qb(n[2]),r.Zb(n[3]),r.$b(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.kc.iLt();e&&r&&r.rlt(this.UV(),i),n&&r&&r.rlt(this.UV(),s)}pw=!0,this.BOt()}GAt(){this._a=0,this.Da=0,this.Eb=0,this.pOt=0,this.mOt=0,this.Jv=0,this.Go=0,this.gOt=0,this.yOt=1,this.MOt=0,this.wOt=0,this.BOt()}Rj(){return this.kc}GW(){return this.sdt}UV(){return this.fi}UOt(){return this.QJ()?this.WOt(this.SJ().QOt()-this.NOt.ULt()):0}Qb(t){if(t=+t,this.PJ()){const s=this.NOt,i=t-this.Wb(),e=-this.UOt();0===e?this._a+=i/s.zLt():(this._a+=Math.cos(e)*i/s.zLt(),this.FJ()&&(this.Da+=Math.sin(e)*i/s.BLt()))}else this._a=t}nht(t,s=!1){t=+t,s?this._a+=t:this.PJ()?this.Qb(this.Wb()+t):this._a+=t}Wb(){if(this.PJ()){let t=this._a;const s=this.NOt,i=this.SJ(),e=this.UOt();return 0===e?t*=s.zLt():(t=t*s.zLt()*Math.cos(e),this.FJ()&&(t-=this.Da*s.BLt()*Math.sin(e))),i.Wb()+t}return this._a}Vb(t){if(t=+t,this.FJ()){const s=this.NOt,i=t-this.Yb(),e=-this.UOt();0===e?this.Da+=i/s.BLt():(this.PJ()&&(this._a-=Math.sin(e)*i/s.zLt()),this.Da+=Math.cos(e)*i/s.BLt())}else this.Da=t}rht(t,s=!1){t=+t,s?this.Da+=t:this.FJ()?this.Vb(this.Yb()+t):this.Da+=t}Yb(){if(this.FJ()){let t=this.Da;const s=this.NOt,i=this.SJ(),e=this.UOt();return 0===e?t*=s.BLt():(t=t*s.BLt()*Math.cos(e),this.PJ()&&(t+=this._a*s.zLt()*Math.sin(e))),i.Yb()+t}return this.Da}jQ(t,s){if(t=+t,s=+s,this.JOt()){const i=this.PJ(),e=this.FJ(),n=this.NOt,r=t-this.Wb(),h=s-this.Yb(),o=-this.UOt();if(0===o)i?this._a+=r/n.zLt():this._a=t,e?this.Da+=h/n.BLt():this.Da=s;else{const a=Math.sin(o),u=Math.cos(o);i?this._a+=e?(u*r-a*h)/n.zLt():u*r/n.zLt():this._a=t,e?this.Da+=i?(a*r+u*h)/n.BLt():u*h/n.BLt():this.Da=s}}else this._a=t,this.Da=s}YOt(){return[this.Wb(),this.Yb()]}BQ(t,s){t=+t,s=+s,this.JOt()?this.jQ(this.Wb()+t,this.Yb()+s):(this._a+=t,this.Da+=s)}svt(t,s){return this.Wb()===t&&this.Yb()===s}qb(t){if(t=+t,this.YJ()&&(t-=this.SJ().Hb()),this.Eb===t)return;this.Eb=t,this.VOt();const s=this.aj();0!==this.Eb&&s.l0(),s.dj(this)}VOt(){if(this.BOt(),this.n3()){const t=this.a5();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.YJ()&&i.VOt()}}}xht(t){this.qb(this.Hb()+t)}Hb(){return this.YJ()?this.SJ().Hb()+this.Eb:this.Eb}ZQ(){return this.aj().Hb()+this.Hb()}Sit(){return this.UV().MB().Qbt()<2&&this.UV().gY().Sit()}Hg(t){if(t=+t,this.zJ()){const s=this.Bg();0===s?this.pOt=Number.EPSILON:this.pOt*=t/s}else this.pOt=t;this.HOt()}vy(t,s){t=+t,s?this.pOt+=t:this.zJ()?this.Hg(this.Bg()+t):this.pOt+=t,this.HOt()}Bg(){if(this.zJ()){const t=this.SJ(),s=t.Bg();return t.uht().aht()===Number.EPSILON?(this.uht().aht()+s)*this.pOt:s*this.pOt}return this.pOt}Ug(t){if(t=+t,this.UJ()){const s=this.Zg();0===s?this.mOt=Number.EPSILON:this.mOt*=t/s}else this.mOt=t;this.HOt()}dht(t,s){t=+t,s?this.mOt+=t:this.UJ()?this.Ug(this.Zg()+t):this.mOt+=t,this.HOt()}Zg(){if(this.UJ()){const t=this.SJ(),s=t.Zg();return t.uht().cht()===Number.EPSILON?(this.uht().cht()+s)*this.mOt:s*this.mOt}return this.mOt}xE(t,s){if(t=+t,s=+s,this.zJ()){const s=this.Bg();0===s?this.pOt=Number.EPSILON:this.pOt*=t/s}else this.pOt=t;if(this.UJ()){const t=this.Zg();0===t?this.mOt=Number.EPSILON:this.mOt*=s/t}else this.mOt=s;this.HOt()}Al(){return[this.Bg(),this.Zg()]}N2(){return this.Jv}qOt(t){if(t<0)throw new RangeError("invalid depth");this.Jv=t}XOt(){if(this.LJ()){const t=this.NOt;return Math.min(t.zLt(),t.BLt())}return 1}Kz(){return!!(128&this.fxt)}qB(t){t=+t,this.Kz()&&(this.QJ()&&(t-=this.SJ().XB()),t=sw.Zn(t),this.Go!==t&&(this.Go=t,this.HOt()))}pht(t){0!=(t=+t)&&this.Kz()&&(this.Go=sw.Zn(this.Go+t),this.HOt())}HOt(){if(this.fxt|=262144,this.n3()){const t=this.a5();for(let s=0,i=t.length;s<i;s++)t[s].HOt()}}XB(){return this.QJ()&&this.Kz()?this.WOt(sw.Zn(this.SJ().QOt()+this.Go)):this.Go}QOt(){return this.QJ()&&this.Kz()?sw.Zn(this.SJ().QOt()+this.Go):this.Go}WOt(t){return this.zJ()&&this.bJ().Bg()<0&&(t=sw.Zn(sw.dr(t,this.bJ().XB()+Math.PI))),this.UJ()&&this.bJ().Zg()<0&&(t=sw.dr(t,this.bJ().XB())),t}ZOt(){const t=this.SJ();return!!(this.zJ()&&t.Bg()<0)||!!(this.UJ()&&t.Zg()<0)}KOt(){const t=this.SJ();return!!(this.zJ()&&t.Bg()<0&&this.UJ()&&t.Zg()<0)}$Ot(){const t=this.fxt;if(!(262144&t))return;const s=this.XB();this.gOt=Math.sin(s),this.yOt=Math.cos(s),this.fxt=-262145&t}hvt(){return this.$Ot(),this.gOt}rvt(){return this.$Ot(),this.yOt}QQ(t){this.MOt=+t}Tht(t){this.MOt+=+t}WQ(){return this.MOt}VQ(t){this.wOt=+t}bht(t){this.wOt+=+t}YQ(){return this.wOt}kOt(t){this.Db.equals(t)||(this.Db===uw?(this.Db=sw.Qn(sw.xo,t),this.GOt=sw.Qn(sw.xo,t),this.GOt.Xo()):t.Yo(1,1,1,1)?(this.Db=uw,this.GOt=uw):(this.Db.set(t),this.GOt.set(t),this.GOt.Xo()),this.BOt())}iL(t){if(t=sw.Xn(+t,0,1),this.HJ()){if(this.uht().Ivt()===t)return;this.uht().jLt(t),t=this.tL()}else if(this.Db.a===t)return;this.tRt(t)}sRt(){if(!this.n3())return;const t=this.a5();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.tRt(i.tL())}}tRt(t){ow.Po(this.Db),ow.a=t,this.kOt(ow),this.sRt()}yht(t){this.HJ()?this.iL(this.uht().Ivt()+t):this.iL(this.tL()+t)}tL(){return this.HJ()?this.SJ().tL()*this.uht().Ivt():this.Db.a}oJ(t){this.Db.Qo(t)||(ow.Po(t),ow.a=this.tL(),this.kOt(ow))}Xrt(t,s,i){ow.Do(t,s,i),this.oJ(ow)}iRt(t,s,i){0===t&&0===s&&0===i||(ow.Po(this.Db),ow.r+=t,ow.g+=s,ow.b+=i,this.oJ(ow))}hJ(){return this.Db}N$(){return this.GOt}KJ(){return!!(512&this.fxt)}eRt(t){this.nRt(512,t)}PJ(){return!!(1024&this.fxt)}rRt(t){this.nRt(1024,t)}FJ(){return!!(2048&this.fxt)}JOt(){return!!(3072&this.fxt)}hRt(t){this.nRt(2048,t)}zJ(){return!!(4096&this.fxt)}oRt(t){this.nRt(4096,t)}UJ(){return!!(8192&this.fxt)}aRt(t){this.nRt(8192,t)}QJ(){return!!(16384&this.fxt)}uRt(t){this.nRt(16384,t)}YJ(){return!!(32768&this.fxt)}lRt(t){this.nRt(32768,t)}HJ(){return!!(4194304&this.fxt)}cRt(t){this.nRt(4194304,t)}XJ(){return!!(8388608&this.fxt)}fRt(t){this.nRt(8388608,t)}dRt(){this.fxt&=-12647937}EJ(t,s){if(t===this)return!1;if(t.LJ())return!1;if(this.pRt(t))return!1;if(this.mRt(t))return!1;const i=t.Wb(),e=t.Yb(),n=t.Bg(),r=t.Zg(),h=t.XB(),o=t.Hb(),a=t.tL();t.gRt(this),t.rRt(s.RJ),t.hRt(s.kJ),t.oRt(s.jJ),t.aRt(s.BJ),t.uRt(s.WJ),t.lRt(s.JJ),t.cRt(s.VJ),t.fRt(s.qJ),t.eRt(s.ZJ);const u=i-this.Wb(),l=e-this.Yb(),c=-this.XB(),f=Math.cos(c),d=Math.sin(c);if(s.RJ&&(s.WJ?t._a=u*f-l*d:t._a=u,s.jJ)){const s=this.Bg()/this.NOt.aht();0!==s&&(t._a/=s)}if(s.kJ&&(s.WJ?t.Da=u*d+l*f:t.Da=l,s.BJ)){const s=this.Zg()/this.NOt.cht();0!==s&&(t.Da/=s)}if(s.jJ){const s=this.Bg();0===s||s===Number.EPSILON?(t.pOt=1,t.NOt.kLt(1)):(t.pOt=n/this.Bg(),t.NOt.kLt(t.pOt))}if(s.BJ){const s=this.Zg();0===s||s===Number.EPSILON?(t.mOt=1,t.NOt.FLt(1)):(t.mOt=r/this.Zg(),t.NOt.FLt(t.mOt))}return s.WJ&&(t.Go=h-this.XB()),s.JJ&&(t.Eb=o-this.Hb()),s.VJ&&t.NOt.jLt(a),s.qJ&&t.AU(this.OU()),this.yRt(t),this.FQ(),this.sRt(),!0}NJ(t){if(t.SJ()!==this)return;const s=t.Wb(),i=t.Yb(),e=t.Bg(),n=t.Zg(),r=t.XB(),h=t.Hb(),o=t.tL();t.gRt(null),t.dRt(),t.jQ(s,i),t.xE(e,n),t.qB(r),t.qb(h),t.iL(o),this.MRt(t),this.FQ()}wRt(){return this.AOt}SRt(){this.TRt();const t=[...this.children()];for(const s of t)this.NJ(s);const s=this.SJ();s&&s.NJ(this),this.dRt()}TRt(){if(this.bRt(),!this.DLt){const t=[...this.children()];t.length&&(this.DLt=[],this.ELt=new WeakMap);let s=0;for(const i of t){const t=i.UV();this.DLt.push(t),this.ELt.set(t,s),s++}}const t=this.SJ();t&&t.TRt()}bRt(){if(-1!==this.AOt)return;const t=[...this.xJ()];this.AOt=t.length;for(const s of t)s.bRt();const s=[...this.children()];for(const t of s)t.bRt()}POt(){this.DLt&&(this.DLt.length=0),this.DLt=null,this.ELt=null;const t=this.SJ();t&&t.POt(),this.AOt=-1}LJ(){return null!==this.SJ()}SJ(){const t=this.NOt;return null!==t?t.SJ():null}bJ(){let t=this;for(;t.LJ();)t=t.SJ();return t}*xJ(){let t=this.SJ();for(;t;)yield t,t=t.SJ()}qAt(t){return this.a5().includes(t)}n3(){const t=this.NOt;return null!==t&&t.n3()}a5(){const t=this.NOt;return null!==t?t.a5():dw}children(){return this.a5()}*_J(){for(const t of this.children())yield t,yield*t._J()}IJ(){return this.a5().length}iIt(){return[...this._J()].length}GJ(t){const s=this.a5();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}$At(t){if(!t)return NaN;const s=this.a5();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}xRt(t){this.NOt||(this.NOt=sw.Qn(sw.l5,this)),t&&this.NOt.OLt(t)}uht(){return this.NOt}ROt(){this.NOt&&(this.NOt.Jn(),this.NOt=null)}gRt(t){t?(t.xRt(null),this.xRt(t)):(this.NOt&&this.NOt.OLt(null),this.n3()||this.ROt())}mRt(t){if(!this.LJ())return!1;const s=this.SJ();return s===t||s.mRt(t)}pRt(t){if(this.qAt(t))return!0;for(const s of this.a5())if(s.pRt(t))return!0;return!1}yRt(t){this.NOt.a5().push(t)}MRt(t){const s=this.NOt.a5(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.LJ()||this.ROt(),t.n3()||t.ROt()}sLt(){const t=mw.get(this);return t?t.jOt:null}vRt(){const t=mw.get(this);return t?t.zOt:NaN}e3(){const t=gw.get(this);return sw.$i(t)?t:NaN}IRt(t){gw.set(this,t)}CRt(){this.nRt(524288,!0),this.BOt()}BOt(){if(!pw)return;const t=this.kc.lb();let s;this._Ot&&t._S(this._Ot),s=524288&this.fxt?t.lS()||"<point>":t.oS()||"<default>",this._Ot=t.vS(s,this.lW(),this.GOt,this.Hb())}j2(){return this._Ot}D0(){return this.Db===uw}Ab(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.lW()!==t&&(this.fxt=-2080374785&this.fxt|t<<26,this.BOt())}lW(){return(2080374784&this.fxt)>>26}fj(t,s){const i=s&&this.cOt!==t;i&&this.a0(),this.sdt.$Nt(this,this.cOt,t),this.cOt=t,i&&this.GRt(),0!==this.Hb()&&this.cOt.l0()}aj(){return this.cOt}WF(){return this.aj().WF()}f0(t){this.fOt=0|t}uj(){return this.cOt.I1(),this.fOt}D1(t){this.dOt=0|t}IH(){return this.cOt.G1(),this.dOt}lK(){return this.fOt}nRt(t,s){s?this.fxt|=t:this.fxt&=~t}OU(){return!!(1&this.fxt)}AU(t){if(this.nRt(1,t),this.n3())for(const s of this.a5())s.XJ()&&s.AU(t)}yJ(){return!!(8&this.fxt)}MJ(t){t=!!t,this.yJ()!==t&&(this.nRt(8,t),t?this.FQ():this._Rt())}DRt(t,s){if(this.nRt(32,t),this.COt&&this.COt.clear(),s.trim()){this.COt||(this.COt=new Set);for(const t of s.split(" "))t&&this.COt.add(t.toLowerCase())}else this.COt=null}ERt(t){const s=!!(32&this.fxt),i=this.COt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}FQ(){if(this.fxt|=65554,this.sdt.XNt(!0),this.kc.pj(),this.cOt.W$()&&(this.$Q(this.SOt,this.TOt,!0),this.fxt&=-3,this.GRt()),4&this.fxt&&this.fi.yf().dispatchEvent(hw),null!==this.NOt){const t=this.NOt.a5();for(let s=0,i=t.length;s<i;++s)t[s].FQ()}}$Q(t,s,i){const e=this.Wb(),n=this.Yb(),r=this.Bg(),h=this.Zg(),o=this.XB();t.Wa(e-this.MOt*r,n-this.wOt*h,r,h),i&&this.hY()&&this.NRt(t),0===o?s.Hu(t):(t.offset(-e,-n),s.Xu(t,this.hvt(),this.rvt()),s.offset(e,n),s.Zu(t)),t.normalize()}ARt(){const t=this.fxt;2&t&&(this.$Q(this.SOt,this.TOt,!0),this.fxt=-3&t)}tJ(){return this.ARt(),this.SOt}iJ(){return this.ARt(),this.TOt}LRt(t){const s=this.Wb(),i=this.Yb(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(rw.m(t),rw.offset(e,n),rw)}ORt(t){this.SOt.m(t),this.TOt.Hu(this.SOt),this.fxt&=-3,this.KNt(),this.GRt()}RRt(t){this.nRt(4,t)}PRt(){return!!(4&this.fxt)}C2(t,s,i){return s&&0!==this.N2()?this.D2(this.aj()._2()):0===this.Hb()||i?t.Tu(this.tJ()):this.kRt()}kRt(){const t=this.aj(),s=this.ZQ();return!(s>=t.V0())&&(t.J0(s,ew),ew.Tu(this.tJ()))}D2(t){const s=this.tJ(),i=s.Za(),e=s.$a(),n=s.Ka(),r=s.tu(),h=this.ZQ(),o=h+this.N2();return t.YM(i,n,h,e,r,o)}nJ(){const t=this.aj();if(t.h1())return this.D2(t._2());{const s=t.WF();return this.C2(t.pW(),s.I2(),s.xU())}}R2(t){this.nRt(1048576,t)}O2(t){this.nRt(2097152,t)}FRt(){return!!(1048576&this.fxt)}jRt(){return!!(2097152&this.fxt)}zRt(t){this.vOt=t,this.BRt(),this.hY()&&(this.LOt.URt=null)}WRt(){return this.vOt}QRt(){return null!==this.vOt||this.hY()}JRt(){return this.YRt(this.Bg(),this.Zg(),this.XB(),this.hvt(),this.rvt())}VRt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.YRt(t,s,i,e,n)}YRt(t,s,i,e,n){let r=this.IOt;null===r&&(r={OOt:sw.Qn(sw.ol),width:NaN,height:NaN,angle:NaN},this.IOt=r);const h=r.OOt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.vOt;if(this.hY()){const i=this.WQ(),r=this.YQ(),a=this.oY();let u=this.LOt.URt;u||(o?(aw.m(o),aw.offset(i,r)):aw.ml(),u=a.zx(aw),this.LOt.URt=u),a.Bx(u,h),h.offset(-i,-r),h.wl(t,s,e,n)}else o?(h.m(o),h.wl(t,s,e,n)):h.Ml(this.iJ(),-this.Wb(),-this.Yb());return r.width=t,r.height=s,r.angle=i,h}BRt(){this.HRt(!0);const t=this.IOt;null!==t&&(t.width=NaN)}tY(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.UV().MB().hB())throw new Error("object does not support mesh");this.iY(),this.LOt={qRt:sw.Qn(sw.OM.lx,t,s),XRt:sw.Qn(sw.OM.lx,t,s),URt:null}}hY(){return null!==this.LOt}oY(){if(!this.hY())throw new Error("no mesh");return this.LOt.qRt}ZRt(){if(!this.hY())throw new Error("no mesh");return this.LOt.XRt}KRt(t){this.nRt(65536,t)}$Rt(){return!!(65536&this.fxt)}HRt(t){this.nRt(131072,t)}tPt(){return!!(131072&this.fxt)}NRt(t){const s=this.LOt.qRt,i=Math.min(s.Ex(),0),e=Math.min(s.Nx(),0),n=Math.max(s.Ax(),1),r=Math.max(s.Lx(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.ou((n-1)*h),t.au((r-1)*o),this.Jv=s.Ox()}iY(){this.LOt&&(this.LOt.qRt.Jn(),this.LOt.XRt.Jn(),this.LOt=null,this.BRt())}nY(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!fw.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.sW;let a="number"==typeof i.aY?i.aY:n?0:-1,u="number"==typeof i.uY?i.uY:n?0:-1;if(!this.hY())return!1;const l=this.oY(),c=l.Px(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.Hb()!==o&&(c.qb(o),f=!0),n&&(r+=t/(l.Ix()-1),h+=s/(l.Cx()-1)),-1!==a||n?(n&&(a+=t/(l.Ix()-1)),a=sw.Xn(a,0,1)):a=c.Xb(),-1!==u||n?(n&&(u+=s/(l.Cx()-1)),u=sw.Xn(u,0,1)):u=c.Kb(),c.Wb()===r&&c.Yb()===h&&c.Xb()===a&&c.Kb()===u?f:(c.Qb(r),c.Vb(h),c.Zb(a),c.$b(u),this.BRt(),!0)}PAt(){return this.fi.PAt()}wJ(t,s){return!!this.tJ().xu(t,s)&&!!this.iJ().xu(t,s)&&(this.PAt()?this.fi.gY().M_t(t,s):!this.QRt()||this.JRt().xu(t-this.Wb(),s-this.Yb()))}sPt(){return!!(16&this.fxt)}KNt(){if(!this.sPt()||!this.yJ()||256&this.fxt)return;const t=this.tJ(),s=this.sdt.qNt(),i=this.bOt;if(ew.set(s.GK(t.Za()),s._K(t.Ka()),s.GK(t.$a()),s._K(t.tu())),i.equals(ew))return;const e=this.fi;i===cw?(s.DK(e,null,ew),this.bOt=sw.Qn(sw.Rect,ew)):(s.DK(e,i,ew),i.m(ew)),this.fxt&=-17}iPt(){this.fxt|=16}_Rt(){const t=this.bOt;t!==cw&&(this.sdt.qNt().DK(this.fi,t,null),this.bOt=cw)}GRt(){const t=this.aj();if(!t.W$()||256&this.fxt)return;const s=t.N0(),i=this.tJ(),e=this.xOt;if(ew.set(s.GK(i.Za()),s._K(i.Ka()),s.GK(i.$a()),s._K(i.tu())),e.equals(ew))return;const n=this.fi;e===lw?(s.DK(n,null,ew),this.xOt=sw.Qn(sw.Rect,ew)):(s.DK(n,e,ew),e.m(ew)),t.A0()}a0(){const t=this.xOt;t!==lw&&(this.aj().N0().DK(this.fi,t,null),this.xOt=lw)}C1(){return this.xOt}uJ(){const t=this.fi,s=this.cOt,i=s.cj();i.length&&i.at(-1)===t||(s.o0(t,!1),s.n0(t,!1),this.kc.pj())}cJ(){const t=this.fi,s=this.cOt,i=s.cj();i.length&&i[0]===t||(s.o0(t,!1),s.h0(t,!1),this.kc.pj())}dJ(t){const s=this.fi,i=this.cOt;if(i.WF()!==t.WF())throw new Error("layer from different layout");t!==i&&(i.o0(s,!0),this.fj(t),t.n0(s,!0),this.kc.pj())}mJ(t,s){const i=this.fi;let e=!1;const n=this.cOt;if(t.zW()===i.zW())return;const r=t.oj();if(!r)throw new Error("expected world instance");const h=r.aj();n.ik()!==h.ik()&&(n.o0(i,!0),this.fj(h),h.n0(i,!0),e=!0);const o=h.A1(i,t,!!s);(e||o)&&this.kc.pj()}PQ(){return this.DOt}ePt(t){this.nRt(64,t)}z1(){return!!(64&this.fxt)}t3(t,s=null){const i={x:this.Wb(),y:this.Yb(),w:this.Bg(),h:this.Zg(),l:this.aj().I0(),zi:this.uj()};0!==this.Hb()&&(i.ze=this.Hb()),0!==this.XB()&&(i.a=this.QOt()),this.D0()||(i.c=this.Db.toJSON()),.5!==this.WQ()&&(i.oX=this.WQ()),.5!==this.YQ()&&(i.oY=this.YQ()),0!==this.lW()&&(i.bm=this.lW()),this.OU()||(i.v=this.OU()),this.yJ()||(i.ce=this.yJ()),this.PRt()&&(i.be=this.PRt()),this.DOt&&(i.fx=this.DOt.t3());const e=!!(32&this.fxt);return e&&(i.sfi=e),this.COt&&(i.sft=[...this.COt].join(" ")),this.NOt&&"visual-state"!==t&&(i.sgi=this.NOt.t3(t,s),mw.has(this)&&(i.sgcd=mw.get(this).jOt,i.sgzid=mw.get(this).zOt)),this.hY()&&(i.mesh=this.oY().ix()),i}HLt(){return{x:this._a,y:this.Da,z:this.Eb,w:this.pOt,h:this.mOt,a:this.Go,sgi:this.uht()?this.uht().WLt():null}}$Lt(t){t&&(this._a=t.x,this.Da=t.y,this.Eb=t.z,this.pOt=t.w,this.mOt=t.h,this.Go=t.a,t.sgi&&this.uht()&&this.uht().s3(t.sgi),this.HOt(),this.FQ())}aAt(){this.POt(),this.SRt(),this.xRt(null),this.NOt&&this.NOt.XLt(this.DLt,this.ELt)}d6(t){"visual-state"!==t&&this.SRt()}m6(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.fxt)return;this.NOt.m6(t.sgi,i)}}wLt(t,s="full",i=null){if("visual-state"!==s)if(256&this.fxt)this.POt();else{if(t.hasOwnProperty("sgi"))this.NOt.XLt(null,null,t.sgi,i);else if(i?.WIt&&this.DLt)for(const t of this.DLt)t.NH()||this.kc.LW(t);this.POt(),this.FQ()}}s3(t,s,i=null){if(pw=!1,this.Qb(t.x),this.Vb(t.y),this.Hg(t.w),this.Ug(t.h),this.f0(t.zi),this.qb(t.hasOwnProperty("ze")?t.ze:0),this.qB(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?ow.ya(t.c):t.hasOwnProperty("o")?(ow.Po(this.Db),ow.a=t.o):ow._o(1,1,1,1),this.kOt(ow),this.QQ(t.hasOwnProperty("oX")?t.oX:.5),this.VQ(t.hasOwnProperty("oY")?t.oY:.5),this.Ab(t.hasOwnProperty("bm")?t.bm:0),this.AU(!t.hasOwnProperty("v")||t.v),this.MJ(!t.hasOwnProperty("ce")||t.ce),this.RRt(!!t.hasOwnProperty("be")&&t.be),this.DRt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.DOt&&t.hasOwnProperty("fx")&&this.DOt.s3(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.xRt(null);const s=this.NOt,i=t.sgi;s.s3(i),s.XLt(this.DLt,this.ELt),t.sgcd&&sw.$i(t.sgzid)&&mw.set(this,{jOt:t.sgcd,zOt:t.sgzid})}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.tY(s.cols,s.rows),this.oY().nx(s)}else this.iY();this.FQ(),pw=!0,this.BOt(),"visual-state"!==s&&this.kc.nPt(this.UV(),t)}}}{const yw=self.Cs;yw.zEt=class extends yw.Un{constructor(t,s){super();const i=t.Rj(),e=i.fSt(s[1]);i.rPt().pDt(e),this.kc=i,this.sdt=t,this.Y_t=yw.Bz.NY(e),this.NGt=null,this.hPt=null,this.yEt=e.Instance,this.VK=s[2],this.Hn=s[0],this.XSt=this.kc.Emt(s[3]);const n=this.Y_t.Qbt();if(n<2&&(this.NGt=yw.Qn(e.eNt,this),!(this.NGt instanceof yw.J_t)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(yw.Bz.dGt(this,n),n>=2){const t=e.eNt??globalThis.WH;if(this.hPt=new t,!(this.hPt instanceof globalThis.WH))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.hPt=new globalThis.DY;yw.Bz.pGt(n),this.uGt()}static EI(t,s){return yw.Qn(yw.zEt,t,s)}Jn(){this.kc=null,this.Y_t=null,this.NGt&&(this.NGt.Jn(),this.NGt=null),this.yEt=null}Bxt(){return this.NGt}uGt(){this.NGt?this.NGt.uGt():this.hPt&&this.hPt.nH()}Rj(){return this.kc}GW(){return this.sdt}xY(){return this.Y_t}INt(){return this.yEt}_c(){return this.Hn}I0(){return this.VK}IY(){return this.hPt}Emt(){return this.XSt}}}{const Mw=self.Cs,ww=self.TY;Mw.TAt=class extends Mw.Un{constructor(t){super(),this.kc=t.runtime,this._Tt=t.vY,this.Y_t=this._Tt.xY(),this.fi=t.GY,this.GM=t.index,this.dAt=null,this.pAt=null,this.Y_t.n0(this.fi)}Jn(){this.pAt&&(this.pAt.AW(),this.pAt=null),this.Y_t.o0(this.fi),this.dAt&&(this.dAt.Jn(),this.dAt=null),this.kc=null,this._Tt=null,this.Y_t=null,this.fi=null}SNt(t){if(this.dAt)throw new Error("already got sdk instance");if(this.xY().Qbt()<2){if(this.dAt=Mw.Qn(this._Tt.INt(),this,t),!(this.dAt instanceof Mw.V_t))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.xY().lGt();this.fGt(s.Instance,t)}}gY(){return this.dAt??this.pAt}_Y(){return this.fi}Rj(){return this.kc}CY(){return this._Tt}xY(){return this.Y_t}Prt(){return this.GM}Z_t(){this.dAt?this.dAt.Z_t():this.pAt.YH()}sDt(t,s){this.dAt&&this.dAt.sDt(t,s)}MLt(){return this.dAt?this.dAt.KGt():this.pAt.vQ()}ix(t="full"){return this.dAt?this.dAt.ix(t):this.pAt.IQ(t)}nx(t,s="full"){if(this.dAt)return this.dAt.nx(t,s);this.pAt.CQ(t,s)}static oPt(t,s,i){const e=globalThis.QH;let n,r;n=s instanceof e?t.uU(s):s.X_t(),r=i instanceof e?t.uU(i):i.X_t();const h=n._Y(),o=r._Y(),a=h.GW().ik(),u=o.GW().ik();if(a!==u)return a-u;const l=h.hLt(),c=o.hLt();return l!==c?l-c:n.Prt()-r.Prt()}fGt(t,s){const i=ww,e=t??this.dAt.lGt(),n=e||i,r=this.xY().Qbt();if(Mw.Bz.dGt(this,r),Mw.Bz.mDt(s),this.pAt=new n,Mw.Bz.gDt(),Mw.Bz.pGt(r),e&&!(this.pAt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.pAt}OGt(){return this.pAt||this.fGt()}i_t(){return!!this.pAt}}}{const Sw=self.Cs;Sw.D$=class extends Sw.Un{constructor(t,s){super(),this.yx=t,this.aPt=[],this.uPt=[],this.lPt=new Map,this.cPt=[],this.fPt=[],this.dPt=new Set,this.$T=!0;for(const t of s){const s=Sw.Qn(Sw.pPt,this,t,this.aPt.length);this.aPt.push(s),this.lPt.set(s._c().toLowerCase(),s),t.length>=3&&this.cPt.push(this.mPt(s,t[2]))}this.Rj().gPt(this)}Jn(){this.Rj().yPt(this);for(const t of this.fPt)t.Jn();Sw.wh(this.fPt),Sw.wh(this.aPt),Sw.wh(this.uPt),this.lPt.clear(),Sw.wh(this.cPt),this.yx=null}MPt(t){this.dPt.add(t)}wPt(t){this.dPt.delete(t)}SPt(t){t.tS()&&(this.fPt=this.aPt.map((t=>{const s=t.EC();return s.TPt()>0?Sw.Qn(Sw.OM.bPt,s):null})),this.xPt());for(const s of this.dPt)s.SPt(t)}MNt(t){if(t.length){this.aPt=t.concat(this.aPt);for(const s of t)this.lPt.set(s._c().toLowerCase(),s);for(let t=0,s=this.aPt.length;t<s;++t)this.aPt[t].S0(t)}}mPt(t,s){t.vPt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Sw.Qn(Sw.xo);e.ya(s),i[t]=e}}return i}Gx(){return this.yx}Rj(){return this.yx.Rj()}OY(){Sw.wh(this.uPt);let t=!0;for(const s of this.aPt)s.Kyt()&&(this.uPt.push(s),s.EC().yb()||(t=!1));this.$T=t}QB(){return this.aPt}LNt(){return this.aPt.length>0}jnt(t){return this.lPt.get(t.toLowerCase())||null}IPt(t){if((t=Math.floor(+t))<0||t>=this.aPt.length)throw new RangeError("invalid effect type index");return this.aPt[t]}AY(t){return this.IPt(t).Kyt()}LY(t,s){this.IPt(t).vPt(s)}E0(){return this.uPt}z1(){return this.uPt.length>0}yb(){return this.$T}Fnt(t){return this.cPt[t]}L$(t){return t<this.fPt.length?this.fPt[t]:this.cPt[t]}RY(t,s){if(t<0||t>=this.cPt.length)return null;const i=this.cPt[t];return s<0||s>=i.length?null:i[s]}PY(t,s,i){if(t<0||t>=this.cPt.length)return!1;const e=this.cPt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Sw.xo){if(n.Qo(i))return!1;n.Po(i)}else{if(n===i)return!1;e[s]=i}return t<this.fPt.length&&this.fPt[t].CPt(s,i),!0}xPt(){const t=this.cPt,s=this.fPt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.CPt(t,n[t])}}static GPt(t){return t&&t instanceof Sw.xo?{t:"color",v:t.toJSON()}:t}static _Pt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Sw.Qn(Sw.xo);return s.ya(t.v),s}throw new Error("invalid effect parameter type")}return t}static DPt(t){return t.map(Sw.D$.GPt)}static EPt(t){return t.map(Sw.D$._Pt)}ix(){return this.aPt.map((t=>({name:t._c(),active:t.Kyt(),params:Sw.D$.DPt(this.cPt[t.ik()])})))}nx(t){for(const s of t){const t=this.jnt(s.name);t&&(t.vPt(s.active),this.cPt[t.ik()]=Sw.D$.EPt(s.params))}this.OY(),this.xPt()}}}{const Tw=self.Cs;Tw.pPt=class extends Tw.Un{constructor(t,s,i){super(),this._$=t,this.jc=s[0],this.Hn=s[1],this.GM=i,this.Cb=null,this.kf=!0}Jn(){this._$=null,this.Cb=null}yNt(t){const s=Tw.Qn(Tw.pPt,t,[this.jc,this.Hn],-1);return s.Cb=this.Cb,s.kf=this.kf,s}SPt(t){const s=t.hS(this.jc);if(!s)throw new Error("failed to find shader program '"+this.jc+"'");this.Cb=s}WB(){return this._$}_c(){return this.Hn}S0(t){this.GM=t}ik(){return this.GM}Gx(){return this._$.Gx()}Rj(){return this._$.Rj()}vPt(t){this.kf=!!t}Kyt(){return this.kf}EC(){return this.Cb}NPt(){const t=[];for(let s=0,i=this.Cb.NC();s<i;++s){const i=this.Cb.AC(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(Tw.Qn(Tw.xo,1,1,1,1))}}return t}}}{const bw=self.Cs;bw.EOt=class extends bw.Un{constructor(t,s){super(),this.fi=t,this.APt=s,this._$=t.GW().WB(),this.LPt=!0,this.R$=!0,this.OPt=!1,this.RPt=!1,this.PPt=!1,this.kPt=!1,this.KP=bw.Qn(bw.OM.UO,t.Rj().bj().E$(),{NO:(t,s)=>{const i=s.QP(),e=i.oj();t.Lb(e.N$()),t.US(e.ZQ()),i.Fx(t),t.US(0)},AO:t=>{const s=t.d_t(),[i,e]=t.f_t();return{PP:s,kP:i,FP:e}},LO:t=>this.L$(t)}),this.FPt=[],this.uPt=[],this.$T=!0,this.cPt=[],this.fPt=[],this.SPt(t.Rj().lb());for(let t=0,s=this._$.QB().length;t<s;++t)this.FPt.push(!0);this.OY(),this._$.MPt(this)}Jn(){this._$.wPt(this);for(const t of this.fPt)t&&t.Jn();bw.wh(this.fPt),this.KP.Jn(),this.KP=null,bw.wh(this.FPt),bw.wh(this.uPt),bw.wh(this.cPt),this.fi=null,this._$=null}SPt(t){t.tS()&&(this.fPt=this._$.QB().map((t=>{const s=t.EC();return s.TPt()>0?bw.Qn(bw.OM.bPt,s):null})))}FOt(t){let s=0;for(const i of t)this.cPt.push(this.mPt(s,i)),++s;this.xPt(),this.OY()}mPt(t,s){this.FPt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=bw.Qn(bw.xo);e.ya(s),i[t]=e}}return i}_At(){for(const t of this._$.QB())this.cPt.push(t.NPt());this.xPt()}Gx(){return this.yx}WB(){return this._$}sk(){return this._0(),this.KP}Rj(){return this.fi.Rj()}OY(){bw.wh(this.uPt);const t=this.APt,s=this._$.QB(),i=this.uPt,e=this.FPt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.EC().yb()||(n=!1)}this.$T=n,t.ePt(!!i.length),this.LPt=!0}_0(){const t=this.fi,s=this.APt,i=s.D0(),e=t.MB().iB(),n=0!==s.XB()||0!==s.aj().XB()||s.Bg()<0||s.Zg()<0,r=t.g_t(),h=t.gb();(this.LPt||i!==this.R$||e!==this.OPt||n!==this.RPt||r!==this.PPt||h!==this.kPt||this.KP.OR())&&(this.KP.RR(this.uPt.map((t=>t.EC())),{RO:this.uPt.map((t=>t.ik())),PO:!i||h,FO:e,jO:r,zO:n}),this.LPt=!1,this.R$=i,this.OPt=e,this.RPt=n,this.PPt=r,this.kPt=h)}E0(){return this.uPt}Fnt(t){return this.cPt[t]}L$(t){return t<this.fPt.length?this.fPt[t]:this.cPt[t]}RY(t,s){if(t<0||t>=this.cPt.length)return null;const i=this.cPt[t];return s<0||s>=i.length?null:i[s]}PY(t,s,i){if(t<0||t>=this.cPt.length)return!1;const e=this.cPt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof bw.xo){if(n.Qo(i))return!1;n.Po(i)}else{if(n===i)return!1;e[s]=i}return t<this.fPt.length&&this.fPt[t].CPt(s,i),!0}xPt(){const t=this.cPt,s=this.fPt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.CPt(t,n[t])}}yb(){return this.$T}jPt(){return this.uPt.some((t=>t.EC().Sb()))}AY(t){return this.FPt[t]}LY(t,s){this.FPt[t]=!!s}QB(){return this._$.QB()}t3(){return this._$.QB().map((t=>({name:t._c(),active:this.FPt[t.ik()],params:bw.D$.DPt(this.cPt[t.ik()])})))}s3(t){for(const s of t){const t=this._$.jnt(s.name);t&&(this.FPt[t.ik()]=s.active,this.cPt[t.ik()]=bw.D$.EPt(s.params))}this.OY(),this.xPt()}}}{const xw=self.Cs,vw=[],Iw=[],Cw=[],Gw=xw.Qn(xw.ol),_w=xw.Qn(xw.ol),Dw=xw.Qn(xw.Gu),Ew=xw.Qn(xw.Rect),Nw=xw.Qn(xw.Rect);let Aw=null,Lw=null,Ow=null;xw.zPt=class extends xw.Un{constructor(t){super(),this.kc=t,this.BPt=0,this.UPt=0,this.WPt=[],this.QPt=0,this.JPt=0,this.YPt=0,this.VPt=0,this.HPt=new self.tz(this)}Jn(){this.kc=null}Rj(){return this.kc}lk(){return this.HPt}qPt(){this.JPt=this.QPt,this.QPt=0,this.VPt=this.YPt,this.YPt=0}XPt(){return this.JPt}ZPt(){return this.VPt}KPt(t,s){const i=t.oj(),e=s.oj();i&&e&&i.yJ()&&e.yJ()&&this.WPt.push([t,s])}Wvt(t,s,i){for(const[e,n]of this.WPt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.Kvt(s)&&(i.includes(r)||i.push(r))}}Qvt(t,s){if(!this.WPt.length)return!1;for(const[i,e]of this.WPt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}$Pt(){xw.wh(this.WPt)}iz(t,s){if(!t||!s||t===s)return!1;const i=t.oj(),e=s.oj();if(!i.yJ()||!e.yJ())return!1;this.QPt++;const n=i.aj(),r=e.aj();return n.S1(r)?this.tkt(i,e):this.skt(i,e)}tkt(t,s){if(!t.tJ().Tu(s.tJ()))return!1;if(this.YPt++,!t.iJ().$u(s.iJ()))return!1;if(t.PAt()&&s.PAt())return!1;if(t.PAt())return this.ikt(t,s);if(s.PAt())return this.ikt(s,t);if(!t.QRt()&&!s.QRt())return!0;const i=t.JRt(),e=s.JRt();return i.Sl(e,s.Wb()-t.Wb(),s.Yb()-t.Yb())}skt(t,s){const i=t.PAt(),e=s.PAt();if(i&&!e)return this.ekt(t,s);if(e&&!i)return this.ekt(s,t);if(e||i)return!1;{const i=t.aj(),e=s.aj();Gw.m(t.JRt()),_w.m(s.JRt());const n=Gw.fl();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.MW(r+t.Wb(),h+t.Yb());n[s]=o,n[e]=a}const r=_w.fl();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.MW(n+s.Wb(),h+s.Yb());r[t]=o,r[i]=a}return Gw.gl(),_w.gl(),this.YPt++,Gw.Sl(_w,0,0)}}ekt(t,s){const i=t.aj(),e=s.aj();Aw||(Aw=xw.Qn(xw.ol)),Lw||(Lw=xw.Qn(xw.Rect)),Ow||(Ow=xw.Qn(xw.Gu));const n=s.Wb(),r=s.Yb(),[h,o]=e.MW(n,r),[a,u]=i.gW(h,o),l=a-n,c=u-r;if(Lw.m(s.tJ()),Lw.offset(l,c),!t.tJ().Tu(Lw))return!1;if(Ow.m(s.iJ()),Ow.offset(l,c),this.YPt++,!t.iJ().$u(Ow))return!1;Aw.m(s.JRt());const f=Aw.fl();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=l,f[s]+=c}return Aw.gl(),this.ikt(t,s,a,u,Aw,Lw,Ow)}ikt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.tJ(),a=t.Wb(),u=t.Yb(),l=t.UV().gY(),c=void 0!==i?i:s.Wb(),f=void 0!==e?e:s.Yb(),d=s.QRt(),p=void 0!==h?h:s.iJ(),m=Iw;l.nkt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.rkt();if(this.QPt++,o.bu(e,a,u)&&(Dw.Hu(e),Dw.offset(a,u),Dw.$u(p)))if(d){const t=void 0!==n?n:s.JRt();let r=c,h=f;void 0!==n&&(r=s.Wb(),h=s.Yb());const o=i.hkt();if(o){if(this.YPt++,o.Sl(t,r-(a+e.Za()),h-(u+e.Ka())))return xw.wh(m),!0}else if(Gw.Ml(Dw,0,0),Gw.Sl(t,r,h))return xw.wh(m),!0}else{const t=i.hkt();if(!t)return xw.wh(m),!0;if(Gw.Ml(p,0,0),t.Sl(Gw,-(a+e.Za()),-(u+e.Ka())))return xw.wh(m),!0}}return xw.wh(m),!1}okt(t,s,i){const e=t.EB(),n=this.kc.Qk();if(!n)throw new Error("cannot call outside event");const r=n.Edt(),h=new xw.akt;if(e.ddt()){i||(e.Sdt(!1),xw.wh(e.Tdt())),r&&xw.wh(e.bdt());for(const n of t.DB()){const t=n.oj(),o=t.aj();let a=!1;if(h.PU(o)&&t.nJ()&&(a=s.some((([s,i])=>{const[e,n]=h.gW(o,s,i,t.ZQ());return t.wJ(e,n)}))),a){if(i)return!1;e.Mdt(n)}else r&&e.wdt(n)}}else{let t,o=!1;r&&!n.bwt(this.kc.Tmt())?this.kc.Yxt()&&!e.bdt().length&&e.Tdt().length?t=e.Tdt():(t=e.bdt(),o=!0):t=e.Tdt();let a=0;for(let n=0,u=t.length;n<u;++n){const u=t[n],l=u.oj(),c=l.aj();let f=!1;if(h.PU(c)&&l.nJ()&&(f=s.some((([t,s])=>{const[i,e]=h.gW(c,t,s,l.ZQ());return l.wJ(i,e)}))),f){if(i)return!1;o?e.Mdt(u):t[a++]=u}else o?t[a++]=u:r&&e.wdt(u)}i||(t.length=a)}return t.eSt(),h.Jn(),!!i||e.pdt()}ukt(t,s){if(!t)return!0;for(const i of s.tAt())if(!t.S1(i))return!1;return!0}Jxt(t,s,i,e){if(s.y0())for(const n of s.qMt())this.ukt(t,n)?(n.ZNt(),n.qNt().EK(i,e)):xw.An(e,n.DB());else this.ukt(t,s)?(s.ZNt(),s.qNt().EK(i,e)):xw.An(e,s.DB())}fz(t,s,i,e){for(const n of s)this.Jxt(t,n,i,e)}lkt(t,s,i){const e=this.kc.MDt();e&&this.fz(t,e.F6(),s,i)}ckt(t,s,i){const e=this.kc.wDt();e&&this.fz(t,e.F6(),s,i)}ERt(t,s){return t.jAt()&&(!s||s.oj().ERt(t.Xbt().get("solidTags")))}rz(t){const s=t.oj();this.lkt(s.aj(),s.tJ(),vw);for(const s of vw)if(this.ERt(s,t)&&this.iz(t,s))return xw.wh(vw),s;return xw.wh(vw),null}fkt(t,s){this.lkt(null,t,vw);for(const i of vw)if(this.ERt(i,s)&&this.dkt(t,i))return xw.wh(vw),i;return xw.wh(vw),null}pkt(t,s){let i=null;s&&(i=Cw,xw.wh(i));const e=t.oj();this.ckt(e.aj(),e.tJ(),vw);for(const e of vw)if(e.BAt()&&this.iz(t,e)){if(!s)return xw.wh(vw),e;i.push(e)}return xw.wh(vw),i}mkt(t,s,i,e,n){e=e||50;const r=t.oj(),h=r.Wb(),o=r.Yb();for(let a=0;a<e;++a)if(r.jQ(h+s*a,o+i*a),r.FQ(),!this.iz(t,n))return!0;return r.jQ(h,o),r.FQ(),!1}gkt(t,s,i,e,n,r){e=e||50;const h=t.oj(),o=h.Wb(),a=h.Yb();let u=null,l=null;for(let c=0;c<e;++c)if(h.jQ(o+s*c,a+i*c),h.FQ(),!this.iz(t,u))if(u=this.rz(t),u)l=u;else if(n&&(u=r?this.iz(t,r)?r:null:this.pkt(t),u&&(l=u)),!u)return l&&this.ykt(t,s,i,l,16,!0),!0;return h.jQ(o,a),h.FQ(),!1}Mkt(t,s,i,e){e=e||50;const n=t.oj(),r=n.Wb(),h=n.Yb();let o=null,a=null;for(let u=0;u<e;++u)for(let e=0;e<2;++e){const l=2*e-1;if(n.jQ(r+s*u*l,h+i*u*l),n.FQ(),!this.iz(t,o)){if(o=this.rz(t),!o)return a&&this.ykt(t,s*l,i*l,a,16,!0),!0;a=o}}return n.jQ(r,h),n.FQ(),!1}ykt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const u=t.oj();let l=u.Wb(),c=u.Yb();for(;h<=n;){const n=1/h;h*=2,u.BQ(s*n*(o?1:-1),i*n*(o?1:-1)),u.FQ(),this.iz(t,e)||r&&this.rz(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.Wb(),c=u.Yb())}a&&(u.jQ(l,c),u.FQ())}wkt(t,s=100){let i=0;const e=t.oj(),n=e.Wb(),r=e.Yb();let h=0,o=this.rz(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.jQ(Math.floor(n+s*i),Math.floor(r+a*i)),e.FQ(),!this.iz(t,o)&&(o=this.rz(t),!o))return!0}return e.jQ(n,r),e.FQ(),!1}Skt(t,s,i,e){const n=t.oj(),r=n.Wb(),h=n.Yb(),o=Math.max(10,xw.ir(s,i,r,h)),a=xw.nr(s,i,r,h),u=e||this.rz(t);if(!u)return xw.Zn(a+Math.PI);let l=u,c=0,f=0;const d=xw.Kn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.jQ(s+Math.cos(r)*o,i+Math.sin(r)*o),n.FQ(),!this.iz(t,l)&&(l=e?null:this.rz(t),!l)){c=r;break}}for(36===p&&(c=xw.Zn(a+Math.PI)),l=u,p=1;p<36;++p){const r=a+p*d;if(n.jQ(s+Math.cos(r)*o,i+Math.sin(r)*o),n.FQ(),!this.iz(t,l)&&(l=e?null:this.rz(t),!l)){f=r;break}}if(36===p&&(f=xw.Zn(a+Math.PI)),n.jQ(r,h),n.FQ(),f===c)return f;const m=xw.rr(f,c)/2;let g;g=xw.ar(f,c)?xw.Zn(c+m+Math.PI):xw.Zn(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,x=M-2*T*S;return xw.nr(0,0,b,x)}Tkt(t,s,i,e,n){if(!n)return!1;const r=n.oj();return!!r.yJ()&&(this.QPt++,Ew.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.tJ().Tu(Ew)&&(n.PAt()?this.bkt(t,s,i,e,n,r):(this.YPt++,!!r.iJ().Ku(t,s,i,e)&&(!r.QRt()||r.JRt().Ku(r.Wb(),r.Yb(),t,s,i,e)))))}bkt(t,s,i,e,n,r){const h=r.Wb(),o=r.Yb(),a=n.gY(),u=Iw;Nw.set(t,s,i,e),Nw.normalize(),a.nkt(Nw,u);for(let n=0,r=u.length;n<r;++n){const r=u[n],a=r.rkt();if(this.QPt++,Ew.bu(a,h,o)&&(Dw.Hu(a),Dw.offset(h,o),Dw.Ku(t,s,i,e))){const n=r.hkt();if(!n)return xw.wh(u),!0;if(this.YPt++,n.Ku(h+a.Za(),o+a.Ka(),t,s,i,e))return xw.wh(u),!0}}return xw.wh(u),!1}dkt(t,s){if(!s)return!1;const i=s.oj();if(!i.yJ())return!1;if(this.QPt++,!i.tJ().Tu(t))return!1;if(s.PAt())return this.xkt(t,s,i);if(this.YPt++,Dw.Hu(t),!i.iJ().$u(Dw))return!1;if(!i.QRt())return!0;const e=Gw;e.Hu(t,i.Wb(),i.Yb());const n=i.JRt();return e.Sl(n,0,0)}xkt(t,s,i){const e=i.Wb(),n=i.Yb(),r=s.gY(),h=Iw;r.nkt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.rkt();if(this.QPt++,t.bu(r,e,n)){const s=i.hkt();if(!s)return xw.wh(h),!0;if(this.YPt++,Gw.Hu(t,0,0),s.Sl(Gw,-(e+r.Za()),-(n+r.Ka())))return xw.wh(h),!0}}return xw.wh(h),!1}vkt(t,s){if(!t)return;const i=t.oj();i.yJ()&&(this.QPt++,i.tJ().Tu(s.rect)&&(t.PAt()?this.Ikt(t,i,s):(this.YPt++,i.QRt()?s.Ckt(t,i.Wb(),i.Yb(),i.JRt()):s.Gkt(t,i.iJ()))))}Ikt(t,s,i){const e=s.Wb(),n=s.Yb(),r=Iw;t.gY().nkt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.rkt();if(this.QPt++,i.rect.bu(a,e,n)){const r=o.hkt();this.YPt++,r?i.Ckt(t,e+a.Za(),n+a.Ka(),r):i._kt(t,s.Wb(),s.Yb(),a)}}xw.wh(r)}oz(t,s){if(t===this.BPt&&s===this.UPt)return;this.BPt=t,this.UPt=s;const i=this.kc.g0();for(const e of i)if(e.Vz()){for(const t of e._B())t.oj()._Rt();e.qNt().Dkt(t,s),e.XNt();for(const t of e._B()){const s=t.oj();s.iPt(),s.KNt()}}}uz(){return[this.BPt,this.UPt]}Ekt(t,s){this.BPt=t,this.UPt=s}}}{const Rw=self.Cs;Rw.GEt=class extends Rw.Un{constructor(t,s){super(),this.xK=t,this.vK=s,this.IK=Rw.Qn(Rw.Cl)}Jn(){this.IK.Jn(),this.IK=null}Dkt(t,s){if(!this.IK.Dl())throw new Error("grid not empty");this.xK=t,this.vK=s}CK(t,s,i){let e=this.IK.Js(t,s);return e||(i?(e=Rw.Qn(Rw.Nkt,this,t,s),this.IK.Set(t,s,e),e):null)}GK(t){const s=Math.floor(t/this.xK);return isFinite(s)?s:0}_K(t){const s=Math.floor(t/this.vK);return isFinite(s)?s:0}DK(t,s,i){if(s)for(let e=s.Za(),n=s.$a();e<=n;++e)for(let n=s.Ka(),r=s.tu();n<=r;++n){if(i&&i.xu(e,n))continue;const s=this.CK(e,n,!1);s&&(s.Xf(t),s.Dl()&&this.IK.El(e,n))}if(i)for(let e=i.Za(),n=i.$a();e<=n;++e)for(let n=i.Ka(),r=i.tu();n<=r;++n)s&&s.xu(e,n)||this.CK(e,n,!0).wK(t)}EK(t,s){let i=this.GK(t.Za());const e=this._K(t.Ka()),n=this.GK(t.$a()),r=this._K(t.tu());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.CK(i,t,!1);e&&e.TK(s)}}}}{const Pw=self.Cs;Pw.Nkt=class extends Pw.Un{constructor(t,s,i){super(),this.fK=t,this._a=s,this.Da=i,this.dK=Pw.Qn(Pw.Ol)}Jn(){this.dK.Jn(),this.dK=null,this.fK=null}Dl(){return this.dK.Dl()}wK(t){this.dK.Fl(t)}Xf(t){this.dK.El(t)}TK(t){Pw.An(t,this.dK.jl())}}}{const kw=self.Cs,Fw=1e-6;kw.Akt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new kw.Rect,this.Lkt=2,this.Okt=null,this.Rkt=0,this.Pkt=0,this.kkt=0,this.Fkt=0,this.jkt=0,this.St=0,this.zkt=1,this.Bkt=0,this.Ukt=1,this.Wkt=0}Qkt(){return this.Lkt<1.000001}Ff(){this.Lkt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.Lkt=2,this.Okt=null,this.Rkt=0,this.Pkt=0,this.kkt=0,this.Fkt=0,this.jkt=0,this.St=0,this.zkt=1,this.Bkt=0,this.Ukt=1,this.Wkt=0,this}Jkt(){if(!1===this.Qkt())return;const t=this.dx*this.Lkt,s=this.dy*this.Lkt,i=kw.tr(t,s),e=t/i,n=s/i;this.St=i-Fw,this.Fkt=this.x1+e*this.St,this.jkt=this.y1+n*this.St,this.Rkt=Math.atan2(this.kkt,this.Pkt)+Math.PI/2,this.zkt=Math.cos(this.Rkt),this.Bkt=Math.sin(this.Rkt);const r=e*this.zkt+n*this.Bkt;if(this.Ukt=e-2*this.zkt*r,this.Wkt=n-2*this.Bkt*r,r>0){const t=Math.PI;this.Rkt=kw.Zn(this.Rkt+t),this.zkt=-this.zkt,this.Bkt=-this.Bkt}}Ykt(t,s,i,e,n){const r=kw.Vr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.Lkt&&(this.Lkt=r,this.Okt=t.zW(),this.Pkt=s-e,this.kkt=i-n)}_kt(t,s,i,e){const n=s+e.Za(),r=s+e.$a(),h=i+e.Ka(),o=i+e.tu();this.Ykt(t,n,h,r,h),this.Ykt(t,r,h,r,o),this.Ykt(t,r,o,n,o),this.Ykt(t,n,o,n,h)}Gkt(t,s){const i=s.Fr(),e=s.jr(),n=s.zr(),r=s.Br(),h=s.Ur(),o=s.Wr(),a=s.Qr(),u=s.Jr();this.Ykt(t,i,e,n,r),this.Ykt(t,n,r,h,o),this.Ykt(t,h,o,a,u),this.Ykt(t,a,u,i,e)}Ckt(t,s,i,e){const n=e.fl();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,u=n[h]+s,l=n[h+1]+i;this.Ykt(t,o,a,u,l)}}}}{const jw=self.Cs;jw.akt=class{constructor(){this.Vkt=new Map}Jn(){for(const t of this.Vkt.values())t.Hkt._l();this.Vkt.clear()}qkt(t){let s=this.Vkt.get(t);return void 0===s&&(s={RU:null,Hkt:new jw.Cl},this.Vkt.set(t,s)),s}PU(t){const s=this.qkt(t);return null===s.RU&&(s.RU=t.UU()),s.RU}gW(t,s,i,e){if(0!==e)return t.gW(s,i,e);const n=this.qkt(t);let r=n.Hkt.Js(s,i);return void 0===r&&(r=t.gW(s,i,e),n.Hkt.Set(s,i,r)),r}}}{const zw=self.Cs,Bw=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Uw=new Set(["high","low"]),Ww=self.hs,Qw=Ww.fs,Jw=(Ww.ys,Qw.create()),Yw=zw.Qn(zw.Gu),Vw=zw.Qn(zw.Rect);zw.Xkt=class extends zw.Un{constructor(t){super(),this.kc=t,this.Zkt=[],this.Kkt=!1,this.$kt=null,this.tFt=null,this.sFt=null,this.iFt="high-performance",this.eFt=!1,this.nFt="auto",this.rFt=0,this.hFt=0,this.oFt="",this.aFt=0,this.uFt=0,this.lFt=0,this.cFt=0,this.fFt=0,this.dFt=0,this.sw="normalized",this.pFt=0,this.mFt=1,this.gFt=1e4,this.Lw=!0,this.yFt=0,this.dR=0,this.pR=0,this.MFt="letterbox-scale",this.wFt="letterbox-scale",this.SFt=0,this.TFt=0,this.bFt=Qw.create(),this.xFt="high",this.vFt=this.xFt,this.IFt=!1,this.CFt=[],this.GFt=new Set,this._Ft=self.C3_Shaders,this.DFt=zw.Qn(zw.OM.yO,{dO:()=>[this.e2(),this.n2()],pO:()=>this.EFt(),mO:t=>this.NFt(t),getTime:()=>this.Rj().cF(),gO:()=>this.Rj().pj()}),this.AFt=0,this.LFt=0,this.OFt=NaN,this.RFt=null,this.PFt=new Map,this.kFt=NaN,this.FFt=new Map,this.jFt="",this.zFt=1,this.BFt=zw.Qn(zw.Rect),this.UFt="",this.WFt=null,this.QFt=null,this.JFt=0,this.YFt=0,this.VFt=-1,this.HFt=0,this.qFt=t=>this.HFt=t.progress,this.XFt=null,this.ZFt={KFt:null,$Ft:null,tjt:null},this.sjt=0,this.ijt=0,this.ejt=0,this.njt="fade-in",this.rjt=null,this.hjt=new Promise((t=>this.rjt=t))}ojt(t){this.iFt=t}ajt(t){this.Kkt=!!t}ujt(t){this.sw=t}ljt(){return this.sw}cjt(t){this.pFt=t}fjt(t,s){this.mFt=t,this.gFt=s}djt(t){this.eFt=!!t}pjt(t){this.nFt=t}async lo(t){let s=t.canvas;this.Zkt.push({canvas:s,mjt:null}),this.kc.fQ("runtime","window-resize",(t=>this.gjt(t))),this.kc.fQ("runtime","fullscreenchange",(t=>this.yjt(t))),this.kc.fQ("runtime","fullscreenerror",(t=>this.Mjt(t))),s.addEventListener("webglcontextlost",(t=>this.wjt(t))),s.addEventListener("webglcontextrestored",(t=>this.Sjt(t))),this.IFt=!!t.isFullscreen,this.oFt=t.cssDisplayMode;const i=navigator.gpu&&this.Kkt;let e=!1;if(i)try{await this.Tjt(!0)}catch(t){this.bjt("WebGPU",t),this.tFt=null}if(!this.lb())try{await this.xjt(!0)}catch(t){this.bjt("WebGL",t),this.$kt=null}if(this.lb()||(e=!0),!this.lb()&&i)try{await this.Tjt(!1)}catch(t){this.bjt("WebGPU",t),this.tFt=null}if(!this.lb())try{await this.xjt(!1)}catch(t){this.bjt("WebGL",t),this.$kt=null}const n=this.lb();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.OT(e),this.tFt&&(this.tFt.vjt=()=>this.Ijt(),this.tFt.Cjt=()=>this.Gjt()),"normalized"===this.sw?n.Xw():(n.Zw(),n.Hw(this.pFt)),this.xE(t.windowInnerWidth,t.windowInnerHeight,!0),await this.SPt()}bjt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async Tjt(t){const s={HM:this.mFt,qM:this.gFt};let i=!0;"no"===this.nFt?i=!1:"auto"===this.nFt&&(i=zw.Zs.ri);const e={powerPreference:this.iFt,depth:this.kc.n1(),failIfMajorPerformanceCaveat:t,_jt:this.kc.m2(),Djt:this.kc.Ejt(),AN:this.kc.Njt(),Ajt:i};this.tFt=zw.Qn(zw.OM.Ljt,s),await this.tFt.EI(this.Zkt[0].canvas,e)}async xjt(t){const s={alpha:!0,powerPreference:this.iFt,NN:"xbox-uwp-webview2"!==this.kc.Mz(),depth:this.kc.n1(),AN:this.kc.Njt(),failIfMajorPerformanceCaveat:t,HM:this.mFt,qM:this.gFt};this.eFt&&(s.LN=1),this.$kt=zw.Qn(zw.OM.PN,this.Zkt[0].canvas,s),await this.$kt.Fw()}async Ojt(){if(this._Ft){const t=[];for(const[s,i]of Object.entries(this._Ft)){i.src=i.Rjt;const e=zw.OM.Pjt.ZC();t.push(this.tFt.zA(Object.assign({GI:e,name:s},i)))}await Promise.all(t)}}async kjt(){if(this._Ft){const t=[];for(const[s,i]of Object.entries(this._Ft)){let e;if(i.Fjt&&this.$kt.gv()>=2)i.src=i.Fjt,e=zw.OM.II.KC();else{if(!i.jjt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.jjt,e=zw.OM.II.ZC()}t.push(this.$kt.zA(Object.assign({GI:e,name:s},i)))}await Promise.all(t),this.$kt.BA(),this.$kt.aS()}this.$kt.tO()&&(this.RFt=zw.Qn(zw.OM.TN,this.$kt))}async SPt(){this.tFt?await this.Ojt():this.$kt&&await this.kjt();const t=this.lb();t.AT(this.Lw),t.tO()&&(this.OFt=0);for(const s of this.kc.zjt()){for(const i of s.QB())i.SPt(t);s.SPt(t),s.OY()}this.sFt=new self.Gq(this.kc,t)}Jn(){this.kc=null,this.$kt=null,this.Zkt.length=0}bk(){return this.kc.bk()}gjt(t){const s=this.kc;if(s.Bjt())return;const i=t.devicePixelRatio;this.bk()&&(self.devicePixelRatio=i),s.Ujt(i),this.IFt=!!t.isFullscreen,this.oFt=t.cssDisplayMode,this.xE(t.innerWidth,t.innerHeight),s.pj();const e=new zw.Event("window-resize");e.data=t,s.yf().Gf(e);const n=new zw.Event("resize");n.Wjt=this.Dz(),n.Qjt=this.Nz(),n.Jjt=this.Lz(),n.Yjt=this.Rz(),s.x5(n),s.yQ()&&(s.ugt()||self.MQ.Vjt())&&s.JR()}yjt(t){this.IFt=!!t.isFullscreen,this.xE(t.innerWidth,t.innerHeight,!0),this.kc.pj()}Mjt(t){this.IFt=!!t.isFullscreen,this.xE(t.innerWidth,t.innerHeight,!0),this.kc.pj()}xE(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.rFt===t&&this.hFt===s&&!i)return;this.rFt=t,this.hFt=s;const e=this.Hjt();"letterbox-scale"===e?this.qjt(t,s):"letterbox-integer-scale"===e?this.Xjt(t,s):"off"===e?this.Zjt(t,s):this.Kjt(t,s),this.$jt(e);for(const{canvas:t}of this.Zkt)t.width=this.lFt,t.height=this.cFt;this.kc.zc("canvas","update-size",{marginLeft:this.fFt,marginTop:this.dFt,styleWidth:this.aFt,styleHeight:this.uFt,displayScale:this.AH()});const n=this.lb();n.xE(this.lFt,this.cFt,!0);for(const t of this.CFt)n.HL(t);zw.wh(this.CFt),this.tzt();const r=this.kc.UF();r.j5(),r.z5()}tzt(){this.lb().$w(this.bFt,this.e2()/this.n2())}h2(){return this.bFt}qjt(t,s){const i=this.kc.Pz(),e=this.kc.vk(),n=this.kc.Ck(),r=e/n;if(t/s>r){const i=s*r;this.aFt=Math.round(i),this.uFt=s,this.fFt=Math.floor((t-this.aFt)/2),this.dFt=0}else{const i=t/r;this.aFt=t,this.uFt=Math.round(i),this.fFt=0,this.dFt=Math.floor((s-this.uFt)/2)}this.lFt=Math.round(this.aFt*i),this.cFt=Math.round(this.uFt*i),this.kc.szt(e,n)}Xjt(t,s){const i=this.kc.Pz();1!==i&&(t+=1,s+=1);const e=this.kc.vk(),n=this.kc.Ck(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.lFt=Math.round(e*h),this.cFt=Math.round(n*h),this.aFt=this.lFt/i,this.uFt=this.cFt/i,this.fFt=Math.max(Math.floor((t-this.aFt)/2),0),this.dFt=Math.max(Math.floor((s-this.uFt)/2),0),this.kc.szt(e,n)}Kjt(t,s){const i=this.kc.Pz();this.aFt=t,this.uFt=s,this.lFt=Math.round(this.aFt*i),this.cFt=Math.round(this.uFt*i),this.fFt=0,this.dFt=0;const e=this.AH();this.kc.szt(this.aFt/e,this.uFt/e)}Zjt(t,s){const i=this.kc.Pz();this.aFt=this.kc.H0(),this.uFt=this.kc.q0(),this.lFt=Math.round(this.aFt*i),this.cFt=Math.round(this.uFt*i),this.izt()?(this.fFt=Math.floor((t-this.aFt)/2),this.dFt=Math.floor((s-this.uFt)/2)):(this.fFt=0,this.dFt=0),this.kc.szt(this.kc.H0(),this.kc.q0())}$jt(t){if("high"===this.xFt)this.dR=this.lFt,this.pR=this.cFt,this.vFt="high";else{let s,i;if("off"===this.Hjt()?(s=this.kc.H0(),i=this.kc.q0()):(s=this.kc.vk(),i=this.kc.Ck()),this.lFt<s||this.cFt<i)this.dR=this.lFt,this.pR=this.cFt,this.vFt="high";else if(this.dR=s,this.pR=i,this.vFt="low","scale-inner"===t){const t=s/i,e=this.rFt/this.hFt;e<t?this.dR=this.pR*e:e>t&&(this.pR=this.dR/e)}else if("scale-outer"===t){const t=s/i,e=this.rFt/this.hFt;e>t?this.dR=this.pR*e:e<t&&(this.pR=this.dR/e)}}}Rj(){return this.kc}ezt(){return this.Zkt[0].canvas}E$(){return this.DFt}izt(){return this.IFt}nzt(){return this.oFt}rzt(t){if(!Bw.has(t))throw new Error("invalid fullscreen mode");this.MFt=t;const s=this.kc.UF();s.j5(),s.z5()}EH(){return this.MFt}hzt(t){if(!Bw.has(t))throw new Error("invalid fullscreen mode");this.wFt=t;const s=this.kc.UF();s.j5(),s.z5()}ozt(){return this.wFt}Hjt(){return this.izt()?this.ozt():this.EH()}azt(t){if(!Uw.has(t))throw new Error("invalid fullscreen scaling quality");this.xFt=t,this.kc.UF().j5()}uzt(){return this.xFt}g2(){return this.vFt}static lzt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}yH(){return this.rFt}MH(){return this.hFt}e2(){return this.dR}n2(){return this.pR}AT(t){this.Lw=!!t}czt(t){this.yFt=t}hK(){return this.yFt}fzt(){return this.lb().KE()}wjt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.CFt=[],this.GFt.clear(),this.DFt.Ob(),this.$kt.Ob(),this.kc.x4()}Ijt(){console.log("[Construct] WebGPU device lost"),this.CFt=[],this.GFt.clear(),this.DFt.Ob(),this.kc.x4()}async Sjt(t){await this.$kt.Rb(),await this.SPt(),await this.kc.dzt(),console.log("[Construct] WebGL context restored")}async Gjt(){await this.SPt(),await this.kc.dzt(),console.log("[Construct] WebGPU device restored")}pzt(){return this.$kt}mzt(){return this.tFt}lb(){return this.tFt||this.$kt}vNt(){return this.sFt}Tz(){let t="";return t=this.kc.mzt()?"webgpu":"webgl"+this.kc.pzt().gv(),this.kc.lb().RT()&&(t+="-software"),t}xz(){return this.kc.mzt()?this.kc.mzt().gzt():this.kc.pzt().uO()}vW(){return"low"===this.vFt?1/this.kc.Pz():this.AH()}AH(){const t=this.Hjt();if("off"===t||"crop"===t)return 1;const s=this.kc.vk(),i=this.kc.Ck(),e=s/i,n=this.lFt/this.cFt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.uFt/i:this.aFt/s}W2(){return"low"===this.g2()?1:this.AH()}B2(){return"low"===this.g2()?1:this.kc.Pz()}yzt(t,s){this.SFt=t,this.TFt=s}fX(t,s,i,e=!0){s=s||this.dR,i=i||this.pR;const n=s/2+this.SFt,r=i/2+this.TFt;if(e){let e=this.h2();s===this.dR&&i===this.pR||(t.$w(Jw,s/i),e=Jw),t.WA(e)}const h=t.eS(n,r,t.zw(i),n,r,0,i);t.qA(h)}Mzt(t,s=!0){const i=this.Dz(),e=this.Nz(),n=i/2,r=e/2;s&&t.WA(this.h2());const h=t.eS(n,r,t.zw(e),n,r,0,e);t.qA(h)}Lz(){return this.lFt}Rz(){return this.cFt}Dz(){return this.aFt}Nz(){return this.uFt}Iz(){return this.fFt}Gz(){return this.dFt}r4(){return this.Zkt.length}wzt(){return"undefined"!=typeof OffscreenCanvas&&this.ezt()instanceof OffscreenCanvas&&("Chromium"!==zw.Zs.ei||zw.Zs.ii>=124)}async _4(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.Zkt.length===t)return;const i={count:t,layersDomState:this.kc.UF().jF().v0().filter((t=>t.jU())).map((t=>t.N1())),immediate:s,marginLeft:this.fFt,marginTop:this.dFt,styleWidth:this.aFt,styleHeight:this.uFt};let e;if(e=this.bk()?await this.kc.gj("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.Zkt.length)this.Zkt.length=t;else for(const t of e.addedCanvases){t.width=this.lFt,t.height=this.cFt;const s=this.wzt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.Zkt.push({canvas:t,mjt:i})}this.kc.pj()}w5(t){if(t>=this.Zkt.length)return;const s=this.ezt(),i=this.Zkt[t].mjt;this.wzt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}M2(t){t.depth=this.kc.n1();const s=this.CFt,i=s.findIndex((s=>s.wI(t)));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.lb().WL(t),this.GFt.add(e),e}A$(t){if(!this.GFt.has(t))throw new Error("render target not in use");this.GFt.delete(t),this.CFt.push(t)}EFt(){const t={qx:this.kc.Gk()};return"low"===this.g2()&&(t.width=this.e2(),t.height=this.n2()),this.M2(t)}NFt(t){this.A$(t)}*Szt(){for(const t of this.kc.UF().P5())for(const s of t.rU()){const t=this.PFt.get(s);t&&(yield t)}}l2(t){if(!this.lb().tO())return null;let s=this.PFt.get(t);return s||(s={kQ:t,name:t._c(),Tzt:zw.Qn(zw.OM.TN,this.$kt),bzt:0,xzt:0,vzt:0},this.PFt.set(t,s)),s.Tzt}Izt(){const t=this.lb();if(t.tO()&&0===this.LFt){this.LFt=t.ET(),this.kFt=NaN;for(const t of this.Szt())t.bzt=NaN}}Czt(){this.$kt&&this.$kt.tO()&&this.Gzt(),this.tFt&&this.tFt.tO()&&this._zt()}Gzt(){if(isNaN(this.kFt)&&(this.kFt=this.RFt._N(this.AFt,this.LFt),!isNaN(this.kFt))){if(this.kc.yQ())for(const t of this.Szt())if(t.bzt=t.Tzt._N(this.AFt,this.LFt),isNaN(t.bzt))return;if(this.RFt.DN(this.LFt),this.OFt=Math.min(this.kFt,1),this.kc.yQ()){const t=new Map;for(const s of this.Szt())s.Tzt.DN(this.LFt),s.xzt=Math.min(s.bzt,1),t.set(s.kQ,s.xzt);for(const s of this.Szt()){const i=s.kQ,e=(t.get(i)||0)-i._U().reduce(((s,i)=>s+(t.get(i)||0)),0);s.vzt=zw.Xn(e,0,1)}const s=this.kc.jF(),i=this.OFt-s.v0().reduce(((s,i)=>s+(t.get(i)||0)),0);self.MQ.Dzt(zw.Xn(i,0,1),this.OFt,[...this.Szt()])}this.AFt=this.LFt,this.LFt=0}}Ezt(){return this.RFt}_zt(){if(0===this.LFt)return;for(let t=this.AFt;t<this.LFt;++t){const s=this.FFt.get(t);if(s&&!s.lN())return}const t=this.kc.jF(),s=zw.bo(t.K3()+1,0);let i=0;for(let t=this.AFt;t<this.LFt;++t){const e=this.FFt.get(t);if(!e)continue;const n=e.cN();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.OFt=zw.Xn(i,0,1),this.kc.yQ()){const i=t.rU(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.EU()].reduce(((t,s)=>t+(e.get(s)||0)),0);r.set(t,i),n.push({name:t._c(),vzt:zw.Xn(s,0,1),xzt:zw.Xn(i,0,1)})}const h=this.OFt-t.v0().reduce(((t,s)=>t+(r.get(s)||0)),0);self.MQ.Dzt(zw.Xn(h,0,1),this.OFt,n)}for(let t=this.AFt;t<this.LFt;++t)this.FFt.delete(t);this.AFt=this.LFt,this.LFt=0}Nzt(t){this.FFt.set(this.tFt.ET(),t)}vF(){return this.OFt}xj(t,s,i,e,n,r){return this.jFt=t,this.zFt=s,this.BFt.Wa(i,e,n,r),this.WFt||(this.WFt=new Promise((t=>{this.QFt=t}))),this.WFt}Azt(){if(!this.jFt)return;let t=this.ezt();const s=this.BFt,i=zw.Xn(Math.floor(s.Za()),0,t.width),e=zw.Xn(Math.floor(s.Ka()),0,t.height);let n=s.width();n=0===n?t.width-i:zw.Xn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:zw.Xn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=zw.lo(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}zw.co(t,this.jFt,this.zFt).then((t=>{this.UFt&&URL.revokeObjectURL(this.UFt),this.UFt=URL.createObjectURL(t),this.WFt=null,this.QFt(t)})),this.jFt="",this.zFt=1}Lzt(){return this.UFt}Ozt(t){t?this.JFt++:this.JFt--}Rzt(){return this.JFt>0}Pzt(t){const s=this.lb();if(2===t)this.XFt=zw.Qn(zw.OM.UT,this.lb()),this.XFt.$D("Arial"),this.XFt.tE(16),this.XFt.pE("center"),this.XFt.gE("center"),this.XFt.xE(300,200);else if(0===t){const t=this.kc.kzt();t&&t.nX(s).catch((t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)))}else 4===t&&(this.Fzt("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then((t=>{"done"===this.njt?s.nI(t):this.ZFt.KFt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.jzt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFZklEQVR42u2aO68SQRTHR3leQeI3wMRo7CDGZyyg0MTEYlFbEylMLC+JsQYfvTZWFpgYKwuImlhqYiyNfgOsbRBYefn4O+ecGdgF0caEMbv/5N6BYRY4vzNzzplZVKxYsWLFihUrViwHVcIBJdoDqAjqvwGwF6LJ6YgDAI5EHQBuRR3AvBZNAENu73pAI8oAVB74GWkA6gOG0QawF2hFGkACKEcaQA7yna804Z9UG5U6A9ys2SfH8Y2vaWNyQrfm8aC8AiBdgX9aOSkGIBIAl6Qq4pcm3L8r6SELfNQmF6E1oI4iDu4CP+w1xuIEtPx6CEC2A61HSvX1lSwPB5UbCgIgQ/d7YDXIFN9Ex/PUyNM7YD1jAEfAALIlqSO6SqsN0igEoAfSsKWS5i3303JzQ6tLoAfRjF3eEm+NqclgovsMn2GNAJwTAPcgOsyjjIIAFq/ngbrJuS3lhpYA0uSVnAecVYU28EZbzm7Kmhl/jeqEl8ATlauweUXtdD1AX0PtCxlWoQGpYysARl11g17Pmu69mCtHtASwA9Tp30P9uMCeLeKBeMuXUPBVqSZbmSvhGwN4w1NDrHoOdFXKM/EhBGBGQbNPMaSDKvXdx0g5oiWAXbKzZ1zTx9CYrPZB5u0HPFb7Tb38kswsmiDZkzbnaZsTZkAmBOApxxDqqshyqmiAjmgBoADyStt8swy56xrG7K0Se7qDsu72a4uAWDRjmzpIilVVTcvvcn70ggA+Smmgx72WCdLRMB2RBfCiQ0EqZR2Xo+m9g+9s13VtGb3U0kiox8THIr6wrSA+TGqq/wabCiH2/g4vp5w7SSC4HfZbKs2z3fooweuh42cwpRjp06KY2jxetgDSNqInMdIDxhsAyMIv8AckgJpyRAEARzng1ezW6KvK0rMUBmnye57+VfDF2vdGALA19q2+6wFfNwJIYmCm2A5myhUtAYx46duQ2Cdfd1DX9o1T3pxi4ZiDu9UBBiAGWg10X3UjgH1kdhNVyaiuyAKYnZRUaPNzj/LgBw4EVdXk5X+eYuQ6gJ0wgIMbAIjfZY309TxxRTYILr5jEMAuqtrwhm7LtCMIAXiwDkBf3PwzAFkHelRDuaI/Akhiqr1V1xAe69lQ/juAv8+APHzKkXXligIA1mNABiPtrZpuv6kOutp1gfxtAWQCZe0fY8Bes8Gop+E7kwRCAFazgCpgkvIm1I5SmHNvdQWA+NTqb1lAXtijHzijMIBCoA44SDWOn8ZPamdpUxRN1wAkAju7v9UBUi8m9SBnFAaQC1aCjOE2u7SJq5iKDWsAssGyTkrFzZWgUq8x7qGqnFEYgN0L2AK+guN4wO1nVHm03w0BEFsvKqt98Gub9wJVDoUDyq7OaAVA30S0Xem+Dw9ldmwbDZnuEgWfl5cAKuaa3CG1YTd42O4GufFLmogzWgGwD3go9f1Y4hbQZbdJcEiV5OAr7U2WAC4Dz6i9job2vKyBZhCAXNOXt0oB+iPdURiAPRFqGkfmgbnxHmoyJfD9o0q0MWwtAGQBvFfqDO8m+r8/EWrJiZCw0YzcURhA6ExQZsKIl7TtKMDogswAVn+5nbQ7gxCAIUSHzerCVLmjMIDQqbAYPjXBcWTznD3hFQCCSXRUHEwatQMAZkJ12DXlgDunIWEAolfBX0tI6RcsAHJi4DvJAqFrvtcWc8SvFwMABnJf4JZ57tBpyBqAtTtDFZOxXi9uZKROaVPLwTQo1+CtfdyhO0MhAKE7Q/spGEZZWXeOxLejvDtH4ttR0qHTkK2ojwcq0urgk4qyEi6dhmxB6Wa0YyAAZ34asRUB8F35ZcBWxDuGKKuIJypWrFixYsX6B/oFRYsi2zOzWJcAAAAASUVORK5CYII=").then((t=>{"done"===this.njt?s.nI(t):this.ZFt.$Ft=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.jzt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then((t=>{"done"===this.njt?s.nI(t):this.ZFt.tjt=t})).catch((t=>console.warn("Failed to load splash image: ",t))))}async Fzt(t){t=new URL(t,this.kc.zzt()).toString();const s=await zw.eo(t),i=await this.kc.Bzt(s,2048,2048);return await this.lb().UL(i,{$x:"high"})}async jzt(t){t=new URL(t,this.kc.zzt()).toString();const s=await zw.eo(t);return await this.lb().UL(s,{$x:"high"})}Uzt(){this.kc.zc("runtime","hide-cordova-splash")}Wzt(){this.YFt=Date.now(),this.kc.yf().addEventListener("loadingprogress",this.qFt),this.VFt=requestAnimationFrame((()=>this.Qzt())),3!==this.kc.Jzt()&&this.Uzt()}async Yzt(){const t=this.lb();this.HFt=1;const s=this.kc.Jzt();4===s&&await this.hjt,this.rjt=null,this.hjt=null,-1!==this.VFt&&(cancelAnimationFrame(this.VFt),this.VFt=-1),this.kc.yf().removeEventListener("loadingprogress",this.qFt),this.qFt=null,this.XFt&&(this.XFt.Jn(),this.XFt=null),this.kc.Vzt(),t.AL(),this.ZFt.KFt&&(t.nI(this.ZFt.KFt),this.ZFt.KFt=null),this.ZFt.$Ft&&(t.nI(this.ZFt.$Ft),this.ZFt.$Ft=null),this.ZFt.tjt&&(t.nI(this.ZFt.tjt),this.ZFt.tjt=null),t.NL(0,0,0,0),t._T(),this.njt="done",this.AFt=t.ET(),3===s&&this.Uzt()}Qzt(){if(-1===this.VFt)return;const t=this.lb();t.AL(),this.VFt=-1;const s=this.kc.ak().EZ(),i=this.kc.Jzt();if(3!==i&&(this.Mzt(t),t.NL(0,0,0,0),t.eL(),t.aS(),t.rL(null)),0===i)this.Hzt(s);else if(1===i)this.qzt(s,120,0);else if(2===i)this.Xzt(s);else if(3===i)zw.mh();else{if(4!==i)throw new Error("invalid loader style");this.Zzt(s)}t._T(),this.VFt=requestAnimationFrame((()=>this.Qzt()))}Xzt(t){t?this.XFt.dE(1,0,0):this.XFt.dE(.6,.6,.6),this.XFt.Bc(Math.round(100*this.HFt)+"%");const s=this.aFt/2,i=this.uFt/2;Yw.Pu(s-150,i-100,s+150,i+100);const e=this.lb();e.rL(this.XFt.lI()),e.$S(Yw,this.XFt.tN())}qzt(t,s,i){const e=this.lb();e.pS(),t?e.sL(1,0,0,1):e.sL(.118,.565,1,1);const n=this.aFt/2,r=this.uFt/2,h=s/2;Vw.Wa(n-h,r-4+i,Math.floor(s*this.HFt),8),e.Rect(Vw),Vw.Wa(n-h,r-4+i,s,8),Vw.offset(-.5,-.5),Vw.lu(.5,.5),e.sL(0,0,0,1),e.nT(Vw),Vw.lu(1,1),e.sL(1,1,1,1),e.nT(Vw)}Hzt(t){const s=this.lb(),i=this.kc.kzt();if(!i)return void this.qzt(t,120,0);const e=i.lI();if(!e)return void this.qzt(t,120,0);const n=e.Bg(),r=e.Zg(),h=this.aFt/2,o=this.uFt/2,a=n/2,u=r/2;Yw.Pu(h-a,o-u,h+a,o+u),s.rL(e),s.Gu(Yw),this.qzt(t,n,u+16)}Zzt(t){const s=this.lb(),i=this.ZFt.KFt,e=this.ZFt.$Ft,n=this.ZFt.tjt,r=Date.now();0===this.sjt&&(this.YFt=r);const h=this.kc.Kzt()||this.kc.$zt()&&!this.kc.tBt(),o=h?0:200,a=h?0:3e3;let u=1;"fade-in"===this.njt?u=Math.min((r-this.YFt)/300,1):"fade-out"===this.njt&&(u=Math.max(1-(r-this.ejt)/300,0)),s.pS(),s.sL(.231*u,.251*u,.271*u,u),Vw.set(0,0,this.aFt,this.uFt),s.Rect(Vw);const l=Math.ceil(this.aFt),c=Math.ceil(this.uFt);let f,d;this.uFt>256?(s.sL(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),Vw.Wa(0,.8*c-d/2,f,d),s.Rect(Vw),t?s.sL(u,0,0,u):s.sL(.161*u,.953*u,.816*u,u),f=l*this.HFt,Vw.Wa(.5*l-f/2,.8*c-d/2,f,d),s.Rect(Vw),s.sL(u,u,u,u),s.aS(),e&&(f=1.5*zw.Xn(.22*c,105,.6*l),d=f/8,Vw.Wa(.5*l-f/2,.2*c-d/2,f,d),s.rL(e),s.Rect(Vw)),i&&(f=Math.min(.395*c,.95*l),d=f,Vw.Wa(.5*l-f/2,.485*c-d/2,f,d),s.rL(i),s.Rect(Vw)),n&&(f=1.5*zw.Xn(.22*c,105,.6*l),d=f/8,Vw.Wa(.5*l-f/2,.868*c-d/2,f,d),s.rL(n),s.Rect(Vw))):(s.sL(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),Vw.Wa(0,.85*c-d/2,f,d),s.Rect(Vw),t?s.sL(u,0,0,u):s.sL(.161*u,.953*u,.816*u,u),f=l*this.HFt,Vw.Wa(.5*l-f/2,.85*c-d/2,f,d),s.Rect(Vw),s.sL(u,u,u,u),s.aS(),i&&(f=.55*c,d=f,Vw.Wa(.5*l-f/2,.45*c-d/2,f,d),s.rL(i),s.Rect(Vw))),this.sjt++,"fade-in"===this.njt&&r-this.YFt>=300&&this.sjt>=2&&(this.njt="wait",this.ijt=r),"wait"===this.njt&&r-this.ijt>=a&&this.HFt>=1&&(this.njt="fade-out",this.ejt=r),("fade-out"===this.njt&&r-this.ejt>=300+o||h&&this.HFt>=1&&r-this.YFt<500)&&this.rjt()}}}{const Hw=self.Cs,qw=self.MQ,Xw=(self.assert,self.QH),Zw={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let Kw=!0;Hw.sBt=class extends Hw.Un{constructor(t){t=Object.assign({},Zw,t),super(),this.iBt=t.messagePort,this.eBt=t.runtimeBaseUrl,this.nBt=t.previewUrl,this.rBt=!!t.headless,this.hBt=!!t.hasDom,this.oBt=!!t.isInWorker,Kw=t.ife,this.aBt=!!t.useAudio,this.uBt=t.exportType,this.lBt=t.isNWjs,this.LX=!!t.isiOSCordova,this.cBt=!!t.isiOSWebView,this.fBt=!!t.isWindowsWebView2,this.dBt=!!t.isAnyWebView2Wrapper,this.pBt=!!t.isFBInstantAvailable,this.mBt=!("preview"!==this.uBt||!t.isDebug),this.gBt=this.mBt,this.yBt=this.mBt,this.MBt=0,this.wBt=[],this.SBt=[],this.TBt=!1,this.bBt="",this.xBt="",this.vBt="",this.IBt="",this.CBt=0,this.GBt=0,this._Bt=0,this.bR=self.devicePixelRatio,this.DBt=0,this.EBt=0,this.NBt=0,this.ABt=0,this.LBt=0,this.OBt=!1,this.gM=!0,this.RBt=!1,this.PBt=!1,this.kBt=!1,this.FBt=null,this.VZ=Hw.Qn(Hw.DX,this,t),this.h3=Hw.Qn(Hw._5,this),this.Adt=Hw.Qn(Hw.Dpt,this),this.jBt=Hw.Qn(Hw.Bz,this,t.wrapperComponentIds),this.zBt=Hw.Qn(Hw.zPt,this),this.n9=Hw.Qn(Hw.B5,this),this.BBt=Hw.Qn(Hw.Zut,this),this.UBt=Hw.Qn(Hw.$ut,this),this.plt=Hw.Qn(Hw.olt,this),this.cM=Hw.Qn(Hw.$y,{iM:t=>this.WBt(t),nM:t=>this.QBt(t)}),this.JBt=new Map,this.YBt=[],this.VBt=new Map,this.HBt=new Map,this.qBt=0,this.XBt=[],this.ZBt=new Set,this.KBt=[],this.$Bt=[],this.tUt=new Map,this.sUt=!1,this.iUt=!1,this.eUt=0,this.nUt=0,this.rUt=new Map,this.hUt=new Set,this.oUt=new Set,this.aUt=[],this.uUt=[],this.lUt=null,this.cUt=!1,this.fUt="vsync",this.av="trilinear",this.dUt=!1,this.pUt=!0,this.mUt=!1,this.gUt=!1,this.yUt=null,this.MUt={wUt:t=>{this.VFt=-1,this.SUt=-1,this.f8(t)},TUt:t=>{this.SUt=-1,this.f8(t,!1,"skip-render")},bUt:()=>{this.VFt=-1,this.JR()}},this.VFt=-1,this.SUt=-1,this.xUt=0,this.vUt=0,this.IUt=!1,this.CUt=!1,this.GUt=!1,this._Ut=!0,this.DUt=!0,this.EUt=!1,this.NUt=0,this.AUt=new Hw.Wd(1),this.LUt=()=>Math.random(),this.OUt=0,this.RUt=0,this.PUt=0,this.kUt=0,this.FUt=0,this.xAt=1,this.jUt=1/30,this.zUt=0,this.BUt=Hw.Qn(Hw.Kf),this.UUt=Hw.Qn(Hw.Kf),this.WUt=Hw.Qn(Hw.Kf),this.QUt=new Map,this.JUt=-1,this.YUt=0,this.VUt=0,this.HUt=-1,this.qUt=0,this.XUt=0,this.ZUt=0,this.KUt=!1,this.$Ut="",this.tWt=!1,this.sWt="",this.CQ=null,this.iWt="",this.eWt=null,this.nWt=null,this.IEt=Hw.Qn(Hw.Event.yf),this.rWt=new Map,this.hWt=new Map,this.oWt=0,this.aWt=!1,this.uWt=!1,this.lWt=!1,this.cWt=[],this.fWt={pretick:Hw.Qn(Hw.Event,"pretick",!1),tick:Hw.Qn(Hw.Event,"tick",!1),tick2:Hw.Qn(Hw.Event,"tick2",!1),instancecreate:Hw.Qn(Hw.Event,"instancecreate",!1),instancedestroy:Hw.Qn(Hw.Event,"instancedestroy",!1),beforelayoutchange:Hw.Qn(Hw.Event,"beforelayoutchange",!1),layoutchange:Hw.Qn(Hw.Event,"layoutchange",!1)},this.fWt.instancecreate.GY=null,this.fWt.instancedestroy.GY=null,this.j3=Hw.Qn(Hw.Event.yf),this.dWt=null;const s=(t,s)=>Hw.TAt.oPt(this,t,s);this.pWt=Hw.Qn(Hw.ad,s),this.mWt=Hw.Qn(Hw.ad,s),this.gWt=Hw.Qn(Hw.ad,s),this.yWt=Hw.Qn(Hw.MWt,this,t.jobScheduler),t.canvas&&(this.lUt=Hw.Qn(Hw.Xkt,this)),this.iBt.onmessage=t=>this._OnMessageFromDOM(t.data),this.fQ("runtime","visibilitychange",(t=>this.wWt(t))),this.fQ("runtime","wrapper-extension-message",(t=>this.SWt(t))),this.fQ("runtime","get-remote-preview-status-info",(()=>this.TWt())),this.fQ("runtime","js-invoke-function",(t=>this.emt(t))),this.fQ("runtime","go-to-last-error-script",self.goToLastErrorScript),this.fQ("runtime","offline-audio-render-completed",(t=>this.bWt(t))),this.IEt.addEventListener("window-blur",(t=>this.xWt(t))),this.IEt.addEventListener("window-focus",(()=>this.vWt())),this.n9.T6(),this.UBt.T6(),this.IWt=null,this.CWt=new WeakMap,this.GWt={keyboard:null,XF:null,ZF:null,KF:null},this._Wt=new WeakMap,this.DWt=[]}static EI(t){return Hw.Qn(Hw.sBt,t)}Jn(){Hw.wh(this.YBt),this.VBt.clear(),this.HBt.clear(),this.h3.Jn(),this.h3=null,this.Adt.Jn(),this.Adt=null,this.jBt.Jn(),this.jBt=null,this.VZ.Jn(),this.VZ=null,this.zBt.Jn(),this.zBt=null,this.n9.Jn(),this.n9=null,this.BBt.Jn(),this.BBt=null,this.UBt.Jn(),this.UBt=null,this.plt.Jn(),this.plt=null,this.cM.Jn(),this.cM=null,this.lUt&&(this.lUt.Jn(),this.lUt=null),this.IEt.Jn(),this.IEt=null,this.EWt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.NWt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.AWt(t)}}NWt(t){if(!this.lWt)return void this.cWt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new Hw.Event(i);t.data=e,this.IEt.Gf(t)}if(h){const t=new Hw.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.x5(t)}}const a=this.rWt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const u=a.get(i);if(!u)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let l=null;try{l=u(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.LWt(o,!1,""+t))}null!==o&&(l&&l.then?l.then((t=>this.LWt(o,!0,t))).catch((t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.LWt(o,!1,""+t)})):this.LWt(o,!0,l))}LWt(t,s,i){this.iBt.postMessage({type:"result",responseId:t,isOk:s,result:i})}AWt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.hWt.get(s);i?n.resolve(e):n.reject(e),this.hWt.delete(s)}fQ(t,s,i){let e=this.rWt.get(t);if(e||(e=new Map,this.rWt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}zc(t,s,i,e){this.iBt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}gj(t,s,i,e){const n=this.oWt++,r=new Promise(((t,s)=>{this.hWt.set(n,{resolve:t,reject:s})}));return this.iBt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}sq(t,s,i,e=-1){this.zc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}iq(t,s,i){const e=this.oWt++,n=new Promise(((t,s)=>{this.hWt.set(e,{resolve:t,reject:s})}));return this.sq(t,s,i,e),n}SWt(t){if(-1!==t.asyncId){const s=t.asyncId;this.hWt.get(s).resolve(t.params),this.hWt.delete(s)}else this.NWt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}EQ(t,s,i){this.fQ("wrapper-extension:"+t,s,i)}_Q(t){return this.jBt._Q(t)}OWt(t){if(!this.yQ())throw new Error("not in debug mode");this.zc("runtime","post-to-debugger",t)}async CAt(t){Hw.Hxt(this),this.yQ()?await qw.CAt(this):self.MQ&&self.MQ.RWt(this);const s=await this.VZ.io("data.json");if(await this.PWt(s),await this.kWt(t),this.Kzt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.pzt()){const t=this.pzt();console.info(`[C3 runtime] Hosted in ${this.bk()?"worker":"DOM"}, rendering with WebGL ${t.gv()} [${t.uO()}]`)}else this.mzt()&&console.info(`[C3 runtime] Hosted in ${this.bk()?"worker":"DOM"}, rendering with WebGPU [${this.mzt().gzt()}]`);this.lb().RT()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.lWt=!0;for(const t of this.cWt)this.NWt(t);Hw.wh(this.cWt),this.lUt&&this.lUt.Wzt();for(const s of t.runOnStartupFunctions)this.wBt.push(this.FWt(s));if(await Promise.all([this.VZ._Z(),...this.wBt]),Hw.wh(this.wBt),!this.VZ.EZ())return this.lUt&&await this.lUt.Yzt(),await this.IEt.If(new Hw.Event("beforeruntimestart")),await this.AL(),this.iBt.postMessage({type:"runtime-ready"}),this;this.lUt&&this.lUt.Uzt()}async FWt(t){try{await t(this.IWt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async PWt(t){const s=t.project;this.bBt=s[0],this.xBt=s[16],this.vBt=s[31],this.IBt=s[38],this.CBt=s[36];const i=s[39]||"loading-logo.png";this.dUt=!!s[9],this.GBt=this.NBt=s[10],this._Bt=this.ABt=s[11],this.zBt.Ekt(this.GBt,this._Bt),this.DBt=this.GBt/2,this.EBt=this._Bt/2,this.fUt=s[37],this.cUt=!!s[40],this.av=s[14],this.RBt=s[15],this.PBt=s[42],this.kBt=s[17],this.OBt=!!s[18],this.LBt=s[19],this.nUt=s[21],this.mUt=s[22];const e=this.VZ;if(e.rZ(s[45]),e.kZ(s[7],s[25]),e.oZ(s[8]),e.aZ(s[32]),e.lZ(s[28]),e.LZ(s[29]),0===this.LBt){let t="";t="flat"===e.Wj()?e.cZ()+i:i,t&&(this.FBt=e.TZ({url:t}))}this.lUt&&(this.lUt.rzt(Hw.Xkt.lzt(s[12])),this.lUt.azt(s[23]?"high":"low"),this.lUt.AT(0!==s[24]),this.lUt.ojt(s[34]),this.lUt.czt(s[41]),this.lUt.ajt(s[13]),this.lUt.ujt(s[30]),this.lUt.fjt(s[46],s[47]),this.lUt.cjt(s[26]),this.lUt.djt(s[48]),this.lUt.pjt(s[50]));const n=s[43];n&&await this.jWt(n),this.zWt(),this.jBt.lDt(),this.aUt=self.BWt();const r=s[2];for(const t of r[1])this.jBt.cDt(t);for(const t of r[0])this.jBt.uDt(t);this.aUt=self.BWt(),this.UWt(),this.jBt.yDt();for(const t of s[3]){const s=Hw.nlt.EI(this,this.YBt.length,t);this.YBt.push(s),this.VBt.set(s._c().toLowerCase(),s),this.HBt.set(s.I0(),s)}for(const t of s[4])this.YBt[t[0]].uNt(t);for(const t of s[27]){const s=t.map((t=>this.YBt[t]));this.XBt.push(Hw.Qn(Hw.lAt,this,s))}this.WWt();for(const t of this.YBt)t.cNt();for(const t of s[5])this.h3.EI(t);const h=s[1];if(h){const t=this.h3.N5(h);t&&this.h3.D5(t)}for(const t of s[35])this.BBt.EI(t);for(const t of s[33])this.n9.EI(t);for(const t of s[44])this.UBt.EI(t);this.UBt.ilt()||(this.UBt.Jn(),this.UBt=null);for(const t of s[49])this.plt.EI(t);this.plt.flt()||(this.plt.Jn(),this.plt=null);for(const t of s[6])this.Adt.EI(t);this.Adt.hmt(),this.QWt(),Hw.wh(this.aUt),this.BB();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.zc("runtime","set-target-orientation",{targetOrientation:o})}async jWt(t){const s=t.format;"image-sequence"===s?this.yUt=new self.JWt(this,t):"image-sequence-gif"===s?this.yUt=new self.YWt(this,t):"webm"===s?this.yUt=new self.VWt(this,t):"mp4"===s&&(this.yUt=new self.HWt(this,t)),this.fUt="unlimited-frame",this.lUt.rzt("off"),this.bR=1,self.devicePixelRatio=1,await this.gj("runtime","set-exporting-to-video",{message:this.yUt.qWt(0),duration:this.yUt.iV()})}Jzt(){return this.LBt}Bjt(){return null!==this.yUt}XWt(){return this.yUt.iV()}ZWt(){return this.yUt.KWt()}$Wt(){return this.yUt.CAt({width:this.lUt.Lz(),height:this.lUt.Rz()})}tQt(){const t=this.xUt/this.ZWt();return this.yUt.sQt(this.lUt.ezt(),t)}iQt(){this.yUt&&this.yUt.jit()}bWt(t){this.yUt.eQt(t)}nQt(){return this.yUt._T()}$zt(){return this.pBt}TM(){return this.gM}Sj(t){this.wBt.push(t)}E4(t){this.TBt=!!t}rQt(t){this.TBt&&this.SBt.push(t)}P4(){return this.SBt}iNt(){return this.qBt++}dNt(){return this.qBt}gPt(t){this.ZBt.add(t)}yPt(t){this.ZBt.delete(t)}zjt(){return this.ZBt}async kWt(t){this.lUt&&(await this.lUt.lo(t),this.lUt.Pzt(this.LBt))}async AL(){this.IUt=!0,this.OUt=Date.now();let t=null;const s=new Promise((s=>t=s));if(this.OBt){for(const t of this.YBt)t.y0()||t.bNt()||!t.Vz()||t.uGt();(async()=>{await this.VZ._Z(),await s,this.gM=!1,this.hQt()})()}else this.gM=!1;this.VZ.DZ(),this.yQ()&&qw.oQt(Kw);for(const t of this.h3.JF())t.K4();this.Bjt()&&await this.$Wt();const i=this.h3.E5();await i.d4(null,this.lb()),await i.v4(!0),this.YUt=performance.now(),t(),this.OBt||this.hQt(),(await this.gj("runtime","before-start-ticking")).isSuspended&&!this.Bjt()?(this.NUt++,this.EUt=!0):this.f8()}hQt(){this.uQ(Hw._j.Gj.Cj.aQt,null,null),this.zc("runtime","register-sw")}fSt(t){t=Math.floor(t);const s=this.aUt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}UWt(){for(const t of self.uQt){const s=Hw.jh(Object.keys(t));this.uUt.push(s)}}Emt(t){t=Math.floor(t);const s=this.uUt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}lQt(){return this.hBt}cQt(){return this.rBt}bk(){return this.oBt}zzt(){return this.eBt}fQt(){return this.nBt}Fk(){return this.Adt}Zk(){return this.Adt.Zk()}Smt(){return this.Adt.Smt()}Qk(){return this.Adt.Qk()}Tmt(){return this.Adt.Tmt()}Yxt(){return 0===this.Smt().Zdt()}xmt(){return this.Adt.xmt()}rPt(){return this.jBt}AZ(){return this.jBt.AZ()}V$(t){if((t=Math.floor(t))<0||t>=this.YBt.length)throw new RangeError("invalid index");return this.YBt[t]}dQt(t){return this.VBt.get(t.toLowerCase())||null}cq(t){return this.HBt.get(t)||null}nrt(t){const s=Hw.Bz.uB(t);return s?s.dB():null}g0(){return this.YBt}*pQt(){for(const t of this.YBt)t.y0()||(yield*t.SB())}yf(){return this.IEt}Ok(){return this.j3}x5(t){t.runtime=this.Uz();const s=this.yQ()&&!this.Adt.jB();s&&qw.v5(),this.j3.dispatchEvent(t),s&&qw.I5()}Q4(t){return t.runtime=this.Uz(),this.j3.If(t)}vk(){return this.GBt}Ck(){return this._Bt}mQt(t,s){if(this.GBt===t&&this._Bt===s)return;this.GBt=t,this._Bt=s;const i=this.UF();i.j5(),i.z5()}H0(){return this.NBt}q0(){return this.ABt}szt(t,s){if(this.NBt===t&&this.ABt===s)return;this.NBt=t,this.ABt=s;const i=this.UF();i.j5(),i.z5()}Ujt(t){this.Bjt()||(this.bR=t)}Pz(){return this.bR}q1(){return this.DBt}X1(){return this.EBt}bj(){return this.lUt}e2(){return this.lUt?this.lUt.e2():this.NBt}n2(){return this.lUt?this.lUt.n2():this.ABt}vW(){return this.lUt?this.lUt.vW():1}AH(){return this.lUt?this.lUt.AH():1}W2(){return this.lUt?this.lUt.W2():1}B2(){return this.lUt?this.lUt.B2():1}Iz(){return this.lUt?this.lUt.Iz():0}Gz(){return this.lUt?this.lUt.Gz():0}gQt(){return this.lUt?this.lUt.Dz():0}yQt(){return this.lUt?this.lUt.Nz():0}EH(){return this.lUt?this.lUt.EH():"off"}M2(t){return this.lUt?this.lUt.M2(t):null}A$(t){this.lUt&&this.lUt.A$(t)}m2(){return this.RBt}Ejt(){return this.PBt}Njt(){return this.kBt}vF(){return this.lUt?this.lUt.vF():NaN}fI(){return"nearest"!==this.Gk()}CF(){return this.fUt}GF(t){this.fUt!==t&&(this.fUt=t,-1===this.VFt&&-1===this.SUt||(this.MQt(),this.wQt()))}Gk(){return this.av}hNt(){return this.OBt}kzt(){return this.FBt}Vzt(){this.FBt&&(this.FBt.JD(),this.FBt.Jn(),this.FBt=null)}UF(){return this.h3}jF(){return this.h3.jF()}Q9(){return this.n9}SQt(){return this.BBt}iLt(){return this.UBt}Rlt(){return this.plt}ak(){return this.VZ}TZ(t){return this.VZ.TZ(t)}OB(t,s,i,e,n,r){if(r&&this.UBt){if(t instanceof Hw.nlt&&t.y0()){const h=t.qMt(),o=Math.floor(this.FF()*h.length);return this.OB(h[o],s,i,e,n,r)}const h=this.UBt.elt(t,r);if(h){const t=this.i0(h,s,!1,i,e,!1,n,void 0,n);return this.UBt.rlt(t,r),t}}return this.i0(t,s,!1,i,e,!1,n,void 0,n)}i0(t,s,i,e,n,r,h,o,a){let u=null,l=null;if(t instanceof Hw.nlt){if(l=t,l.y0()){const t=l.qMt();l=t[Math.floor(this.FF()*t.length)]}u=l.q$()}else u=t,l=this.V$(u[1]);const c=l.MB().Vz();if(this.gM&&c&&!l.bNt())return null;const f=s;let d;c||(s=null),d=i&&!r&&u&&!this.rUt.has(u[2])?u[2]:this.nUt++;const p=u?u[0]:null,m=Hw.Qn(Hw.Instance,{runtime:this,objectType:l,kQ:s,IAt:p,DAt:u?u[3]:null,uid:d,tags:u?u[6]:null});this.rUt.set(d,m);let g=null;if(c&&(g=m.oj(),void 0!==e&&void 0!==n&&(g.Qb(e),g.Vb(n)),l.XNt(!0)),s&&(a||s.n0(m,!0),s.WF().g4(l)),this.eUt++,l.FW()&&!i&&!r){const t=new Set;for(const s of l.c4().q4()){if(s===l)continue;const i=this.TQt(s,g,t);if(i){const t=this.i0(i,f,!1,g?g.Wb():e,g?g.Yb():n,!0,!1,void 0,a);m.X4(t)}else{const t=this.i0(s,f,!1,g?g.Wb():e,g?g.Yb():n,!0,!1,void 0,a);m.X4(t)}}for(const t of m.jW()){t.X4(m);for(const s of m.jW())t!==s&&t.X4(s)}}if(c&&!i&&h&&this.bQt(m,p,g,s,e,n,a),l.FW()&&!i&&!r&&h)for(const t of m.jW()){const i=t.oj();if(!i)continue;const e=t.MB(),n=t.GW().q$()[0];e.Vz()?this.bQt(t,n,i,s,i.Wb(),i.Yb(),a):this.bQt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.bJ(),s=e-g.Wb()+t.Wb(),i=n-g.Yb()+t.Yb();t.jQ(s,i)}l.JNt();const y=u?Hw.Ah(u[5]):null,M=u?u[4].map((t=>Hw.Ah(t))):null,w=c&&p&&p[13];if(w&&m.RAt(),m.SNt(y,M),w){const t=p[13];m.gY().CGt(t[2],t[0],t[1])}this.$Bt.push(m),this.sUt=!0,this.yQ()&&qw.xQt(m);const S=this.fWt.instancecreate;return S.GY=m,this.IEt.dispatchEvent(S),m}iOt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.h3.A5(s).aj(i).K$(e)}TQt(t,s,i){const e=s?.sLt()??[];for(const s of e){const e=this.iOt(s),n=!!s[4],r=this.V$(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}bQt(t,s,i,e,n,r,h){const o=i.vRt(),a=i.sLt();if(t.oj().IRt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const u=new Set,l=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.h3.A5(i).aj(o).K$(a);const y=this.V$(g[1]),M=t.nLt(y),w=u.has(y);if(M&&!w&&d){const s=t.rLt(y);s.oj().CAt(g[0]);const i=n+g[0][0]-l,e=r+g[0][1]-c;s.oj().jQ(i,e),s.oj().IRt(p),t.EJ(s,{RJ:!!(1&f),kJ:!!(f>>1&1),jJ:!!(f>>2&1),BJ:!!(f>>3&1),WJ:!!(f>>4&1),ZJ:!!(f>>5&1),JJ:!!(f>>6&1),VJ:!!(f>>7&1),qJ:!!(f>>8&1)}),u.add(y)}else{const s=n+g[0][0]-l,i=r+g[0][1]-c,o=this.i0(g,e,!1,s,i,!1,!0,t,h);o.oj().IRt(p),t.EJ(o,{RJ:!!(1&f),kJ:!!(f>>1&1),jJ:!!(f>>2&1),BJ:!!(f>>3&1),WJ:!!(f>>4&1),ZJ:!!(f>>5&1),JJ:!!(f>>6&1),VJ:!!(f>>7&1),qJ:!!(f>>8&1)})}}}LW(t){if(this.hUt.has(t))return;const s=t.GW();let i=this.tUt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.tUt.set(s,i);if(this.yQ()&&qw.vQt(t),t.kAt(),this.sUt=!0,t.FW())for(const s of t.jW())this.LW(s);for(const s of t.children())s.KJ()&&this.LW(s);if(!this.h3.zB()&&!this.KUt){const s=this.Fk();s.PB(!0),t.mLt(),s.PB(!1)}t.gLt(this.h3.zB())}BB(){this.sUt&&(this.iUt=!0,this.IQt(),this.CQt(),this.iUt=!1,this.sUt=!1,this.pj())}IQt(){for(const t of this.$Bt){const s=t.GW();s.n0(t);for(const i of s.kmt())i.n0(t),i.JNt()}Hw.wh(this.$Bt)}CQt(){this.IEt.lf(!0);for(const[t,s]of this.tUt.entries())this.GQt(t,s),s.clear();this.tUt.clear(),this.IEt.lf(!1)}GQt(t,s){for(const t of s){const s=this.fWt.instancedestroy;s.GY=t,this.IEt.dispatchEvent(s),this.rUt.delete(t.zW()),this.QUt.delete(t);const i=t.oj();i&&(i._Rt(),i.a0(),i.kAt()),this.hUt.add(t),this.eUt--}Hw.Dh(t.DB(),s),t.JNt(),this.oUt.add(t);for(const i of t.kmt())Hw.Dh(i.DB(),s),i.JNt(),this.oUt.add(i);if(t.MB().Vz()){const t=new Set([...s].map((t=>t.oj().aj())));for(const i of t)i.v1(s)}}VNt(){return this.$Bt}*Zvt(t){for(const s of this.VNt())t.y0()?s.GW().Vxt(t)&&(yield s):s.GW()===t&&(yield s)}wNt(){return this.nUt++}TNt(t,s){this.rUt.set(t,s)}hq(t){t=!!t,this.DUt!==t&&(this.DUt=!!t,this.DUt&&this.EUt&&(this.uq(!1),this.EUt=!1))}oq(){return this.DUt}x4(){this.IEt.dispatchEvent(Hw.Qn(Hw.Event,"renderercontextlost")),this.uq(!0);for(const t of this.YBt)!t.y0()&&t.xNt()&&t.T4();const t=this.jF();t&&t.x4(),Hw.SDt.rK(),Hw.xZ.rK()}async dzt(){await this.jF().d4(null,this.lb()),this.IEt.dispatchEvent(Hw.Qn(Hw.Event,"renderercontextrestored")),this.uq(!1),this.pj()}wWt(t){if(!this.DUt)return;const s=t.hidden;this.uq(s),this.EUt=s,s||this.pj()}xWt(t){this.Kzt()&&this.mUt&&!Hw.Zs.hi&&(t.data.parentHasFocus||(this.uq(!0),this.gUt=!0))}vWt(){this.gUt&&(this.uq(!1),this.gUt=!1)}wQt(){const t=this.MUt;"vsync"===this.fUt?-1===this.VFt&&(this.VFt=self.requestAnimationFrame(t.wUt)):"unlimited-tick"===this.fUt?(-1===this.SUt&&(this.SUt=Hw.Qh(t.TUt)),-1===this.VFt&&(this.VFt=self.requestAnimationFrame(t.bUt))):-1===this.SUt&&(this.SUt=Hw.Qh(t.wUt))}MQt(){-1!==this.VFt&&(self.cancelAnimationFrame(this.VFt),this.VFt=-1),-1!==this.SUt&&(Hw.Jh(this.SUt),this.SUt=-1)}rF(){return this.NUt>0}uq(t){if(this.Bjt())return;const s=this.rF();this.NUt+=t?1:-1,this.NUt<0&&(this.NUt=0);const i=this.rF();if(!s&&i)console.log("[Construct] Suspending"),this.MQt(),this.IEt.dispatchEvent(Hw.Qn(Hw.Event,"suspend")),this.x5(Hw.Qn(Hw.Event,"suspend")),this.uQ(Hw._j.Gj.Cj._Qt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.RUt=t,this.YUt=t,this.JUt=0,this.VUt=0,this.HUt=0,this.qUt=0,this.ZUt=0,this.XUt=0,this.IEt.dispatchEvent(Hw.Qn(Hw.Event,"resume")),this.x5(Hw.Qn(Hw.Event,"resume")),this.uQ(Hw._j.Gj.Cj.DQt,null,null),this.ugt()||this.f8(t)}}VH(t){this.pWt.Fl(t)}ZH(t){this.mWt.Fl(t)}qH(t){this.gWt.Fl(t)}HH(t){this.pWt.Xf(t)}KH(t){this.mWt.Xf(t)}XH(t){this.gWt.Xf(t)}EQt(t,s){const i=s?performance.now():0;let e;return t instanceof Xw?(e=t.wQ(),s&&qw.NQt(t.behavior,performance.now()-i)):(e=t.f8(),s&&qw.NQt(t.xY(),performance.now()-i)),e}AQt(){const t=this.yQ();this.pWt.Bd(!0);for(const s of this.pWt)this.EQt(s,t);this.pWt.Bd(!1)}LQt(t,s){const i=s?performance.now():0;let e;return t instanceof Xw?(e=t.tq(),s&&qw.NQt(t.behavior,performance.now()-i)):(e=t.K_t(),s&&qw.NQt(t.xY(),performance.now()-i)),e}OQt(){const t=this.yQ();this.mWt.Bd(!0);for(const s of this.mWt)this.LQt(s,t);this.mWt.Bd(!1)}RQt(t,s){const i=s?performance.now():0;let e;return t instanceof Xw?(e=t.bQ(),s&&qw.NQt(t.behavior,performance.now()-i)):(e=t.VGt(),s&&qw.NQt(t.xY(),performance.now()-i)),e}PQt(){const t=this.yQ();this.gWt.Bd(!0);for(const s of this.gWt)this.RQt(s,t);this.gWt.Bd(!1)}*kQt(){const t=this.yQ();this.pWt.Bd(!0);for(const s of this.pWt){const i=this.EQt(s,t);Hw.To(i)&&(yield*i)}this.pWt.Bd(!1)}*FQt(){const t=this.yQ();this.mWt.Bd(!0);for(const s of this.mWt){const i=this.LQt(s,t);Hw.To(i)&&(yield*i)}this.mWt.Bd(!1)}*jQt(){const t=this.yQ();this.gWt.Bd(!0);for(const s of this.gWt){const i=this.RQt(s,t);Hw.To(i)&&(yield*i)}this.gWt.Bd(!1)}async f8(t,s,i){this.GUt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.UF(),h=this.bj();if(!this.IUt||this.rF()&&!s&&!e)return;const o=performance.now();this.CUt=!0,this.zQt(t||0),this.HUt++,this.BQt();const a=this.UQt();this.Yvt()&&await a;const u=this.IEt.Cf(this.fWt.pretick);u instanceof Promise&&await u,this.x5(this.dWt.pretick);const l=this.WQt();this.Yvt()&&await l,this.QQt()&&await this.JQt(),r.VF()&&await this.YQt();const c=this.VQt();this.Yvt()&&await c;const f=r.jF(),d=f.h4();let p=!1;if(-1!==d&&(f.o4(),h.r4()!==d)){const t=this.bj()._4(d);this.bk()&&(p=!0,await t)}this.zc("canvas","update-html-layer-dom-state",{layersDomState:f.v0().filter((t=>t.jU())).map((t=>t.N1()))}),n&&this.JR(),p&&this.zc("canvas","cleanup-html-layers"),this.Bjt()&&(await this.tQt(),this.cF()>=this.XWt())?this.nQt():(this.rF()||e||this.wQt(),this.xUt++,this.vUt++,this.CUt=!1,this.XUt+=performance.now()-o)}async UQt(){const t=this.Adt,s=this.yQ();this.BB(),t.PB(!0),this.Zmt(this.jF()),s&&qw.HQt(),this.Yvt()?await t.Egt():t.Igt(),s&&qw.qQt(),this.Kmt(),t.PB(!1),this.BB(),t.PB(!0)}async WQt(){const t=this.Adt,s=this.yQ(),i=this.Yvt(),e=this.IEt,n=this.fWt,r=this.dWt;s&&qw.HQt(),i?await this.XQt(this.kQt()):this.AQt(),i?await this.XQt(this.FQt()):this.OQt(),s&&qw.ZQt(),s&&qw.HQt(),i?await this.KQt(n.tick):e.dispatchEvent(n.tick),s&&qw.$Qt(),t.PB(!1),this.x5(r.tick)}async VQt(){const t=this.Adt,s=this.IEt,i=this.fWt,e=this.dWt,n=this.yQ(),r=this.Yvt();n&&qw.HQt(),r?await t.$mt(this.h3):t.Xmt(this.h3),n&&qw.qQt(),this.zBt.$Pt(),this.BQt(),this._Ut=!1,t.PB(!0),n&&qw.HQt(),r?await this.XQt(this.jQt()):this.PQt(),n&&qw.ZQt(),n&&qw.HQt(),r?await this.KQt(i.tick2):s.dispatchEvent(i.tick2),n&&qw.$Qt(),t.PB(!1),this.x5(e.tick2),r&&await t.lgt(),this.BB(),this.BQt()}BQt(){if(0===this.hUt.size)return;const t=this.IEt;t.lf(!0);for(const t of this.oUt)t.wgt().adt(this.hUt);this.oUt.clear(),this.Adt.Agt(this.hUt);for(const t of this.hUt)t.Jn();this.hUt.clear(),t.lf(!1)}async YQt(){const t=this.UF();let s=0;for(;t.VF()&&s++<10;)await this.tJt(t.F5())}zQt(t){let s=0;this.Bjt()?(s=1/this.ZWt(),this.PUt=s,this.kUt=s):0!==this.RUt&&(s=Math.max(t-this.RUt,0)/1e3,s>.5&&(s=0),this.PUt=s,this.kUt=Hw.Xn(s,this.zUt,this.jUt)),this.RUt=t,this.FUt=this.kUt*this.xAt,this.BUt.Fl(this.FUt),this.UUt.Fl(s*this.xAt),this.WUt.Fl(this.kUt);for(const[t,s]of this.QUt)s.Fl(this.kUt*t.mF());this.lUt&&this.lUt.Czt(),t-this.YUt>=1e3&&(this.YUt+=1e3,t-this.YUt>=1e3&&(this.YUt=t),this.VUt=this.JUt,this.JUt=0,this.qUt=this.HUt,this.HUt=0,this.ZUt=Math.min(this.XUt/1e3,1),this.XUt=0,this.lUt&&this.lUt.Izt(),this.zBt.qPt(),this.yQ()&&qw.sJt())}LAt(t,s){if(s){if(!this.QUt.has(t)){const s=Hw.Qn(Hw.Kf);s.nd(this.BUt),this.QUt.set(t,s)}}else this.QUt.delete(t)}OAt(t){const s=this.QUt.get(t);return s?s.Js():this.cF()}async tJt(t){const s=this.IEt,i=this.UF().jF();await i.s5(),i.b4(t,this.lb()),i===t&&this.Adt.n5(),this.zBt.$Pt(),this.BQt(),s.dispatchEvent(this.fWt.beforelayoutchange),Hw.ff.Df(!0),await t.d4(i,this.lb()),Hw.ff.Df(!1),await t.v4(!1),s.dispatchEvent(this.fWt.layoutchange),this.pj(),this._Ut=!0,this.BB(),this.iQt()}pj(){this.pUt=!0}pzt(){return this.lUt?this.lUt.pzt():null}mzt(){return this.lUt?this.lUt.mzt():null}lb(){return this.lUt?this.lUt.lb():null}JR(){const t=this.lUt;if(!t||t.fzt())return;const s=this.lb(),i=s.tO(),e=i&&s.PT(),n=i&&s.tS();if(e&&s.zL(),!this.pUt&&!this.Bjt())return void s.NT();const r=this.h3.jF();this.JUt++,s.AL();const h=this.yQ();h&&qw.HQt(),this.pUt=!1;let o=null;e&&(o=t.Ezt().CN(),s.$L(o));let a=null;n&&(a=s.iJt(2*(1+r.K3())),s.f2(0,1)),this.n1()&&"low"===t.g2()?s.JA(t.e2(),t.n2()):s.YA(),this.eJt(this.lb(),r),o&&s.sO(o),n&&(s.nJt(),this.lUt.Nzt(a)),s._T(),h&&(qw.rJt(),qw.hJt()),t&&t.Azt()}p5(t){return"low"===this.bj().g2()||t.PT()&&(this.m2()||this.n1())}eJt(t,s){t.aS(),t.uL(),t.sL(1,1,1,1),t.QL(null),t.rL(null),t.OL(this.n1()),this.p5(t)&&s.f5(t);const i=s.r4();for(let e=1;e<i;++e)s.M5(t,e),t.tS()&&t.oJt();this.p5(t)||s.f5(t),s.y5(t)}uQ(t,s,i){if(!this.IUt)return!1;const e=!this.CUt&&!this.Adt.pgt();let n=0;e&&(n=performance.now());const r=this.yQ();r&&this.Mq(!1);const h=this.Adt.egt(this.h3,t,s,i);if(e){const t=performance.now()-n;this.XUt+=t,r&&qw.aJt(t)}return r&&this.Mq(!0),h}RGt(t,s,i){if(!this.Yvt())return this.uQ(t,s,i);if(this.ugt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.CUt&&!this.Adt.pgt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Adt.hgt(this.h3,t,s,i)}async vj(t,s,i){if(!this.Yvt())return this.uQ(t,s,i);if(!this.IUt)return!1;if(this.ugt())return this.Adt.ogt(t,s,i);if(!this.jF())return this.Adt.ngt(t,s,i);const e=performance.now(),n=this.Adt.hgt(this.h3,t,s,i);let r=n.next();for(;!r.done;)await this.sgt(r.value),r=n.next();return this.rF()||this.Adt.pgt()||(await this.Adt.lgt(),this.GUt&&!this.CUt&&this.wQt()),this.XUt+=performance.now()-e,r.value}PGt(t,s,i){const e=this.yQ();e&&this.Mq(!1);const n=this.Adt.cgt(this.h3,t,s,i);return e&&this.Mq(!0),n}kGt(t,s,i){return this.Adt.fgt(this.h3,t,s,i)}FGt(t){return this.AUt.Fl(t)}Zmt(t){this.KBt.push(t)}Kmt(){if(!this.KBt.length)throw new Error("layout stack empty");this.KBt.pop()}rj(){return this.KBt.length?this.KBt.at(-1):this.jF()}oF(t){return t&&-1!==t.mF()?this.kUt*t.mF():this.FUt}l8(){return this.FUt}c8(){return this.kUt}uF(){return this.PUt}mF(){return this.xAt}gF(t){(isNaN(t)||t<0)&&(t=0),this.xAt=t}EF(t){this.zUt=Math.max(t,0)}DF(){return this.zUt}LF(t){this.jUt=Math.max(t,0)}AF(){return this.jUt}MF(){return this.VUt}SF(){return this.qUt}bF(){return this.ZUt}uJt(){return this.OUt}cF(){return this.BUt.Js()}lJt(){return this.UUt.Js()}dF(){return this.WUt.Js()}Ttt(){return this.xUt}cJt(){return this.vUt}fJt(){return this.eUt}mk(){return this.bBt}yk(){return this.xBt}dJt(){return this.vBt}pJt(){return this.IBt}wk(){return this.CBt}ij(t){if(this.KUt)throw new Error("cannot call while loading state - wait until afterload event");return this.rUt.get(t)||null}ZLt(t){if(this.KUt)throw new Error("cannot call while loading state - wait until afterload event");this.rUt.delete(t)}H4(){this.rUt.clear();for(const t of this.YBt)if(!t.y0())for(const s of t.DB())this.rUt.set(s.zW(),s)}Kzt(){return"preview"===this.uBt}yQ(){return this.mBt}Mz(){return this.uBt}wz(){return"nwjs"===this.Mz()||this.lBt}tBt(){return"cordova"===this.uBt}mJt(){return"Android"===Hw.Zs.Ks&&("cordova"===this.uBt||"playable-ad-single-file"===this.uBt||"playable-ad-zip"===this.uBt||"instant-games"===this.uBt)}gJt(){return this.LX}yJt(){return this.cBt}Sz(){return this.fBt}MJt(){return this.dBt}ck(){return this.zBt}MDt(){return this.jBt.MDt()}wDt(){return this.jBt.wDt()}n1(){return this.cUt}wJt(){return this.lb().Ww(this.q0())}zw(t){return this.lb().zw(t||this.q0())}SJt(){return this._Ut}TJt(t){t=!!t,this.dUt!==t&&(this.dUt=t,this.UF().z5(),this.pj())}Dk(){return this.dUt}bJt(t){if(!this.JBt.has(t)){const s=()=>this.xJt(t);this.JBt.set(t,s),t.yf().addEventListener("animationframeimagechange",s)}const s=this.cM.rM(t);return s.SM()||s.bM().then((()=>this.pj())),s}xJt(t){this.cM.uM(t)}WBt(t){const s=[];for(const i of t.RNt())for(const t of i.qY()){const i=t.sV();s.push({source:t,width:i.Bg(),height:i.Zg(),tag:t.mV()})}return{MM:s}}async QBt(t){const s=Hw.Qn(Hw.Wd),i=[],e=new Map;for(const n of t.RNt())for(const t of n.qY()){const n=t.sV().zDt();e.has(n)||(e.set(n,null),i.push(s.Fl((async()=>{const t=await n.uK();e.set(n,t)}))))}await Promise.all(i);const n=[];for(const i of t.RNt())for(const t of i.qY())n.push(s.Fl((async()=>{const s=t.sV(),i=e.get(s.zDt()),n=await s.BDt(i);return{vM:await createImageBitmap(n)}})));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{MM:r}}vJt(t){this.$Ut=t,this.tWt=!1}IJt(){this.$Ut="",this.tWt=!0}CJt(t){this.sWt=t}zIt(t){this.CQ=t}GJt(){return this.iWt}QQt(){return!!(this.$Ut||this.tWt||this.sWt||null!==this.CQ)}async JQt(){if(this.$Ut&&(this.BB(),await this._Jt(this.$Ut),this.DJt()),this.sWt&&(await this.EJt(this.sWt),this.DJt(),this.yQ()&&qw.NJt()),this.tWt){const t=await this.AJt();this.iWt=t,await this.vj(Hw._j.Gj.Cj.LJt,null),this.iWt="",this.DJt()}if(null!==this.CQ){this.BB();try{await this.OJt(this.CQ),this.iWt=this.CQ,await this.vj(Hw._j.Gj.Cj.RJt,null),this.iWt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.vj(Hw._j.Gj.Cj.PJt,null)}this.DJt()}}DJt(){this.$Ut="",this.tWt=!1,this.sWt="",this.CQ=null}Fz(){return this.eWt||(this.eWt=localforage.Ii({name:"c3-localstorage-"+this.dJt(),description:this.mk()})),this.eWt}kJt(){return this.nWt||(this.nWt=localforage.Ii({name:"c3-savegames-"+this.dJt(),description:this.mk()})),this.nWt}async _Jt(t){const s=await this.AJt();try{await this.kJt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.iWt=s,await this.vj(Hw._j.Gj.Cj.LJt,null),this.iWt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.vj(Hw._j.Gj.Cj.FJt,null)}}async EJt(t){try{const s=await this.kJt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.OJt(s),this.iWt=s,await this.vj(Hw._j.Gj.Cj.RJt,null),this.iWt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.vj(Hw._j.Gj.Cj.PJt,null)}}async AJt(){const t={c3save:!0,version:1,rt:{time:this.cF(),timeRaw:this.lJt(),walltime:this.dF(),timescale:this.mF(),tickcount:this.Ttt(),next_uid:this.nUt,running_layout:this.jF().I0(),start_time_offset:Date.now()-this.OUt},types:{},layouts:{},events:this.Adt.t3(),timelines:this.n9.t3(),user_script_data:null};for(const s of this.YBt)s.y0()||s.eAt()||(t.types[s.I0().toString()]=s.t3());for(const s of this.h3.JF())t.layouts[s.I0().toString()]=s.t3();const s=this.jJt("save");return s.saveData=null,await this.Q4(s),t.user_script_data=s.saveData,JSON.stringify(t)}F4(){return this.KUt}async OJt(t){const s=this.UF(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.BIt(),this.IEt.dispatchEvent(Hw.Qn(Hw.Event,"beforeload"));for(const t of this.pQt())t.GW().eAt()||t.d6();const e=i.rt;this.BUt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.UUt.Set(e.timeRaw),this.WUt.Set(e.walltime),this.xAt=e.timescale,this.xUt=e.tickcount,this.OUt=Date.now()-e.start_time_offset;const n=e.running_layout;this.KUt=!0;let r=!1;if(n!==this.jF().I0()){const t=s.A5(n);if(!t)return;await this.tJt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.A5(i);n&&n.s3(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.cq(i);!e||e.y0()||e.eAt()||e.s3(s,h)}for(const t of this.h3.JF())for(const s of t.hU())s.i3();if(this.BB(),this.H4(),this.KUt=!1,r){for(const t of this.pQt())t.j4();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.cq(i);!e||e.y0()||e.eAt()||e.aAt(s)}}this.nUt=e.next_uid,this.Adt.s3(i.events);for(const t of this.YBt)if(!t.y0()&&t.FW())for(const s of t.DB()){const i=s.UW();s.eLt();for(const e of t.c4().q4()){if(e===t)continue;const n=e.DB();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.X4(n[i])}}this.n9.s3(i.timelines),s.j5(),s.z5();for(const t of h)t.pLt();this.UIt(),this.IEt.dispatchEvent(Hw.Qn(Hw.Event,"afterload")),this.x5(this.jJt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.cq(s);i&&i.oAt()}const o=this.jJt("load");o.saveData=i.user_script_data,await this.Q4(o),this.pj()}zJt(t,s){return s.oj().wRt()-t.oj().wRt()}nPt(t,s){t.oj()&&(this._Wt.has(t)||(this._Wt.set(t,s),this.DWt.push(t)))}BIt(){this._Wt=new WeakMap,Hw.wh(this.DWt)}UIt(t="full",s=null){this.DWt.sort(this.zJt);const i=this.DWt.length;for(const i of this.DWt)i.m6(this._Wt.get(i),t,s);for(const i of this.DWt)i.wLt(this._Wt.get(i),t,s);if(this.BIt(),i){this.BB(),this.H4();for(const t of this.h3.JF())for(const s of t.hU())s.c0(),s.dj()}}async BJt(t){const s=await Promise.all(t.map((async t=>{if(this.tBt()&&this.VZ.fZ()||"playable-ad-single-file"===this.Mz()){const s=await this.VZ.eo(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()})));this.yWt.UJt(s)}WJt(t,s){this.yWt.QJt(t,s)}JJt(t,s){this.yWt.YJt(t,s)}VJt(t,s,i,e){return this.yWt.VJt(t,s,i,null,null,e)}HJt(t,s,i,e){return this.yWt.HJt(t,s,i,e)}qJt(){return this.yWt.XJt()}tj(t,s){this.zc("runtime","invoke-download",{url:t,filename:s})}async Bzt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.bk())return(await this.gj("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async ZJt(t){return this.bk()?await this.gj("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}KJt(){this.aWt||(this.aWt=!0,this.zc("runtime","enable-device-orientation"))}$Jt(){this.uWt||(this.uWt=!0,this.zc("runtime","enable-device-motion"))}FF(){return this.LUt()}tYt(t){this.LUt=t}TWt(){const t=this.lb();return{fps:this.MF(),tps:this.SF(),cpu:this.bF(),gpu:this.vF(),layout:this.jF()?this.jF()._c():"",renderer:t.PT()?t.uO():t.gzt()}}ugt(){return!!this.yQ()&&qw.ugt()}sgt(t){return this.Yvt()?qw.sgt(t):Promise.resolve()}kwt(){return!!this.Yvt()&&qw.sYt()}iYt(t){this.gBt=!!t,this.eYt()}nYt(){return this.gBt}Yvt(){return this.yBt}Mq(t){t?this.MBt--:this.MBt++,this.eYt()}eYt(){this.yBt=this.yQ()&&this.gBt&&0===this.MBt}sMt(){return this.yQ()&&qw.sMt()}u2(){return this.yQ()&&this.lb().tO()&&qw.u2()}async XQt(t){if(t)for(const s of t)await this.sgt(s)}KQt(t){return this.XQt(this.IEt._f(t))}emt(t){return this.Adt.emt(t.name,t.params)}Mj(t){if(this.bk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}Uz(){return this.IWt}jJt(t){const s=Hw.Qn(Hw.Event,t,!1);return s.runtime=this.IWt,s}zWt(){this.IWt=new self.nk(this),this.dWt={pretick:this.jJt("pretick"),tick:this.jJt("tick"),tick2:this.jJt("tick2")}}WWt(){const t={};for(const s of this.YBt)t[s.Emt()]={value:s.fB(),enumerable:!0,writable:!1};this.IWt.Rk(t)}QWt(){const t={};for(const s of this.Fk().Fmt())t[s.Emt()]=s.Nmt();this.IWt.Pk(t)}qF(){return this.GWt}oB(t,s){this.CWt.set(t,s)}uU(t){return this.CWt.get(t)}cz(t){if(!(t instanceof self.gB))throw new TypeError("expected IObjectClass");const s=this.uU(t);if(!(s&&s instanceof Hw.nlt))throw new Error("invalid IObjectClass");return s}CB(t){if(!(t instanceof self.IW))throw new TypeError("expected IInstance");const s=this.uU(t);if(!(s&&s instanceof Hw.Instance))throw new Error("invalid IInstance");return s}hj(t){if(!(t instanceof self.cY))throw new TypeError("expected IWorldInstance");const s=this.uU(t);if(!(s&&s instanceof Hw.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=Hw.sBt.EI,self.C3_InitRuntime=(t,s)=>t.CAt(s)}{const $w=self.Cs;$w.MWt=class extends $w.Un{constructor(t,s){super(),this.kc=t,this.rYt=new Map,this.hYt=0,this.oYt=s.inputPort,s.outputPort.onmessage=t=>this.aYt(t),this.uYt=s.maxNumWorkers,this.lYt=1,this.cYt=!1,this.fYt=!1}XJt(){return this.uYt}UJt(t){this.oYt.postMessage({type:"_import_scripts",scripts:t})}QJt(t,s){this.oYt.postMessage({type:"_send_blob",blob:t,id:s})}YJt(t,s){this.oYt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}VJt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.hYt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise(((t,s)=>{this.rYt.set(h,{resolve:t,progress:e,reject:s,dYt:!1,pYt:r})}));return n&&n.Hf((()=>this.mYt(h))),this.oYt.postMessage(o,i),this.gYt(),a}HJt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.hYt++,params:s,transferables:i};this.oYt.postMessage(n,i)}mYt(t){const s=this.rYt.get(t);s&&(s.dYt=!0,s.resolve=null,s.progress=null,s.reject=null,this.oYt.postMessage({type:"_cancel",jobId:t}))}aYt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.yYt(e,s.result);break;case"progress":this.MYt(e,s.progress);break;case"error":this.wYt(e,s.error);break;case"ready":this.SYt();break;default:throw new Error(`unknown message from worker '${i}'`)}}yYt(t,s){const i=this.rYt.get(t);if(!i)throw new Error("invalid job ID");i.dYt||i.resolve(s),this.rYt.delete(t)}MYt(t,s){const i=this.rYt.get(t);if(!i)throw new Error("invalid job ID");!i.dYt&&i.progress&&i.progress(s)}wYt(t,s){const i=this.rYt.get(t);if(!i)throw new Error("invalid job ID");i.dYt||i.reject(s),this.rYt.delete(t)}SYt(){this.cYt&&(this.cYt=!1,this.lYt++,this.lYt<this.uYt?this.gYt():this.oYt.postMessage({type:"_no_more_workers"}))}TYt(){let t=0;const s=[...this.rYt.values()].sort(((t,s)=>(t.pYt||1/0)-(s.pYt||1/0)));for(const i of s)t<(i.pYt||1/0)&&t++;return t}async gYt(){if(!(this.lYt>=this.uYt||this.cYt||this.fYt||this.TYt()<=this.lYt))try{this.cYt=!0,(await this.kc.gj("runtime","create-job-worker")).outputPort.onmessage=t=>this.aYt(t)}catch(t){this.fYt=!0,this.cYt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.lYt} so far)`,t)}}}}self.C3_Shaders={};{let tS=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};0;const sS=self.Cs;let iS=null,eS="",nS="",rS=[],hS="",oS="",aS="";const uS=sS.Qn(sS._pt);sS._j.Gj=class extends sS.zCt{constructor(t){super(t),this.xpt=this.kc.Fk().gq(),this.udt=this.kc.Fk().Zk(),this.bYt=0,this.xYt=0,this.vYt=new Map}Jn(){super.Jn()}pj(){this.kc.pj()}uQ(t){this.kc.uQ(t,null,null)}IYt(t,s){return iS&&t===eS&&s===nS||(iS=new RegExp(t,s),eS=t,nS=s),iS.lastIndex=0,iS}CYt(t,s,i){if(t===hS&&s===oS&&i===aS)return rS;const e=this.IYt(s,i);return rS=t.match(e),hS=t,oS=s,aS=i,rS}async GYt(t,s){if(!s.length)return;this.bYt+=s.length;const i=[];for(const e of s)i.push(t.g4(e));await sS.Bh(i,(()=>{this.xYt++})),this.xYt++,this.xYt===this.bYt&&(this.xYt=0,this.bYt=0,this.kc.uQ(sS._j.Gj.Cj._Yt,null,null))}NZ(){return 0===this.bYt?1:this.xYt/this.bYt}DYt(t,s){for(const i of s)0===i.AB()&&t.S4(i)}EYt(){return uS}NYt(t){const s=this.kc.Fk(),i=s.Zk(),e=i.pq(),n=e.Qk(),r=n.fq(),h=e.upt(),o=i.mq(n),a=s.gq(),u=a.mq();if(u.Cpt(t),h)for(let i=0;i<t&&!u.Iq();++i)s.Sq(r),u.xq(i),n.Tq(e,o),s.bq(r);else for(let s=0;s<t&&!u.Iq();++s)u.xq(s),n.Tq(e,o);return i.Cq(),a.Cq(),!1}*AYt(t){const s=this.kc.Fk(),i=s.Zk(),e=i.pq(),n=e.Qk(),r=n.fq(),h=e.upt(),o=i.mq(n),a=s.gq(),u=a.mq();if(u.Cpt(t),h)for(let i=0;i<t&&!u.Iq();++i)s.Sq(r),u.xq(i),yield*n.Hwt(e,o),s.bq(r);else for(let s=0;s<t&&!u.Iq();++s)u.xq(s),yield*n.Hwt(e,o);return i.Cq(),a.Cq(),!1}LYt(){const t=this.kc.Fk(),s=t.Zk(),i=s.pq(),e=i.Qk(),n=e.fq(),r=i.upt(),h=s.mq(e),o=t.gq(),a=o.mq();if(r)for(let s=0;!a.Iq();++s)t.Sq(n),a.xq(s),e.Tq(i,h)||a.MV(),t.bq(n);else for(let t=0;!a.Iq();++t)a.xq(t),e.Tq(i,h)||a.MV();return s.Cq(),o.Cq(),!1}*OYt(){const t=this.kc.Fk(),s=t.Zk(),i=s.pq(),e=i.Qk(),n=e.fq(),r=i.upt(),h=s.mq(e),o=t.gq(),a=o.mq();if(r)for(let s=0;!a.Iq();++s)t.Sq(n),a.xq(s),(yield*e.Hwt(i,h))||a.MV(),t.bq(n);else for(let t=0;!a.Iq();++t)a.xq(t),(yield*e.Hwt(i,h))||a.MV();return s.Cq(),o.Cq(),!1}RYt(t,s,i){const e=this.kc.Fk(),n=e.Zk(),r=n.pq(),h=r.Qk(),o=h.fq(),a=r.upt(),u=n.mq(h),l=e.gq(),c=l.mq();if(c.yq(t),c.Cpt(i),i<s)if(a)for(let t=s;t>=i&&!c.Iq();--t)e.Sq(o),c.xq(t),h.Tq(r,u),e.bq(o);else for(let t=s;t>=i&&!c.Iq();--t)c.xq(t),h.Tq(r,u);else if(a)for(let t=s;t<=i&&!c.Iq();++t)e.Sq(o),c.xq(t),h.Tq(r,u),e.bq(o);else for(let t=s;t<=i&&!c.Iq();++t)c.xq(t),h.Tq(r,u);return n.Cq(),l.Cq(),!1}*PYt(t,s,i){const e=this.kc.Fk(),n=e.Zk(),r=n.pq(),h=r.Qk(),o=h.fq(),a=r.upt(),u=n.mq(h),l=e.gq(),c=l.mq();if(c.yq(t),c.Cpt(i),i<s)if(a)for(let t=s;t>=i&&!c.Iq();--t)e.Sq(o),c.xq(t),yield*h.Hwt(r,u),e.bq(o);else for(let t=s;t>=i&&!c.Iq();--t)c.xq(t),yield*h.Hwt(r,u);else if(a)for(let t=s;t<=i&&!c.Iq();++t)e.Sq(o),c.xq(t),yield*h.Hwt(r,u),e.bq(o);else for(let t=s;t<=i&&!c.Iq();++t)c.xq(t),yield*h.Hwt(r,u);return n.Cq(),l.Cq(),!1}kYt(t){const s=t.EB(),i=s.DB();if(0===i.length)return!1;const e=this.kc.Fk(),n=e.Zk(),r=n.pq(),h=r.Qk(),o=h.fq(),a=r.upt(),u=n.mq(h),l=e.gq(),c=l.mq(),f=t.FW(),d=uS.mq();if(sS.xh(d,i),c.Cpt(d.length),a)for(let s=0,i=d.length;s<i&&!c.Iq();++s){e.Sq(o);const i=d[s];t.EB().xdt(i),f&&i.oMt(),c.xq(s),h.Tq(r,u),e.bq(o)}else{s.Sdt(!1);const t=s.Tdt();sS.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.Iq();++s){const i=d[s];t[0]=i,f&&i.oMt(),c.xq(s),h.Tq(r,u)}}return n.Cq(),l.Cq(),sS.wh(d),uS.Cq(),!1}*FYt(t){const s=t.EB(),i=s.DB();if(0===i.length)return!1;const e=this.kc.Fk(),n=e.Zk(),r=n.pq(),h=r.Qk(),o=h.fq(),a=r.upt(),u=n.mq(h),l=e.gq(),c=l.mq(),f=t.FW(),d=uS.mq();if(sS.xh(d,i),c.Cpt(d.length),a)for(let s=0,i=d.length;s<i&&!c.Iq();++s){e.Sq(o);const i=d[s];t.EB().xdt(i),f&&i.oMt(),c.xq(s),yield*h.Hwt(r,u),e.bq(o)}else{s.Sdt(!1);const t=s.Tdt();sS.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.Iq();++s){const i=d[s];t[0]=i,f&&i.oMt(),c.xq(s),yield*h.Hwt(r,u)}}return n.Cq(),l.Cq(),sS.wh(d),uS.Cq(),!1}jYt(t,s){const i=t.EB(),e=i.DB();if(0===e.length)return!1;const n=this.kc.Fk(),r=n.Zk(),h=n.Tmt(),o=r.pq(),a=o.Qk(),u=a.fq(),l=o.upt(),c=r.mq(a),f=n.gq(),d=f.mq(),p=t.FW(),m=uS.mq();sS.wh(m),d.Cpt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.lxt(1,t)]);if(m.sort(tS),1===s&&m.reverse(),l)for(let s=0,i=m.length;s<i&&!d.Iq();++s){n.Sq(u);const i=m[s][0];t.EB().xdt(i),p&&i.oMt(),d.xq(s),a.Tq(o,c),n.bq(u)}else{i.Sdt(!1);const t=i.Tdt();sS.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.Iq();++s){const i=m[s][0];t[0]=i,p&&i.oMt(),d.xq(s),a.Tq(o,c)}}return r.Cq(),f.Cq(),sS.wh(m),uS.Cq(),!1}*zYt(t,s){const i=t.EB(),e=i.DB();if(0===e.length)return!1;const n=this.kc.Fk(),r=n.Zk(),h=n.Tmt(),o=r.pq(),a=o.Qk(),u=a.fq(),l=o.upt(),c=r.mq(a),f=n.gq(),d=f.mq(),p=t.FW(),m=uS.mq();sS.wh(m),d.Cpt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.lxt(1,t)]);if(m.sort(tS),1===s&&m.reverse(),l)for(let s=0,i=m.length;s<i&&!d.Iq();++s){n.Sq(u);const i=m[s][0];t.EB().xdt(i),p&&i.oMt(),d.xq(s),yield*a.Hwt(o,c),n.bq(u)}else{i.Sdt(!1);const t=i.Tdt();sS.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.Iq();++s){const i=m[s][0];t[0]=i,p&&i.oMt(),d.xq(s),yield*a.Hwt(o,c)}}return r.Cq(),f.Cq(),sS.wh(m),uS.Cq(),!1}BYt(t,s){let i=this.vYt.get(t);return i||(s?(i={UYt:null,WYt:new Map},this.vYt.set(t,i),i):null)}QYt(t,s,i,e,n){s.Uk().lSt(i,s.Vk()),e&&t.bq(n)}*JYt(t,s,i,e,n){yield*s.Uk().cSt(i,s.Vk()),e&&t.bq(n)}}}{const lS=self.Cs;lS._j.Gj.eNt=class extends lS.Un{constructor(t){super(),this.sdt=t,this.kc=t.Rj(),this.IGt=t.MB()}uGt(){}Jn(){this.sdt=null,this.kc=null,this.IGt=null}}}{const cS=self.Cs;cS._j.Gj.Instance=class extends cS.Un{constructor(t,s){super(),this.fi=t,this.sdt=this.fi.GW(),this.NGt=this.sdt.Bxt(),this.kc=this.fi.Rj()}Jn(){this.fi=null,this.sdt=null,this.NGt=null,this.kc=null}}}{const fS=self.Cs,dS=[];fS._j.Gj.Cj={YYt:()=>!0,Y4:()=>!0,i5:()=>!0,_Qt:()=>!0,DQt:()=>!0,rF(){return this.kc.rF()},JMt(){const t=this.kc.Smt();return!t.npt()&&!t.ipt()},VYt(){const t=this.kc.Tmt().Xbt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.kc.Ttt();return t.set("TriggerOnce_lastTick",i),this.kc.SJt()||s!==i-1},HYt(t){const s=this.kc.Tmt().Xbt(),i=s.get("Every_lastTime")||0,e=this.kc.cF();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},oyt(t){const s=this.kc.Fk().Umt(t);return s&&s.oyt()},Kzt(){return this.kc.Kzt()},hi:()=>fS.Zs.hi,aQt:()=>!0,Ij:()=>!0,qYt:()=>!0,LJt:()=>!0,FJt:()=>!0,RJt:()=>!0,PJt:()=>!0,XYt(t){return!!this.kc.ij(t)},ZYt(t){switch(t){case 0:return"browser"===fS.Zs.ni;case 1:return"iOS"===fS.Zs.Ks;case 2:return"Android"===fS.Zs.Ks;case 8:return"cordova"===fS.Zs.ni;case 9:return"scirra-arcade"===this.kc.Mz();case 10:return"nwjs"===fS.Zs.ni;case 13:return"windows-uwp"===this.kc.Mz();default:return!1}},KYt(t,s,i){return this.IYt(s,i).test(t)},$Yt:(t,s,i)=>fS.compare(t,s,i),tVt:(t,s,i)=>t>=s&&t<=i,sVt:(t,s,i)=>fS.compare(t.Net(),s,i),iVt:t=>!!t.Net(),eVt(t,s){const i=this.kc.cF();if(0===t){const t=this.kc.Tmt().Xbt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return fS.compare(i,t,s)},nVt:t=>isNaN(t),aCt:(t,s,i)=>fS.rr(fS.Kn(t),fS.Kn(i))<=fS.Kn(s),uCt:(t,s)=>fS.ar(fS.Kn(t),fS.Kn(s)),Mvt(t,s,i){let e=fS.Kn(t),n=fS.Kn(s),r=fS.Kn(i);return fS.ar(r,n)?fS.ar(e,n)&&!fS.ar(e,r):!(!fS.ar(e,n)&&fS.ar(e,r))},rVt:(t,s)=>"number"==typeof t?0===s:1===s,hVt:t=>!!t,jgt(t){return t.toLowerCase()===this.kc.Fk().Wgt()},oVt(t,s,i,e){if(!t)return!1;const n=this.EYt(),r=n.mq(),h=t.EB();fS.xh(r,h.DB()),h.ddt()&&fS.wh(h.bdt());const o=this.kc.Tmt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.lxt(1,t),e=o.lxt(3,t),fS.compare(s,i,e)?++a:h.wdt(n)}fS.Mh(r,a),h.vdt(r);const u=!!r.length;return fS.wh(r),n.Cq(),t.eSt(),u},aVt(t,s){if(!t)return!1;const i=this.EYt(),e=i.mq(),n=t.EB();fS.xh(e,n.DB()),n.ddt()&&fS.wh(n.bdt());const r=this.kc.Tmt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.lxt(1,t)?++h:n.wdt(s)}fS.Mh(e,h),n.vdt(e);const o=!!e.length;return fS.wh(e),i.Cq(),t.eSt(),o},uVt(t,s,i){if(!t)return!1;const e=t.EB(),n=e.DB();if(0===n.length)return!1;const r=this.kc.Tmt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.lxt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Ddt(h),t.eSt(),!0},lVt(t,s){if(!t)return!1;const i=t.EB(),e=i.DB();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Ddt(n),t.eSt(),!0},cVt(t){if(!t)return!1;const s=t.EB(),i=s.DB(),e=Math.floor(this.kc.FF()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Ddt(n),t.eSt(),!0},fVt:t=>!!t&&(!!t.AB()&&(t.EB().Sdt(!0),t.eSt(),!0)),dVt(t,s,i){if(!t)return!1;const e=t.EB(),n=e.DB(),r=this.kc.Qk().Edt(),h=this.kc.Tmt().Jbt();e.ddt()?(fS.xh(dS,n),e.fdt(),e.Sdt(!1)):r?(fS.xh(dS,e.bdt()),fS.wh(e.bdt())):(fS.xh(dS,e.Tdt()),fS.wh(e.Tdt()));for(let t=0,n=dS.length;t<n;++t){const n=dS[t];fS.xor(n.oj().wJ(s,i),h)?e.Mdt(n):e.wdt(n)}return t.eSt(),fS.xor(!!e.Tdt().length,h)},pVt(t){if(!t)return!1;const s=t.y0();let i=null;const e=this.kc.VNt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.GW().Vxt(t)){i=r;break}}else if(r.GW()===t){i=r;break}}if(!i){const s=t.DB();s.length&&(i=s.at(-1))}return!!i&&(t.EB().Ddt(i),t.eSt(),!0)},mVt(t){return this.kc.Yvt()?this.AYt(t):this.NYt(t)},gVt(){return this.kc.Yvt()?this.OYt():this.LYt()},yVt(t,s,i){return this.kc.Yvt()?this.PYt(t,s,i):this.RYt(t,s,i)},Ud(t){return this.kc.Yvt()?this.FYt(t):this.kYt(t)},MVt(t,s,i){return this.kc.Yvt()?this.zYt(t,i):this.jYt(t,i)},wVt:t=>!!t&&t.OU(),SVt:t=>!!t&&t.UU(),TVt:t=>!!t&&t.jU(),bVt:t=>!!t&&!t.AB(),xVt:(t,s,i)=>!!t&&fS.compare(100*t.tL(),s,i),vVt(t){const s=this.kc.jF();return!!s&&s.t4(t)},_Yt:()=>!0,IVt(){return this.bYt>0},CVt(t,s){const i=this.kc.iLt();return!!i&&!!s&&!!i.elt(t,s)}}}{let pS=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},mS=function(t,s){return t[1]-s[1]};0;const gS=self.Cs,yS=[],MS=[],wS=gS.Qn(gS.Rect),SS=gS.Qn(gS.xo),TS=[];gS._j.Gj.rrt={GVt(t,s){t.dnt(s)},_Vt(t,s){t.Ki()&&"number"!=typeof s&&(s=parseFloat(s)),t.dnt(t.Net()+s)},DVt(t,s){t.Ki()&&t.dnt(t.Net()-s)},EVt(t,s){t.dnt(!!s)},NVt(t){t.dnt(!t.Net())},AVt(t){t.dnt(t.wmt())},LVt(t){this.kc.Fk().zmt(t)},OVt(t,s,i,e,n,r){if(!t||!s)return;const h=this.kc.OB(t,s,i,e,n,r);if(!h)return;n&&s.RB(h);const o=this.kc.Fk();o.PB(!0),h.kB(),o.PB(!1);const a=new Map;h.VAt(a,t,n);for(const[t,s]of a)t.EB().Idt(s)},RVt(t,s,i,e,n,r){if(!t||!s)return;const h=this.kc.dQt(t);h&&gS._j.Gj.rrt.OVt.call(this,h,s,i,e,n,r)},m0(t,s,i,e,n,r,h,o,a,u,l){if(!t)return;const c=this.kc.rj();let f=c;if(r){const t=this.kc.UF().N5(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.aj(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.aj(o),!p))return;wS.set(s,i,e,n);const m=f.m0(t,wS,d,p,a,u,l);t.EB().vdt(m),t.eSt()},PVt(){const t=this.xpt;t.wpt()&&t.ypt().MV()},ayt(t,s){const i=this.kc.Fk().Umt(t);i&&(0===s?i.ayt(!1):1===s?i.ayt(!0):i.ayt(!i.oyt()))},kVt(t){this.kc.gF(t)},FVt(t,s){if(s<0&&(s=0),!t)return;const i=t.EB().DB();for(const t of i)t.gF(s)},jVt(t){if(!t)return;const s=t.EB().DB();for(const t of s)t.VW()},dh(t,s){if(t<0)return;const i=this.kc.Fk().bgt();return s?i.NCt(t):i.ACt(t),!0},iF(t){return this.kc.Fk().bgt().LCt(t),!0},zVt(){const t=this.kc.Fk();return t.bgt().OCt(t.Fgt()),!0},tF(t){this.kc.Fk().tF(t)},async xj(t,s,i,e,n,r){const h=this.kc.bj();h&&(this.pj(),await h.xj(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.kc.vj(gS._j.Gj.Cj.Ij,null))},BVt(t,s){if(t<=0||s<=0)return;this.kc.szt(t,s),this.kc.rj().J2();const i=this.kc.bj();i&&("off"===i.Hjt()||this.kc.mQt(t,s),i.xE(i.yH(),i.MH(),!0),this.kc.pj())},UVt(t){const s=this.kc.bj();s&&"off"!==s.Hjt()&&(s.azt(0!==t?"high":"low"),s.xE(s.yH(),s.MH(),!0))},Yit(t){this.kc.vJt(t)},WVt(){this.kc.IJt()},QVt(t){this.kc.CJt(t)},JVt(t){this.kc.zIt(t)},YVt(t){},VVt(){for(const t of this.kc.UF().JF())t.c5()},HVt(t){this.kc.TJt(0!==t)},qVt(t,s){this.kc.LF(1/t),this.kc.EF(1/s)},XVt(t,s){this.kc.EF(t),this.kc.LF(s)},ZVt(t){this.kc.GF(["vsync","unlimited-tick","unlimited-frame"][t])},KVt(t,s){if(!t)return;const i=t.EB().DB(),e=yS,n=MS,r=this.kc.rj(),h=t.y0(),o=t.CTt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.oj();if(!a)continue;let u;u=h?r.Krt(s+r.GW().ITt(o)):r.Krt(s),e.push([a.aj().ik(),a.uj()]),n.push([r,u])}if(!e.length)return;e.sort(pS),n.sort(mS);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.lj(e[t][0]),h=e[t][1],o=i.cj();o[h]!==s&&(o[h]=s,s.oj().fj(i,!0),i.dj(s),a=!0)}a&&this.kc.pj(),gS.wh(yS),gS.wh(MS)},oz(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.kc.ck().oz(t,s)},$Vt(t){if(this.kc.TM())return;const s=this.kc.UF();s.VF()||s.HF(t)},tHt(t){if(this.kc.TM())return;const s=this.kc.UF();if(s.VF())return;const i=s.N5(t);i&&s.HF(i)},sHt(t){if(this.kc.TM())return;const s=this.kc.UF();if(s.VF())return;const i=s.JF(),e=i.indexOf(s.jF());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.HF(n)},iHt(){if(this.kc.TM())return;const t=this.kc.UF();t.VF()||(t.HF(t.jF()),this.kc.Fk().Ymt())},eHt(t,s){t&&t.AU(s)},nHt(t,s){t&&t.kU(s)},rHt(t,s){t&&t.zU(s)},hHt(t,s){t&&t.iL(s/100)},oHt(t,s){t&&t.WU(s)},aHt(t,s){t&&t.YU(s)},uHt(t,s){t&&t.qB(gS.Kn(+s))},lHt(t,s,i){t&&(t.fW(!0),t.ZB(s),t.$B(i))},cHt(t){t&&t.fW(!1)},fHt(t,s,i){t&&t.X0(s/100,i/100)},dHt(t,s){t&&t.qb(+s)},pHt(t,s){t&&t.iW(1===s)},mHt(t,s){if(!t)return;SS.Ko(s),SS.Xn();const i=t.cW();i.Qo(SS)||(i.Po(SS),this.pj())},gHt(t,s){t&&t.rW(s)},yHt(t,s){t&&t.Ab(s)},MHt(t,s,i){if(!t)return;const e=t.WB().jnt(i);if(!e)return;const n=1===s;e.Kyt()!==n&&(e.vPt(n),t.OY(),this.kc.pj())},wHt(t,s,i,e){if(!t)return;const n=t.WB(),r=n.jnt(s);if(!r)return;i=Math.floor(i);const h=r.EC().AC(i);h&&("color"===h?(SS.Ko(e),e=SS):"percent"===h&&(e/=100),n.PY(r.ik(),i,e)&&r.Kyt()&&this.kc.pj())},SHt(t,s){t&&t.aW(s)},THt(t){this.kc.rj().VB(+t)},bHt(t){this.kc.rj().qB(gS.Kn(+t))},xHt(t,s){const i=this.kc.rj(),e=i.WB().jnt(s);if(!e)return;const n=1===t;e.Kyt()!==n&&(e.vPt(n),i.OY(),this.kc.pj())},vHt(t,s,i){const e=this.kc.rj().WB(),n=e.jnt(t);if(!n)return;s=Math.floor(s);const r=n.EC().AC(s);r&&("color"===r?(SS.Ko(i),i=SS):"percent"===r&&(i/=100),e.PY(n.ik(),s,i)&&n.Kyt()&&this.kc.pj())},IHt(t,s){this.kc.rj().MU(t/100,s/100)},CHt(t){const s=this.kc.rj();0===t?s.TU():s.bU()},GHt(t){this.kc.rj().ZB(t)},_Ht(t){this.kc.rj().$B(t)},DHt(t,s){const i=this.kc.rj();i.ZB(t),i.$B(s)},EHt(t){if(!t)return;const s=t.Ovt();if(!s)return;const i=s.oj();if(!i)return;const e=this.kc.rj();e.ZB(i.Wb()),e.$B(i.Yb())},lU(t,s,i){const e=this.kc.rj();try{e.lU(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},fU(t,s,i){if(!t)return;const e=this.kc.rj();try{e.fU(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},pU(t){t&&this.kc.rj().pU(t)},gU(){this.kc.rj().gU()},async NHt(t){const s=this.kc.jF();if(!s||!t||this.kc.TM())return;const i=t.y0()?t.qMt():[t];await this.GYt(s,i)},async AHt(t){await gS._j.Gj.rrt.NHt.call(this,this.kc.dQt(t))},LHt(t){const s=this.kc.jF();if(!s||!t)return;const i=t.y0()?t.qMt():[t];this.DYt(s,i)},OHt(t){gS._j.Gj.rrt.LHt.call(this,this.kc.dQt(t))},RHt(){const t=this.kc.jF();if(!t)return;const s=t.f4();this.DYt(t,s)},async PHt(t){const s=this.kc.jF();t&&s&&!this.kc.TM()&&await this.GYt(s,t.u4())},async kHt(t){const s=this.kc.jF(),i=this.kc.UF().N5(t);i&&s&&!this.kc.TM()&&await this.GYt(s,i.u4())},$k(t){const s=this.udt.Xk();if(s)switch(s.Kk()){case 1:"number"==typeof t&&s.$k(t);break;case 2:"string"==typeof t&&s.$k(t);break;case 3:s.$k(t)}},FHt(t,s,i){const e=this.BYt(t.toLowerCase(),!0),n=e.WYt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=gS.jh(n.values())||e.UYt;h&&0!==h.Hk()!=(0!==i.Hk())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},jHt(t,s){const i=this.BYt(t.toLowerCase(),!0);i.UYt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=gS.jh(i.WYt.values())||i.UYt;e&&0!==e.Hk()!=(0!==s.Hk())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.UYt=s},zHt(t,s,i){const e=this.kc,n=e.Yvt()?TS:null;i=Math.floor(i);const r=this.BYt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.WYt.get(s.toLowerCase());if(!h){if(!r.UYt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.UYt,i=0}if(!h.Il())return n;if(0!==h.Hk())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.Fk(),a=o.Qk(),u=a.Wk(),l=u.length>0;l&&(h.Vk()?o.Sq(u):o.Sgt(u));const c=[],f=o.pyt(a);if(f){const t=f.gyt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Net())}const d=h.gyt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].wmt());return e.Yvt()?this.JYt(o,h,c,l,u):this.QYt(o,h,c,l,u)}}}{const bS=self.Cs;bS._j.Gj.hrt={BHt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},_:t=>t.toString(),Pt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.kc.FF()*t:this.kc.FF()*(s-t)+t},lTt(...t){return t[Math.floor(this.kc.FF()*t.length)]},UHt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=bS.Xn(Math.floor(t),0,s.length-1)]),WHt:()=>Math.PI,QHt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),JHt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(bS.Kn(t)),cos:t=>Math.cos(bS.Kn(t)),tan:t=>Math.tan(bS.Kn(t)),asin:t=>bS.$n(Math.asin(t)),acos:t=>bS.$n(Math.acos(t)),atan:t=>bS.$n(Math.atan(t)),exp:t=>Math.exp(t),Ut:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Xn:(t,s,i)=>bS.Xn(t,s,i),St:(t,s,i,e)=>bS.ir(t,s,i,e),angle:(t,s,i,e)=>bS.$n(bS.nr(t,s,i,e)),Ct:(t,s,i)=>bS.Ct(t,s,i),pr:(t,s,i)=>bS.pr(t,s,i),gr:(t,s,i,e)=>bS.gr(t,s,i,e),yr:(t,s,i,e,n)=>bS.yr(t,s,i,e,n),Mr:(t,s,i)=>bS.Mr(t,s,i),YHt:(t,s)=>bS.$n(bS.rr(bS.Kn(t),bS.Kn(s))),VHt:(t,s,i)=>bS.$n(bS.ur(bS.Kn(t),bS.Kn(s),i)),HHt:(t,s,i)=>bS.$n(bS.hr(bS.Kn(t),bS.Kn(s),bS.Kn(i))),qHt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,XHt:(t,s)=>(t|=0)^1<<s,ZHt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,KHt:()=>"\n",$Ht:t=>"string"==typeof t?t.toUpperCase():"",tqt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",sqt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},iqt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(bS.Xi(s),"i")):-1,eqt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(bS.Xi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(bS.Xi(s),"gi"),i):"string"==typeof t?t:"",nqt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},rqt(t,s,i){const e=this.IYt(s,i);return t?t.search(e):-1},hqt(t,s,i,e){const n=this.IYt(s,i);return t?t.replace(n,e):""},oqt(t,s,i){const e=this.CYt(t.toString(),s,i);return e?e.length:0},aqt(t,s,i,e){e=Math.floor(e);const n=this.CYt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},uqt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},lqt:t=>encodeURIComponent(t),cqt:t=>decodeURIComponent(t),hF(){return this.kc.l8()},fqt(){return this.kc.c8()},dqt(){return this.kc.mF()},pqt(){return(Date.now()-this.kc.uJt())/1e3},mqt:()=>Date.now(),time(){return this.kc.cF()},gqt(){return this.kc.Ttt()},yqt(){return this.kc.fJt()},yF(){return this.kc.MF()},Mqt(){return this.kc.bF()},wqt(){return this.kc.vF()},Sqt(){return this.kc.bj().Lz()},Tqt(){return this.kc.bj().Rz()},bqt(){return this.kc.vk()},xqt(){return this.kc.Ck()},vqt(){return this.kc.vk()},Iqt(){return this.kc.Ck()},Cqt(){return this.kc.rj().KB()},Gqt(){return this.kc.rj().tU()},_qt(){return this.kc.rj()._c()},Dqt(){return this.kc.rj().HB()},Eqt(){return bS.$n(this.kc.rj().XB())},Nqt(){return this.kc.rj().Bg()},Aqt(){return this.kc.rj().Zg()},Lqt(){return 100*this.kc.rj().W0()},Oqt(){return 100*this.kc.rj().Q0()},Rqt(t){const s=this.kc.rj().aj(t);return s?s.U0().Za():0},Pqt(t){const s=this.kc.rj().aj(t);return s?s.U0().Ka():0},kqt(t){const s=this.kc.rj().aj(t);return s?s.U0().$a():0},Fqt(t){const s=this.kc.rj().aj(t);return s?s.U0().tu():0},jqt(t){const s=this.kc.rj().aj(t);return s?s.U0().width():0},zqt(t){const s=this.kc.rj().aj(t);return s?s.U0().height():0},Bqt(t){const s=this.kc.rj().aj(t);if(s){const t=s.U0();return(t.Za()+t.$a())/2}return 0},Uqt(t){const s=this.kc.rj().aj(t);if(s){const t=s.U0();return(t.Ka()+t.tu())/2}return 0},Wqt(t,s,i){const e=this.kc.rj().aj(t);return e?e.gW(s,i)[0]:0},Qqt(t,s,i){const e=this.kc.rj().aj(t);return e?e.gW(s,i)[1]:0},Jqt(t,s,i){const e=this.kc.rj().aj(t);return e?e.MW(s,i)[0]:0},Yqt(t,s,i){const e=this.kc.rj().aj(t);return e?e.MW(s,i)[1]:0},Vqt(t,s,i,e){const n=this.kc.rj(),r=n.aj(t),h=n.aj(s);if(!r||!h||r===h)return i;const[o,a]=r.MW(i,e);return h.gW(o,a)[0]},Hqt(t,s,i,e){const n=this.kc.rj(),r=n.aj(t),h=n.aj(s);if(!r||!h||r===h)return e;const[o,a]=r.MW(i,e);return h.gW(o,a)[1]},qqt(t){const s=this.kc.rj().aj(t);return s?s.QU():0},Xqt(t){const s=this.kc.rj().aj(t);return s?bS.$n(s.HU()):0},Zqt(t){const s=this.kc.rj().aj(t);return s?100*s.tL():0},Kqt(t){const s=this.kc.rj().aj(t);return s?s.VU():0},$qt(t){const s=this.kc.rj().aj(t);return s?s.KB():0},tXt(t){const s=this.kc.rj().aj(t);return s?s.tU():0},sXt(t){const s=this.kc.rj().aj(t);return s?100*s.ZU():0},iXt(t){const s=this.kc.rj().aj(t);return s?100*s.tW():0},eXt(t){const s=this.kc.rj().aj(t);return s?s.Hb():0},nXt(t){const s=this.kc.rj().aj(t);return s?s.ik():-1},rXt(){const t=this.kc.bj();return t?t.Lzt():""},hXt(t){const s=this.xpt;if(!s.wpt())return 0;if(t){const i=s.Tpt(t);return i?i.ik():0}return s.ypt().ik()},oXt(){return this.kc.GJt()},aXt(t,s,...i){const e=this.BYt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.WYt.get(s.toLowerCase());if(!n){if(!e.UYt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.UYt}const r=n.Hk(),h=n.zk();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Il())return h;const o=this.kc.Fk(),a=o.Qk().Wk(),u=a.length>0;u&&(n.Vk()?o.Sq(a):o.Sgt(a));const l=n.gyt();for(let t=i.length,s=l.length;t<s;++t)i.push(l[t].wmt());const c=n.Uk(),f=c.Yk(c.Wk(),n.Vk(),r,h,...i);return u&&o.bq(a),f},uXt(){return this.kc.ak().RF()},lXt(){return this.NZ()},EG(){return this.kc.mzt()?"webgpu":"webgl"},cXt(){return this.kc.mzt()?this.kc.mzt().gzt():this.kc.pzt().uO()},fXt(){let t=this.kc.lb().jT();return Math.round(100*t/1048576)/100},dXt:(t,s,i)=>bS.Cr(t,s,i),pXt:(t,s,i)=>bS._r(t/100,s/100,i/100),mXt:(t,s,i,e)=>bS.Gr(t/100,s/100,i/100,e/100),gXt:(t,s,i)=>bS._r(t/255,s/255,i/255),yXt:(t,s,i,e)=>bS.Gr(t/255,s/255,i/255,e/255),MXt(){return this.kc.mk()},wXt(){return this.kc.yk()},SXt(){return this.kc.Qk().Z3()._c()},TXt(){return this.kc.Qk().dwt()}}}{const xS=self.Cs;xS._j.Unt=class extends xS.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{const vS=self.Cs,IS=self.ks,CS=[];vS._j.Unt.eNt=class extends vS.vGt{constructor(t){super(t),this.XEt=t.RNt()}Jn(){vS.wh(this.XEt),super.Jn()}uGt(){for(const t of this.XEt)t.ZDt(this.kc)}m4(t){const s={qx:this.kc.Gk()};return Promise.all(this.XEt.map((i=>i.KDt(t,s))))}T4(){for(const t of this.XEt)t.$Dt()}M4(){this.bXt()}bXt(){for(const t of this.sdt._B())t.gY().xXt()}ixt(t){vS._j.Unt.MCt(this,t)}Uxt(t){CS.push({_Gt:null,vXt:!1,SB:[]})}IXt(t,s,i){const e=CS.at(-1);e._Gt=t,e.vXt=i,e.SB.push(s)}Wxt(t){const s=CS.pop(),i=s._Gt,e=s.vXt;if(!i)return;const n=new Map;for(const t of s.SB)t.VAt(n,i,e);for(const[t,s]of n)t.EB().Idt(s)}CXt(t){const s=this.GW().zNt(t),i=this.Rj();return s.tEt(0).sV().nX(i.lb(),{qx:i.Gk()}).then((()=>this.bXt())),s}GXt(t){for(const s of this.sdt._B())s.gY()._Xt(t);this.GW().BNt(t)}DXt(t,s){const i=this.sdt.FNt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.nEt(s);e<0&&(e+=i.VY()+1);const n=vS.HDt.XDt(this.Rj());i.sEt(n,e);const r=this.Rj();n.sV().nX(r.lb(),{qx:r.Gk()}).then((()=>this.bXt()));for(const t of this.sdt._B())t.gY().EXt();return n}NXt(t,s){const i=this.sdt.FNt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.VY())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.nEt(s);e<0&&(e+=i.VY()),i.iEt(e);for(const t of this.sdt._B())t.gY().EXt()}lGt(){return self.AXt}};const GS=new WeakMap;self.AXt=class extends self.gB{constructor(t){super(t),GS.set(this,t.Bxt())}LXt(t){IS.ue(t);const s=GS.get(this).GW().FNt(t);return s?s.rEt():null}OXt(){return GS.get(this).GW().kNt().map((t=>t.rEt()))}RXt(t){return IS.ue(t),GS.get(this).CXt(t).rEt()}PXt(t){IS.ue(t),GS.get(this).GXt(t)}kXt(t,s){if(IS.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return GS.get(this).DXt(t,s).XY()}FXt(t,s){if(IS.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");GS.get(this).NXt(t,s)}}}{const _S=self.Cs,DS=self.ks,ES=0,NS=1,AS=2,LS=3,OS=_S.Qn(_S.Rect),RS=_S.Qn(_S.Gu),PS=_S.Qn(_S.Ga),kS=1,FS=2,jS=4;_S._j.Unt.Instance=class extends _S.e_t{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[ES],e=s[NS],n=s[AS],r=s[LS]),this.jXt=this.sdt.FNt(e)||this.sdt.RNt()[0],this.zXt=_S.Xn(n,0,this.jXt.VY()-1),this.BXt=this.jXt.tEt(this.zXt);const h=this.BXt.sV();this.UXt=h.lI(),this.WXt=h.tN(),this.QXt=h.m_t(),this.o_t(),t.JAt(FS,!0),t.JAt(kS,this.jXt.FY()>=0),this.JXt=Math.abs(this.jXt.FY()),this.YXt=this.jXt.QY(),this.VXt=_S.Qn(_S.Kf),this.HXt=0,this.qXt=0,this.XXt="",this.ZXt=-1,this.KXt="",this.$Xt=0;const o=this.oj();this.tZt=o.iJ(),o.AU(i),o.MJ(r),o.QQ(this.BXt.WQ()),o.VQ(this.BXt.YQ()),o.zRt(this.BXt.cV()),o.FQ(),1===this.sdt.PNt()&&1===this.sdt.RNt()[0].VY()||0===this.JXt||this.HGt()}Jn(){this.jXt=null,this.BXt=null,this.UXt=null,this.VXt=null,super.Jn()}c_t(){return this.BXt.sV()}Sit(){return!0}rK(){this.UXt=null}l_t(){this.xXt()}Fx(t){const s=this.UXt;if(null===s)return;t.rL(s);const i=this.oj();i.hY()?this.sZt(i,t):this.iZt(i,t)}iZt(t,s){let i=this.tZt;this.kc.Dk()&&(i=t.LRt(i)),s.mL(i,this.QXt)}sZt(t,s){const i=t.ZRt();if(t.$Rt()){t.$Q(OS,RS,!1);let s=RS;this.kc.Dk()&&(s=t.LRt(s)),i.kx(t.oY(),s,this.QXt),t.KRt(!1)}i.Fx(s)}eZt(){return this.VXt.Js()}nZt(){return this.fi.YAt(FS)}rZt(t){this.fi.JAt(FS,t)}hZt(){return this.fi.YAt(kS)}oZt(t){this.fi.JAt(kS,t)}aZt(){return this.fi.YAt(jS)}uZt(t){this.fi.JAt(jS,t)}f8(){this.KXt&&this.lZt(),this.ZXt>=0&&this.cZt();const t=this.JXt;if(!this.nZt()||0===t)return void this.AGt();const s=this.kc.oF(this.fi);this.VXt.Fl(s);const i=this.eZt(),e=this.BXt,n=e.iV()/t;if(i<this.HXt+n)return;const r=this.jXt,h=this.YXt,o=r.VY(),a=r.UY(),u=r.zY(),l=r.YY();this.hZt()?this.zXt++:this.zXt--,this.HXt+=n,this.zXt>=o&&(l?(this.oZt(!1),this.zXt=o-2):u?this.zXt=h:(this.qXt++,this.qXt>=a?this.fZt(!1):this.zXt=h)),this.zXt<0&&(l?(this.zXt=1,this.oZt(!0),u||(this.qXt++,this.qXt>=a&&this.fZt(!0))):u?this.zXt=h:(this.qXt++,this.qXt>=a?this.fZt(!0):this.zXt=h)),this.zXt=_S.Xn(this.zXt,0,o-1);const c=r.tEt(this.zXt);i>this.HXt+c.iV()/t&&(this.HXt=i),this.dZt(e,c)}fZt(t){this.zXt=t?0:this.jXt.VY()-1,this.rZt(!1),this.XXt=this.jXt._c(),this.uZt(!0),this.GGt("animationend",!1,{animationName:this.XXt}),this.uQ(_S._j.Unt.Cj.pZt),this.uQ(_S._j.Unt.Cj.mZt),this.uZt(!1),this.qXt=0}dZt(t,s,i){if(t===s)return;const e=this.oj(),n=t.sV(),r=s.sV(),h=n.Bg(),o=n.Zg(),a=r.Bg(),u=r.Zg();i&&i.gZt?i.gZt(e,h,o,a,u):(h!==a&&e.Hg(e.Bg()*(a/h)),o!==u&&e.Ug(e.Zg()*(u/o))),e.QQ(s.WQ()),e.VQ(s.YQ()),e.zRt(s.cV()),e.FQ(),this.BXt=s,this.UXt=r.lI(),this.WXt=r.tN(),this.QXt=r.m_t();const l=this.UV().Pnt();for(let i=0,e=l.length;i<e;++i)l[i].sDt(t,s);this.GGt("framechange",!1,{animationName:this.jXt._c(),yZt:this.zXt}),this.uQ(_S._j.Unt.Cj.MZt),this.kc.pj()}wZt(t){this.rZt(!0),this.HXt=this.eZt(),1===t&&0!==this.zXt&&(this.ZXt=0,this.aZt()||this.cZt()),this.HGt()}SZt(t,s,i){this.KXt=t,this.$Xt=s,this.HGt(),!i&&this.aZt()||this.lZt()}TZt(){return this.jXt}bZt(){return this.KXt?this.KXt:this.jXt._c()}_Xt(t){_S.Ze(t,this.bZt())&&this.SZt(this.sdt.UNt()._c(),1,!0)}xZt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.sdt.FNt(this.bZt());if(!s)return;if(-1===(t=s.eEt(t)))return}isFinite(t)&&(this.ZXt=t,this.aZt()||this.cZt())}EXt(){if(this.KXt||-1!==this.ZXt)return;const t=this.BXt,s=this.jXt.tEt(_S.Xn(this.zXt,0,this.jXt.VY()-1));t!==s&&this.dZt(t,s),this.jXt.VY()>1&&this.JXt>0&&this.HGt()}vZt(){return this.zXt}IZt(){return this.BXt.mV()}CZt(t){this.JXt=Math.abs(t),this.oZt(t>=0),this.JXt>0&&this.HGt()}GZt(){return this.hZt()?this.JXt:-this.JXt}_Zt(t){"string"==typeof t&&-1===(t=this.jXt.eEt(t))||(t=_S.Xn(Math.floor(t),0,this.jXt.VY()-1),this.YXt=t)}DZt(){return this.YXt}lZt(t){const s=this.BXt,i=this.sdt.FNt(this.KXt);if(this.KXt="",!i)return;if(i===this.jXt&&this.nZt())return;this.jXt=i,this.oZt(i.FY()>=0),this.JXt=Math.abs(i.FY()),this.YXt=i.QY(),this.zXt=_S.Xn(this.zXt,0,this.jXt.VY()-1),1===this.$Xt&&(this.zXt=0),this.rZt(!0),this.HXt=this.eZt();const e=this.jXt.tEt(this.zXt);this.dZt(s,e,t)}cZt(t){const s=this.BXt,i=this.zXt;if(this.zXt=_S.Xn(Math.floor(this.ZXt),0,this.jXt.VY()-1),this.ZXt=-1,!t&&i===this.zXt)return;const e=this.jXt.tEt(this.zXt);this.dZt(s,e),this.HXt=this.eZt()}xXt(){const t=this.BXt.sV();this.UXt=t.lI(),this.WXt=t.tN(),this.QXt=t.m_t(),this.oj().KRt(!0)}lI(){return this.UXt}tN(){return this.WXt}m_t(){return this.QXt}nV(){return this.BXt.nV()}evt(t){const s=this.BXt,i=this.oj();let e=null;if("string"==typeof t)e=s.uV(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.aV(t-1)}let n=i.ZQ();if(!e)return[i.Wb(),i.Yb(),n];if(PS.m(e.gEt()),i.hY()){const[t,s,e]=i.oY().Qx(PS.Aa(),PS.Oa());PS.set(t,s),n+=e}return PS.offset(-s.WQ(),-s.YQ()),PS.scale(i.Bg(),i.Zg()),PS.rotate(i.XB()),PS.offset(i.Wb(),i.Yb()),[PS.Aa(),PS.Oa(),n]}EZt(){return this.oj().JRt().dl()}NZt(t){t=Math.floor(t);const s=this.oj(),i=s.JRt(),e=i.dl();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.fl();return[n[2*t+0]+s.Wb(),n[2*t+1]+s.Yb()]}KGt(){const t=_S._j.Unt.rrt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.jXt._c(),AZt:s=>this.t_t(t.LZt,s,0)},{name:s+".current-frame",value:this.zXt,AZt:s=>this.t_t(t.OZt,s)},{name:s+".is-playing",value:this.nZt(),AZt:s=>s?this.t_t(t.RZt,0):this.t_t(t.PZt)},{name:s+".speed",value:this.JXt,AZt:s=>this.t_t(t.kZt,s)},{name:s+".repeats",value:this.qXt,AZt:t=>this.qXt=t}]}]}ix(){const t={a:this.jXt.I0()};0!==this.HXt&&(t.fs=this.HXt);const s=this.eZt();0!==s&&(t.at=s),0!==this.zXt&&(t.f=this.zXt),0!==this.JXt&&(t.cas=this.JXt),1!==this.qXt&&(t.ar=this.qXt),0!==this.YXt&&(t.rt=this.YXt),this.nZt()||(t.ap=this.nZt()),this.hZt()||(t.af=this.hZt());const i=this.oj();return i.yJ()&&(t.ce=i.yJ()),t}nx(t){const s=this.GW().jNt(t.a);s&&(this.jXt=s),this.HXt=t.hasOwnProperty("fs")?t.fs:0,this.VXt.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.zXt=_S.Xn(i,0,this.jXt.VY()-1),this.JXt=t.hasOwnProperty("cas")?t.cas:0,this.qXt=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.YXt=_S.Xn(e,0,this.jXt.VY()-1),this.rZt(!t.hasOwnProperty("ap")||!!t.ap),this.oZt(!t.hasOwnProperty("af")||!!t.af);const n=this.jXt.tEt(this.zXt);this.BXt=n,this.xXt();const r=this.oj();r.QQ(n.WQ()),r.VQ(n.YQ()),r.zRt(n.cV()),r.MJ(!!t.ce),this.nZt()&&this.HGt()}Wrt(t){const s=this.oj();switch(t){case LS:return s.yJ();case AS:return _S.Xn(this.zXt,0,this.jXt.VY()-1);case NS:return this.jXt._c()}}qrt(t,s,i){const e=this.oj();switch(t){case LS:e.MJ(!!s);break;case AS:{this.rZt(!1);const t=this.jXt.VY()-1,e=s=_S.Xn(s,0,t),n=this.jXt.tEt(this.zXt),r=this.jXt.tEt(e);this.dZt(n,r,i),this.zXt=_S.Xn(e,0,t);break}case NS:this.KXt=s,this.lZt(i),this.jXt.VY()>1&&this.jXt.FY()>0?this.HGt():this.AGt()}}lGt(){return self.FZt}};const zS=new WeakMap,BS=new Map([["current-frame",0],["beginning",1]]);self.FZt=class extends self.cY{constructor(){super(),zS.set(this,self.IW.EW().gY())}eV(){return zS.get(this).nV()}rV(t){return this.hV(t)[0]}oV(t){return this.hV(t)[1]}jZt(t){return this.hV(t)[2]}hV(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return zS.get(this).evt(t)}lV(){return zS.get(this).EZt()}fV(t){return DS.re(t),zS.get(this).NZt(t)[0]}pV(t){return DS.re(t),zS.get(this).NZt(t)[1]}dV(t){return DS.re(t),zS.get(this).NZt(t)}zZt(){zS.get(this).rZt(!1)}BZt(t="current-frame"){DS.ue(t);const s=BS.get(t);if(void 0===s)throw new Error("invalid mode");zS.get(this).wZt(s)}UZt(t,s="beginning"){DS.ue(t),DS.ue(s);const i=BS.get(s);if(void 0===i)throw new Error("invalid mode");const e=zS.get(this);if(!e.GW().FNt(t))throw new Error(`animation name "${t}" does not exist`);e.SZt(t,i)}LXt(t){DS.ue(t);const s=zS.get(this).GW().FNt(t);return s?s.rEt():null}get animation(){return zS.get(this).TZt().rEt()}get animationName(){return zS.get(this).bZt()}set yZt(t){DS.re(t),zS.get(this).xZt(t)}get yZt(){return zS.get(this).vZt()}set WZt(t){DS.ue(t),zS.get(this).xZt(t)}get WZt(){return zS.get(this).IZt()}set QZt(t){DS.re(t),zS.get(this).CZt(t)}get QZt(){return zS.get(this).GZt()}set JZt(t){DS.re(t),zS.get(this)._Zt(t)}get JZt(){return zS.get(this).DZt()}get imageWidth(){return zS.get(this).c_t().Bg()}get imageHeight(){return zS.get(this).c_t().Zg()}YZt(){const t=zS.get(this).c_t();return[t.Bg(),t.Zg()]}async VZt(t){DS.Fe(t,Blob);const s=zS.get(this),i=s.Rj(),e=s.c_t(),n=_S.Qn(_S.SDt);if(n.ODt(i,t),await n.nX(i.lb(),{qx:i.Gk()}),s.Yn())return void n.Jn();e.RDt(n);const r=s.Bxt();r.bXt(),r.GW().yf().dispatchEvent(new _S.Event("animationframeimagechange")),i.pj()}HZt(t,s){DS.ue(s),zS.get(this).oj().DRt(!!t,s)}}}{const US=self.Cs;US._j.Unt.Cj={qZt(t){return US.Ze(this.bZt(),t)},XZt(t,s){return US.compare(this.zXt,t,s)},ZZt(t,s){if("string"!=typeof s)return!1;const i=this.BXt.mV();return US.compare(i.toLowerCase(),t,s.toLowerCase())},KZt(t,s){return US.compare(this.GZt(),t,s)},mZt(t){return US.Ze(this.XXt,t)},pZt:()=>!0,MZt:()=>!0,$Zt(){return this.oj().Bg()<0},tKt(){return this.oj().Zg()<0},sKt:()=>!0,iKt:()=>!0,yJ(){return this.oj().yJ()}}}{const WS=self.Cs;WS._j.Unt.rrt={eKt(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.evt(i),o=this.kc.OB(t,s,r,h,e,n);if(!o)return;if(e&&s.RB(o),t.MB().Kz()){const t=o.oj();t.qB(this.oj().XB()),t.FQ()}const a=this.kc.Fk();a.PB(!0),o.kB(),a.PB(!1),t!==this.kc.xmt().GW()&&this.NGt.IXt(t,o,e)},PZt(){this.rZt(!1)},RZt(t){this.wZt(t)},LZt(t,s){this.SZt(t,s)},OZt(t){this.xZt(t)},kZt(t){this.CZt(t)},nKt(t){this._Zt(t)},rKt(t,s){try{0===t?this.Bxt().CXt(s):this.Bxt().GXt(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},hKt(t,s,i){try{0===t?this.Bxt().DXt(s,i):this.Bxt().NXt(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},oKt(t){const s=this.oj(),i=s.Bg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Hg(e),s.FQ())},aKt(t){const s=this.oj(),i=s.Zg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Ug(e),s.FQ())},VB(t){const s=this.BXt.sV(),i=this.oj(),e=i.Bg()<0?-1:1,n=i.Zg()<0?-1:1,r=s.Bg()*t*e,h=s.Zg()*t*n;i.Bg()===r&&i.Zg()===h||(i.xE(r,h),i.FQ())},async uKt(t,s,i){const e=this.BXt.sV(),n=this.oj(),r=this.kc,h=this.NGt;if(e.vZ()===t)return 0===s&&(n.xE(e.Bg(),e.Zg()),n.FQ()),void this.uQ(WS._j.Unt.Cj.sKt);const o=WS.Qn(WS.SDt);try{if(await o.LDt(r,t),!o.$Z())throw new Error("image failed to load");if(this.Yn())return void o.Jn();await o.nX(r.lb(),{qx:r.Gk()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Yn()||this.uQ(WS._j.Unt.Cj.iKt))}this.Yn()?o.Jn():(e.RDt(o),h.bXt(),h.GW().yf().dispatchEvent(new WS.Event("animationframeimagechange")),r.pj(),0===s&&(n.xE(e.Bg(),e.Zg()),n.FQ()),await this.vj(WS._j.Unt.Cj.sKt))},lKt(t){this.oj().MJ(t)},DRt(t,s){this.oj().DRt(0===t,s)},cKt(t){this.oj().Ab(t),this.kc.pj()}}}self.Cs._j.Unt.hrt={fKt(){return this.vZt()},dKt(){return this.IZt()},pKt(){return this.jXt.VY()},mKt(){return this.jXt._c()},gKt(){return this.GZt()},yKt(){return this.jXt.FY()},MKt(t){return this.evt(t)[0]},wKt(t){return this.evt(t)[1]},SKt(t){return this.evt(t)[2]},TKt(){return this.nV()},bKt(){return this.c_t().Bg()},xKt(){return this.c_t().Zg()},vKt(t){return this.NZt(t)[0]},IKt(t){return this.NZt(t)[1]},CKt(){return this.EZt()}};{const QS=self.Cs;QS._j.Text=class extends QS.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{const JS=self.Cs;JS._j.Text.eNt=class extends JS.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}m4(t){}T4(){}}}{const YS=self.Cs,VS=self.ks,HS=[0,0,0],qS=0,XS=1,ZS=2,KS=3,$S=4,tT=5,sT=6,iT=7,eT=8,nT=9,rT=10,hT=11,oT=12,aT=13,uT=15,lT=["left","center","right"],cT=["top","center","bottom"],fT=["ltr","rtl"],dT=["word","cjk","character"],pT=new YS.Rect,mT=new YS.Gu,gT=new YS.xo,yT=YS.Qn(YS.Ga),MT=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);YS._j.Text.Instance=class extends YS.e_t{constructor(t,s){if(super(t),this.Fc="",this.GKt=!0,this._Kt="Arial",this.DKt=12,this.EKt=0,this.aD=!1,this.uD=!1,this.Db=YS.Qn(YS.xo),this.mD=0,this.gD=0,this.wD="word",this.SD=0,this.NKt="auto",this.AKt=1,this.LKt=null,this.OKt="",this.RKt=!1,this.PKt=!1,this.kKt=null,this.FKt=-1,this.jKt=-1,this.zKt=0,this.BKt=YS.Qn(YS.OM.UT,this.kc.lb(),{timeout:5}),this.BKt.VD=()=>this.kc.pj(),this.UKt=()=>this.WKt(),this.QKt=!1,s){this.Fc=s[qS],this.GKt=!!s[XS],this._Kt=s[ZS],this.DKt=s[KS],this.EKt=s[$S],this.aD=!!s[tT],this.uD=!!s[sT],this.mD=s[eT],this.gD=s[nT],this.wD=dT[s[rT]],this.SD=s[hT],this.JKt(this.kc.cq(s[oT]));const t=s[iT];this.Db.Do(t[0],t[1],t[2]),this.oj().AU(s[aT]),this.PKt=!!s[uT]}this.YKt(),this.VKt()}Jn(){this.JKt(null),this.HKt(),this.kKt&&(this.kKt.Jn(),this.kKt=null),this.BKt.Jn(),this.BKt=null,super.Jn()}YKt(){const t=this.BKt;t.Bc(this.Fc),t.ZD(this.GKt),this.BKt.sD()&&this.LKt?this.BKt.jg(this.Rj().bJt(this.LKt)):this.BKt.jg(null),t.KD("nearest"!==this.kc.Gk()),t.$D(this._Kt),t.eE(this.EKt),t.rE(this.aD),t.oE(this.uD),t.Lb(this.Db),t.pE(lT[this.mD]),t.gE(cT[this.gD]),t.ME(this.wD),t.SE(fT[this.SD])}qKt(){const t=this.oj();this.BKt.tE(this.DKt),this.BKt.iE(t.XOt());const s=t.aj();let i;"auto"===this.NKt?i=s.W1(t.ZQ()):"fixed"===this.NKt&&(i=this.AKt),t.hY()&&i!==this.BKt.vE()&&t.KRt(!0),this.BKt.xE(t.Bg(),t.Zg(),i)}JKt(t){t&&(t.y0()||t.MB().constructor!==YS._j.Unt)||t!==this.LKt&&(this.LKt&&this.LKt.yf().removeEventListener("animationframeimagechange",this.UKt),this.LKt=t,this.LKt&&this.LKt.yf().addEventListener("animationframeimagechange",this.UKt),this.YKt(),this.RKt=!1,this.kc.pj())}WKt(){this.kc.xJt(this.LKt),this.kc.pj(),this.QKt=!0}VKt(){if(this.PKt){let t=this.Fc;this.GKt&&(t=YS.dn.Lg(t)),this.kKt?this.kKt.Bc(t):this.kKt=YS.Qn(YS.Pc,this.kc,t)}else this.kKt&&(this.kKt.Jn(),this.kKt=null)}Fx(t){const s=this.oj();this.qKt(),this.QKt&&(this.QKt=!1,this.BKt.sD()&&this.LKt&&this.BKt.jg(this.Rj().bJt(this.LKt)));const i=this.BKt.lI();if(!i)return;const e=s.aj();if(0===s.XB()&&0===e.XB()&&0===s.ZQ()&&!s.hY()&&e.e1()){const n=s.iJ(),[r,h]=e.bW(n.Fr(),n.jr()),[o,a]=e.bW(n.Ur(),n.Wr()),u=r-Math.round(r),l=h-Math.round(h);pT.set(r,h,o,a),pT.offset(-u,-l),mT.Hu(pT);const[c,f]=t.wL(t.FL());this.kc.bj().fX(t,c,f),t.rL(i),t.$S(mT,this.BKt.tN()),e.pX(t)}else t.rL(i),s.hY()?this.sZt(s,t):this.iZt(s,t)}iZt(t,s){let i=t.iJ();this.kc.Dk()&&(i=this.XKt(i)),s.$S(i,this.BKt.tN())}sZt(t,s){const i=t.ZRt();if(t.$Rt()){t.$Q(pT,mT,!1);let s=mT;this.kc.Dk()&&(s=this.XKt(s)),i.kx(t.oY(),s,this.BKt.tN()),t.KRt(!1)}i.Fx(s)}XKt(t){const s=t.Fr()-Math.round(t.Fr()),i=t.jr()-Math.round(t.jr());return 0===s&&0===i?t:(mT.m(t),mT.offset(-s,-i),mT)}f_t(){const t=this.BKt.lI();return t?[t.Bg(),t.Zg()]:[100,100]}d_t(){return this.BKt.tN()}g_t(){return!1}ix(){const t={t:this.Fc,c:this.Db.toJSON(),fn:this._Kt,ps:this.DKt};return this.GKt&&(t.bbc=this.GKt),0!==this.mD&&(t.ha=this.mD),0!==this.gD&&(t.va=this.gD),"word"!==this.wD&&(t.wr=this.wD),0!==this.EKt&&(t.lho=this.EKt),this.aD&&(t.b=this.aD),this.uD&&(t.i=this.uD),-1!==this.jKt&&(t.tw={st:this.FKt,en:this.jKt,l:this.zKt}),this.LKt&&(t.ioc=this.LKt.I0()),"fixed"===this.NKt&&(t.fs=this.AKt),t}nx(t){if(this.HKt(),this.Fc=t.t,this.Db.ya(t.c),this._Kt=t.fn,this.DKt=t.ps,this.GKt=!!t.hasOwnProperty("bbc")&&t.bbc,this.mD=t.hasOwnProperty("ha")?t.ha:0,this.gD=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.wD="boolean"==typeof s?s?"word":"character":s}else this.wD="word";if(this.EKt=t.hasOwnProperty("lho")?t.lho:0,this.aD=!!t.hasOwnProperty("b")&&t.b,this.uD=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.FKt=s.st,this.jKt=s.en,this.zKt=s.l}if(t.hasOwnProperty("ioc")){const s=this.Rj().cq(t.ioc);s&&this.JKt(s)}else this.JKt(null);t.hasOwnProperty("fs")?(this.NKt="fixed",this.AKt=t.fs):this.NKt="auto",this.YKt(),this.VKt(),this.RKt=!1,-1!==this.jKt&&this.HGt()}Wrt(t){switch(t){case qS:return this.bE();case XS:return this.GKt;case ZS:return this.ZKt();case KS:return this.KKt();case $S:return this.$Kt();case tT:return this.t$t();case sT:return this.s$t();case iT:return HS[0]=this.Db.ko(),HS[1]=this.Db.Fo(),HS[2]=this.Db.jo(),HS;case eT:return this.i$t();case nT:return this.e$t();case rT:return this.n$t();case uT:return this.r$t()}}qrt(t,s){switch(t){case qS:this.h$t(s);break;case XS:if(this.GKt===!!s)return;this.GKt=!!s,this.YKt();break;case ZS:this.o$t(s);break;case KS:this.a$t(s);break;case $S:this.u$t(s);break;case tT:this.l$t(s);break;case sT:this.c$t(s);break;case iT:const t=this.Db,i=s;if(t.ko()===i[0]&&t.Fo()===i[1]&&t.jo()===i[2])return;this.Db.Do(i[0],i[1],i[2]),this.YKt();break;case eT:this.f$t(s);break;case nT:this.d$t(s);break;case rT:this.p$t(s)}}$Gt(t,s,i,e){0===s&&0===i&&0===e||t!==iT||(this.Db.Eo(s,i,e),this.YKt())}h$t(t){this.Fc!==t&&(this.Fc=t,this.BKt.Bc(t),this.VKt(),this.RKt=!1,this.kc.pj())}bE(){return this.Fc}m$t(t,s){this.qKt(),this.h$t(t),this.FKt=this.kc.dF(),this.jKt=this.FKt+s/this.UV().JW(),this.zKt=this.BKt._E(),this.BKt.uE(0),this.HGt()}HKt(){this.FKt=-1,this.jKt=-1,this.zKt=0,this.BKt.uE(-1),this.AGt()}g$t(){-1!==this.jKt&&(this.HKt(),this.uQ(YS._j.Text.Cj.y$t),this.kc.pj())}o$t(t){this._Kt!==t&&(this._Kt=t,this.BKt.$D(t),this.kc.pj())}ZKt(){return this._Kt}l$t(t){t=!!t,this.aD!==t&&(this.aD=t,this.BKt.rE(t),this.kc.pj())}t$t(){return this.aD}c$t(t){t=!!t,this.uD!==t&&(this.uD=t,this.BKt.oE(t),this.kc.pj())}s$t(){return this.uD}a$t(t){this.DKt!==t&&(this.DKt=t,this.kc.pj())}KKt(){return this.DKt}M$t(t){this.Db.Qo(t)||(this.Db.Po(t),this.BKt.Lb(this.Db),this.kc.pj())}w$t(){return this.Db}u$t(t){this.EKt!==t&&(this.EKt=t,this.YKt(),this.kc.pj())}$Kt(){return this.EKt}f$t(t){this.mD!==t&&(this.mD=t,this.YKt(),this.kc.pj())}i$t(){return this.mD}d$t(t){this.gD!==t&&(this.gD=t,this.YKt(),this.kc.pj())}e$t(){return this.gD}S$t(t){this.p$t(dT[t])}p$t(t){this.wD!==t&&(this.wD=t,this.YKt(),this.kc.pj())}n$t(){return this.wD}T$t(t){this.SD!==t&&(this.SD=t,this.YKt(),this.kc.pj())}b$t(){return this.SD}x$t(t){this.PKt=!!t,this.VKt()}r$t(){return this.PKt}v$t(t){this.NKt!==t&&(this.NKt=t,this.kc.pj())}I$t(){return this.NKt}C$t(t){this.AKt!==t&&(this.AKt=t,"fixed"===this.NKt&&this.kc.pj())}G$t(){return this.AKt}_$t(){return this.qKt(),this.BKt.IE()}D$t(){return this.qKt(),this.BKt.GE()}E$t(t,s){this.qKt();const i=this.oj();yT.set(t-i.Wb(),s-i.Yb()),yT.rotate(-i.XB()),yT.offset(i.Bg()*i.WQ(),i.Zg()*i.YQ()),yT.Mt(i.Bg(),i.Zg()),yT.scale(this.BKt.Bg(),this.BKt.Zg());const e=this.BKt.EE(yT.Aa(),yT.Oa());if(e){const t=e.Wy("tag");if(t)return t.Gg}return""}N$t(t,s,i){const e=this.E$t(s,i);return e&&YS.Ze(t,e)}A$t(t,s){this.qKt(),s=Math.floor(s);const i=this.BKt.AE(t,s);if(!i)return null;const e=this.oj(),n=this.BKt.fE(),r=i.Fy(),h=i.zy()-(i.Zg()-i.$g())*n,o=i.Bg()*n/this.BKt.Bg()*e.Bg(),a=i.Zg()*n/this.BKt.Zg()*e.Zg();return yT.set(r,h),yT.Mt(this.BKt.Bg(),this.BKt.Zg()),yT.scale(e.Bg(),e.Zg()),yT.offset(-e.Bg()*e.WQ(),-e.Zg()*e.YQ()),yT.rotate(e.XB()),yT.offset(e.Wb(),e.Yb()),{x:yT.Aa(),y:yT.Oa(),width:o,height:a}}L$t(t){return this.qKt(),this.BKt.LE(t)}O$t(t){let s=MT.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}R$t(t,s){let i=MT.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async P$t(){if(this.RKt)return this.OKt;const t=new YS.dn(this.Fc,{fg:!0}).Ig(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.ZKt()}';`),this.t$t()&&e.push("font-weight: bold;"),this.s$t()&&e.push("font-style: italic;"),"character"===this.n$t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.LKt?this.Rj().bJt(this.LKt):null;if(this.LKt){const i=YS.Qn(YS.Wd),e=[],r=new Map;for(const s of t)if(s.qg()){const t=s.qy(n);if(t){const s=t.EM().sV().zDt();if(r.has(s))continue;r.set(s,null),e.push(i.Fl((async()=>{const t=await s.uK();r.set(s,t)})))}}await Promise.all(e);const h=[];for(const e of t)if(e.qg()){const t=e.qy(n);if(t){const e=t.EM(),n=e.sV().zDt();h.push(i.Fl((async()=>{const i=await e.sV().UDt(r.get(n));s.set(t,i)})))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.Jy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.O$t(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.R$t(s,e));if(e.Vg()&&(i+=YS._m(YS.Cm(e.gy().join("")),"\n","<br>")),e.qg()&&n){const r=e.qy(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.kc.Gk()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Hy()}" width="${r.Bg()}" height="${r.Zg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.O$t(t);return i+="</span>",this.OKt=i,this.RKt=!0,this.OKt}f8(){const t=this.kc.dF();if(t>=this.jKt)this.HKt(),this.uQ(YS._j.Text.Cj.y$t),this.kc.pj();else{let s=YS.mr(this.FKt,this.jKt,t,0,this.zKt);s=Math.floor(s),s!==this.BKt.lE()&&(this.BKt.uE(s),this.kc.pj())}}KGt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.bE(),AZt:t=>this.h$t(t)},{name:t+".properties.font.name",value:this.ZKt(),AZt:t=>this.o$t(t)},{name:t+".properties.size.name",value:this.KKt(),AZt:t=>this.a$t(t)},{name:t+".properties.line-height.name",value:this.$Kt(),AZt:t=>this.u$t(t)},{name:t+".properties.bold.name",value:this.t$t(),AZt:t=>this.l$t(t)},{name:t+".properties.italic.name",value:this.s$t(),AZt:t=>this.c$t(t)}]}]}lGt(){return self.k$t}};const wT=new WeakMap,ST=new Map([["left",0],["center",1],["right",2]]),TT=new Map([["top",0],["center",1],["bottom",2]]),bT=["ltr","rtl"];self.k$t=class extends self.cY{constructor(){super(),wT.set(this,self.IW.EW().gY())}get text(){return wT.get(this).bE()}set text(t){VS.ue(t);const s=wT.get(this);s.HKt(),s.h$t(t)}F$t(t,s){VS.ue(t),VS.re(s);const i=wT.get(this);i.HKt(),i.m$t(t,s)}j$t(){wT.get(this).g$t()}set gX(t){VS.ue(t),wT.get(this).o$t(t)}get gX(){return wT.get(this).ZKt()}set MX(t){wT.get(this).l$t(t)}get MX(){return wT.get(this).t$t()}set wX(t){wT.get(this).c$t(t)}get wX(){return wT.get(this).s$t()}set yX(t){VS.re(t),wT.get(this).a$t(t)}get yX(){return wT.get(this).KKt()}set z$t(t){if(VS.ve(t),t.length<3)throw new Error("expected 3 elements");gT.Do(t[0],t[1],t[2]),wT.get(this).M$t(gT)}get z$t(){const t=wT.get(this).w$t();return[t.ko(),t.Fo(),t.jo()]}set lineHeight(t){VS.re(t),wT.get(this).u$t(t)}get lineHeight(){return wT.get(this).$Kt()}set bX(t){VS.ue(t);const s=ST.get(t);if(void 0===s)throw new Error("invalid mode");wT.get(this).f$t(s)}get bX(){return lT[wT.get(this).i$t()]}set verticalAlign(t){VS.ue(t);const s=TT.get(t);if(void 0===s)throw new Error("invalid mode");wT.get(this).d$t(s)}get verticalAlign(){return cT[wT.get(this).e$t()]}set xX(t){if(!dT.includes(t))throw new Error("invalid mode");wT.get(this).p$t(t)}get xX(){return wT.get(this).n$t()}set vX(t){VS.ue(t);const s=bT.indexOf(t);if(-1===s)throw new Error("invalid text direction");wT.get(this).T$t(s)}get vX(){return bT[wT.get(this).b$t()]}set B$t(t){wT.get(this).x$t(!!t)}get B$t(){return wT.get(this).r$t()}U$t(t){VS.re(t);const s=wT.get(this);s.v$t("fixed"),s.C$t(t)}W$t(){wT.get(this).v$t("auto")}get GX(){return wT.get(this)._$t()}get _X(){return wT.get(this).D$t()}Q$t(){const t=wT.get(this);return[t._$t(),t.D$t()]}J$t(t,s,i){return VS.ue(t),VS.re(s),VS.re(i),wT.get(this).N$t(t,s,i)}Y$t(t,s){return VS.re(t),VS.re(s),wT.get(this).E$t(t,s)}V$t(t,s=0){return VS.ue(t),VS.re(s),wT.get(this).A$t(t,s)}H$t(t){return VS.ue(t),wT.get(this).L$t(t)}q$t(t){const s=wT.get(this),i=s.Rj().cz(t);s.JKt(i)}X$t(){return wT.get(this).P$t()}}}{const xT=self.Cs;xT._j.Text.Cj={Z$t(t,s){return s?this.Fc===t:xT.Ze(this.Fc,t)},K$t(){return-1!==this.jKt},y$t:()=>!0,$$t(t,s,i){return this.N$t(t,s,i)}}}{const vT=self.Cs,IT=vT.Qn(vT.xo);vT._j.Text.rrt={Bc(t){this.HKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.h$t(t.toString())},t0t(t){this.HKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.h$t(this.Fc+t)},s0t(t,s){this.HKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.m$t(t.toString(),s)},i0t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this._Kt&&i===this.aD&&e===this.uD||(this.o$t(t),this.l$t(i),this.c$t(e))},tE(t){this.a$t(t)},e0t(t){IT.Ko(t),IT.Xn(),this.M$t(IT)},n0t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},cKt(t){this.oj().Ab(t),this.kc.pj()},r0t(){this.g$t()},eE(t){this.u$t(t)},h0t(t){this.f$t(t)},o0t(t){this.d$t(t)},a0t(t){this.S$t(t)},SE(t){this.T$t(t)},u0t(t){this.JKt(t)},l0t(){return this.P$t()},c0t(t){this.x$t(t)},f0t(t,s){this.v$t(["auto","fixed"][t]),this.C$t(s)}}}{const CT=self.Cs;CT._j.Text.hrt={Text(){return this.Fc},d0t(){return this.GKt?CT.dn.Lg(this.Fc):this.Fc},p0t(){return this._Kt},m0t(){return this.DKt},g0t(){return this._$t()},y0t(){return this.D$t()},M0t(){return this.EKt},w0t(t,s){return this.E$t(t,s)},S0t(t){return this.L$t(t)},T0t(t,s){const i=this.A$t(t,s);return i?i.x:0},b0t(t,s){const i=this.A$t(t,s);return i?i.y:0},x0t(t,s){const i=this.A$t(t,s);return i?i.width:0},v0t(t,s){const i=this.A$t(t,s);return i?i.height:0},I0t(){return this.OKt}}}{const GT=self.Cs;GT._j.C0t=class extends GT.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{const _T=self.Cs;_T._j.C0t.eNt=class extends _T.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{const DT=self.Cs;DT._j.C0t.Instance=class extends DT.DGt{constructor(t,s){if(super(t),this.G0t="",this._0t=0,this.D0t="",this.E0t=0,this.Rf=-1,this.N0t=new Map,this.A0t=null,this.L0t="",this.O0t=!1,this.R0t=null,this.P0t=null,this.k0t=null,this.lBt=this.kc.wz(),this.lBt){this.R0t=Ct("fs"),this.P0t=Ct("path");const t=self.process||nw.process;this.k0t=this.P0t.dirname(t.execPath)+"\\"}}Jn(){super.Jn()}async F0t(t,s,i){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,i),this.D0t=t,await this.vj(DT._j.C0t.Cj.j0t),this.D0t=t,await this.vj(DT._j.C0t.Cj.z0t)}async B0t(t){this.D0t=t,await this.vj(DT._j.C0t.Cj.U0t),this.D0t=t,await this.vj(DT._j.C0t.Cj.W0t)}async Q0t(t,s){s.lengthComputable&&(this.E0t=s.loaded/s.total,this.D0t=t,await this.vj(DT._j.C0t.Cj.J0t))}async Y0t(t,s){s.lengthComputable&&(this.E0t=s.loaded/s.total,this.D0t=t,await this.vj(DT._j.C0t.Cj.V0t))}H0t(t,s,i){if(!this.lBt)return void this.F0t(t,s,i);const e=this.R0t,n=this.k0t+s;e.existsSync(n)?e.readFile(n,{encoding:"utf8"},((i,e)=>{i?this.F0t(t,s,i):(this.G0t=e.replace(/\r\n/g,"\n"),this.B0t(t))})):this.F0t(t,s,i)}async q0t(t,s){const i=this.kc.ak(),e=this.A0t;this.A0t=null;try{if(e){const n=await i.pZ(s);e.X0t(n),this.G0t="",this._0t=0,this.B0t(t)}else{const e=await i.mZ(s);this.G0t=e.replace(/\r\n/g,"\n"),this._0t=0,this.B0t(t)}}catch(i){this.F0t(t,s,i)}}Z0t(t,s,i,e){return new Promise((n=>{const r=i=>{this.H0t(t,s,i),n()},h=this.A0t;this.A0t=null;try{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(this.G0t=h?"":(o.responseText||"").replace(/\r\n/g,"\n"),this._0t=o.status,o.status>=400)this.F0t(t,s,o.status+o.statusText);else{const s=this.G0t.length||h&&o.response instanceof ArrayBuffer;this.lBt&&!s||!this.lBt&&0===o.status&&!s||(h&&h.X0t(o.response),this.B0t(t))}n()}},o.onerror=r,o.ontimeout=r,o.onabort=r,o.onprogress=s=>this.Q0t(t,s),o.upload.onprogress=s=>this.Y0t(t,s),o.open(i,s),this.Rf>=0&&void 0!==o.timeout&&(o.timeout=this.Rf),o.responseType=h?"arraybuffer":"text",e&&!this.N0t.has("Content-Type")&&("string"!=typeof e?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[t,s]of this.N0t)try{o.setRequestHeader(t,s)}catch(i){console.error(`[Construct] AJAX: Failed to set header '${t}: ${s}': `,i)}if(this.N0t.clear(),this.L0t){try{o.overrideMimeType(this.L0t)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.L0t=""}this.O0t&&(o.withCredentials=!0,this.O0t=!1),e?o.send(e):o.send()}catch(t){r(t)}}))}KGt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this._0t},{name:t+".last-data",value:this.G0t}]}]}ix(){return{lastData:this.G0t,lastStatusCode:this._0t}}nx(t){this.G0t=t.lastData,this._0t=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.D0t="",this.E0t=0}}}{const ET=self.Cs;ET._j.C0t.Cj={W0t(t){return ET.Ze(this.D0t,t)},U0t:()=>!0,z0t(t){return ET.Ze(this.D0t,t)},j0t:()=>!0,J0t(t){return ET.Ze(this.D0t,t)},V0t(t){return ET.Ze(this.D0t,t)}}}{const NT=self.Cs;NT._j.C0t.rrt={async Request(t,s){this.kc.tBt()&&NT.Zh(s)&&this.kc.ak().fZ()?await this.q0t(t,s):await this.Z0t(t,s,"GET",null)},async K0t(t,s){this.kc.tBt()&&this.kc.ak().fZ()?await this.q0t(t,s):await this.Z0t(t,s,"GET",null)},async $0t(t,s,i,e){await this.Z0t(t,s,e,i)},async t1t(t,s,i,e){if(!i)return;const n=i.Ovt(this.fi);if(!n)return;const r=n.gY().s1t();await this.Z0t(t,s,e,r)},i1t(t){this.Rf=1e3*t},e1t(t,s){this.N0t.set(t,s)},n1t(t){if(!t)return;const s=t.Ovt(this.fi);s&&(this.A0t=s.gY())},r1t(t){this.L0t=t},h1t(t){this.O0t=!!t}}}self.Cs._j.C0t.hrt={o1t(){return this.G0t},a1t(){return this._0t},u1t(){return this.E0t},Tag(){return this.D0t}};{const AT=self.Cs,LT="text-input";AT._j.l1t=class extends AT.mGt{constructor(t){super(t,LT),this.wGt("click",((t,s)=>t.c1t(s))),this.wGt("dblclick",((t,s)=>t.f1t(s))),this.wGt("change",((t,s)=>t.d1t(s)))}Jn(){super.Jn()}}}{const OT=self.Cs;OT._j.l1t.eNt=class extends OT.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{const RT=self.Cs,PT=self.ks,kT=0,FT=1,jT=2,zT=3,BT=4,UT=5,WT=6,QT=7,JT=8,YT=9,VT=10,HT="text-input",qT=["text","password","email","number","tel","url","textarea","search"];RT._j.l1t.Instance=class extends RT.w_t{constructor(t,s){super(t,HT),this.Fc="",this.p1t="",this.m1t="",this.bSt=!0,this.g1t=!1,this.y1t=!1,this.Jc="text",this.x_t=!0,this.M1t=-1,this.jc="",this.w1t="",s&&(this.Fc=s[kT],this.p1t=s[FT],this.m1t=s[jT],this.oj().AU(s[zT]),this.bSt=s[BT],this.g1t=s[UT],this.y1t=s[WT],this.Jc=qT[s[QT]],this.x_t=s[JT],this.jc=s[YT],this.w1t=s[VT]),this.O_t({type:this.Jc,id:this.jc,className:this.w1t})}Jn(){super.Jn()}R_t(){return{text:this.Fc,placeholder:this.p1t,title:this.m1t,isEnabled:this.bSt,isReadOnly:this.g1t,spellCheck:this.y1t,maxLength:this.M1t}}async c1t(t){this.GGt("click",!0),await this.vj(RT._j.l1t.Cj.S1t)}async f1t(t){this.GGt("dblclick",!0),await this.vj(RT._j.l1t.Cj.T1t)}async d1t(t){this.Fc=t.text,this.GGt("change",!0),await this.vj(RT._j.l1t.Cj.b1t)}h$t(t){this.Fc!==t&&(this.Fc=t,this.F_t())}x1t(){return this.Fc}v1t(t){this.p1t!==t&&(this.p1t=t,this.F_t())}I1t(){return this.p1t}C1t(t){this.m1t!==t&&(this.m1t=t,this.F_t())}G1t(){return this.m1t}wIt(t){t=!!t,this.bSt!==t&&(this.bSt=t,this.F_t())}TIt(){return this.bSt}_1t(t){t=!!t,this.g1t!==t&&(this.g1t=t,this.F_t())}D1t(){return this.g1t}E1t(t){t=Math.max(+t,-1),this.M1t!==t&&(this.M1t=t,this.F_t())}N1t(){return this.M1t}A1t(){Promise.resolve().then((()=>this.N_t("scroll-to-bottom")))}Fx(t){}ix(){return{t:this.Fc,p:this.p1t,ti:this.m1t,e:this.bSt,r:this.g1t,sp:this.y1t,ml:this.M1t,type:this.Jc,id:this.jc}}nx(t){this.Fc=t.t,this.p1t=t.p,this.m1t=t.ti,this.bSt=t.e,this.g1t=t.r,this.y1t=t.sp,this.M1t=t.hasOwnProperty("ml")?t.ml:-1,this.Jc=t.type,this.jc=t.id,this.F_t()}Wrt(t){switch(t){case kT:return this.Fc;case FT:return this.p1t;case jT:return this.m1t;case BT:return this.bSt;case UT:return this.g1t;case WT:return this.y1t;case JT:return this.x_t}}qrt(t,s){switch(t){case kT:if(this.Fc===s)return;this.Fc=s,this.F_t();break;case FT:if(this.p1t===s)return;this.p1t=s,this.F_t();break;case jT:if(this.m1t===s)return;this.m1t=s,this.F_t();break;case BT:if(this.bSt===!!s)return;this.bSt=!!s,this.F_t();break;case UT:if(this.g1t===!!s)return;this.g1t=!!s,this.F_t();break;case WT:if(this.y1t===!!s)return;this.y1t=!!s,this.F_t();break;case JT:this.x_t=!!s}}KGt(){const t=RT._j.l1t.rrt,s="plugins.textbox";return[{title:s+".name",properties:[{name:s+".properties.text.name",value:this.Fc,AZt:s=>this.t_t(t.Bc,s)},{name:s+".properties.enabled.name",value:this.bSt,AZt:s=>this.t_t(t.yCt,s)},{name:s+".properties.read-only.name",value:this.g1t,AZt:s=>this.t_t(t.L1t,s)}]}]}lGt(){return self.O1t}};const XT=new WeakMap;self.O1t=class extends self.dY{constructor(){super(),XT.set(this,self.IW.EW().gY())}set text(t){PT.ue(t),XT.get(this).h$t(t)}get text(){return XT.get(this).x1t()}set placeholder(t){PT.ue(t),XT.get(this).v1t(t)}get placeholder(){return XT.get(this).I1t()}set R1t(t){PT.ue(t),XT.get(this).C1t(t)}get R1t(){return XT.get(this).G1t()}set isEnabled(t){XT.get(this).wIt(t)}get isEnabled(){return XT.get(this).TIt()}set P1t(t){XT.get(this)._1t(t)}get P1t(){return XT.get(this).D1t()}set maxLength(t){PT.re(t),XT.get(this).E1t(t)}get maxLength(){return XT.get(this).N1t()}k1t(){XT.get(this).A1t()}}}{const ZT=self.Cs;ZT._j.l1t.Cj={Z$t(t,s){return 0===s?ZT.Ze(this.Fc,t):this.Fc===t},b1t:()=>!0,S1t:()=>!0,T1t:()=>!0}}self.Cs._j.l1t.rrt={Bc(t){this.h$t(t.toString())},t0t(t){""!==t&&this.h$t(this.x1t()+t)},F1t(t){this.v1t(t)},j1t(t){this.C1t(t)},L1t(t){this._1t(0===t)},z1t(){this.A1t()},B1t(t){this.E1t(t)}},self.Cs._j.l1t.hrt={Text(){return this.x1t()},U1t(){return this.N1t()}};{const KT=self.Cs;KT._j.W1t=class extends KT.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{const $T=self.Cs;$T._j.W1t.eNt=class extends $T.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{let tb=function(t,s,i){if(s<t.length)sb.Mh(t,s);else if(s>t.length)if("function"==typeof i)for(let e=t.length;e<s;++e)t.push(i());else for(let e=t.length;e<s;++e)t.push(i)};0;const sb=self.Cs,ib=self.ks,eb=self.IW;sb._j.W1t.Instance=class extends sb.DGt{constructor(t,s){super(t),this.Q1t=10,this.J1t=1,this.Y1t=1,this.Pl=null,this.V1t=[],this.H1t=[],this.q1t=[],this.X1t=-1,s&&(this.Q1t=s[0],this.J1t=s[1],this.Y1t=s[2]),this.Pl=sb.bo(this.Q1t,(()=>sb.bo(this.J1t,(()=>sb.bo(this.Y1t,0)))))}Jn(){this.Pl=null,super.Jn()}Z1t(t,s,i){return t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t>=0&&t<this.Q1t&&s>=0&&s<this.J1t&&i>=0&&i<this.Y1t?this.Pl[t][s][i]:0}Set(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t>=0&&t<this.Q1t&&s>=0&&s<this.J1t&&i>=0&&i<this.Y1t&&(this.Pl[t][s][i]=e)}xE(t,s,i){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),t<0&&(t=0),s<0&&(s=0),i<0&&(i=0),this.Q1t===t&&this.J1t===s&&this.Y1t===i)return;this.Q1t=t,this.J1t=s,this.Y1t=i;const e=this.Pl;tb(e,t,(()=>sb.bo(s,(()=>sb.bo(i,0)))));for(let n=0;n<t;++n){tb(e[n],s,(()=>sb.bo(i,0)));for(let t=0;t<s;++t)tb(e[n][t],i,0)}}Bg(){return this.Q1t}Zg(){return this.J1t}N2(){return this.Y1t}K1t(t,s,i,e,n){for(;s>0;){const r=Math.floor(this.kc.FF()*s);if(--s,0===t){const t=this.Z1t(s,e,n),i=this.Z1t(r,e,n);this.Set(s,e,n,i),this.Set(r,e,n,t)}else if(1===t){const t=this.Z1t(i,s,n),e=this.Z1t(i,r,n);this.Set(i,s,n,e),this.Set(i,r,n,t)}else if(2===t){const t=this.Z1t(i,e,s),n=this.Z1t(i,e,r);this.Set(i,e,s,n),this.Set(i,e,r,t)}}}KGt(){const t="plugins.arr.debugger",s="plugins.arr.properties",i=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.Q1t,AZt:t=>this.xE(t,this.J1t,this.Y1t)},{name:s+".height.name",value:this.J1t,AZt:t=>this.xE(this.Q1t,t,this.Y1t)},{name:s+".depth.name",value:this.Y1t,AZt:t=>this.xE(this.Q1t,this.J1t,t)},{name:s+".elements.name",value:this.Q1t*this.J1t*this.Y1t}]}],e=[];if(1===this.J1t&&1===this.Y1t)for(let t=0;t<this.Q1t;++t)e.push({name:"$"+t,value:this.Pl[t][0][0],AZt:s=>this.Pl[t][0][0]=s});else for(let t=0;t<this.Q1t;++t)e.push({name:"$"+t,value:this.Pl[t].toString()});return e.length&&i.push({title:t+".array-data.title",properties:e}),i}$1t(){return JSON.stringify({c2array:!0,size:[this.Q1t,this.J1t,this.Y1t],data:this.Pl})}ix(){return{size:[this.Q1t,this.J1t,this.Y1t],data:this.Pl}}nx(t){const s=t.size;this.Q1t=s[0],this.J1t=s[1],this.Y1t=s[2],this.Pl=t.data}t2t(){return this.X1t>=0&&this.X1t<this.V1t.length?this.V1t[this.X1t]:0}s2t(){return this.X1t>=0&&this.X1t<this.H1t.length?this.H1t[this.X1t]:0}i2t(){return this.X1t>=0&&this.X1t<this.q1t.length?this.q1t[this.X1t]:0}lGt(){return self.e2t}};const nb=new WeakMap;self.e2t=class extends eb{constructor(){super(),nb.set(this,eb.EW().gY())}get width(){return nb.get(this).Bg()}get height(){return nb.get(this).Zg()}get depth(){return nb.get(this).N2()}YB(t,s=1,i=1){ib.re(t),ib.re(s),ib.re(i),nb.get(this).xE(t,s,i)}n2t(t,s=0,i=0){return ib.re(t),ib.re(s),ib.re(i),nb.get(this).Z1t(t,s,i)}r2t(t,s,i=0,e=0){if(ib.re(s),ib.re(i),ib.re(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");nb.get(this).Set(s,i,e,t)}}}{let rb=function(t,s,i,e,n,r){t.Sq(i),r.GW().EB().Ddt(r.UV()),s.Tq(e,n),t.bq(i)};0;const hb=self.Cs;hb._j.W1t.Cj={qxt(t,s,i){return hb.compare(this.Z1t(t,0,0),s,i)},h2t(t,s,i,e){return hb.compare(this.Z1t(t,s,0),i,e)},o2t(t,s,i,e,n){return hb.compare(this.Z1t(t,s,i),e,n)},a2t(t){const s=this.kc,i=s.Fk(),e=s.Qk(),n=e.fq(),r=s.Zk(),h=r.pq(),o=r.mq(e),a=++this.X1t,u=this.V1t,l=this.H1t,c=this.q1t,f=this.Q1t,d=this.J1t,p=this.Y1t;if(a===this.V1t.length?(u.push(0),l.push(0),c.push(0)):(u[a]=0,l[a]=0,c[a]=0),s.Mq(!1),0===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)for(let r=0;r<p;++r)u[a]=t,l[a]=s,c[a]=r,rb(i,e,n,h,o,this);else if(1===t)for(let t=0;t<f;++t)for(let s=0;s<d;++s)u[a]=t,l[a]=s,rb(i,e,n,h,o,this);else for(let t=0;t<f;++t)u[a]=t,rb(i,e,n,h,o,this);return s.Mq(!0),this.X1t--,r.Cq(),!1},u2t(t,s){return hb.compare(this.Z1t(this.t2t(),this.s2t(),this.i2t()),t,s)},l2t(t){const s=this.Q1t,i=this.J1t,e=this.Y1t,n=this.Pl;for(let r=0;r<s;++r)for(let s=0;s<i;++s)for(let i=0;i<e;++i)if(n[r][s][i]===t)return!0;return!1},Dl(){return 0===this.Q1t||0===this.J1t||0===this.Y1t},c2t(t,s,i){let e=0;switch(t){case 0:e=this.Q1t;break;case 1:e=this.J1t;break;case 2:e=this.Y1t}return hb.compare(e,s,i)}}}{let ob=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const i=t.toString(),e=s.toString();return i<e?-1:i>e?1:0}};0;const ab=self.Cs;ab._j.W1t.rrt={_l(t){const s=this.Q1t,i=this.J1t,e=this.Y1t,n=this.Pl;for(let r=0;r<s;++r)for(let s=0;s<i;++s)for(let i=0;i<e;++i)n[r][s][i]=t},xE(t,s,i){this.xE(t,s,i)},Qb(t,s){this.Set(t,0,0,s)},jQ(t,s,i){this.Set(t,s,0,i)},f2t(t,s,i,e){this.Set(t,s,i,e)},mq(t,s,i){const e=this.Q1t,n=this.J1t,r=this.Y1t,h=this.Pl;if(0===i){const i=ab.bo(n,(()=>ab.bo(r,s)));0===t?h.push(i):h.unshift(i),this.Q1t++}else if(1===i){for(let i=0;i<e;++i){const e=ab.bo(r,s);0===t?h[i].push(e):h[i].unshift(e)}this.J1t++}else{for(let i=0;i<e;++i)for(let e=0;e<n;++e)0===t?h[i][e].push(s):h[i][e].unshift(s);this.Y1t++}},Cq(t,s){const i=this.Q1t,e=this.J1t,n=this.Y1t,r=this.Pl;if(0===s){if(0===i)return;0===t?r.pop():r.shift(),this.Q1t--}else if(1===s){if(0===e)return;for(let s=0;s<i;++s)0===t?r[s].pop():r[s].shift();this.J1t--}else{if(0===n)return;for(let s=0;s<i;++s)for(let i=0;i<e;++i)0===t?r[s][i].pop():r[s][i].shift();this.Y1t--}},d2t(t){const s=this.Q1t,i=this.J1t,e=this.Y1t,n=this.Pl;if(0!==s&&0!==i&&0!==e)if(0===t)n.reverse();else if(1===t)for(let t=0;t<s;++t)n[t].reverse();else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].reverse()},p2t(t){const s=this.Q1t,i=this.J1t,e=this.Y1t,n=this.Pl;if(0!==s&&0!==i&&0!==e)if(0===t)n.sort(((t,s)=>ob(t[0][0],s[0][0])));else if(1===t)for(let t=0;t<s;++t)n[t].sort(((t,s)=>ob(t[0],s[0])));else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].sort(ob)},m2t(t){const s=this.Q1t,i=this.J1t,e=this.Y1t,n=this.Pl;if(0!==s&&0!==i&&0!==e)if(0===t)n.sort(((t,s)=>{for(let e=0;e<i;++e){const i=ob(t[e][0],s[e][0]);if(0!==i)return i}return 0}));else if(1===t)for(let t=0;t<i;++t){const i=[];for(let e=0;e<s;++e)i.push(n[e][t]);i.sort(((t,s)=>ob(t[0],s[0])));for(let e=0;e<s;++e)n[e][t]=i[e]}else if(2===t){const t=[];for(let s=0;s<i;++s)t.push(s);t.sort(((t,i)=>{for(let e=0;e<s;++e){const s=ob(n[e][t],n[e][i]);if(0!==s)return s}return 0}));for(let i=0;i<s;++i){let s=[];for(const e of t)s.push(n[i][e]);n[i]=s}}else if(3===t)for(let t=0;t<s;++t)n[t].sort(((t,s)=>ob(t[0],s[0])));else for(let t=0;t<s;++t)for(let s=0;s<i;++s)n[t][s].sort(ob)},g2t(t){const s=this.Q1t,i=this.J1t,e=this.Y1t;if(0!==s&&0!==i&&0!==e)if(0===t)for(let n=0;n<i;++n)for(let i=0;i<e;++i)this.K1t(t,s,0,n,i);else if(1===t)for(let n=0;n<s;++n)for(let s=0;s<e;++s)this.K1t(t,i,n,0,s);else for(let n=0;n<s;++n)for(let s=0;s<i;++s)this.K1t(t,e,n,s,0)},El(t,s){if((t=Math.floor(t))<0)return;const i=this.Q1t,e=this.J1t,n=this.Y1t,r=this.Pl;if(0===s){if(t>=i)return;r.splice(t,1),this.Q1t--}else if(1===s){if(t>=e)return;for(let s=0;s<i;++s)r[s].splice(t,1);this.J1t--}else{if(t>=n)return;for(let s=0;s<i;++s)for(let i=0;i<e;++i)r[s][i].splice(t,1);this.Y1t--}},wK(t,s,i){if((s=Math.floor(s))<0)return;const e=this.Q1t,n=this.J1t,r=this.Y1t,h=this.Pl;if(0===i){if(s>e)return;h.splice(s,0,ab.bo(n,(()=>ab.bo(r,t)))),this.Q1t++}else if(1===i){if(s>n)return;for(let i=0;i<e;++i)h[i].splice(s,0,ab.bo(r,t));this.J1t++}else{if(s>r)return;for(let i=0;i<e;++i)for(let e=0;e<n;++e)h[i][e].splice(s,0,t);this.Y1t++}},y2t(t,s,i){const e=t.split(s);this.xE(e.length,1,1);for(let t=0,s=e.length;t<s;++t){let s=e[t];0===i?String(Number(s))===s&&(s=Number(s)):2===i&&(s=Number(s)),this.Set(t,0,0,s)}},M2t(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(!s.c2array)return;const i=s.size;this.Q1t=i[0],this.J1t=i[1],this.Y1t=i[2],this.Pl=s.data},w2t(t){const s=URL.createObjectURL(new Blob([this.$1t()],{type:"application/json"}));this.kc.tj(s,t)}}}self.Cs._j.W1t.hrt={Z1t(t,s,i){return this.Z1t(t,s||0,i||0)},tCt(){return this.Q1t},sCt(){return this.J1t},S2t(){return this.Y1t},T2t(){return this.t2t()},b2t(){return this.s2t()},x2t(){return this.i2t()},v2t(){return this.Z1t(this.t2t(),this.s2t(),this.i2t())},jd(){return this.Z1t(0,0,0)},I2t(){return this.Z1t(this.Q1t-1,0,0)},C2t(t){const s=this.Pl;for(let i=0,e=this.Q1t;i<e;++i)if(s[i][0][0]===t)return i;return-1},G2t(t){const s=this.Pl;for(let i=this.Q1t-1;i>=0;--i)if(s[i][0][0]===t)return i;return-1},_2t(t){let s=[];for(let t=0;t<this.Q1t;++t)s.push(this.Z1t(t,0,0));return s.join(t)},QIt(){return this.$1t()}};{const ub=self.Cs,lb="button";ub._j.D2t=class extends ub.mGt{constructor(t){super(t,lb),this.wGt("click",((t,s)=>t.c1t(s)))}Jn(){super.Jn()}}}{const cb=self.Cs;cb._j.D2t.eNt=class extends cb.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{const fb=self.Cs,db=self.ks,pb=0,mb=1,gb=2,yb=3,Mb=4,wb=5,Sb=6,Tb=7,bb=8,xb="button";fb._j.D2t.Instance=class extends fb.w_t{constructor(t,s){super(t,xb),this.Fc="OK",this.E2t=!1,this.N2t=!1,this.m1t="",this.jc="",this.w1t="",this.bSt=!0,this.x_t=!0,s&&(this.E2t=1===s[pb],this.Fc=s[mb],this.m1t=s[gb],this.oj().AU(s[yb]),this.bSt=s[Mb],this.x_t=s[wb],this.N2t=s[Sb],this.jc=s[Tb],this.w1t=s[bb]),this.O_t({id:this.jc,className:this.w1t})}Jn(){super.Jn()}R_t(){return{text:this.Fc,isCheckbox:this.E2t,isChecked:this.N2t,title:this.m1t,isVisible:this.oj().OU(),isEnabled:this.bSt}}async c1t(t){this.N2t=t.isChecked,this.GGt("click",!0),await this.vj(fb._j.D2t.Cj.S1t)}h$t(t){this.Fc!==t&&(this.Fc=t,this.F_t())}x1t(){return this.Fc}C1t(t){this.m1t!==t&&(this.m1t=t,this.F_t())}G1t(){return this.m1t}wIt(t){t=!!t,this.bSt!==t&&(this.bSt=t,this.F_t())}TIt(){return this.bSt}A2t(t){this.E2t&&(t=!!t,this.N2t!==t&&(this.N2t=t,this.F_t()))}L2t(){return this.N2t}Fx(t){}ix(){return{text:this.Fc,checked:this.N2t,title:this.m1t,enabled:this.bSt}}nx(t){this.Fc=t.text,this.N2t=t.checked,this.m1t=t.title,this.bSt=t.enabled,this.F_t()}Wrt(t){switch(t){case mb:return this.x1t();case gb:return this.G1t();case Mb:return this.TIt();case wb:return this.x_t;case Sb:return this.L2t()}}qrt(t,s){switch(t){case mb:this.h$t(s);break;case gb:this.C1t(s);break;case Mb:this.wIt(!!s);break;case wb:this.x_t=!!s;break;case Sb:this.A2t(!!s)}}KGt(){const t="plugins.button";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.x1t(),AZt:t=>this.h$t(t)},{name:t+".properties.enabled.name",value:this.TIt(),AZt:t=>this.wIt(t)},{name:t+".properties.checked.name",value:this.L2t(),AZt:t=>this.A2t(t)}]}]}lGt(){return self.O2t}};const vb=new WeakMap;self.O2t=class extends self.dY{constructor(){super(),vb.set(this,self.IW.EW().gY())}set text(t){db.ue(t),vb.get(this).h$t(t)}get text(){return vb.get(this).x1t()}set R1t(t){db.ue(t),vb.get(this).C1t(t)}get R1t(){return vb.get(this).G1t()}set isEnabled(t){vb.get(this).wIt(t)}get isEnabled(){return vb.get(this).TIt()}set R2t(t){vb.get(this).A2t(t)}get R2t(){return vb.get(this).L2t()}}}{const Ib=self.Cs;Ib._j.D2t.Cj={S1t:()=>!0,P2t(){return this.N2t},Z$t(t,s){return s?this.Fc===t:Ib.Ze(this.Fc,t)}}}self.Cs._j.D2t.rrt={Bc(t){this.h$t(t)},j1t(t){this.C1t(t)},k2t(t){this.A2t(0!==t)},F2t(){this.E2t&&(this.N2t=!this.N2t,this.F_t())}},self.Cs._j.D2t.hrt={Text(){return this.Fc}};{const Cb=self.Cs;Cb._j.j2t=class extends Cb.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{const Gb=self.Cs;Gb._j.j2t.eNt=class extends Gb.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{const _b=self.Cs,Db=self.ks,Eb=self.IW;_b._j.j2t.Instance=class extends _b.DGt{constructor(t,s){super(t),this.z2t=[null,null],this.B2t=[null,null],this.wat={},this.U2t=[],this.W2t="",this.Q2t=0}Jn(){super.Jn()}J2t(){this.z2t[0]=null,this.z2t[1]=null}Y2t(t,s){const i=this.z2t[0];if(null===t||null===i)return!1;if(i===t||_b.Gh(i,t))return!0;if(s&&i.length>0){for(let s=0,e=Math.min(t.length,i.length);s<e;++s)if(t[s]!==i[s])return!1;return!0}return!1}V2t(){return this.z2t[1]}H2t(t,s){this.z2t[0]=t,this.z2t[1]=s}q2t(){this.B2t[0]=null,this.B2t[1]=null}X2t(t){return this.B2t[0]===t}Z2t(){return this.B2t[1]}K2t(t,s){this.B2t[0]=t,this.B2t[1]=s}$2t(t){this.wat=t,this.J2t(),this.t3t("")}s3t(){return this.wat}t3t(t){this.U2t=this.i3t(t),this.q2t()}e3t(t){return _b.Ah(this.i3t(t))}i3t(t){const s=[];let i,e=!1;if(this.X2t(t))return this.Z2t();"."===t[0]?(i=_b.Ah(this.U2t),t=t.slice(1)):i=[];for(const n of t)e?(s.push(n),e=!1):"\\"===n?e=!0:"."===n?(i.push(s.join("")),_b.wh(s)):s.push(n);return 0!==s.length&&i.push(s.join("")),this.K2t(t,i),i}n3t(t,s){if(this.Y2t(t,!1))return this.V2t();let i=this.wat;for(const e of t)if(Array.isArray(i)){const t=parseInt(e,10);if(t<0||t>=i.length||!isFinite(t)){i=null;break}i=i[t]}else{if("object"!=typeof i||null===i){i=null;break}if(i.hasOwnProperty(e))i=i[e];else{if(!s){i=null;break}{const t={};i[e]=t,i=t}}}return this.H2t(t,i),i}r3t(t){const s=this.e3t(t);if(!s.length)return this.wat;const i=s.pop(),e=this.n3t(s,!1);if(Array.isArray(e)){const t=parseInt(i,10);return t>=0&&t<e.length?e[t]:null}return"object"==typeof e&&null!==e&&e.hasOwnProperty(i)?e[i]:null}h3t(t){return null===t?"null":Array.isArray(t)?"array":typeof t}o3t(t){const s=this.r3t(t);return this.h3t(s)}a3t(t){const s=typeof t;return"number"===s||"string"===s?t:"boolean"===s&&t?1:0}u3t(t){return this.a3t(this.r3t(t))}l3t(t){const s=this.e3t(t);if(!s.length)return!1;const i=s.pop(),e=this.n3t(s,!1);if(Array.isArray(e)){const t=parseInt(i,10);return t>=0&&t<e.length}return"object"==typeof e&&null!==e&&e.hasOwnProperty(i)}c3t(t,s){const i=this.e3t(t);if(!i.length)return!1;this.Y2t(i,!0)&&this.J2t();const e=i.pop(),n=this.n3t(i,!0);if(Array.isArray(n)){const t=parseInt(e,10);return!(!isFinite(t)||t<0||t>=n.length||(n[t]=s,0))}return"object"==typeof n&&null!==n&&(n[e]=s,!0)}f3t(t){const s=this.e3t(t);if(!s.length)return!1;this.Y2t(s,!0)&&this.J2t();const i=s.pop(),e=this.n3t(s,!1);return!Array.isArray(e)&&"object"==typeof e&&null!==e&&(delete e[i],!0)}ix(){return{path:this.U2t,data:this.wat}}nx(t){this.J2t(),this.q2t(),this.U2t=t.path,this.wat=t.data}d3t(t){return"number"==typeof t?isFinite(t)?t:0:"object"==typeof t?JSON.stringify(t):t+""}KGt(){const t="plugins.json.debugger";let s;try{s=this.d3t(this.wat)}catch(t){s='"invalid"'}return[{title:t+".title",properties:[{name:t+".data",value:s,AZt:t=>{try{const s=JSON.parse(t);this.$2t(s)}catch(t){}}},{name:t+".path",value:this.U2t.map((t=>t.replace(/\./g,"\\."))).join(".")}]}]}lGt(){return self.p3t}};const Nb=new WeakMap;self.p3t=class extends Eb{constructor(){super(),Nb.set(this,Eb.EW().gY())}m3t(){const t=Nb.get(this).s3t();return JSON.parse(JSON.stringify(t))}g3t(t){try{const s=JSON.parse(JSON.stringify(t));Nb.get(this).$2t(s)}catch(t){throw console.error("[JSON plugin] setJsonData: object is not valid JSON: ",t),t}}y3t(t){Db.ue(t);try{const s=JSON.parse(t);Nb.get(this).$2t(s)}catch(t){throw console.error("[JSON plugin] setJsonString: string is not valid JSON: ",t),t}}M3t(){return JSON.stringify(Nb.get(this).s3t())}w3t(){return JSON.stringify(Nb.get(this).s3t(),null,4)}}}{const Ab=self.Cs,Lb=["null","boolean","number","string","object","array"];Ab._j.j2t.Cj={S3t(t){return this.l3t(t)},T3t(t,s){return this.o3t(t)===Lb[s]},b3t(t,s,i){return Ab.compare(this.u3t(t),s,i)},x3t(t){return!0===this.r3t(t)},Ud(t){const s=this.r3t(t);if("object"!=typeof s||null===s)return!1;const i=this.kc,e=i.Fk(),n=i.Qk(),r=n.fq(),h=i.Zk(),o=h.pq(),a=h.mq(n),u=this.U2t,l=this.W2t,c=this.Q2t,f=this.i3t(t);i.Mq(!1);for(const[t,i]of Object.entries(s))this.U2t=Ab.Ah(f),this.U2t.push(t),this.W2t=t,this.Q2t=i,e.Sq(r),this.GW().EB().Ddt(this.UV()),n.Tq(o,a),e.bq(r);return i.Mq(!0),this.U2t=u,this.q2t(),this.W2t=l,this.Q2t=c,h.Cq(),!1},v3t:()=>!0,I3t:()=>!0}}{const Ob=self.Cs;Ob._j.j2t.rrt={C3t(t){try{this.$2t(JSON.parse(t)),this.uQ(Ob._j.j2t.Cj.I3t)}catch(t){console.warn("[JSON plugin] Failed to parse JSON data: ",t),this.$2t({}),this.uQ(Ob._j.j2t.Cj.v3t)}},G3t(t){this.t3t(t)},dnt(t,s){this.c3t(t,s)},_3t(t,s){let i=this.r3t(t);Array.isArray(i)?Ob.bh(i,s,0):(i=[],Ob.Th(i,s,0),this.c3t(t,i))},D3t(t){this.c3t(t,{})},E3t(t,s){let i=null;try{i=JSON.parse(s),this.uQ(Ob._j.j2t.Cj.I3t)}catch(t){console.warn("[JSON plugin] Failed to parse JSON data: ",t),this.uQ(Ob._j.j2t.Cj.v3t)}this.c3t(t,i)},N3t(t){this.c3t(t,null)},A3t(t,s){this.c3t(t,0!==s)},L3t(t){const s=this.r3t(t);"boolean"==typeof s&&this.c3t(t,!s)},O3t(t,s){const i=this.r3t(t);"number"==typeof i&&this.c3t(t,i+s)},R3t(t,s){const i=this.r3t(t);"number"==typeof i&&this.c3t(t,i-s)},P3t(t){this.f3t(t)},k3t(t,s,i){const e=this.r3t(s);Array.isArray(e)&&(0===t?e.push(i):e.unshift(i),this.J2t())},F3t(t,s){const i=this.r3t(s);Array.isArray(i)&&(0===t?i.pop():i.shift(),this.J2t())},j3t(t,s,i){const e=this.r3t(s);Array.isArray(e)&&(e.splice(i,0,t),this.J2t())},z3t(t,s,i){const e=this.r3t(s);Array.isArray(e)&&t>0&&(e.splice(i,t),this.J2t())}}}self.Cs._j.j2t.hrt={B3t(){try{return JSON.stringify(this.wat)}catch(t){return""}},U3t(){try{return JSON.stringify(this.wat,null,4)}catch(t){return""}},Js(t){return this.u3t(t)},W3t(t){const s=this.r3t(t);return JSON.stringify(s)},Q3t(t){const s=this.r3t(t);return JSON.stringify(s,null,4)},jd(t){const s=this.r3t(t);if(Array.isArray(s)){const t=s[0];return this.a3t(t)}return-1},I2t(t){const s=this.r3t(t);if(Array.isArray(s)){const t=s.at(-1);return this.a3t(t)}return-1},eNt(t){return this.o3t(t)},J3t(t){const s=this.r3t(t);return Array.isArray(s)?s.length:-1},Y3t(){return this.U2t.map((t=>t.replace(/\./g,"\\."))).join(".")},V3t(){return this.W2t},H3t(){return this.a3t(this.Q2t)},q3t(){return this.h3t(this.Q2t)}};{const Rb=self.Cs;Rb._j.Keyboard=class extends Rb.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{let Pb=function(){return Fb.mB().gY()};0;const kb=self.Cs;self.ks,kb._j.Keyboard.eNt=class extends kb.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}lGt(){return self.X3t}};let Fb=null;self.X3t=class extends self.gB{constructor(t){super(t),Fb=t,t.Rj().qF().keyboard=this}Z3t(t){const s=Pb();if("string"==typeof t)return s.K3t(t);if("number"==typeof t)return s.$3t(t);throw new TypeError("expected string or number")}}}{const jb=self.Cs,zb="keyboard";jb._j.Keyboard.Instance=class extends jb.DGt{constructor(t,s){super(t,zb),this.t4t=new Set,this.s4t=new Set,this.i4t=0,this.e4t="",this.n4t="",this.r4t=!1;const i=this.Rj().yf();this.qf=new jb.Yf(jb.zf.Jf(i,"keydown",(t=>this.h4t(t.data))),jb.zf.Jf(i,"keyup",(t=>this.o4t(t.data))),jb.zf.Jf(i,"window-blur",(()=>this.a4t())),jb.zf.Jf(i,"keyboard-blur",(()=>this.a4t()))),this.kc.Sj(this.Ub())}Jn(){super.Jn()}async Ub(){const t=await this.UGt("init");this.r4t=t.isKeyboardLockSupported}h4t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.t4t.has(i)||(this.t4t.add(i),this.s4t.add(s),this.e4t=i,this.i4t=s,this.n4t=e,this.uQ(jb._j.Keyboard.Cj.u4t),this.uQ(jb._j.Keyboard.Cj.l4t),this.uQ(jb._j.Keyboard.Cj.c4t),this.uQ(jb._j.Keyboard.Cj.f4t))}o4t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.t4t.delete(i),this.s4t.delete(s),this.e4t=i,this.i4t=s,this.n4t=e,this.uQ(jb._j.Keyboard.Cj.d4t),this.uQ(jb._j.Keyboard.Cj.p4t),this.uQ(jb._j.Keyboard.Cj.m4t),this.uQ(jb._j.Keyboard.Cj.g4t)}a4t(){for(const t of this.s4t)this.s4t.delete(t),this.i4t=t,this.uQ(jb._j.Keyboard.Cj.d4t),this.uQ(jb._j.Keyboard.Cj.p4t),this.uQ(jb._j.Keyboard.Cj.g4t);this.t4t.clear()}K3t(t){return this.t4t.has(t)}$3t(t){return this.s4t.has(t)}ix(){return{tk:this.i4t,tkk:this.n4t}}nx(t){this.i4t=t.tk,t.hasOwnProperty("tkk")&&(this.n4t=t.tkk)}KGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.i4t},{name:t+".debugger.last-key-string",value:jb._j.Keyboard.hrt.y4t(this.i4t)},{name:t+".debugger.last-typed-key",value:this.n4t}]}]}}}{const Bb=self.Cs,Ub=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];Bb._j.Keyboard.Cj={K3t(t){return this.s4t.has(t)},l4t(t){return this.i4t===t},u4t:()=>!0,d4t:()=>!0,p4t(t){return this.i4t===t},$3t(t){return t=Math.floor(t),this.s4t.has(t)},f4t(t){return this.i4t===t},g4t(t){return this.i4t===t},c4t(t){const s=Ub[t];return this.e4t===s},m4t(t){const s=Ub[t];return this.e4t===s},M4t(t){const s=Ub[t];return this.t4t.has(s)},w4t(){return this.r4t},S4t:()=>!0,T4t:()=>!0}}{const Wb=self.Cs;Wb._j.Keyboard.rrt={async b4t(t){if(!this.r4t)return;let s=[];t&&(s=t.split(",")),(await this.UGt("lock-keyboard",{keysArr:s})).isOk?this.uQ(Wb._j.Keyboard.Cj.S4t):this.uQ(Wb._j.Keyboard.Cj.T4t)},x4t(){this.r4t&&this.UGt("unlock-keyboard")}}}{let Qb=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};self.Cs._j.Keyboard.hrt={v4t(){return this.i4t},y4t:t=>Qb(t),I4t(){return this.n4t}}}{const Jb=self.Cs;Jb._j.C4t=class extends Jb.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{let Yb=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};0;const Vb=self.Cs;Vb._j.C4t.eNt=class extends Vb.vGt{constructor(t,s){super(t),this.hv="repeat",this.ov="repeat",s&&(this.hv=Yb(s[0]),this.ov=Yb(s[1]))}Jn(){super.Jn()}uGt(){this.sV().Oj(this.kc)}m4(t){return this.sV().nX(t,{qx:this.kc.Gk(),Vx:this.hv,Hx:this.ov})}T4(){this.sV().JD()}G4t(){return this.hv}_4t(){return this.ov}}}{const Hb=self.Cs,qb=self.ks,Xb=0,Zb=4,Kb=5,$b=6,tx=7,sx=8,ix=9,ex=10,nx=11,rx=12,hx=13,ox=14,ax=Hb.Qn(Hb.Rect),ux=Hb.Qn(Hb.Gu),lx=Hb.Qn(Hb.Rect),cx=Hb.Qn(Hb.Gu);Hb._j.C4t.Instance=class extends Hb.e_t{constructor(t,s){super(t),this.D4t=0,this.E4t=0,this.N4t=1,this.A4t=1,this.L4t=0,this.O4t=!1,this.R4t=0,this.P4t=0,this.k4t=0,this.F4t=0,this.j4t=0,this.z4t=null,s&&(this.oj().AU(!!s[Xb]),this.D4t=s[Zb],this.E4t=s[Kb],this.N4t=s[$b],this.A4t=s[tx],this.L4t=Hb.Kn(s[sx]),this.O4t=!!s[ix],this.R4t=s[ex],this.P4t=s[nx],this.k4t=s[rx],this.F4t=s[hx],this.j4t=s[ox])}Jn(){this.B4t(),super.Jn()}B4t(){this.z4t&&(this.z4t.Jn(),this.z4t=null)}U4t(t,s,i){const e=this.c_t(),n=e.Bg(),r=e.Zg(),h=this.D4t/n,o=this.E4t/r,a=this.L4t;lx.set(0,0,t/(n*this.N4t),s/(r*this.A4t)),lx.offset(-h,-o),0===a?i.Hu(lx):i.qu(lx,-a)}W4t(t,s=!0){if(this.O4t){const s=this.c_t();t.dS(),t._L(s.Bg()*this.N4t,s.Zg()*this.A4t,this.R4t,this.P4t,this.k4t,this.F4t,this.j4t)}else s&&t.aS()}Fx(t){const s=this.c_t(),i=s.lI();if(null===i)return;this.W4t(t),t.rL(i);const e=s.Bg(),n=s.Zg(),r=this.D4t/e,h=this.E4t/n,o=this.oj();lx.set(0,0,o.Bg()/(e*this.N4t),o.Zg()/(n*this.A4t)),lx.offset(-r,-h),o.hY()?this.sZt(o,t):this.iZt(o,t)}iZt(t,s){let i=t.iJ();this.kc.Dk()&&(i=t.LRt(i)),0===this.L4t?s.$S(i,lx):(cx.qu(lx,-this.L4t),s.mL(i,cx))}sZt(t,s){const i=t.ZRt();if(t.$Rt()){t.$Q(ax,ux,!1);let s=ux;this.kc.Dk()&&(s=t.LRt(s));let e=lx;0!==this.L4t&&(cx.qu(lx,-this.L4t),e=cx),i.kx(t.oY(),s,e),t.KRt(!1)}i.Fx(s)}c_t(){return this.z4t||this.sdt.sV()}Sit(){return!0}lI(){return this.c_t().lI()}Q4t(){this.oj().KRt(!0)}J4t(t){this.D4t!==t&&(this.D4t=t,this.kc.pj(),this.Q4t())}Y4t(){return this.D4t}V4t(t){this.E4t!==t&&(this.E4t=t,this.kc.pj(),this.Q4t())}H4t(){return this.E4t}q4t(t){this.N4t!==t&&(this.N4t=t,this.kc.pj(),this.Q4t())}X4t(){return this.N4t}Z4t(t){this.A4t!==t&&(this.A4t=t,this.kc.pj(),this.Q4t())}K4t(){return this.A4t}$4t(t){this.L4t!==t&&(this.L4t=t,this.kc.pj(),this.Q4t())}t5t(){return this.L4t}s5t(t){t=!!t,this.O4t!==t&&(this.O4t=t,this.kc.pj())}i5t(){return this.O4t}e5t(t){this.R4t!==t&&(this.R4t=t,this.i5t()&&this.kc.pj())}n5t(){return this.R4t}r5t(t){this.P4t!==t&&(this.P4t=t,this.i5t()&&this.kc.pj())}h5t(){return this.P4t}o5t(t){this.k4t!==t&&(this.k4t=t,this.i5t()&&this.kc.pj())}a5t(){return this.k4t}u5t(t){this.F4t!==t&&(this.F4t=t,this.i5t()&&this.kc.pj())}l5t(){return this.F4t}c5t(t){this.j4t!==t&&(this.j4t=t,this.i5t()&&this.kc.pj())}f5t(){return this.j4t}ix(){const t={};return 0!==this.D4t&&(t.iox=this.D4t),0!==this.E4t&&(t.ioy=this.E4t),1!==this.N4t&&(t.isx=this.N4t),1!==this.A4t&&(t.isy=this.A4t),0!==this.L4t&&(t.ia=this.L4t),this.O4t&&(t.tr=!0),1!==this.R4t&&(t.trx=this.R4t),1!==this.P4t&&(t.try=this.P4t),1!==this.k4t&&(t.tra=this.k4t),.1!==this.F4t&&(t.trbmx=this.F4t),.1!==this.j4t&&(t.trbmy=this.j4t),t}nx(t){this.D4t=t.iox||0,this.E4t=t.ioy||0,this.N4t=t.hasOwnProperty("isx")?t.isx:1,this.A4t=t.hasOwnProperty("isy")?t.isy:1,this.L4t=t.ia||0,this.O4t=!!t.tr,this.R4t=t.hasOwnProperty("trx")?t.trx:1,this.P4t=t.hasOwnProperty("try")?t.try:1,this.k4t=t.hasOwnProperty("tra")?t.tra:1,this.F4t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.j4t=t.hasOwnProperty("trbmy")?t.trbmy:.1}KGt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.Y4t(),AZt:t=>this.J4t(t)},{name:t+".image-offset-y.name",value:this.H4t(),AZt:t=>this.V4t(t)},{name:t+".image-scale-x.name",value:100*this.X4t(),AZt:t=>this.q4t(t/100)},{name:t+".image-scale-y.name",value:100*this.K4t(),AZt:t=>this.Z4t(t/100)},{name:t+".image-angle.name",value:Hb.$n(this.t5t()),AZt:t=>this.$4t(Hb.Kn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.i5t(),AZt:t=>this.s5t(t)},{name:t+".x-random.name",value:100*this.n5t(),AZt:t=>this.e5t(t/100)},{name:t+".y-random.name",value:100*this.h5t(),AZt:t=>this.r5t(t/100)},{name:t+".angle-random.name",value:100*this.a5t(),AZt:t=>this.o5t(t/100)},{name:t+".blend-margin-x.name",value:100*this.l5t(),AZt:t=>this.u5t(t/100)},{name:t+".blend-margin-y.name",value:100*this.f5t(),AZt:t=>this.c5t(t/100)}]}]}Wrt(t){switch(t){case Zb:return this.Y4t();case Kb:return this.H4t();case $b:return this.X4t();case tx:return this.K4t();case sx:return this.t5t();case ix:return this.i5t();case ex:return this.n5t();case nx:return this.h5t();case rx:return this.a5t();case hx:return this.l5t();case ox:return this.f5t()}}qrt(t,s){switch(t){case Zb:this.J4t(s);break;case Kb:this.V4t(s);break;case $b:this.q4t(s);break;case tx:this.Z4t(s);break;case sx:this.$4t(s);break;case ix:this.s5t(!!s);break;case ex:this.e5t(s);break;case nx:this.r5t(s);break;case rx:this.o5t(s);break;case hx:this.u5t(s);break;case ox:this.c5t(s)}}lGt(){return self.d5t}};const fx=new WeakMap;self.d5t=class extends self.cY{constructor(){super(),fx.set(this,self.IW.EW().gY())}set p5t(t){qb.re(t),fx.get(this).J4t(t)}get p5t(){return fx.get(this).Y4t()}set m5t(t){qb.re(t),fx.get(this).V4t(t)}get m5t(){return fx.get(this).H4t()}g5t(t,s){qb.re(t),qb.re(s);const i=fx.get(this);i.J4t(t),i.V4t(s)}y5t(){const t=fx.get(this);return[t.Y4t(),t.H4t()]}set M5t(t){qb.re(t),fx.get(this).q4t(t)}get M5t(){return fx.get(this).X4t()}set w5t(t){qb.re(t),fx.get(this).Z4t(t)}get w5t(){return fx.get(this).K4t()}S5t(t,s){qb.re(t),qb.re(s);const i=fx.get(this);i.q4t(t),i.Z4t(s)}T5t(){const t=fx.get(this);return[t.X4t(),t.K4t()]}set b5t(t){qb.re(t),fx.get(this).$4t(t)}get b5t(){return fx.get(this).t5t()}set x5t(t){qb.re(t),fx.get(this).$4t(Hb.Kn(t))}get x5t(){return Hb.$n(fx.get(this).t5t())}get imageWidth(){return fx.get(this).c_t().Bg()}get imageHeight(){return fx.get(this).c_t().Zg()}YZt(){const t=fx.get(this).c_t();return[t.Bg(),t.Zg()]}set v5t(t){fx.get(this).s5t(!!t)}get v5t(){return fx.get(this).i5t()}set I5t(t){qb.re(t),fx.get(this).e5t(t)}get I5t(){return fx.get(this).n5t()}set C5t(t){qb.re(t),fx.get(this).r5t(t)}get C5t(){return fx.get(this).h5t()}G5t(t,s){qb.re(t),qb.re(s);const i=fx.get(this);i.e5t(t),i.r5t(s)}_5t(){const t=fx.get(this);return[t.n5t(),t.h5t()]}set D5t(t){qb.re(t),fx.get(this).o5t(t)}get D5t(){return fx.get(this).a5t()}set E5t(t){qb.re(t),fx.get(this).u5t(t)}get E5t(){return fx.get(this).l5t()}set N5t(t){qb.re(t),fx.get(this).c5t(t)}get N5t(){return fx.get(this).f5t()}A5t(t,s){qb.re(t),qb.re(s);const i=fx.get(this);i.u5t(t),i.c5t(s)}L5t(){const t=fx.get(this);return[t.l5t(),t.f5t()]}async O5t(t){qb.Fe(t,Blob);const s=fx.get(this),i=s.Rj(),e=Hb.Qn(Hb.SDt);e.ODt(i,t),await e.nX(i.lb(),{qx:i.Gk(),Vx:s.Bxt().G4t(),Hx:s.Bxt()._4t()}),s.Yn()?e.Jn():(s.B4t(),s.z4t=e,i.pj())}}}self.Cs._j.C4t.Cj={sKt:()=>!0,iKt:()=>!0,R5t(){return this.i5t()}};{const dx=self.Cs;dx._j.C4t.rrt={P5t(t){this.J4t(t)},k5t(t){this.V4t(t)},F5t(t){this.q4t(t/100)},j5t(t){this.Z4t(t/100)},z5t(t){this.$4t(dx.Kn(t))},B5t(t){this.s5t(t)},U5t(t,s){this.e5t(t/100),this.r5t(s/100)},W5t(t){this.o5t(t/100)},Q5t(t,s){this.u5t(t/100),this.c5t(s/100)},cKt(t){this.oj().Ab(t),this.kc.pj()},async uKt(t,s){if(this.z4t&&this.z4t.vZ()===t)return;const i=this.kc,e=dx.Qn(dx.SDt);try{if(await e.LDt(i,t),!e.$Z())throw new Error("image failed to load");if(this.Yn())return e.Jn(),null;if(!await e.nX(i.lb(),{qx:i.Gk(),Vx:this.Bxt().G4t(),Hx:this.Bxt()._4t()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Yn()||this.uQ(dx._j.C4t.Cj.iKt))}this.Yn()?e.Jn():(this.B4t(),this.z4t=e,i.pj(),await this.vj(dx._j.C4t.Cj.sKt))}}}{const px=self.Cs;px._j.C4t.hrt={bKt(){return this.c_t().Bg()},xKt(){return this.c_t().Zg()},J5t(){return this.D4t},Y5t(){return this.E4t},V5t(){return 100*this.N4t},H5t(){return 100*this.A4t},q5t(){return px.$n(this.L4t)},X5t(){return 100*this.n5t()},Z5t(){return 100*this.h5t()},K5t(){return 100*this.a5t()},$5t(){return 100*this.l5t()},t6t(){return 100*this.f5t()}}}{const mx=self.Cs;mx._j.Touch=class extends mx.zCt{constructor(t){super(t)}Jn(){super.Jn()}}}{let gx=function(){return wx.mB().gY()};0;const yx=self.Cs,Mx=self.ks;yx._j.Touch.eNt=class extends yx.vGt{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}lGt(){return self.s6t}};let wx=null;self.s6t=class extends self.gB{constructor(t){super(t),wx=t,t.Rj().qF().ZF=this}requestPermission(t){Mx.ue(t);const s=gx();if("orientation"===t)return s.i6t(0);if("motion"===t)return s.i6t(1);throw new Error("invalid type")}}}{const Sx=self.Cs,Tx="touch";Sx._j.Touch.Instance=class extends Sx.DGt{constructor(t,s){super(t,Tx),this.e6t=new Map,this.n6t=!1,this.r6t=!1,this.h6t=0,this.o6t=0,this.a6t=0,this.u6t=0,this.l6t=0,this.c6t=0,this.f6t=0,this.d6t=0,this.p6t=0,this.m6t=0,this.g6t=0,this.y6t=0,this.M6t=0,this.w6t=0,this.S6t=0,this.T6t=0,this.b6t=0,this.x6t=[],s&&(this.n6t=s[0]),this.jGt("permission-result",(t=>this.v6t(t)));const i=this.Rj().yf();this.qf=new Sx.Yf(Sx.zf.Jf(i,"pointerdown",(t=>this.I6t(t.data))),Sx.zf.Jf(i,"pointermove",(t=>this.C6t(t.data))),Sx.zf.Jf(i,"pointerup",(t=>this.G6t(t.data,!1))),Sx.zf.Jf(i,"pointercancel",(t=>this.G6t(t.data,!0))),Sx.zf.Jf(i,"deviceorientation",(t=>this._6t(t.data))),Sx.zf.Jf(i,"deviceorientationabsolute",(t=>this.D6t(t.data))),Sx.zf.Jf(i,"devicemotion",(t=>this.E6t(t.data))),Sx.zf.Jf(i,"tick2",(t=>this.r6())))}Jn(){this.e6t.clear(),super.Jn()}I6t(t){if("mouse"===t.pointerType){if(!this.n6t)return;this.r6t=!0}const s=t.pointerId;if(this.e6t.has(s))return;const i=t.pageX-this.kc.Iz(),e=t.pageY-this.kc.Gz(),n=performance.now(),r=this.e6t.size;this.g6t=r,this.y6t=s;const h=Sx.Qn(Sx._j.Touch.N6t);h.CAt(n,i,e,s,r),this.e6t.set(s,h),this.uQ(Sx._j.Touch.Cj.A6t),this.uQ(Sx._j.Touch.Cj.L6t),this.w6t=i,this.S6t=e,this.b6t=0,this.uQ(Sx._j.Touch.Cj.O6t)}C6t(t){if("mouse"===t.pointerType&&!this.r6t)return;const s=this.e6t.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.DO()<2)return;const e=t.pageX-this.kc.Iz(),n=t.pageY-this.kc.Gz();s.DK(i,e,n,t.width,t.height,t.pressure)}G6t(t,s){if("mouse"===t.pointerType){if(!this.r6t)return;this.r6t=!1}const i=performance.now(),e=t.pointerId,n=this.e6t.get(e);if(n){if(this.g6t=n.R6t(),this.y6t=n.YV(),!s){const s=t.pageX-this.kc.Iz(),i=t.pageY-this.kc.Gz();this.w6t=s,this.S6t=i,this.b6t=1,this.uQ(Sx._j.Touch.Cj.O6t)}if(this.uQ(Sx._j.Touch.Cj.P6t),this.uQ(Sx._j.Touch.Cj.k6t),!s){const t=n.F6t(i);"single-tap"===t?(this.uQ(Sx._j.Touch.Cj.j6t),this.w6t=n.Wb(),this.S6t=n.Yb(),this.uQ(Sx._j.Touch.Cj.z6t)):"double-tap"===t&&(this.uQ(Sx._j.Touch.Cj.B6t),this.w6t=n.Wb(),this.S6t=n.Yb(),this.uQ(Sx._j.Touch.Cj.U6t))}n.Jn(),this.e6t.delete(e)}}i6t(t){return this.WGt("request-permission",{type:t}),new Promise(((s,i)=>{this.x6t.push({type:t,resolve:s,reject:i})}))}v6t(t){const s=t.result,i=t.type;this.M6t=i;const e=this.x6t.filter((t=>t.type===i));for(const t of e)t.resolve(s?"granted":"denied");this.x6t=this.x6t.filter((t=>t.type!==i)),s?(this.uQ(Sx._j.Touch.Cj.W6t),0===i?this.kc.KJt():this.kc.$Jt()):this.uQ(Sx._j.Touch.Cj.Q6t)}_6t(t){"number"==typeof t.webkitCompassHeading?this.h6t=t.webkitCompassHeading:t.absolute&&(this.h6t=t.alpha),this.o6t=t.alpha,this.a6t=t.beta,this.u6t=t.gamma}D6t(t){this.h6t=t.alpha}E6t(t){const s=t.acceleration;s&&(this.l6t=s.x,this.c6t=s.y,this.f6t=s.z);const i=t.accelerationIncludingGravity;i&&(this.d6t=i.x,this.p6t=i.y,this.m6t=i.z)}r6(){const t=performance.now();let s=0;for(const i of this.e6t.values())i.DO()<=t-50&&i.J6t(t),i.Y6t(t)&&(this.g6t=i.R6t(),this.y6t=i.YV(),this.T6t=s,this.uQ(Sx._j.Touch.Cj.V6t),this.w6t=i.Wb(),this.S6t=i.Yb(),this.uQ(Sx._j.Touch.Cj.H6t),this.T6t=0),++s}q6t(t){t=Math.floor(t);for(const s of this.e6t.values()){if(0===t)return s;--t}return null}X6t(t,s){return t>=0&&s>=0&&t<this.kc.gQt()&&s<this.kc.yQt()}KGt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.e6t.values()].map((t=>({name:"$"+t.YV(),value:t.Wb()+", "+t.Yb()})))}]}}}{const bx=self.Cs;bx._j.Touch.Cj={L6t:()=>!0,k6t:()=>!0,Z6t(){return this.e6t.size>0},O6t(t,s){return!!t&&s===this.b6t&&!!this.X6t(this.w6t,this.S6t)&&this.kc.ck().okt(t,[[this.w6t,this.S6t]],!1)},K6t(t){if(!t)return!1;const s=this.kc.Tmt().Jbt(),i=[...this.e6t.values()].filter((t=>this.X6t(t.Wb(),t.Yb()))).map((t=>[t.Wb(),t.Yb()]));return bx.xor(this.kc.ck().okt(t,i,s),s)},$6t(t,s,i){const e=this.q6t(t);return!!e&&bx.compare(e.FY(),s,i)},t8t:()=>!0,s8t:()=>!0,i8t(t,s,i){this.kc.KJt();let e=0;return e=0===t?this.o6t:1===t?this.a6t:this.u6t,bx.compare(e,s,i)},e8t(t,s,i){this.kc.$Jt();let e=0;return e=0===t?this.d6t:1===t?this.p6t:2===t?this.m6t:3===t?this.l6t:4===t?this.c6t:this.f6t,bx.compare(e,s,i)},A6t(t){return(t=Math.floor(t))===this.g6t},P6t(t){return(t=Math.floor(t))===this.g6t},n8t(t){return t=Math.floor(t),this.e6t.size>=t+1},V6t:()=>!0,j6t:()=>!0,B6t:()=>!0,H6t(t){return!!t&&!!this.X6t(this.w6t,this.S6t)&&this.kc.ck().okt(t,[[this.w6t,this.S6t]],!1)},z6t(t){return!!t&&!!this.X6t(this.w6t,this.S6t)&&this.kc.ck().okt(t,[[this.w6t,this.S6t]],!1)},U6t(t){return!!t&&!!this.X6t(this.w6t,this.S6t)&&this.kc.ck().okt(t,[[this.w6t,this.S6t]],!1)},W6t(t){return this.M6t===t},Q6t(t){return this.M6t===t}}}self.Cs._j.Touch.rrt={r8t(t){this.i6t(t)}};{const xx=self.Cs;xx._j.Touch.hrt={h8t(){return this.e6t.size},KIt(t){const s=this.q6t(this.T6t);return s?s.o8t(this.kc.rj(),t,!0):0},$It(t){const s=this.q6t(this.T6t);return s?s.o8t(this.kc.rj(),t,!1):0},a8t(t,s){const i=this.q6t(t);return i?i.o8t(this.kc.rj(),s,!0):0},u8t(t,s){const i=this.q6t(t);return i?i.o8t(this.kc.rj(),s,!1):0},l8t(t,s){const i=this.e6t.get(t);return i?i.o8t(this.kc.rj(),s,!0):0},c8t(t,s){const i=this.e6t.get(t);return i?i.o8t(this.kc.rj(),s,!1):0},f8t(){const t=this.q6t(0);return t?t.Wb():0},d8t(){const t=this.q6t(0);return t?t.Yb():0},p8t(t){const s=this.q6t(t);return s?s.Wb():0},m8t(t){const s=this.q6t(t);return s?s.Yb():0},g8t(t){const s=this.e6t.get(t);return s?s.Wb():0},y8t(t){const s=this.e6t.get(t);return s?s.Yb():0},M8t(t){const s=this.q6t(t);return s?s.FY():0},w8t(t){const s=this.e6t.get(t);return s?s.FY():0},S8t(t){const s=this.q6t(t);return s?xx.$n(s.XB()):0},T8t(t){const s=this.e6t.get(t);return s?xx.$n(s.XB()):0},b8t(){return this.kc.KJt(),this.h6t},x8t(){return this.kc.KJt(),this.o6t},v8t(){return this.kc.KJt(),this.a6t},I8t(){return this.kc.KJt(),this.u6t},C8t(){return this.kc.$Jt(),this.d6t},G8t(){return this.kc.$Jt(),this.p6t},_8t(){return this.kc.$Jt(),this.m6t},D8t(){return this.kc.$Jt(),this.l6t},E8t(){return this.kc.$Jt(),this.c6t},N8t(){return this.kc.$Jt(),this.f6t},A8t(){return this.g6t},L8t(){return this.y6t},O8t(t){const s=this.e6t.get(t);return s?s.Bg():0},R8t(t){const s=this.e6t.get(t);return s?s.Zg():0},P8t(t){const s=this.e6t.get(t);return s?s.k8t():0}}}{const vx=self.Cs;let Ix=-1e3,Cx=-1e3,Gx=-1e4;vx._j.Touch.N6t=class extends vx.Un{constructor(){super(),this.F8t=0,this.kG=0,this.OUt=0,this.IR=0,this.j8t=0,this.z8t=0,this.B8t=0,this._a=0,this.Da=0,this.U8t=0,this.W8t=0,this._y=0,this.Dy=0,this.Q8t=0,this.J8t=!1,this.Y8t=!1}Jn(){}CAt(t,s,i,e,n){this.F8t=e,this.kG=n,this.IR=t,this.j8t=t,this.OUt=t,this.z8t=s,this.B8t=i,this._a=s,this.Da=i,this.U8t=s,this.W8t=i}DK(t,s,i,e,n,r){this.j8t=this.IR,this.IR=t,this.U8t=this._a,this.W8t=this.Da,this._a=s,this.Da=i,this._y=e,this.Dy=n,this.Q8t=r,!this.Y8t&&vx.ir(this.z8t,this.B8t,this._a,this.Da)>=15&&(this.Y8t=!0)}YV(){return this.F8t}R6t(){return this.kG}DO(){return this.IR}J6t(t){this.j8t=t}Wb(){return this._a}Yb(){return this.Da}FY(){const t=vx.ir(this._a,this.Da,this.U8t,this.W8t),s=(this.IR-this.j8t)/1e3;return s>0?t/s:0}XB(){return vx.nr(this.U8t,this.W8t,this._a,this.Da)}Bg(){return this._y}Zg(){return this.Dy}k8t(){return this.Q8t}Y6t(t){return!this.J8t&&t-this.OUt>=500&&!this.Y8t&&vx.ir(this.z8t,this.B8t,this._a,this.Da)<15&&(this.J8t=!0,!0)}F6t(t){return this.J8t?"":t-this.OUt<=333&&!this.Y8t&&vx.ir(this.z8t,this.B8t,this._a,this.Da)<15?t-Gx<=666&&vx.ir(Ix,Cx,this._a,this.Da)<25?(Ix=-1e3,Cx=-1e3,Gx=-1e4,"double-tap"):(Ix=this._a,Cx=this.Da,Gx=t,"single-tap"):""}o8t(t,s,i){if(void 0===s)return t.lj(0).H2(this._a,this.Da)[i?0:1];{const e=t.aj(s);return e?e.gW(this._a,this.Da)[i?0:1]:0}}}}{const _x=self.Cs;_x.tut.fDt=class extends _x.z_t{constructor(t){super(t)}Jn(){super.Jn()}}}{const Dx=self.Cs;Dx.tut.fDt.eNt=class extends Dx.J_t{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{const Ex=self.Cs,Nx=self.ks,Ax=self.TY,Lx=0,Ox=1,Rx=new Set;Ex.tut.fDt.Instance=class extends Ex.V_t{constructor(t,s){super(t),this.yCt(!0),s&&(this.yCt(s[Lx]),this.att(s[Ox]))}Jn(){super.Jn()}yCt(t){this.fi.zAt(!!t)}Il(){return this.fi.jAt()}att(t){const s=this.fi.Xbt();if(!t.trim())return void s.delete("solidTags");let i=s.get("solidTags");i||(i=new Set,s.set("solidTags",i)),i.clear();for(const s of t.split(" "))s&&i.add(s.toLowerCase())}EV(){return this.fi.Xbt().get("solidTags")||Rx}V8t(){return[...this.EV()].join(" ")}ix(){return{e:this.Il()}}nx(t){this.yCt(t.e)}Wrt(t){if(t===Lx)return this.Il()}qrt(t,s){t===Lx&&this.yCt(s)}KGt(){return[{title:"$"+this.CY()._c(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.Il(),AZt:t=>this.yCt(t)},{name:"behaviors.solid.properties.tags.name",value:this.V8t(),AZt:t=>this.att(t)}]}]}lGt(){return self.H8t}};const Px=new WeakMap;self.H8t=class extends Ax{constructor(){super(),Px.set(this,Ax.EW().gY())}set isEnabled(t){Px.get(this).yCt(!!t)}get isEnabled(){return Px.get(this).Il()}set tags(t){Nx.ue(t),Px.get(this).att(t)}get tags(){return Px.get(this).V8t()}}}self.Cs.tut.fDt.Cj={Il(){return this.Il()}},self.Cs.tut.fDt.rrt={yCt(t){this.yCt(t)},att(t){this.att(t)}},self.Cs.tut.fDt.hrt={};{const kx=self.Cs;kx.tut.q8t=class extends kx.z_t{constructor(t){super(t)}Jn(){super.Jn()}}}{const Fx=self.Cs;Fx.tut.q8t.eNt=class extends Fx.J_t{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{const jx=self.Cs,zx=self.ks,Bx=self.TY,Ux=1/Math.sqrt(2),Wx=0,Qx=1,Jx=2,Yx=3,Vx=4,Hx=5,qx=6,Xx=7;jx.tut.q8t.Instance=class extends jx.V_t{constructor(t,s){super(t),this.X8t=!1,this.Z8t=!1,this.K8t=!1,this.$8t=!1,this.t7t=!1,this.s7t=!1,this.i7t=!1,this.e7t=!1,this.n7t=!1,this.r7t=0,this.h7t=0,this.o7t=200,this.a7t=600,this.u7t=500,this.l7t=3,this.c7t=3,this.f7t=!1,this.d7t=!0,this.bSt=!0,s&&(this.o7t=s[Wx],this.a7t=s[Qx],this.u7t=s[Jx],this.l7t=s[Yx],this.c7t=s[Vx],this.f7t=!!s[Hx],this.d7t=!!s[qx],this.bSt=!!s[Xx]),this.bSt&&this.HGt(),this.d7t&&this.p7t()}p7t(){if(this.qf)return;const t=this.kc.yf();this.qf=new jx.Yf(jx.zf.Jf(t,"keydown",(t=>this.h4t(t.data))),jx.zf.Jf(t,"keyup",(t=>this.o4t(t.data))),jx.zf.Jf(t,"window-blur",(()=>this.a4t())),jx.zf.Jf(t,"keyboard-blur",(()=>this.a4t())))}m7t(){this.qf&&(this.qf.Jn(),this.qf=null)}Jn(){super.Jn()}ix(){return{dx:this.r7t,dy:this.h7t,e:this.bSt,ms:this.o7t,acc:this.a7t,dec:this.u7t,d:this.l7t,am:this.c7t,dc:this.d7t,ii:this.t7t}}nx(t){this.r7t=t.dx,this.h7t=t.dy,this.wIt(t.e),this.o7t=t.ms,this.a7t=t.acc,this.u7t=t.dec,this.l7t=t.d,this.c7t=t.am,this.d7t=t.dc,this.t7t=t.ii,this.X8t=!1,this.Z8t=!1,this.K8t=!1,this.$8t=!1,this.s7t=!1,this.i7t=!1,this.e7t=!1,this.n7t=!1,this.d7t?this.p7t():this.m7t()}h4t(t){switch(t.key){case"ArrowLeft":this.K8t=!0;break;case"ArrowUp":this.X8t=!0;break;case"ArrowRight":this.$8t=!0;break;case"ArrowDown":this.Z8t=!0}}o4t(t){switch(t.key){case"ArrowLeft":this.K8t=!1;break;case"ArrowUp":this.X8t=!1;break;case"ArrowRight":this.$8t=!1;break;case"ArrowDown":this.Z8t=!1}}a4t(){this.X8t=!1,this.Z8t=!1,this.K8t=!1,this.$8t=!1}f8(){const t=this.kc.oF(this.fi),s=this.kc.ck();let i=this.K8t||this.e7t,e=this.$8t||this.n7t,n=this.X8t||this.s7t,r=this.Z8t||this.i7t;if(this.e7t=!1,this.n7t=!1,this.s7t=!1,this.i7t=!1,!this.bSt)return;let h=s.rz(this.fi);if(h&&(s.KPt(this.fi,h),!s.wkt(this.fi)))return;if(this.t7t&&(i=e=n=r=!1),0===this.l7t?i=e=!1:1===this.l7t&&(n=r=!1),2===this.l7t&&(n||r)&&(i=e=!1),i===e){const s=n===r&&0!==this.h7t?Ux:1;this.r7t<0?this.r7t=Math.min(this.r7t+this.u7t*s*t,0):this.r7t>0&&(this.r7t=Math.max(this.r7t-this.u7t*s*t,0))}if(n===r){const s=i===e&&0!==this.r7t?Ux:1;this.h7t<0?this.h7t=Math.min(this.h7t+this.u7t*s*t,0):this.h7t>0&&(this.h7t=Math.max(this.h7t-this.u7t*s*t,0))}let o=0,a=0;i&&!e&&(o=-1),e&&!i&&(o=1),n&&!r&&(a=-1),r&&!n&&(a=1);let u=0,l=0;if(0!==o){const t=0!==a?Ux:1;u=Math.sign(this.r7t)===-o?o*t*(this.a7t+this.u7t):o*t*this.a7t}if(0!==a){const t=0!==o?Ux:1;l=Math.sign(this.h7t)===-a?a*t*(this.a7t+this.u7t):a*t*this.a7t}if(this.r7t+=u*t,this.h7t+=l*t,0!==this.r7t||0!==this.h7t){let i=Math.hypot(this.r7t,this.h7t);const e=Math.atan2(this.h7t,this.r7t),n=this.o7t*Math.cos(e),r=this.o7t*Math.sin(e);i>this.o7t&&(i=this.o7t,this.r7t=n,this.h7t=r);const o=this.fi.oj(),a=o.Wb(),c=o.Yb(),f=o.XB(),d=Math.abs(n)*t,p=Math.abs(r)*t,m=jx.Xn(this.r7t*t+.5*u*t*t,-d,d),g=jx.Xn(this.h7t*t+.5*l*t*t,-p,p);if(this.f7t){if(o.BQ(m,g),o.FQ(),h=s.rz(this.fi),h){s.KPt(this.fi,h);const e=Math.atan2(this.h7t,this.r7t)+Math.PI/2;let n=!1;const r=(o.Bg()+o.Zg())/4;if(s.Mkt(this.fi,Math.cos(e),Math.sin(e),Math.max(2.5*i*t,r))){n=!0;const e=o.Wb(),r=o.Yb(),u=i*t,l=jx.ir(a,c,e,r);if(l>1.01*u){const t=u/l,i=jx.Ct(a,e,t),f=jx.Ct(c,r,t);if(o.jQ(i,f),o.FQ(),h=s.rz(this.fi),h){const t=jx.nr(a,c,e,r)+Math.PI/2,i=Math.cos(t),h=Math.sin(t),u=(o.Bg()+o.Zg())/2/10;s.Mkt(this.fi,i,h,Math.max(u,1))||(o.jQ(a,c),o.FQ(),n=!1)}}}if(!n){const e=Math.hypot(m,g),n=-m/e,h=-g/e;this.r7t=0,this.h7t=0,s.gkt(this.fi,n,h,Math.max(2.5*i*t,r))||(o.jQ(a,c),o.FQ())}}}else o.nht(m),o.FQ(),h=s.rz(this.fi),h&&(s.gkt(this.fi,this.r7t<0?1:-1,0,Math.max(Math.abs(Math.floor(m)),1))||(o.Qb(a),o.FQ()),this.r7t=0,s.KPt(this.fi,h)),o.rht(g),o.FQ(),h=s.rz(this.fi),h&&(s.gkt(this.fi,0,this.h7t<0?1:-1,Math.max(Math.abs(Math.floor(g)),1))||(o.Vb(c),o.FQ()),this.h7t=0,s.KPt(this.fi,h));const y=jx.vr(this.r7t,6),M=jx.vr(this.h7t,6);0===y&&0===M||!this.fi.MB().Kz()||(1===this.c7t?o.qB(jx.Kn(90*Math.round(jx.$n(Math.atan2(M,y))/90))):2===this.c7t?o.qB(jx.Kn(45*Math.round(jx.$n(Math.atan2(M,y))/45))):3===this.c7t&&o.qB(Math.atan2(M,y))),o.FQ(),o.XB()!=f&&(h=s.rz(this.fi),h&&(o.qB(f),o.FQ(),s.KPt(this.fi,h)))}}Wrt(t){switch(t){case Wx:return this.g7t();case Qx:return this.y7t();case Jx:return this.M7t();case Yx:return this.l7t;case Vx:return this.c7t;case Hx:return this.f7t;case qx:return this.w7t();case Xx:return this.TIt()}}qrt(t,s){switch(t){case Wx:this.S7t(s);break;case Qx:this.T7t(s);break;case Jx:this.b7t(s);break;case Yx:this.l7t=s;break;case Vx:this.c7t=s;break;case Hx:this.f7t=!!s;break;case qx:this.x7t(!!s);break;case Xx:this.wIt(!!s)}}v7t(){this.r7t=0,this.h7t=0}I7t(){this.r7t*=-1,this.h7t*=-1}C7t(){const t=Math.hypot(this.r7t,this.h7t);t>this.o7t&&this.G7t(t)}G7t(t){t=jx.Xn(t,0,this.o7t);const s=Math.atan2(this.h7t,this.r7t);this.r7t=t*Math.cos(s),this.h7t=t*Math.sin(s)}_7t(){return Math.hypot(this.r7t,this.h7t)}S7t(t){this.o7t=Math.max(t,0)}g7t(){return this.o7t}T7t(t){this.a7t=Math.max(t,0)}y7t(){return this.a7t}b7t(t){this.u7t=Math.max(t,0)}M7t(){return this.u7t}D7t(){return Math.atan2(this.h7t,this.r7t)}E7t(t){this.r7t=t,this.C7t()}N7t(){return this.r7t}A7t(t){this.h7t=t,this.C7t()}L7t(){return this.h7t}O7t(t){if(this.bSt)switch(t){case 0:this.e7t=!0;break;case 1:this.n7t=!0;break;case 2:this.s7t=!0;break;case 3:this.i7t=!0}}x7t(t){t=!!t,this.d7t!==t&&(this.d7t=t,this.d7t?this.p7t():(this.m7t(),this.a4t()))}w7t(){return this.d7t}R7t(t){this.t7t=!!t}P7t(){return this.t7t}wIt(t){this.bSt=!!t,this.bSt?this.HGt():(this.e7t=!1,this.n7t=!1,this.s7t=!1,this.i7t=!1,this.AGt())}TIt(){return this.bSt}k7t(t){this.f7t=!!t}F7t(){return this.f7t}KGt(){const t="behaviors.eightdir";return[{title:"$"+this.CY()._c(),properties:[{name:t+".debugger.vector-x",value:this.N7t(),AZt:t=>this.E7t(t)},{name:t+".debugger.vector-y",value:this.L7t(),AZt:t=>this.A7t(t)},{name:t+".debugger.speed",value:this._7t(),AZt:t=>this.G7t(t)},{name:t+".debugger.angle-of-motion",value:jx.$n(this.D7t())},{name:t+".properties.max-speed.name",value:this.g7t(),AZt:t=>this.S7t(t)},{name:t+".properties.acceleration.name",value:this.y7t(),AZt:t=>this.T7t(t)},{name:t+".properties.deceleration.name",value:this.M7t(),AZt:t=>this.b7t(t)},{name:t+".properties.allow-sliding.name",value:this.F7t(),AZt:t=>this.k7t(t)},{name:t+".properties.enabled.name",value:this.TIt(),AZt:t=>this.wIt(t)}]}]}lGt(){return self.j7t}};const Zx=new WeakMap,Kx=new Map([["left",0],["right",1],["up",2],["down",3]]);self.j7t=class extends Bx{constructor(){super(),Zx.set(this,Bx.EW().gY())}stop(){Zx.get(this).v7t()}reverse(){Zx.get(this).I7t()}z7t(t){zx.ue(t);const s=Kx.get(t);if("number"!=typeof s)throw new Error("invalid control");Zx.get(this).O7t(s)}get speed(){return Zx.get(this)._7t()}set speed(t){zx.re(t),Zx.get(this).G7t(t)}get B7t(){return Zx.get(this).g7t()}set B7t(t){zx.re(t),Zx.get(this).S7t(t)}get acceleration(){return Zx.get(this).y7t()}set acceleration(t){zx.re(t),Zx.get(this).T7t(t)}get U7t(){return Zx.get(this).M7t()}set U7t(t){zx.re(t),Zx.get(this).b7t(t)}get W7t(){return Zx.get(this).N7t()}set W7t(t){zx.re(t),Zx.get(this).E7t(t)}get Q7t(){return Zx.get(this).L7t()}set Q7t(t){zx.re(t),Zx.get(this).A7t(t)}J7t(t,s){zx.re(t),zx.re(s);const i=Zx.get(this);i.E7t(t),i.A7t(s)}Y7t(){const t=Zx.get(this);return[t.N7t(),t.L7t()]}get V7t(){return Zx.get(this).w7t()}set V7t(t){Zx.get(this).x7t(!!t)}get H7t(){return Zx.get(this).P7t()}set H7t(t){Zx.get(this).R7t(!!t)}get q7t(){return Zx.get(this).F7t()}set q7t(t){Zx.get(this).k7t(!!t)}get isEnabled(){return Zx.get(this).TIt()}set isEnabled(t){Zx.get(this).wIt(!!t)}}}{const $x=self.Cs;$x.tut.q8t.Cj={X7t(){return this._7t()>1e-10},Z7t(t,s){return $x.compare(this._7t(),t,s)},Il(){return this.TIt()},K7t(){return this.F7t()}}}self.Cs.tut.q8t.rrt={MV(){this.v7t()},d2t(){this.I7t()},$7t(t){this.R7t(t)},t9t(t){this.G7t(t)},s9t(t){this.S7t(t)},i9t(t){this.T7t(t)},e9t(t){this.b7t(t)},n9t(t){this.O7t(t)},yCt(t){this.wIt(t)},r9t(t){this.E7t(t)},h9t(t){this.A7t(t)},o9t(t){this.x7t(!!t)},a9t(t){this.k7t(t)}};{const tv=self.Cs;tv.tut.q8t.hrt={u9t(){return this._7t()},l9t(){return this.g7t()},c9t(){return this.y7t()},f9t(){return this.M7t()},d9t(){return tv.$n(this.D7t())},p9t(){return this.N7t()},m9t(){return this.L7t()}}}{const sv=self.Cs;sv.tut.bound=class extends sv.z_t{constructor(t){super(t)}Jn(){super.Jn()}}}{const iv=self.Cs;iv.tut.bound.eNt=class extends iv.J_t{constructor(t){super(t)}Jn(){super.Jn()}uGt(){}}}{const ev=self.Cs,nv=0;ev.tut.bound.Instance=class extends ev.V_t{constructor(t,s){super(t),this.g9t=0,s&&(this.g9t=s[nv]),this.XGt()}Jn(){super.Jn()}ix(){return{m:this.g9t}}nx(t){this.g9t=t.m}VGt(){const t=this.fi.oj(),s=t.tJ(),i=t.WF();let e=!1;0===this.g9t?(t.Wb()<0&&(t.Qb(0),e=!0),t.Yb()<0&&(t.Vb(0),e=!0),t.Wb()>i.Bg()&&(t.Qb(i.Bg()),e=!0),t.Yb()>i.Zg()&&(t.Vb(i.Zg()),e=!0)):(s.Za()<0&&(t.nht(-s.Za()),e=!0),s.Ka()<0&&(t.rht(-s.Ka()),e=!0),s.$a()>i.Bg()&&(t.nht(-(s.$a()-i.Bg())),e=!0),s.tu()>i.Zg()&&(t.rht(-(s.tu()-i.Zg())),e=!0)),e&&t.FQ()}Wrt(t){if(t===nv)return this.g9t}qrt(t,s){t===nv&&(this.g9t=s)}}}self.Cs.tut.bound.Cj={},self.Cs.tut.bound.rrt={},self.Cs.tut.bound.hrt={};{let rv=function(t,s){return"number"==typeof t&&"number"==typeof s},hv=function(t,s){return rv(t,s)?t+s:t},ov=function(t,s){return rv(t,s)?t-s:t},av=function(t,s){return rv(t,s)?t*s:t},uv=function(t,s){return rv(t,s)?t/s:t},lv=function(t,s){return rv(t,s)?t%s:t},cv=function(t,s){return rv(t,s)?Math.pow(t,s):t},fv=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},dv=function(t,s){return rv(t,s)?t||s?1:0:t};0;self.Cs;self.PTt=[()=>1,t=>{const s=t.YTt(0);return()=>s.bTt()},t=>{const s=t.YTt(0).RTt();return()=>s.Net()},t=>{const s=t.YTt(0).fTt(),i=t.YTt(1);return()=>s(i.MTt())},()=>"",()=>"Vui lng nhp tn!",t=>{const s=t.YTt(0);return()=>s.MTt()},()=>"Start",()=>0,t=>{const s=t.YTt(0).fTt(),i=t.YTt(1).RTt();return()=>s(i.Net(),0).toString()},()=>" Ht gi!",()=>5,()=>"YOU WIN !!",()=>"saveResult",t=>{const s=t.YTt(0).RTt(),i=t.YTt(1).RTt(),e=t.YTt(2).RTt();return()=>fv(fv("https://script.google.com/macros/s/AKfycbxfiP3o-QQ6UAXoWmdhROUgOUiInTCvM4QRl7BKVTXa2R33ig-DY5w3LS7-KFoy9FDacw/exec?action=saveResult&userId="+s.Net()+"&score=",i.Net())+"&time=",e.Net())+""},t=>{const s=t.YTt(0);return()=>s.ETt()},()=>"loadQuestions",()=>"https://script.google.com/macros/s/AKfycbxfiP3o-QQ6UAXoWmdhROUgOUiInTCvM4QRl7BKVTXa2R33ig-DY5w3LS7-KFoy9FDacw/exec?action=getQuestions",t=>{const s=t.YTt(0).fTt();return()=>s()},t=>{const s=t.YTt(0).fTt(),i=t.YTt(1);return()=>Math.floor(s(i.MTt()))},t=>{const s=t.YTt(0),i=t.YTt(1).RTt();return()=>s.MTt(i.Net(),0,0)},t=>{const s=t.YTt(0),i=t.YTt(1).RTt();return()=>s.MTt(i.Net(),0,1)},t=>{const s=t.YTt(0),i=t.YTt(1).RTt();return()=>s.MTt(i.Net(),0,2)},t=>{const s=t.YTt(0),i=t.YTt(1).RTt();return()=>s.MTt(i.Net(),0,3)},t=>{const s=t.YTt(0),i=t.YTt(1).RTt();return()=>s.MTt(i.Net(),0,4)},t=>{const s=t.YTt(0),i=t.YTt(1).RTt();return()=>s.MTt(i.Net(),0,5)},t=>{const s=t.YTt(0),i=t.YTt(1).fTt(),e=t.YTt(2);return()=>s.MTt(0,i(e.MTt()),"question")},()=>"ng ri !!",()=>"Sai ri, Th li nh !",()=>"A",()=>"B",()=>"C",()=>"D",()=>"Walk",()=>"Indie"]}var Gt=self.Cs;self.BWt=function(){return[Gt._j.Unt,Gt.tut.fDt,Gt._j.Text,Gt._j.C0t,Gt._j.l1t,Gt.tut.q8t,Gt.tut.bound,Gt._j.W1t,Gt._j.D2t,Gt._j.j2t,Gt._j.Keyboard,Gt._j.C4t,Gt._j.Touch,Gt._j.Unt.Cj.Jvt,Gt._j.Gj.rrt.eHt,Gt._j.Unt.rrt.AIt,Gt._j.Gj.rrt._Vt,Gt._j.Gj.rrt.EVt,Gt._j.Gj.Cj.oVt,Gt._j.Touch.Cj.K6t,Gt._j.Gj.Cj.$Yt,Gt._j.Gj.hrt.trim,Gt._j.l1t.hrt.Text,Gt._j.Text.rrt.Bc,Gt._j.Gj.Cj.JMt,Gt._j.Gj.rrt.GVt,Gt._j.Gj.Cj.HYt,Gt._j.Gj.Cj.iVt,Gt._j.Gj.rrt.DVt,Gt._j.Gj.hrt.max,Gt._j.Text.rrt.AU,Gt.tut.q8t.rrt.yCt,Gt._j.Gj.Cj.sVt,Gt._j.C0t.rrt.Request,Gt.tut.q8t.Cj.X7t,Gt.tut.q8t.hrt.p9t,Gt._j.Unt.rrt.oKt,Gt._j.Gj.Cj.Y4,Gt._j.C0t.Cj.W0t,Gt._j.W1t.rrt.M2t,Gt._j.C0t.hrt.o1t,Gt._j.Gj.hrt.random,Gt._j.W1t.hrt.tCt,Gt._j.W1t.hrt.Z1t,Gt._j.D2t.rrt.Bc,Gt._j.Keyboard.Cj.l4t,Gt._j.Gj.rrt.dh,Gt._j.D2t.Cj.S1t,Gt._j.Unt.rrt.LZt]},self.uQt=[{y9t:0},{M9t:0},{w9t:0},{index:0},{S9t:0},{T9t:0},{b9t:0},{C0t:0},{x9t:0},{v9t:0},{"8Direction":0},{I9t:0},{C9t:0},{G9t:0},{_9t:0},{D9t:0},{E9t:0},{N9t:0},{A9t:0},{L9t:0},{O9t:0},{R9t:0},{P9t:0},{k9t:0},{F9t:0},{j9t:0},{z9t:0},{JSON:0},{Keyboard:0},{B9t:0},{U9t:0},{W9t:0},{Q9t:0},{Touch:0},{J9t:0},{Unt:0},{Y9t:0},{V9t:0},{H9t:0},{q9t:0},{X9t:0},{Z9t:0},{K9t:0},{$9t:0},{tts:0},{sts:0}],self.its={M9t:class extends self.FZt{},w9t:class extends self.FZt{},S9t:class extends self.FZt{},T9t:class extends self.k$t{},b9t:class extends self.k$t{},C0t:class extends self.IW{},x9t:class extends self.O1t{},v9t:class extends self.FZt{},C9t:class extends self.FZt{},N9t:class extends self.FZt{},A9t:class extends self.FZt{},L9t:class extends self.FZt{},O9t:class extends self.FZt{},R9t:class extends self.e2t{},P9t:class extends self.k$t{},k9t:class extends self.O2t{},F9t:class extends self.O2t{},j9t:class extends self.O2t{},z9t:class extends self.O2t{},JSON:class extends self.p3t{},Keyboard:class extends self.IW{},B9t:class extends self.k$t{},U9t:class extends self.e2t{},W9t:class extends self.d5t{},Q9t:class extends self.d5t{},Touch:class extends self.IW{},J9t:class extends self.k$t{},Unt:class extends self.FZt{},Y9t:class extends self.FZt{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/